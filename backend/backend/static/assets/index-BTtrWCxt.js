import{a as e,b as t,r as i,j as s,a7 as r,h as n,a8 as o,a9 as a,aa as l,ab as c,ac as h,v as d,s as u,D as f,x as p,ad as g,_ as m,E as v,a0 as _,M as b,d as y,R as x,Y as S,ae as w,af as C,ag as k,w as E,ah as j,u as L,ai as D,aj as M,ak as A,al as T,c as R,am as P,an as N,ao as O,ap as I,aq as B,ar as z,as as F,at as H,z as $,au as W,av as U,aw as V,a6 as q,ax as K,ay as Y,az as G,aA as X,aB as Q,aC as J,p as Z,Z as ee,o as te,aD as ie,G as se,S as re,l as ne,aE as oe,A as ae,aF as le,aG as ce,aH as he,aI as de,X as ue,aJ as fe,a3 as pe,a2 as ge,aK as me,aL as ve,aM as _e,C as be,a1 as ye,aN as xe,aO as Se,f as we,N as Ce,aP as ke,e as Ee,J as je,aQ as Le,aR as De,aS as Me,aT as Ae,aU as Te}from"./index1-DhQDuyci.js";import{g as Re,T as Pe,b as Ne,c as Oe,d as Ie,a as Be,u as ze,e as Fe,f as He,C as $e,D as We}from"./index2-Lk7Bwc-B.js";import{F as Ue}from"./index3-BAFAAKLK.js";import{D as Ve}from"./index4-bRS5nOCf.js";import{L as qe}from"./index5-Dlb7gFGi.js";import{S as Ke}from"./index6-CndbhZEL.js";import{B as Ye}from"./index7-BOPIBSUF.js";import{D as Ge}from"./index8-2YUjwZDj.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Xe,Qe,Je,Ze,et={exports:{}},tt={},it={exports:{}},st={};function rt(){return Qe||(Qe=1,it.exports=(Xe||(Xe=1,function(e){function t(e,t){var i=e.length;e.push(t);e:for(;0<i;){var s=i-1>>>1,n=e[s];if(!(0<r(n,t)))break e;e[s]=t,e[i]=n,i=s}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var s=0,n=e.length,o=n>>>1;s<o;){var a=2*(s+1)-1,l=e[a],c=a+1,h=e[c];if(0>r(l,i))c<n&&0>r(h,l)?(e[s]=h,e[c]=i,s=c):(e[s]=l,e[a]=i,s=a);else{if(!(c<n&&0>r(h,i)))break e;e[s]=h,e[c]=i,s=c}}}return t}function r(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var n=performance;e.unstable_now=function(){return n.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,u=3,f=!1,p=!1,g=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var r=i(c);null!==r;){if(null===r.callback)s(c);else{if(!(r.startTime<=e))break;s(c),r.sortIndex=r.expirationTime,t(l,r)}r=i(c)}}function x(e){if(g=!1,y(e),!p)if(null!==i(l))p=!0,w||(w=!0,S());else{var t=i(c);null!==t&&A(x,t.startTime-e)}}var S,w=!1,C=-1,k=5,E=-1;function j(){return!(!m&&e.unstable_now()-E<k)}function L(){if(m=!1,w){var t=e.unstable_now();E=t;var r=!0;try{e:{p=!1,g&&(g=!1,_(C),C=-1),f=!0;var n=u;try{t:{for(y(t),d=i(l);null!==d&&!(d.expirationTime>t&&j());){var o=d.callback;if("function"==typeof o){d.callback=null,u=d.priorityLevel;var a=o(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof a){d.callback=a,y(t),r=!0;break t}d===i(l)&&s(l),y(t)}else s(l);d=i(l)}if(null!==d)r=!0;else{var h=i(c);null!==h&&A(x,h.startTime-t),r=!1}}break e}finally{d=null,u=n,f=!1}r=void 0}}finally{r?S():w=!1}}}if("function"==typeof b)S=function(){b(L)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,M=D.port2;D.port1.onmessage=L,S=function(){M.postMessage(null)}}else S=function(){v(L,0)};function A(t,i){C=v(function(){t(e.unstable_now())},i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var i=u;u=t;try{return e()}finally{u=i}},e.unstable_requestPaint=function(){m=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=u;u=e;try{return t()}finally{u=i}},e.unstable_scheduleCallback=function(s,r,n){var o=e.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?o+n:o,s){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return s={id:h++,callback:r,priorityLevel:s,startTime:n,expirationTime:a=n+a,sortIndex:-1},n>o?(s.sortIndex=n,t(c,s),null===i(l)&&s===i(c)&&(g?(_(C),C=-1):g=!0,A(x,n-o))):(s.sortIndex=a,t(l,s),p||f||(p=!0,w||(w=!0,S()))),s},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(e){var t=u;return function(){var i=u;u=t;try{return e.apply(this,arguments)}finally{u=i}}}}(st)),st)),it.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function nt(){if(Je)return tt;Je=1;var i=rt(),s=e(),r=t();function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function a(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(a(e)!==e)throw Error(n(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var u=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function A(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case _:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case w:return"SuspenseList";case E:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case g:return"Portal";case y:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:A(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return A(e(t))}catch(i){}}return null}var T=Array.isArray,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},O=[],I=-1;function B(e){return{current:e}}function z(e){0>I||(e.current=O[I],O[I]=null,I--)}function F(e,t){I++,O[I]=e.current,e.current=t}var H,$,W=B(null),U=B(null),V=B(null),q=B(null);function K(e,t){switch(F(V,t),F(U,e),F(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=xd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(W),F(W,e)}function Y(){z(W),z(U),z(V)}function G(e){null!==e.memoizedState&&F(q,e);var t=W.current,i=xd(t,e.type);t!==i&&(F(U,e),F(W,i))}function X(e){U.current===e&&(z(W),z(U)),q.current===e&&(z(q),fu._currentValue=N)}function Q(e){if(void 0===H)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",$=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+$}var J=!1;function Z(e,t){if(!e||J)return"";J=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(r){var s=r}Reflect.construct(e,[],i)}else{try{i.call()}catch(n){s=n}e.call(i.prototype)}}else{try{throw Error()}catch(o){s=o}(i=e())&&"function"==typeof i.catch&&i.catch(function(){})}}catch(a){if(a&&s&&"string"==typeof a.stack)return[a.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=s.DetermineComponentFrameRoot(),o=n[0],a=n[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(r=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(s===l.length||r===c.length)for(s=l.length-1,r=c.length-1;1<=s&&0<=r&&l[s]!==c[r];)r--;for(;1<=s&&0<=r;s--,r--)if(l[s]!==c[r]){if(1!==s||1!==r)do{if(s--,0>--r||l[s]!==c[r]){var h="\n"+l[s].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}}while(1<=s&&0<=r);break}}}finally{J=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Q(i):""}function ee(e,t){switch(e.tag){case 26:case 27:case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return e.child!==t&&null!==t?Q("Suspense Fallback"):Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return Z(e.type,!1);case 11:return Z(e.type.render,!1);case 1:return Z(e.type,!0);case 31:return Q("Activity");default:return""}}function te(e){try{var t="",i=null;do{t+=ee(e,i),i=e,e=e.return}while(e);return t}catch(s){return"\nError generating stack: "+s.message+"\n"+s.stack}}var ie=Object.prototype.hasOwnProperty,se=i.unstable_scheduleCallback,re=i.unstable_cancelCallback,ne=i.unstable_shouldYield,oe=i.unstable_requestPaint,ae=i.unstable_now,le=i.unstable_getCurrentPriorityLevel,ce=i.unstable_ImmediatePriority,he=i.unstable_UserBlockingPriority,de=i.unstable_NormalPriority,ue=i.unstable_LowPriority,fe=i.unstable_IdlePriority,pe=i.log,ge=i.unstable_setDisableYieldValue,me=null,ve=null;function _e(e){if("function"==typeof pe&&ge(e),ve&&"function"==typeof ve.setStrictMode)try{ve.setStrictMode(me,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ye(e)/xe|0)|0},ye=Math.log,xe=Math.LN2;var Se=256,we=262144,Ce=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t,i){var s=e.pendingLanes;if(0===s)return 0;var r=0,n=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&s;return 0!==a?0!==(s=a&~n)?r=ke(s):0!==(o&=a)?r=ke(o):i||0!==(i=a&~e)&&(r=ke(i)):0!==(a=s&~n)?r=ke(a):0!==o?r=ke(o):i||0!==(i=s&~e)&&(r=ke(i)),0===r?0:0!==t&&t!==r&&0===(t&n)&&((n=r&-r)>=(i=t&-t)||32===n&&4194048&i)?t:r}function je(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Le(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function De(){var e=Ce;return!(62914560&(Ce<<=1))&&(Ce=4194304),e}function Me(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ae(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-be(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|261930&i}function Re(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-be(i),r=1<<s;r&t|e[s]&t&&(e[s]|=t),i&=~r}}function Pe(e,t){var i=t&-t;return 0!==((i=42&i?1:Ne(i))&(e.suspendedLanes|t))?0:i}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oe(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ie(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:Du(e.type)}function Be(e,t){var i=P.p;try{return P.p=e,t()}finally{P.p=i}}var ze=Math.random().toString(36).slice(2),Fe="__reactFiber$"+ze,He="__reactProps$"+ze,$e="__reactContainer$"+ze,We="__reactEvents$"+ze,Ue="__reactListeners$"+ze,Ve="__reactHandles$"+ze,qe="__reactResources$"+ze,Ke="__reactMarker$"+ze;function Ye(e){delete e[Fe],delete e[He],delete e[We],delete e[Ue],delete e[Ve]}function Ge(e){var t=e[Fe];if(t)return t;for(var i=e.parentNode;i;){if(t=i[$e]||i[Fe]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=zd(e);null!==e;){if(i=e[Fe])return i;e=zd(e)}return t}i=(e=i).parentNode}return null}function Xe(e){if(e=e[Fe]||e[$e]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(n(33))}function Ze(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ke]=!0}var it=new Set,st={};function nt(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(st[e]=t,e=0;e<t.length;e++)it.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},ct={};function ht(e,t,i){if(r=t,ie.call(ct,r)||!ie.call(lt,r)&&(at.test(r)?ct[r]=!0:(lt[r]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var s=t.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var r}function dt(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function ut(e,t,i,s){if(null===s)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+s)}}function ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function pt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function gt(e){if(!e._valueTracker){var t=pt(e)?"checked":"value";e._valueTracker=function(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var r=s.get,n=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=pt(e)?e.checked?"true":"false":e.value),(e=s)!==i&&(t.setValue(e),!0)}function vt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Ko){return e.body}}var _t=/[\n"\\]/g;function bt(e){return e.replace(_t,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,i,s,r,n,o,a){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ft(t)):e.value!==""+ft(t)&&(e.value=""+ft(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?St(e,o,ft(t)):null!=i?St(e,o,ft(i)):null!=s&&e.removeAttribute("value"),null==r&&null!=n&&(e.defaultChecked=!!n),null!=r&&(e.checked=r&&"function"!=typeof r&&"symbol"!=typeof r),null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.name=""+ft(a):e.removeAttribute("name")}function xt(e,t,i,s,r,n,o,a){if(null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&"boolean"!=typeof n&&(e.type=n),null!=t||null!=i){if(("submit"===n||"reset"===n)&&null==t)return void gt(e);i=null!=i?""+ft(i):"",t=null!=t?""+ft(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}s="function"!=typeof(s=null!=s?s:r)&&"symbol"!=typeof s&&!!s,e.checked=a?e.checked:!!s,e.defaultChecked=!!s,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o),gt(e)}function St(e,t,i){"number"===t&&vt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function wt(e,t,i,s){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&s&&(e[i].defaultSelected=!0)}else{for(i=""+ft(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Ct(e,t,i){null==t||((t=""+ft(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+ft(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,i,s){if(null==t){if(null!=s){if(null!=i)throw Error(n(92));if(T(s)){if(1<s.length)throw Error(n(93));s=s[0]}i=s}null==i&&(i=""),t=i}i=ft(t),e.defaultValue=i,(s=e.textContent)===i&&""!==s&&null!==s&&(e.value=s),gt(e)}function Et(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var jt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lt(e,t,i){var s=0===t.indexOf("--");null==i||"boolean"==typeof i||""===i?s?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":s?e.setProperty(t,i):"number"!=typeof i||0===i||jt.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Dt(e,t,i){if(null!=t&&"object"!=typeof t)throw Error(n(62));if(e=e.style,null!=i){for(var s in i)!i.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&i[r]!==s&&Lt(e,r,s)}else for(var o in t)t.hasOwnProperty(o)&&Lt(e,o,t[o])}function Mt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Nt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Bt=null;function zt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var i=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+bt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var r=s[He]||null;if(!r)throw Error(n(90));yt(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<i.length;t++)(s=i[t]).form===e.form&&mt(s)}break e;case"textarea":Ct(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&wt(e,!!i.multiple,t,!1)}}}var Ft=!1;function Ht(e,t,i){if(Ft)return e(t,i);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==It||null!==Bt)&&(ih(),It&&(t=It,e=Bt,Bt=It=null,zt(t),e)))for(t=0;t<e.length;t++)zt(e[t])}}function $t(e,t){var i=e.stateNode;if(null===i)return null;var s=i[He]||null;if(null===s)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(i&&"function"!=typeof i)throw Error(n(231,t,typeof i));return i}var Wt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ut=!1;if(Wt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Ko){Ut=!1}var qt=null,Kt=null,Yt=null;function Gt(){if(Yt)return Yt;var e,t,i=Kt,s=i.length,r="value"in qt?qt.value:qt.textContent,n=r.length;for(e=0;e<s&&i[e]===r[e];e++);var o=s-e;for(t=1;t<=o&&i[s-t]===r[n-t];t++);return Yt=r.slice(e,1<t?1-t:void 0)}function Xt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function Jt(){return!1}function Zt(e){function t(t,i,s,r,n){for(var o in this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Qt:Jt,this.isPropagationStopped=Jt,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var ei,ti,ii,si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ri=Zt(si),ni=u({},si,{view:0,detail:0}),oi=Zt(ni),ai=u({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ii&&(ii&&"mousemove"===e.type?(ei=e.screenX-ii.screenX,ti=e.screenY-ii.screenY):ti=ei=0,ii=e),ei)},movementY:function(e){return"movementY"in e?e.movementY:ti}}),li=Zt(ai),ci=Zt(u({},ai,{dataTransfer:0})),hi=Zt(u({},ni,{relatedTarget:0})),di=Zt(u({},si,{animationName:0,elapsedTime:0,pseudoElement:0})),ui=Zt(u({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),fi=Zt(u({},si,{data:0})),pi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mi[e])&&!!t[e]}function _i(){return vi}var bi=Zt(u({},ni,{key:function(e){if(e.key){var t=pi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(e){return"keypress"===e.type?Xt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yi=Zt(u({},ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xi=Zt(u({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i})),Si=Zt(u({},si,{propertyName:0,elapsedTime:0,pseudoElement:0})),wi=Zt(u({},ai,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Ci=Zt(u({},si,{newState:0,oldState:0})),ki=[9,13,27,32],Ei=Wt&&"CompositionEvent"in window,ji=null;Wt&&"documentMode"in document&&(ji=document.documentMode);var Li=Wt&&"TextEvent"in window&&!ji,Di=Wt&&(!Ei||ji&&8<ji&&11>=ji),Mi=String.fromCharCode(32),Ai=!1;function Ti(e,t){switch(e){case"keyup":return-1!==ki.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ri(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Pi=!1;var Ni={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ni[e.type]:"textarea"===t}function Ii(e,t,i,s){It?Bt?Bt.push(s):Bt=[s]:It=s,0<(t=od(t,"onChange")).length&&(i=new ri("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Bi=null,zi=null;function Fi(e){Jh(e,0)}function Hi(e){if(mt(Qe(e)))return e}function $i(e,t){if("change"===e)return t}var Wi=!1;if(Wt){var Ui;if(Wt){var Vi="oninput"in document;if(!Vi){var qi=document.createElement("div");qi.setAttribute("oninput","return;"),Vi="function"==typeof qi.oninput}Ui=Vi}else Ui=!1;Wi=Ui&&(!document.documentMode||9<document.documentMode)}function Ki(){Bi&&(Bi.detachEvent("onpropertychange",Yi),zi=Bi=null)}function Yi(e){if("value"===e.propertyName&&Hi(zi)){var t=[];Ii(t,zi,e,Ot(e)),Ht(Fi,t)}}function Gi(e,t,i){"focusin"===e?(Ki(),zi=i,(Bi=t).attachEvent("onpropertychange",Yi)):"focusout"===e&&Ki()}function Xi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hi(zi)}function Qi(e,t){if("click"===e)return Hi(t)}function Ji(e,t){if("input"===e||"change"===e)return Hi(t)}var Zi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function es(e,t){if(Zi(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var r=i[s];if(!ie.call(t,r)||!Zi(e[r],t[r]))return!1}return!0}function ts(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function is(e,t){var i,s=ts(e);for(e=0;s;){if(3===s.nodeType){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ts(s)}}function ss(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ss(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rs(e){for(var t=vt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"==typeof t.contentWindow.location.href}catch(s){i=!1}if(!i)break;t=vt((e=t.contentWindow).document)}return t}function ns(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var os=Wt&&"documentMode"in document&&11>=document.documentMode,as=null,ls=null,cs=null,hs=!1;function ds(e,t,i){var s=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;hs||null==as||as!==vt(s)||("selectionStart"in(s=as)&&ns(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},cs&&es(cs,s)||(cs=s,0<(s=od(ls,"onSelect")).length&&(t=new ri("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=as)))}function us(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var fs={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},ps={},gs={};function ms(e){if(ps[e])return ps[e];if(!fs[e])return e;var t,i=fs[e];for(t in i)if(i.hasOwnProperty(t)&&t in gs)return ps[e]=i[t];return e}Wt&&(gs=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);var vs=ms("animationend"),_s=ms("animationiteration"),bs=ms("animationstart"),ys=ms("transitionrun"),xs=ms("transitionstart"),Ss=ms("transitioncancel"),ws=ms("transitionend"),Cs=new Map,ks="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(e,t){Cs.set(e,t),nt(t,[e])}ks.push("scrollEnd");var js="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},Ls=[],Ds=0,Ms=0;function As(){for(var e=Ds,t=Ms=Ds=0;t<e;){var i=Ls[t];Ls[t++]=null;var s=Ls[t];Ls[t++]=null;var r=Ls[t];Ls[t++]=null;var n=Ls[t];if(Ls[t++]=null,null!==s&&null!==r){var o=s.pending;null===o?r.next=r:(r.next=o.next,o.next=r),s.pending=r}0!==n&&Ns(i,r,n)}}function Ts(e,t,i,s){Ls[Ds++]=e,Ls[Ds++]=t,Ls[Ds++]=i,Ls[Ds++]=s,Ms|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Rs(e,t,i,s){return Ts(e,t,i,s),Os(e)}function Ps(e,t){return Ts(e,null,null,t),Os(e)}function Ns(e,t,i){e.lanes|=i;var s=e.alternate;null!==s&&(s.lanes|=i);for(var r=!1,n=e.return;null!==n;)n.childLanes|=i,null!==(s=n.alternate)&&(s.childLanes|=i),22===n.tag&&(null===(e=n.stateNode)||1&e._visibility||(r=!0)),e=n,n=n.return;return 3===e.tag?(n=e.stateNode,r&&null!==t&&(r=31-be(i),null===(s=(e=n.hiddenUpdates)[r])?e[r]=[t]:s.push(t),t.lane=536870912|i),n):null}function Os(e){if(50<Kc)throw Kc=0,Yc=null,Error(n(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Is={};function Bs(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(e,t,i,s){return new Bs(e,t,i,s)}function Fs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hs(e,t){var i=e.alternate;return null===i?((i=zs(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=65011712&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function $s(e,t){e.flags&=65011714;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ws(e,t,i,s,r,o){var a=0;if(s=e,"function"==typeof e)Fs(e)&&(a=1);else if("string"==typeof e)a=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,i,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=zs(31,i,t,r)).elementType=E,e.lanes=o,e;case m:return Us(i.children,r,o,t);case v:a=8,r|=24;break;case _:return(e=zs(12,i,t,2|r)).elementType=_,e.lanes=o,e;case S:return(e=zs(13,i,t,r)).elementType=S,e.lanes=o,e;case w:return(e=zs(19,i,t,r)).elementType=w,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case y:a=10;break e;case b:a=9;break e;case x:a=11;break e;case C:a=14;break e;case k:a=16,s=null;break e}a=29,i=Error(n(130,null===e?"null":typeof e,"")),s=null}return(t=zs(a,i,t,r)).elementType=e,t.type=s,t.lanes=o,t}function Us(e,t,i,s){return(e=zs(7,e,s,t)).lanes=i,e}function Vs(e,t,i){return(e=zs(6,e,null,t)).lanes=i,e}function qs(e){var t=zs(18,null,null,0);return t.stateNode=e,t}function Ks(e,t,i){return(t=zs(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ys=new WeakMap;function Gs(e,t){if("object"==typeof e&&null!==e){var i=Ys.get(e);return void 0!==i?i:(t={value:e,source:t,stack:te(t)},Ys.set(e,t),t)}return{value:e,source:t,stack:te(t)}}var Xs=[],Qs=0,Js=null,Zs=0,er=[],tr=0,ir=null,sr=1,rr="";function nr(e,t){Xs[Qs++]=Zs,Xs[Qs++]=Js,Js=e,Zs=t}function or(e,t,i){er[tr++]=sr,er[tr++]=rr,er[tr++]=ir,ir=e;var s=sr;e=rr;var r=32-be(s)-1;s&=~(1<<r),i+=1;var n=32-be(t)+r;if(30<n){var o=r-r%5;n=(s&(1<<o)-1).toString(32),s>>=o,r-=o,sr=1<<32-be(t)+r|i<<r|s,rr=n+e}else sr=1<<n|i<<r|s,rr=e}function ar(e){null!==e.return&&(nr(e,1),or(e,1,0))}function lr(e){for(;e===Js;)Js=Xs[--Qs],Xs[Qs]=null,Zs=Xs[--Qs],Xs[Qs]=null;for(;e===ir;)ir=er[--tr],er[tr]=null,rr=er[--tr],er[tr]=null,sr=er[--tr],er[tr]=null}function cr(e,t){er[tr++]=sr,er[tr++]=rr,er[tr++]=ir,sr=t.id,rr=t.overflow,ir=e}var hr=null,dr=null,ur=!1,fr=null,pr=!1,gr=Error(n(519));function mr(e){throw Sr(Gs(Error(n(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),gr}function vr(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[Fe]=e,t[He]=s,i){case"dialog":Zh("cancel",t),Zh("close",t);break;case"iframe":case"object":case"embed":Zh("load",t);break;case"video":case"audio":for(i=0;i<Xh.length;i++)Zh(Xh[i],t);break;case"source":Zh("error",t);break;case"img":case"image":case"link":Zh("error",t),Zh("load",t);break;case"details":Zh("toggle",t);break;case"input":Zh("invalid",t),xt(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Zh("invalid",t);break;case"textarea":Zh("invalid",t),kt(t,s.value,s.defaultValue,s.children)}"string"!=typeof(i=s.children)&&"number"!=typeof i&&"bigint"!=typeof i||t.textContent===""+i||!0===s.suppressHydrationWarning||ud(t.textContent,i)?(null!=s.popover&&(Zh("beforetoggle",t),Zh("toggle",t)),null!=s.onScroll&&Zh("scroll",t),null!=s.onScrollEnd&&Zh("scrollend",t),null!=s.onClick&&(t.onclick=Pt),t=!0):t=!1,t||mr(e,!0)}function _r(e){for(hr=e.return;hr;)switch(hr.tag){case 5:case 31:case 13:return void(pr=!1);case 27:case 3:return void(pr=!0);default:hr=hr.return}}function br(e){if(e!==hr)return!1;if(!ur)return _r(e),ur=!0,!1;var t,i=e.tag;if((t=3!==i&&27!==i)&&((t=5===i)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Sd(e.type,e.memoizedProps)),t=!t),t&&dr&&mr(e),_r(e),13===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));dr=Bd(e)}else if(31===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));dr=Bd(e)}else 27===i?(i=dr,Dd(e.type)?(e=Id,Id=null,dr=e):dr=i):dr=hr?Od(e.stateNode.nextSibling):null;return!0}function yr(){dr=hr=null,ur=!1}function xr(){var e=fr;return null!==e&&(null===Rc?Rc=e:Rc.push.apply(Rc,e),fr=null),e}function Sr(e){null===fr?fr=[e]:fr.push(e)}var wr=B(null),Cr=null,kr=null;function Er(e,t,i){F(wr,t._currentValue),t._currentValue=i}function jr(e){e._currentValue=wr.current,z(wr)}function Lr(e,t,i){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Dr(e,t,i,s){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var o=r.dependencies;if(null!==o){var a=r.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=i,null!==(l=o.alternate)&&(l.lanes|=i),Lr(o.return,i,e),s||(a=null);break e}o=l.next}}else if(18===r.tag){if(null===(a=r.return))throw Error(n(341));a.lanes|=i,null!==(o=a.alternate)&&(o.lanes|=i),Lr(a,i,e),a=null}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===e){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}}function Mr(e,t,i,s){e=null;for(var r=t,o=!1;null!==r;){if(!o)if(524288&r.flags)o=!0;else if(262144&r.flags)break;if(10===r.tag){var a=r.alternate;if(null===a)throw Error(n(387));if(null!==(a=a.memoizedProps)){var l=r.type;Zi(r.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(r===q.current){if(null===(a=r.alternate))throw Error(n(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(fu):e=[fu])}r=r.return}null!==e&&Dr(t,e,i,s),t.flags|=262144}function Ar(e){for(e=e.firstContext;null!==e;){if(!Zi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Tr(e){Cr=e,kr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Rr(e){return Nr(Cr,e)}function Pr(e,t){return null===Cr&&Tr(e),Nr(e,t)}function Nr(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===kr){if(null===e)throw Error(n(308));kr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else kr=kr.next=t;return i}var Or="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ir=i.unstable_scheduleCallback,Br=i.unstable_NormalPriority,zr={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fr(){return{controller:new Or,data:new Map,refCount:0}}function Hr(e){e.refCount--,0===e.refCount&&Ir(Br,function(){e.controller.abort()})}var $r=null,Wr=0,Ur=0,Vr=null;function qr(){if(0===--Wr&&null!==$r){null!==Vr&&(Vr.status="fulfilled");var e=$r;$r=null,Ur=0,Vr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Kr=R.S;R.S=function(e,t){Oc=ae(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===$r){var i=$r=[];Wr=0,Ur=Vh(),Vr={status:"pending",value:void 0,then:function(e){i.push(e)}}}Wr++,t.then(qr,qr)}(0,t),null!==Kr&&Kr(e,t)};var Yr=B(null);function Gr(){var e=Yr.current;return null!==e?e:vc.pooledCache}function Xr(e,t){F(Yr,null===t?Yr.current:t.pool)}function Qr(){var e=Gr();return null===e?null:{parent:zr._currentValue,pool:e}}var Jr=Error(n(460)),Zr=Error(n(474)),en=Error(n(542)),tn={then:function(){}};function sn(e){return"fulfilled"===(e=e.status)||"rejected"===e}function rn(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(Pt,Pt),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw ln(e=t.reason),e;default:if("string"==typeof t.status)t.then(Pt,Pt);else{if(null!==(e=vc)&&100<e.shellSuspendCounter)throw Error(n(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}},function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ln(e=t.reason),e}throw on=t,Jr}}function nn(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw on=t,Jr;throw t}}var on=null;function an(){if(null===on)throw Error(n(459));var e=on;return on=null,e}function ln(e){if(e===Jr||e===en)throw Error(n(483))}var cn=null,hn=0;function dn(e){var t=hn;return hn+=1,null===cn&&(cn=[]),rn(cn,e,t)}function un(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function fn(e,t){if(t.$$typeof===f)throw Error(n(525));throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pn(e){function t(t,i){if(e){var s=t.deletions;null===s?(t.deletions=[i],t.flags|=16):s.push(i)}}function i(i,s){if(!e)return null;for(;null!==s;)t(i,s),s=s.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Hs(e,t)).index=0,e.sibling=null,e}function o(t,i,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<i?(t.flags|=67108866,i):s:(t.flags|=67108866,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,i,s){return null===t||6!==t.tag?((t=Vs(i,e.mode,s)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,s){var n=i.type;return n===m?d(e,t,i.props.children,s,i.key):null!==t&&(t.elementType===n||"object"==typeof n&&null!==n&&n.$$typeof===k&&nn(n)===t.type)?(un(t=r(t,i.props),i),t.return=e,t):(un(t=Ws(i.type,i.key,i.props,null,e.mode,s),i),t.return=e,t)}function h(e,t,i,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Ks(i,e.mode,s)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function d(e,t,i,s,n){return null===t||7!==t.tag?((t=Us(i,e.mode,s,n)).return=e,t):((t=r(t,i)).return=e,t)}function u(e,t,i){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Vs(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return un(i=Ws(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case g:return(t=Ks(t,e.mode,i)).return=e,t;case k:return u(e,t=nn(t),i)}if(T(t)||D(t))return(t=Us(t,e.mode,i,null)).return=e,t;if("function"==typeof t.then)return u(e,dn(t),i);if(t.$$typeof===y)return u(e,Pr(e,t),i);fn(e,t)}return null}function f(e,t,i,s){var r=null!==t?t.key:null;if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return null!==r?null:l(e,t,""+i,s);if("object"==typeof i&&null!==i){switch(i.$$typeof){case p:return i.key===r?c(e,t,i,s):null;case g:return i.key===r?h(e,t,i,s):null;case k:return f(e,t,i=nn(i),s)}if(T(i)||D(i))return null!==r?null:d(e,t,i,s,null);if("function"==typeof i.then)return f(e,t,dn(i),s);if(i.$$typeof===y)return f(e,t,Pr(e,i),s);fn(e,i)}return null}function v(e,t,i,s,r){if("string"==typeof s&&""!==s||"number"==typeof s||"bigint"==typeof s)return l(t,e=e.get(i)||null,""+s,r);if("object"==typeof s&&null!==s){switch(s.$$typeof){case p:return c(t,e=e.get(null===s.key?i:s.key)||null,s,r);case g:return h(t,e=e.get(null===s.key?i:s.key)||null,s,r);case k:return v(e,t,i,s=nn(s),r)}if(T(s)||D(s))return d(t,e=e.get(i)||null,s,r,null);if("function"==typeof s.then)return v(e,t,i,dn(s),r);if(s.$$typeof===y)return v(e,t,i,Pr(t,s),r);fn(t,s)}return null}function _(l,c,h,d){if("object"==typeof h&&null!==h&&h.type===m&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case p:e:{for(var b=h.key;null!==c;){if(c.key===b){if((b=h.type)===m){if(7===c.tag){i(l,c.sibling),(d=r(c,h.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===k&&nn(b)===c.type){i(l,c.sibling),un(d=r(c,h.props),h),d.return=l,l=d;break e}i(l,c);break}t(l,c),c=c.sibling}h.type===m?((d=Us(h.props.children,l.mode,d,h.key)).return=l,l=d):(un(d=Ws(h.type,h.key,h.props,null,l.mode,d),h),d.return=l,l=d)}return a(l);case g:e:{for(b=h.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){i(l,c.sibling),(d=r(c,h.children||[])).return=l,l=d;break e}i(l,c);break}t(l,c),c=c.sibling}(d=Ks(h,l.mode,d)).return=l,l=d}return a(l);case k:return _(l,c,h=nn(h),d)}if(T(h))return function(r,n,a,l){for(var c=null,h=null,d=n,p=n=0,g=null;null!==d&&p<a.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=f(r,d,a[p],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(r,d),n=o(m,n,p),null===h?c=m:h.sibling=m,h=m,d=g}if(p===a.length)return i(r,d),ur&&nr(r,p),c;if(null===d){for(;p<a.length;p++)null!==(d=u(r,a[p],l))&&(n=o(d,n,p),null===h?c=d:h.sibling=d,h=d);return ur&&nr(r,p),c}for(d=s(d);p<a.length;p++)null!==(g=v(d,r,p,a[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),n=o(g,n,p),null===h?c=g:h.sibling=g,h=g);return e&&d.forEach(function(e){return t(r,e)}),ur&&nr(r,p),c}(l,c,h,d);if(D(h)){if("function"!=typeof(b=D(h)))throw Error(n(150));return function(r,a,l,c){if(null==l)throw Error(n(151));for(var h=null,d=null,p=a,g=a=0,m=null,_=l.next();null!==p&&!_.done;g++,_=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=f(r,p,_.value,c);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(r,p),a=o(b,a,g),null===d?h=b:d.sibling=b,d=b,p=m}if(_.done)return i(r,p),ur&&nr(r,g),h;if(null===p){for(;!_.done;g++,_=l.next())null!==(_=u(r,_.value,c))&&(a=o(_,a,g),null===d?h=_:d.sibling=_,d=_);return ur&&nr(r,g),h}for(p=s(p);!_.done;g++,_=l.next())null!==(_=v(p,r,g,_.value,c))&&(e&&null!==_.alternate&&p.delete(null===_.key?g:_.key),a=o(_,a,g),null===d?h=_:d.sibling=_,d=_);return e&&p.forEach(function(e){return t(r,e)}),ur&&nr(r,g),h}(l,c,h=b.call(h),d)}if("function"==typeof h.then)return _(l,c,dn(h),d);if(h.$$typeof===y)return _(l,c,Pr(l,h),d);fn(l,h)}return"string"==typeof h&&""!==h||"number"==typeof h||"bigint"==typeof h?(h=""+h,null!==c&&6===c.tag?(i(l,c.sibling),(d=r(c,h)).return=l,l=d):(i(l,c),(d=Vs(h,l.mode,d)).return=l,l=d),a(l)):i(l,c)}return function(e,t,i,s){try{hn=0;var r=_(e,t,i,s);return cn=null,r}catch(o){if(o===Jr||o===en)throw o;var n=zs(29,o,null,e.mode);return n.lanes=s,n.return=e,n}}}var gn=pn(!0),mn=pn(!1),vn=!1;function _n(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xn(e,t,i){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,2&mc){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=Os(e),Ns(e,null,i),t}return Ts(e,s,t,i),Os(e)}function Sn(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&i)){var s=t.lanes;i|=s&=e.pendingLanes,t.lanes=i,Re(e,i)}}function wn(e,t){var i=e.updateQueue,s=e.alternate;if(null!==s&&i===(s=s.updateQueue)){var r=null,n=null;if(null!==(i=i.firstBaseUpdate)){do{var o={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===n?r=n=o:n=n.next=o,i=i.next}while(null!==i);null===n?r=n=t:n=n.next=t}else r=n=t;return i={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Cn=!1;function kn(){if(Cn){if(null!==Vr)throw Vr}}function En(e,t,i,s){Cn=!1;var r=e.updateQueue;vn=!1;var n=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?n=c:o.next=c,o=l;var h=e.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(null!==n){var d=r.baseState;for(o=0,h=c=l=null,a=n;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(bc&f)===f:(s&f)===f){0!==f&&f===Ur&&(Cn=!0),null!==h&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var v=i;switch(m.tag){case 1:if("function"==typeof(g=m.payload)){d=g.call(v,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(v,d,f):g))break e;d=u({},d,f);break e;case 2:vn=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=r.callbacks)?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,l=d):h=h.next=p,o|=f;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(p=a).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===h&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,null===n&&(r.shared.lanes=0),jc|=o,e.lanes=o,e.memoizedState=d}}function jn(e,t){if("function"!=typeof e)throw Error(n(191,e));e.call(t)}function Ln(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)jn(i[e],t)}var Dn=B(null),Mn=B(0);function An(e,t){F(Mn,e=kc),F(Dn,t),kc=e|t.baseLanes}function Tn(){F(Mn,kc),F(Dn,Dn.current)}function Rn(){kc=Mn.current,z(Dn),z(Mn)}var Pn=B(null),Nn=null;function On(e){var t=e.alternate;F(Hn,1&Hn.current),F(Pn,e),null===Nn&&(null===t||null!==Dn.current||null!==t.memoizedState)&&(Nn=e)}function In(e){F(Hn,Hn.current),F(Pn,e),null===Nn&&(Nn=e)}function Bn(e){22===e.tag?(F(Hn,Hn.current),F(Pn,e),null===Nn&&(Nn=e)):zn()}function zn(){F(Hn,Hn.current),F(Pn,Pn.current)}function Fn(e){z(Pn),Nn===e&&(Nn=null),z(Hn)}var Hn=B(0);function $n(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||Pd(i)||Nd(i)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wn=0,Un=null,Vn=null,qn=null,Kn=!1,Yn=!1,Gn=!1,Xn=0,Qn=0,Jn=null,Zn=0;function eo(){throw Error(n(321))}function to(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Zi(e[i],t[i]))return!1;return!0}function io(e,t,i,s,r,n){return Wn=n,Un=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?ba:ya,Gn=!1,n=i(s,r),Gn=!1,Yn&&(n=ro(t,i,s,r)),so(e),n}function so(e){R.H=_a;var t=null!==Vn&&null!==Vn.next;if(Wn=0,qn=Vn=Un=null,Kn=!1,Qn=0,Jn=null,t)throw Error(n(300));null===e||Oa||null!==(e=e.dependencies)&&Ar(e)&&(Oa=!0)}function ro(e,t,i,s){Un=e;var r=0;do{if(Yn&&(Jn=null),Qn=0,Yn=!1,25<=r)throw Error(n(301));if(r+=1,qn=Vn=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}R.H=xa,o=t(i,s)}while(Yn);return o}function no(){var e=R.H,t=e.useState()[0];return t="function"==typeof t.then?uo(t):t,e=e.useState()[0],(null!==Vn?Vn.memoizedState:null)!==e&&(Un.flags|=1024),t}function oo(){var e=0!==Xn;return Xn=0,e}function ao(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function lo(e){if(Kn){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Kn=!1}Wn=0,qn=Vn=Un=null,Yn=!1,Qn=Xn=0,Jn=null}function co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===qn?Un.memoizedState=qn=e:qn=qn.next=e,qn}function ho(){if(null===Vn){var e=Un.alternate;e=null!==e?e.memoizedState:null}else e=Vn.next;var t=null===qn?Un.memoizedState:qn.next;if(null!==t)qn=t,Vn=e;else{if(null===e){if(null===Un.alternate)throw Error(n(467));throw Error(n(310))}e={memoizedState:(Vn=e).memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},null===qn?Un.memoizedState=qn=e:qn=qn.next=e}return qn}function uo(e){var t=Qn;return Qn+=1,null===Jn&&(Jn=[]),e=rn(Jn,e,t),t=Un,null===(null===qn?t.memoizedState:qn.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?ba:ya),e}function fo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return uo(e);if(e.$$typeof===y)return Rr(e)}throw Error(n(438,String(e)))}function po(e){var t=null,i=Un.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var s=Un.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},Un.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=j;return t.index++,i}function go(e,t){return"function"==typeof t?t(e):t}function mo(e){return vo(ho(),Vn,e)}function vo(e,t,i){var s=e.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=i;var r=e.baseQueue,o=s.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}t.baseQueue=r=o,s.pending=null}if(o=e.baseState,null===r)e.memoizedState=o;else{var l=a=null,c=null,h=t=r.next,d=!1;do{var u=-536870913&h.lane;if(u!==h.lane?(bc&u)===u:(Wn&u)===u){var f=h.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),u===Ur&&(d=!0);else{if((Wn&f)===f){h=h.next,f===Ur&&(d=!0);continue}u={lane:0,revertLane:h.revertLane,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=u,a=o):c=c.next=u,Un.lanes|=f,jc|=f}u=h.action,Gn&&i(o,u),o=h.hasEagerState?h.eagerState:i(o,u)}else f={lane:u,revertLane:h.revertLane,gesture:h.gesture,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=f,a=o):c=c.next=f,Un.lanes|=u,jc|=u;h=h.next}while(null!==h&&h!==t);if(null===c?a=o:c.next=l,!Zi(o,e.memoizedState)&&(Oa=!0,d&&null!==(i=Vr)))throw i;e.memoizedState=o,e.baseState=a,e.baseQueue=c,s.lastRenderedState=o}return null===r&&(s.lanes=0),[e.memoizedState,s.dispatch]}function _o(e){var t=ho(),i=t.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=e;var s=i.dispatch,r=i.pending,o=t.memoizedState;if(null!==r){i.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);Zi(o,t.memoizedState)||(Oa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,s]}function bo(e,t,i){var s=Un,r=ho(),o=ur;if(o){if(void 0===i)throw Error(n(407));i=i()}else i=t();var a=!Zi((Vn||r).memoizedState,i);if(a&&(r.memoizedState=i,Oa=!0),r=r.queue,Uo(So.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||null!==qn&&1&qn.memoizedState.tag){if(s.flags|=2048,zo(9,{destroy:void 0},xo.bind(null,s,r,i,t),null),null===vc)throw Error(n(349));o||127&Wn||yo(s,t,i)}return i}function yo(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=Un.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Un.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function xo(e,t,i,s){t.value=i,t.getSnapshot=s,wo(t)&&Co(e)}function So(e,t,i){return i(function(){wo(t)&&Co(e)})}function wo(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Zi(e,i)}catch(s){return!0}}function Co(e){var t=Ps(e,2);null!==t&&Qc(t,e,2)}function ko(e){var t=co();if("function"==typeof e){var i=e;if(e=i(),Gn){_e(!0);try{i()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:e},t}function Eo(e,t,i,s){return e.baseState=i,vo(e,Vn,"function"==typeof s?s:go)}function jo(e,t,i,s,r){if(ga(e))throw Error(n(485));if(null!==(e=t.action)){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==R.T?i(!0):o.isTransition=!1,s(o),null===(i=t.pending)?(o.next=t.pending=o,Lo(t,o)):(o.next=i.next,t.pending=i.next=o)}}function Lo(e,t){var i=t.action,s=t.payload,r=e.state;if(t.isTransition){var n=R.T,o={};R.T=o;try{var a=i(r,s),l=R.S;null!==l&&l(o,a),Do(e,t,a)}catch(c){Ao(e,t,c)}finally{null!==n&&null!==o.types&&(n.types=o.types),R.T=n}}else try{Do(e,t,n=i(r,s))}catch(h){Ao(e,t,h)}}function Do(e,t,i){null!==i&&"object"==typeof i&&"function"==typeof i.then?i.then(function(i){Mo(e,t,i)},function(i){return Ao(e,t,i)}):Mo(e,t,i)}function Mo(e,t,i){t.status="fulfilled",t.value=i,To(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,Lo(e,i)))}function Ao(e,t,i){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=i,To(t),t=t.next}while(t!==s)}e.action=null}function To(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ro(e,t){return t}function Po(e,t){if(ur){var i=vc.formState;if(null!==i){e:{var s=Un;if(ur){if(dr){t:{for(var r=dr,n=pr;8!==r.nodeType;){if(!n){r=null;break t}if(null===(r=Od(r.nextSibling))){r=null;break t}}r="F!"===(n=r.data)||"F"===n?r:null}if(r){dr=Od(r.nextSibling),s="F!"===r.data;break e}}mr(s)}s=!1}s&&(t=i[0])}}return(i=co()).memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:t},i.queue=s,i=ua.bind(null,Un,s),s.dispatch=i,s=ko(!1),n=pa.bind(null,Un,!1,s.queue),r={state:t,dispatch:null,action:e,pending:null},(s=co()).queue=r,i=jo.bind(null,Un,r,n,i),r.dispatch=i,s.memoizedState=e,[t,i,!1]}function No(e){return Oo(ho(),Vn,e)}function Oo(e,t,i){if(t=vo(e,t,Ro)[0],e=mo(go)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var s=uo(t)}catch(o){if(o===Jr)throw en;throw o}else s=t;var r=(t=ho()).queue,n=r.dispatch;return i!==t.memoizedState&&(Un.flags|=2048,zo(9,{destroy:void 0},Io.bind(null,r,i),null)),[s,n,e]}function Io(e,t){e.action=t}function Bo(e){var t=ho(),i=Vn;if(null!==i)return Oo(t,i,e);ho(),t=t.memoizedState;var s=(i=ho()).queue.dispatch;return i.memoizedState=e,[t,s,!1]}function zo(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},null===(t=Un.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Un.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Fo(){return ho().memoizedState}function Ho(e,t,i,s){var r=co();Un.flags|=e,r.memoizedState=zo(1|t,{destroy:void 0},i,void 0===s?null:s)}function $o(e,t,i,s){var r=ho();s=void 0===s?null:s;var n=r.memoizedState.inst;null!==Vn&&null!==s&&to(s,Vn.memoizedState.deps)?r.memoizedState=zo(t,n,i,s):(Un.flags|=e,r.memoizedState=zo(1|t,n,i,s))}function Wo(e,t){Ho(8390656,8,e,t)}function Uo(e,t){$o(2048,8,e,t)}function Vo(e){var t=ho().memoizedState;return function(e){Un.flags|=4;var t=Un.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Un.updateQueue=t,t.events=[e];else{var i=t.events;null===i?t.events=[e]:i.push(e)}}({ref:t,nextImpl:e}),function(){if(2&mc)throw Error(n(440));return t.impl.apply(void 0,arguments)}}function qo(e,t){return $o(4,2,e,t)}function Yo(e,t){return $o(4,4,e,t)}function Go(e,t){if("function"==typeof t){e=e();var i=t(e);return function(){"function"==typeof i?i():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Xo(e,t,i){i=null!=i?i.concat([e]):null,$o(4,4,Go.bind(null,t,e),i)}function Qo(){}function Jo(e,t){var i=ho();t=void 0===t?null:t;var s=i.memoizedState;return null!==t&&to(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Zo(e,t){var i=ho();t=void 0===t?null:t;var s=i.memoizedState;if(null!==t&&to(t,s[1]))return s[0];if(s=e(),Gn){_e(!0);try{e()}finally{_e(!1)}}return i.memoizedState=[s,t],s}function ea(e,t,i){return void 0===i||1073741824&Wn&&!(261930&bc)?e.memoizedState=t:(e.memoizedState=i,e=Xc(),Un.lanes|=e,jc|=e,i)}function ta(e,t,i,s){return Zi(i,t)?i:null!==Dn.current?(e=ea(e,i,s),Zi(e,t)||(Oa=!0),e):42&Wn&&(!(1073741824&Wn)||261930&bc)?(e=Xc(),Un.lanes|=e,jc|=e,t):(Oa=!0,e.memoizedState=i)}function ia(e,t,i,s,r){var n=P.p;P.p=0!==n&&8>n?n:8;var o,a,l,c=R.T,h={};R.T=h,pa(e,!1,t,i);try{var d=r(),u=R.S;if(null!==u&&u(h,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)fa(e,t,(o=s,a=[],l={status:"pending",value:null,reason:null,then:function(e){a.push(e)}},d.then(function(){l.status="fulfilled",l.value=o;for(var e=0;e<a.length;e++)(0,a[e])(o)},function(e){for(l.status="rejected",l.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),l),Gc());else fa(e,t,s,Gc())}catch(f){fa(e,t,{then:function(){},status:"rejected",reason:f},Gc())}finally{P.p=n,null!==c&&null!==h.types&&(c.types=h.types),R.T=c}}function sa(){}function ra(e,t,i,s){if(5!==e.tag)throw Error(n(476));var r=na(e).queue;ia(e,r,t,N,null===i?sa:function(){return oa(e),i(s)})}function na(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:N},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function oa(e){var t=na(e);null===t.next&&(t=e.alternate.memoizedState),fa(e,t.next.queue,{},Gc())}function aa(){return Rr(fu)}function la(){return ho().memoizedState}function ca(){return ho().memoizedState}function ha(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Gc(),s=xn(t,e=yn(i),i);return null!==s&&(Qc(s,t,i),Sn(s,t,i)),t={cache:Fr()},void(e.payload=t)}t=t.return}}function da(e,t,i){var s=Gc();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ga(e)?ma(t,i):null!==(i=Rs(e,t,i,s))&&(Qc(i,e,s),va(i,t,s))}function ua(e,t,i){fa(e,t,i,Gc())}function fa(e,t,i,s){var r={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ga(e))ma(t,r);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=n(o,i);if(r.hasEagerState=!0,r.eagerState=a,Zi(a,o))return Ts(e,t,r,0),null===vc&&As(),!1}catch(l){}if(null!==(i=Rs(e,t,r,s)))return Qc(i,e,s),va(i,t,s),!0}return!1}function pa(e,t,i,s){if(s={lane:2,revertLane:Vh(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ga(e)){if(t)throw Error(n(479))}else null!==(t=Rs(e,i,s,2))&&Qc(t,e,2)}function ga(e){var t=e.alternate;return e===Un||null!==t&&t===Un}function ma(e,t){Yn=Kn=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function va(e,t,i){if(4194048&i){var s=t.lanes;i|=s&=e.pendingLanes,t.lanes=i,Re(e,i)}}var _a={readContext:Rr,use:fo,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useLayoutEffect:eo,useInsertionEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useSyncExternalStore:eo,useId:eo,useHostTransitionStatus:eo,useFormState:eo,useActionState:eo,useOptimistic:eo,useMemoCache:eo,useCacheRefresh:eo};_a.useEffectEvent=eo;var ba={readContext:Rr,use:fo,useCallback:function(e,t){return co().memoizedState=[e,void 0===t?null:t],e},useContext:Rr,useEffect:Wo,useImperativeHandle:function(e,t,i){i=null!=i?i.concat([e]):null,Ho(4194308,4,Go.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ho(4194308,4,e,t)},useInsertionEffect:function(e,t){Ho(4,2,e,t)},useMemo:function(e,t){var i=co();t=void 0===t?null:t;var s=e();if(Gn){_e(!0);try{e()}finally{_e(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=co();if(void 0!==i){var r=i(t);if(Gn){_e(!0);try{i(t)}finally{_e(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=da.bind(null,Un,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},co().memoizedState=e},useState:function(e){var t=(e=ko(e)).queue,i=ua.bind(null,Un,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Qo,useDeferredValue:function(e,t){return ea(co(),e,t)},useTransition:function(){var e=ko(!1);return e=ia.bind(null,Un,e.queue,!0,!1),co().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=Un,r=co();if(ur){if(void 0===i)throw Error(n(407));i=i()}else{if(i=t(),null===vc)throw Error(n(349));127&bc||yo(s,t,i)}r.memoizedState=i;var o={value:i,getSnapshot:t};return r.queue=o,Wo(So.bind(null,s,o,e),[e]),s.flags|=2048,zo(9,{destroy:void 0},xo.bind(null,s,o,i,t),null),i},useId:function(){var e=co(),t=vc.identifierPrefix;if(ur){var i=rr;t="_"+t+"R_"+(i=(sr&~(1<<32-be(sr)-1)).toString(32)+i),0<(i=Xn++)&&(t+="H"+i.toString(32)),t+="_"}else t="_"+t+"r_"+(i=Zn++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:aa,useFormState:Po,useActionState:Po,useOptimistic:function(e){var t=co();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=pa.bind(null,Un,!0,i),i.dispatch=t,[e,t]},useMemoCache:po,useCacheRefresh:function(){return co().memoizedState=ha.bind(null,Un)},useEffectEvent:function(e){var t=co(),i={impl:e};return t.memoizedState=i,function(){if(2&mc)throw Error(n(440));return i.impl.apply(void 0,arguments)}}},ya={readContext:Rr,use:fo,useCallback:Jo,useContext:Rr,useEffect:Uo,useImperativeHandle:Xo,useInsertionEffect:qo,useLayoutEffect:Yo,useMemo:Zo,useReducer:mo,useRef:Fo,useState:function(){return mo(go)},useDebugValue:Qo,useDeferredValue:function(e,t){return ta(ho(),Vn.memoizedState,e,t)},useTransition:function(){var e=mo(go)[0],t=ho().memoizedState;return["boolean"==typeof e?e:uo(e),t]},useSyncExternalStore:bo,useId:la,useHostTransitionStatus:aa,useFormState:No,useActionState:No,useOptimistic:function(e,t){return Eo(ho(),0,e,t)},useMemoCache:po,useCacheRefresh:ca};ya.useEffectEvent=Vo;var xa={readContext:Rr,use:fo,useCallback:Jo,useContext:Rr,useEffect:Uo,useImperativeHandle:Xo,useInsertionEffect:qo,useLayoutEffect:Yo,useMemo:Zo,useReducer:_o,useRef:Fo,useState:function(){return _o(go)},useDebugValue:Qo,useDeferredValue:function(e,t){var i=ho();return null===Vn?ea(i,e,t):ta(i,Vn.memoizedState,e,t)},useTransition:function(){var e=_o(go)[0],t=ho().memoizedState;return["boolean"==typeof e?e:uo(e),t]},useSyncExternalStore:bo,useId:la,useHostTransitionStatus:aa,useFormState:Bo,useActionState:Bo,useOptimistic:function(e,t){var i=ho();return null!==Vn?Eo(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:po,useCacheRefresh:ca};function Sa(e,t,i,s){i=null==(i=i(s,t=e.memoizedState))?t:u({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}xa.useEffectEvent=Vo;var wa={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=Gc(),r=yn(s);r.payload=t,null!=i&&(r.callback=i),null!==(t=xn(e,r,s))&&(Qc(t,e,s),Sn(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=Gc(),r=yn(s);r.tag=1,r.payload=t,null!=i&&(r.callback=i),null!==(t=xn(e,r,s))&&(Qc(t,e,s),Sn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Gc(),s=yn(i);s.tag=2,null!=t&&(s.callback=t),null!==(t=xn(e,s,i))&&(Qc(t,e,i),Sn(t,e,i))}};function Ca(e,t,i,s,r,n,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,n,o):!t.prototype||!t.prototype.isPureReactComponent||(!es(i,s)||!es(r,n))}function ka(e,t,i,s){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,s),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function Ea(e,t){var i=t;if("ref"in t)for(var s in i={},t)"ref"!==s&&(i[s]=t[s]);if(e=e.defaultProps)for(var r in i===t&&(i=u({},i)),e)void 0===i[r]&&(i[r]=e[r]);return i}function ja(e){js(e)}function La(e){}function Da(e){js(e)}function Ma(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Aa(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Ta(e,t,i){return(i=yn(i)).tag=3,i.payload={element:null},i.callback=function(){Ma(e,t)},i}function Ra(e){return(e=yn(e)).tag=3,e}function Pa(e,t,i,s){var r=i.type.getDerivedStateFromError;if("function"==typeof r){var n=s.value;e.payload=function(){return r(n)},e.callback=function(){Aa(t,i,s)}}var o=i.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){Aa(t,i,s),"function"!=typeof r&&(null===zc?zc=new Set([this]):zc.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}var Na=Error(n(461)),Oa=!1;function Ia(e,t,i,s){t.child=null===e?mn(t,null,i,s):gn(t,e.child,i,s)}function Ba(e,t,i,s,r){i=i.render;var n=t.ref;if("ref"in s){var o={};for(var a in s)"ref"!==a&&(o[a]=s[a])}else o=s;return Tr(t),s=io(e,t,i,o,n,r),a=oo(),null===e||Oa?(ur&&a&&ar(t),t.flags|=1,Ia(e,t,s,r),t.child):(ao(e,t,r),al(e,t,r))}function za(e,t,i,s,r){if(null===e){var n=i.type;return"function"!=typeof n||Fs(n)||void 0!==n.defaultProps||null!==i.compare?((e=Ws(i.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Fa(e,t,n,s,r))}if(n=e.child,!ll(e,r)){var o=n.memoizedProps;if((i=null!==(i=i.compare)?i:es)(o,s)&&e.ref===t.ref)return al(e,t,r)}return t.flags|=1,(e=Hs(n,s)).ref=t.ref,e.return=t,t.child=e}function Fa(e,t,i,s,r){if(null!==e){var n=e.memoizedProps;if(es(n,s)&&e.ref===t.ref){if(Oa=!1,t.pendingProps=s=n,!ll(e,r))return t.lanes=e.lanes,al(e,t,r);131072&e.flags&&(Oa=!0)}}return Ka(e,t,i,s,r)}function Ha(e,t,i,s){var r=s.children,n=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===s.mode){if(128&t.flags){if(n=null!==n?n.baseLanes|i:i,null!==e){for(s=t.child=e.child,r=0;null!==s;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~n}else s=0,t.child=null;return Wa(e,t,n,i,s)}if(!(536870912&i))return s=t.lanes=536870912,Wa(e,t,null!==n?n.baseLanes|i:i,i,s);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xr(0,null!==n?n.cachePool:null),null!==n?An(t,n):Tn(),Bn(t)}else null!==n?(Xr(0,n.cachePool),An(t,n),zn(),t.memoizedState=null):(null!==e&&Xr(0,null),Tn(),zn());return Ia(e,t,r,i),t.child}function $a(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Wa(e,t,i,s,r){var n=Gr();return n=null===n?null:{parent:zr._currentValue,pool:n},t.memoizedState={baseLanes:i,cachePool:n},null!==e&&Xr(0,null),Tn(),Bn(t),null!==e&&Mr(e,t,s,!0),t.childLanes=r,null}function Ua(e,t){return(t=il({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Va(e,t,i){return gn(t,e.child,null,i),(e=Ua(t,t.pendingProps)).flags|=2,Fn(t),t.memoizedState=null,e}function qa(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof i&&"object"!=typeof i)throw Error(n(284));null!==e&&e.ref===i||(t.flags|=4194816)}}function Ka(e,t,i,s,r){return Tr(t),i=io(e,t,i,s,void 0,r),s=oo(),null===e||Oa?(ur&&s&&ar(t),t.flags|=1,Ia(e,t,i,r),t.child):(ao(e,t,r),al(e,t,r))}function Ya(e,t,i,s,r,n){return Tr(t),t.updateQueue=null,i=ro(t,s,i,r),so(e),s=oo(),null===e||Oa?(ur&&s&&ar(t),t.flags|=1,Ia(e,t,i,n),t.child):(ao(e,t,n),al(e,t,n))}function Ga(e,t,i,s,r){if(Tr(t),null===t.stateNode){var n=Is,o=i.contextType;"object"==typeof o&&null!==o&&(n=Rr(o)),n=new i(s,n),t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=wa,t.stateNode=n,n._reactInternals=t,(n=t.stateNode).props=s,n.state=t.memoizedState,n.refs={},_n(t),o=i.contextType,n.context="object"==typeof o&&null!==o?Rr(o):Is,n.state=t.memoizedState,"function"==typeof(o=i.getDerivedStateFromProps)&&(Sa(t,i,o,s),n.state=t.memoizedState),"function"==typeof i.getDerivedStateFromProps||"function"==typeof n.getSnapshotBeforeUpdate||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||(o=n.state,"function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),o!==n.state&&wa.enqueueReplaceState(n,n.state,null),En(t,s,n,r),kn(),n.state=t.memoizedState),"function"==typeof n.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){n=t.stateNode;var a=t.memoizedProps,l=Ea(i,a);n.props=l;var c=n.context,h=i.contextType;o=Is,"object"==typeof h&&null!==h&&(o=Rr(h));var d=i.getDerivedStateFromProps;h="function"==typeof d||"function"==typeof n.getSnapshotBeforeUpdate,a=t.pendingProps!==a,h||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(a||c!==o)&&ka(t,n,s,o),vn=!1;var u=t.memoizedState;n.state=u,En(t,s,n,r),kn(),c=t.memoizedState,a||u!==c||vn?("function"==typeof d&&(Sa(t,i,d,s),c=t.memoizedState),(l=vn||Ca(t,i,l,s,u,c,o))?(h||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||("function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"==typeof n.componentDidMount&&(t.flags|=4194308)):("function"==typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),n.props=s,n.state=c,n.context=o,s=l):("function"==typeof n.componentDidMount&&(t.flags|=4194308),s=!1)}else{n=t.stateNode,bn(e,t),h=Ea(i,o=t.memoizedProps),n.props=h,d=t.pendingProps,u=n.context,c=i.contextType,l=Is,"object"==typeof c&&null!==c&&(l=Rr(c)),(c="function"==typeof(a=i.getDerivedStateFromProps)||"function"==typeof n.getSnapshotBeforeUpdate)||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(o!==d||u!==l)&&ka(t,n,s,l),vn=!1,u=t.memoizedState,n.state=u,En(t,s,n,r),kn();var f=t.memoizedState;o!==d||u!==f||vn||null!==e&&null!==e.dependencies&&Ar(e.dependencies)?("function"==typeof a&&(Sa(t,i,a,s),f=t.memoizedState),(h=vn||Ca(t,i,h,s,u,f,l)||null!==e&&null!==e.dependencies&&Ar(e.dependencies))?(c||"function"!=typeof n.UNSAFE_componentWillUpdate&&"function"!=typeof n.componentWillUpdate||("function"==typeof n.componentWillUpdate&&n.componentWillUpdate(s,f,l),"function"==typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(s,f,l)),"function"==typeof n.componentDidUpdate&&(t.flags|=4),"function"==typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof n.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),n.props=s,n.state=f,n.context=l,s=h):("function"!=typeof n.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),s=!1)}return n=s,qa(e,t),s=!!(128&t.flags),n||s?(n=t.stateNode,i=s&&"function"!=typeof i.getDerivedStateFromError?null:n.render(),t.flags|=1,null!==e&&s?(t.child=gn(t,e.child,null,r),t.child=gn(t,null,i,r)):Ia(e,t,i,r),t.memoizedState=n.state,e=t.child):e=al(e,t,r),e}function Xa(e,t,i,s){return yr(),t.flags|=256,Ia(e,t,i,s),t.child}var Qa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ja(e){return{baseLanes:e,cachePool:Qr()}}function Za(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=Mc),e}function el(e,t,i){var s,r=t.pendingProps,o=!1,a=!!(128&t.flags);if((s=a)||(s=(null===e||null!==e.memoizedState)&&!!(2&Hn.current)),s&&(o=!0,t.flags&=-129),s=!!(32&t.flags),t.flags&=-33,null===e){if(ur){if(o?On(t):zn(),(e=dr)?null!==(e=null!==(e=Rd(e,pr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ir?{id:sr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},(i=qs(e)).return=t,t.child=i,hr=t,dr=null):e=null,null===e)throw mr(t);return Nd(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,o?(zn(),l=il({mode:"hidden",children:l},o=t.mode),r=Us(r,o,i,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Ja(i),r.childLanes=Za(e,s,i),t.memoizedState=Qa,$a(null,r)):(On(t),tl(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(a)256&t.flags?(On(t),t.flags&=-257,t=sl(e,t,i)):null!==t.memoizedState?(zn(),t.child=e.child,t.flags|=128,t=null):(zn(),l=r.fallback,o=t.mode,r=il({mode:"visible",children:r.children},o),(l=Us(l,o,i,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,gn(t,e.child,null,i),(r=t.child).memoizedState=Ja(i),r.childLanes=Za(e,s,i),t.memoizedState=Qa,t=$a(null,r));else if(On(t),Nd(l)){if(s=l.nextSibling&&l.nextSibling.dataset)var h=s.dgst;s=h,(r=Error(n(419))).stack="",r.digest=s,Sr({value:r,source:null,stack:null}),t=sl(e,t,i)}else if(Oa||Mr(e,t,i,!1),s=0!==(i&e.childLanes),Oa||s){if(null!==(s=vc)&&(0!==(r=Pe(s,i))&&r!==c.retryLane))throw c.retryLane=r,Ps(e,r),Qc(s,e,r),Na;Pd(l)||ch(),t=sl(e,t,i)}else Pd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,dr=Od(l.nextSibling),hr=t,ur=!0,fr=null,pr=!1,null!==e&&cr(t,e),(t=tl(t,r.children)).flags|=4096);return t}return o?(zn(),l=r.fallback,o=t.mode,h=(c=e.child).sibling,(r=Hs(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==h?l=Hs(h,l):(l=Us(l,o,i,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,$a(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Ja(i):(null!==(o=l.cachePool)?(c=zr._currentValue,o=o.parent!==c?{parent:c,pool:c}:o):o=Qr(),l={baseLanes:l.baseLanes|i,cachePool:o}),r.memoizedState=l,r.childLanes=Za(e,s,i),t.memoizedState=Qa,$a(e.child,r)):(On(t),e=(i=e.child).sibling,(i=Hs(i,{mode:"visible",children:r.children})).return=t,i.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=i,t.memoizedState=null,i)}function tl(e,t){return(t=il({mode:"visible",children:t},e.mode)).return=e,e.child=t}function il(e,t){return(e=zs(22,e,null,t)).lanes=0,e}function sl(e,t,i){return gn(t,e.child,null,i),(e=tl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function rl(e,t,i){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Lr(e.return,t,i)}function nl(e,t,i,s,r,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:r,treeForkCount:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=i,o.tailMode=r,o.treeForkCount=n)}function ol(e,t,i){var s=t.pendingProps,r=s.revealOrder,n=s.tail;s=s.children;var o=Hn.current,a=!!(2&o);if(a?(o=1&o|2,t.flags|=128):o&=1,F(Hn,o),Ia(e,t,s,i),s=ur?Zs:0,!a&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&rl(e,i,t);else if(19===e.tag)rl(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===$n(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),nl(t,!1,r,i,n,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===$n(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}nl(t,!0,i,null,n,s);break;case"together":nl(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function al(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(Mr(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(i=Hs(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Hs(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function ll(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ar(e))}function cl(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oa=!0;else{if(!(ll(e,i)||128&t.flags))return Oa=!1,function(e,t,i){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),Er(0,zr,e.memoizedState.cache),yr();break;case 27:case 5:G(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:Er(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,In(t),null;break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(On(t),t.flags|=128,null):0!==(i&t.child.childLanes)?el(e,t,i):(On(t),null!==(e=al(e,t,i))?e.sibling:null);On(t);break;case 19:var r=!!(128&e.flags);if((s=0!==(i&t.childLanes))||(Mr(e,t,i,!1),s=0!==(i&t.childLanes)),r){if(s)return ol(e,t,i);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),F(Hn,Hn.current),s)break;return null;case 22:return t.lanes=0,Ha(e,t,i,t.pendingProps);case 24:Er(0,zr,e.memoizedState.cache)}return al(e,t,i)}(e,t,i);Oa=!!(131072&e.flags)}else Oa=!1,ur&&1048576&t.flags&&or(t,Zs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=nn(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var r=e.$$typeof;if(r===x){t.tag=11,t=Ba(null,t,e,s,i);break e}if(r===C){t.tag=14,t=za(null,t,e,s,i);break e}}throw t=A(e)||e,Error(n(306,t,""))}Fs(e)?(s=Ea(e,s),t.tag=1,t=Ga(null,t,e,s,i)):(t.tag=0,t=Ka(null,t,e,s,i))}return t;case 0:return Ka(e,t,t.type,t.pendingProps,i);case 1:return Ga(e,t,s=t.type,r=Ea(s,t.pendingProps),i);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(n(387));s=t.pendingProps;var o=t.memoizedState;r=o.element,bn(e,t),En(t,s,null,i);var a=t.memoizedState;if(s=a.cache,Er(0,zr,s),s!==o.cache&&Dr(t,[zr],i,!0),kn(),s=a.element,o.isDehydrated){if(o={element:s,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Xa(e,t,s,i);break e}if(s!==r){Sr(r=Gs(Error(n(424)),t)),t=Xa(e,t,s,i);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(dr=Od(e.firstChild),hr=t,ur=!0,fr=null,pr=!0,i=mn(t,null,s,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(yr(),s===r){t=al(e,t,i);break e}Ia(e,t,s,i)}t=t.child}return t;case 26:return qa(e,t),null===e?(i=Yd(t.type,null,t.pendingProps,null))?t.memoizedState=i:ur||(i=t.type,e=t.pendingProps,(s=bd(V.current).createElement(i))[Fe]=t,s[He]=e,gd(s,i,e),et(s),t.stateNode=s):t.memoizedState=Yd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&ur&&(s=t.stateNode=Fd(t.type,t.pendingProps,V.current),hr=t,pr=!0,r=dr,Dd(t.type)?(Id=r,dr=Od(s.firstChild)):dr=r),Ia(e,t,t.pendingProps.children,i),qa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ur&&((r=s=dr)&&(null!==(s=function(e,t,i,s){for(;1===e.nodeType;){var r=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(s){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(n=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(n!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((n=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&n&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var n=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===n)return e}if(null===(e=Od(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,pr))?(t.stateNode=s,hr=t,dr=Od(s.firstChild),pr=!1,r=!0):r=!1),r||mr(t)),G(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,Sd(r,o)?s=null:null!==a&&Sd(r,a)&&(t.flags|=32),null!==t.memoizedState&&(r=io(e,t,no,null,null,i),fu._currentValue=r),qa(e,t),Ia(e,t,s,i),t.child;case 6:return null===e&&ur&&((e=i=dr)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=Od(e.nextSibling)))return null}return e}(i,t.pendingProps,pr))?(t.stateNode=i,hr=t,dr=null,e=!0):e=!1),e||mr(t)),null;case 13:return el(e,t,i);case 4:return K(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=gn(t,null,s,i):Ia(e,t,s,i),t.child;case 11:return Ba(e,t,t.type,t.pendingProps,i);case 7:return Ia(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ia(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,Er(0,t.type,s.value),Ia(e,t,s.children,i),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Tr(t),s=s(r=Rr(r)),t.flags|=1,Ia(e,t,s,i),t.child;case 14:return za(e,t,t.type,t.pendingProps,i);case 15:return Fa(e,t,t.type,t.pendingProps,i);case 19:return ol(e,t,i);case 31:return function(e,t,i){var s=t.pendingProps,r=!!(128&t.flags);if(t.flags&=-129,null===e){if(ur){if("hidden"===s.mode)return e=Ua(t,s),t.lanes=536870912,$a(null,e);if(In(t),(e=dr)?null!==(e=null!==(e=Rd(e,pr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ir?{id:sr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},(i=qs(e)).return=t,t.child=i,hr=t,dr=null):e=null,null===e)throw mr(t);return t.lanes=536870912,null}return Ua(t,s)}var o=e.memoizedState;if(null!==o){var a=o.dehydrated;if(In(t),r)if(256&t.flags)t.flags&=-257,t=Va(e,t,i);else{if(null===t.memoizedState)throw Error(n(558));t.child=e.child,t.flags|=128,t=null}else if(Oa||Mr(e,t,i,!1),r=0!==(i&e.childLanes),Oa||r){if(null!==(s=vc)&&0!==(a=Pe(s,i))&&a!==o.retryLane)throw o.retryLane=a,Ps(e,a),Qc(s,e,a),Na;ch(),t=Va(e,t,i)}else e=o.treeContext,dr=Od(a.nextSibling),hr=t,ur=!0,fr=null,pr=!1,null!==e&&cr(t,e),(t=Ua(t,s)).flags|=4096;return t}return(e=Hs(e.child,{mode:s.mode,children:s.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,i);case 22:return Ha(e,t,i,t.pendingProps);case 24:return Tr(t),s=Rr(zr),null===e?(null===(r=Gr())&&(r=vc,o=Fr(),r.pooledCache=o,o.refCount++,null!==o&&(r.pooledCacheLanes|=i),r=o),t.memoizedState={parent:s,cache:r},_n(t),Er(0,zr,r)):(0!==(e.lanes&i)&&(bn(e,t),En(t,null,null,i),kn()),r=e.memoizedState,o=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Er(0,zr,s)):(s=o.cache,Er(0,zr,s),s!==r.cache&&Dr(t,[zr],i,!0))),Ia(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(n(156,t.tag))}function hl(e){e.flags|=4}function dl(e,t,i,s,r){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!oh())throw on=tn,Zr;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!au(t)){if(!oh())throw on=tn,Zr;e.flags|=8192}}function fl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?De():536870912,e.lanes|=t,Ac|=t)}function pl(e,t){if(!ur)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;null!==i;)null!==i.alternate&&(s=i),i=i.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,s=0;if(t)for(var r=e.child;null!==r;)i|=r.lanes|r.childLanes,s|=65011712&r.subtreeFlags,s|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function ml(e,t,i){var s=t.pendingProps;switch(lr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return gl(t),null;case 3:return i=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),jr(zr),Y(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(br(t)?hl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,xr())),gl(t),null;case 26:var r=t.type,o=t.memoizedState;return null===e?(hl(t),null!==o?(gl(t),ul(t,o)):(gl(t),dl(t,r,0,0,i))):o?o!==e.memoizedState?(hl(t),gl(t),ul(t,o)):(gl(t),t.flags&=-16777217):((e=e.memoizedProps)!==s&&hl(t),gl(t),dl(t,r,0,0,i)),null;case 27:if(X(t),i=V.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&hl(t);else{if(!s){if(null===t.stateNode)throw Error(n(166));return gl(t),null}e=W.current,br(t)?vr(t):(e=Fd(r,s,i),t.stateNode=e,hl(t))}return gl(t),null;case 5:if(X(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&hl(t);else{if(!s){if(null===t.stateNode)throw Error(n(166));return gl(t),null}if(o=W.current,br(t))vr(t);else{var a=bd(V.current);switch(o){case 1:o=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(o=a.createElement("div")).innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o="string"==typeof s.is?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?o.multiple=!0:s.size&&(o.size=s.size);break;default:o="string"==typeof s.is?a.createElement(r,{is:s.is}):a.createElement(r)}}o[Fe]=t,o[He]=s;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)o.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=o;e:switch(gd(o,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&hl(t)}}return gl(t),dl(t,t.type,null===e||e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&hl(t);else{if("string"!=typeof s&&null===t.stateNode)throw Error(n(166));if(e=V.current,br(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,null!==(r=hr))switch(r.tag){case 27:case 5:s=r.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===i||null!==s&&!0===s.suppressHydrationWarning||ud(e.nodeValue,i)))||mr(t,!0)}else(e=bd(e).createTextNode(s))[Fe]=t,t.stateNode=e}return gl(t),null;case 31:if(i=t.memoizedState,null===e||null!==e.memoizedState){if(s=br(t),null!==i){if(null===e){if(!s)throw Error(n(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(n(557));e[Fe]=t}else yr(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;gl(t),e=!1}else i=xr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return 256&t.flags?(Fn(t),t):(Fn(t),null);if(128&t.flags)throw Error(n(558))}return gl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=br(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(n(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(n(317));r[Fe]=t}else yr(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;gl(t),r=!1}else r=xr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Fn(t),t):(Fn(t),null)}return Fn(t),128&t.flags?(t.lanes=i,t):(i=null!==s,e=null!==e&&null!==e.memoizedState,i&&(r=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(r=s.alternate.memoizedState.cachePool.pool),o=null,null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(o=s.memoizedState.cachePool.pool),o!==r&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),fl(t,t.updateQueue),gl(t),null);case 4:return Y(),null===e&&id(t.stateNode.containerInfo),gl(t),null;case 10:return jr(t.type),gl(t),null;case 19:if(z(Hn),null===(s=t.memoizedState))return gl(t),null;if(r=!!(128&t.flags),null===(o=s.rendering))if(r)pl(s,!1);else{if(0!==Ec||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=$n(e))){for(t.flags|=128,pl(s,!1),e=o.updateQueue,t.updateQueue=e,fl(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)$s(i,e),i=i.sibling;return F(Hn,1&Hn.current|2),ur&&nr(t,s.treeForkCount),t.child}e=e.sibling}null!==s.tail&&ae()>Ic&&(t.flags|=128,r=!0,pl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=$n(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,fl(t,e),pl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!ur)return gl(t),null}else 2*ae()-s.renderingStartTime>Ic&&536870912!==i&&(t.flags|=128,r=!0,pl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=s.last)?e.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ae(),e.sibling=null,i=Hn.current,F(Hn,r?1&i|2:1&i),ur&&nr(t,s.treeForkCount),e):(gl(t),null);case 22:case 23:return Fn(t),Rn(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?!!(536870912&i)&&!(128&t.flags)&&(gl(t),6&t.subtreeFlags&&(t.flags|=8192)):gl(t),null!==(i=t.updateQueue)&&fl(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),null!==e&&z(Yr),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),jr(zr),gl(t),null;case 25:case 30:return null}throw Error(n(156,t.tag))}function vl(e,t){switch(lr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return jr(zr),Y(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(Fn(t),null===t.alternate)throw Error(n(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fn(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(Hn),null;case 4:return Y(),null;case 10:return jr(t.type),null;case 22:case 23:return Fn(t),Rn(),null!==e&&z(Yr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return jr(zr),null;default:return null}}function _l(e,t){switch(lr(t),t.tag){case 3:jr(zr),Y();break;case 26:case 27:case 5:X(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Fn(t);break;case 13:Fn(t);break;case 19:z(Hn);break;case 10:jr(t.type);break;case 22:case 23:Fn(t),Rn(),null!==e&&z(Yr);break;case 24:jr(zr)}}function bl(e,t){try{var i=t.updateQueue,s=null!==i?i.lastEffect:null;if(null!==s){var r=s.next;i=r;do{if((i.tag&e)===e){s=void 0;var n=i.create,o=i.inst;s=n(),o.destroy=s}i=i.next}while(i!==r)}}catch(a){Eh(t,t.return,a)}}function yl(e,t,i){try{var s=t.updateQueue,r=null!==s?s.lastEffect:null;if(null!==r){var n=r.next;s=n;do{if((s.tag&e)===e){var o=s.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,r=t;var l=i,c=a;try{c()}catch(h){Eh(r,l,h)}}}s=s.next}while(s!==n)}}catch(h){Eh(t,t.return,h)}}function xl(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{Ln(t,i)}catch(s){Eh(e,e.return,s)}}}function Sl(e,t,i){i.props=Ea(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){Eh(e,t,s)}}function wl(e,t){try{var i=e.ref;if(null!==i){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;default:s=e.stateNode}"function"==typeof i?e.refCleanup=i(s):i.current=s}}catch(r){Eh(e,t,r)}}function Cl(e,t){var i=e.ref,s=e.refCleanup;if(null!==i)if("function"==typeof s)try{s()}catch(r){Eh(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof i)try{i(null)}catch(n){Eh(e,t,n)}else i.current=null}function kl(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(r){Eh(e,e.return,r)}}function El(e,t,i){try{var s=e.stateNode;!function(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,a=null,l=null,c=null,h=null,d=null;for(p in i){var u=i[p];if(i.hasOwnProperty(p)&&null!=u)switch(p){case"checked":case"value":break;case"defaultValue":c=u;default:s.hasOwnProperty(p)||fd(e,t,p,null,s,u)}}for(var f in s){var p=s[f];if(u=i[f],s.hasOwnProperty(f)&&(null!=p||null!=u))switch(f){case"type":o=p;break;case"name":r=p;break;case"checked":h=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(n(137,t));break;default:p!==u&&fd(e,t,f,p,s,u)}}return void yt(e,a,l,c,h,d,o,r);case"select":for(o in p=a=l=f=null,i)if(c=i[o],i.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":p=c;default:s.hasOwnProperty(o)||fd(e,t,o,null,s,c)}for(r in s)if(o=s[r],c=i[r],s.hasOwnProperty(r)&&(null!=o||null!=c))switch(r){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==c&&fd(e,t,r,o,s,c)}return t=l,i=a,s=p,void(null!=f?wt(e,!!i,f,!1):!!s!=!!i&&(null!=t?wt(e,!!i,t,!0):wt(e,!!i,i?[]:"",!1)));case"textarea":for(l in p=f=null,i)if(r=i[l],i.hasOwnProperty(l)&&null!=r&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:fd(e,t,l,null,s,r)}for(a in s)if(r=s[a],o=i[a],s.hasOwnProperty(a)&&(null!=r||null!=o))switch(a){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(n(91));break;default:r!==o&&fd(e,t,a,r,s,o)}return void Ct(e,f,p);case"option":for(var g in i)if(f=i[g],i.hasOwnProperty(g)&&null!=f&&!s.hasOwnProperty(g))if("selected"===g)e.selected=!1;else fd(e,t,g,null,s,f);for(c in s)if(f=s[c],p=i[c],s.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else fd(e,t,c,f,s,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in i)f=i[m],i.hasOwnProperty(m)&&null!=f&&!s.hasOwnProperty(m)&&fd(e,t,m,null,s,f);for(h in s)if(f=s[h],p=i[h],s.hasOwnProperty(h)&&f!==p&&(null!=f||null!=p))switch(h){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(n(137,t));break;default:fd(e,t,h,f,s,p)}return;default:if(Mt(t)){for(var v in i)f=i[v],i.hasOwnProperty(v)&&void 0!==f&&!s.hasOwnProperty(v)&&pd(e,t,v,void 0,s,f);for(d in s)f=s[d],p=i[d],!s.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||pd(e,t,d,f,s,p);return}}for(var _ in i)f=i[_],i.hasOwnProperty(_)&&null!=f&&!s.hasOwnProperty(_)&&fd(e,t,_,null,s,f);for(u in s)f=s[u],p=i[u],!s.hasOwnProperty(u)||f===p||null==f&&null==p||fd(e,t,u,f,s,p)}(s,e.type,i,t),s[He]=t}catch(r){Eh(e,e.return,r)}}function jl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Dd(e.type)||4===e.tag}function Ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||jl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Dd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Dl(e,t,i){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(e,t):((t=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(e),null!=(i=i._reactRootContainer)||null!==t.onclick||(t.onclick=Pt));else if(4!==s&&(27===s&&Dd(e.type)&&(i=e.stateNode,t=null),null!==(e=e.child)))for(Dl(e,t,i),e=e.sibling;null!==e;)Dl(e,t,i),e=e.sibling}function Ml(e,t,i){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==s&&(27===s&&Dd(e.type)&&(i=e.stateNode),null!==(e=e.child)))for(Ml(e,t,i),e=e.sibling;null!==e;)Ml(e,t,i),e=e.sibling}function Al(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);gd(t,s,i),t[Fe]=e,t[He]=i}catch(n){Eh(e,e.return,n)}}var Tl=!1,Rl=!1,Pl=!1,Nl="function"==typeof WeakSet?WeakSet:Set,Ol=null;function Il(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Ql(e,i),4&s&&bl(5,i);break;case 1:if(Ql(e,i),4&s)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(o){Eh(i,i.return,o)}else{var r=Ea(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Eh(i,i.return,a)}}64&s&&xl(i),512&s&&wl(i,i.return);break;case 3:if(Ql(e,i),64&s&&null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:t=i.child.stateNode}try{Ln(e,t)}catch(o){Eh(i,i.return,o)}}break;case 27:null===t&&4&s&&Al(i);case 26:case 5:Ql(e,i),null===t&&4&s&&kl(i),512&s&&wl(i,i.return);break;case 12:Ql(e,i);break;case 31:Ql(e,i),4&s&&Wl(e,i);break;case 13:Ql(e,i),4&s&&Ul(e,i),64&s&&(null!==(e=i.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var i=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==i.readyState)t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}(e,i=Mh.bind(null,i))));break;case 22:if(!(s=null!==i.memoizedState||Tl)){t=null!==t&&null!==t.memoizedState||Rl,r=Tl;var n=Rl;Tl=s,(Rl=t)&&!n?Zl(e,i,!!(8772&i.subtreeFlags)):Ql(e,i),Tl=r,Rl=n}break;case 30:break;default:Ql(e,i)}}function Bl(e){var t=e.alternate;null!==t&&(e.alternate=null,Bl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zl=null,Fl=!1;function Hl(e,t,i){for(i=i.child;null!==i;)$l(e,t,i),i=i.sibling}function $l(e,t,i){if(ve&&"function"==typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(me,i)}catch(n){}switch(i.tag){case 26:Rl||Cl(i,t),Hl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:Rl||Cl(i,t);var s=zl,r=Fl;Dd(i.type)&&(zl=i.stateNode,Fl=!1),Hl(e,t,i),Hd(i.stateNode),zl=s,Fl=r;break;case 5:Rl||Cl(i,t);case 6:if(s=zl,r=Fl,zl=null,Hl(e,t,i),Fl=r,null!==(zl=s))if(Fl)try{(9===zl.nodeType?zl.body:"HTML"===zl.nodeName?zl.ownerDocument.body:zl).removeChild(i.stateNode)}catch(o){Eh(i,t,o)}else try{zl.removeChild(i.stateNode)}catch(o){Eh(i,t,o)}break;case 18:null!==zl&&(Fl?(Md(9===(e=zl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,i.stateNode),Ku(e)):Md(zl,i.stateNode));break;case 4:s=zl,r=Fl,zl=i.stateNode.containerInfo,Fl=!0,Hl(e,t,i),zl=s,Fl=r;break;case 0:case 11:case 14:case 15:yl(2,i,t),Rl||yl(4,i,t),Hl(e,t,i);break;case 1:Rl||(Cl(i,t),"function"==typeof(s=i.stateNode).componentWillUnmount&&Sl(i,t,s)),Hl(e,t,i);break;case 21:Hl(e,t,i);break;case 22:Rl=(s=Rl)||null!==i.memoizedState,Hl(e,t,i),Rl=s;break;default:Hl(e,t,i)}}function Wl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Ku(e)}catch(i){Eh(t,t.return,i)}}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ku(e)}catch(i){Eh(t,t.return,i)}}function Vl(e,t){var i=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Nl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Nl),t;default:throw Error(n(435,e.tag))}}(e);t.forEach(function(t){if(!i.has(t)){i.add(t);var s=Ah.bind(null,e,t);t.then(s,s)}})}function ql(e,t){var i=t.deletions;if(null!==i)for(var s=0;s<i.length;s++){var r=i[s],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(Dd(l.type)){zl=l.stateNode,Fl=!1;break e}break;case 5:zl=l.stateNode,Fl=!1;break e;case 3:case 4:zl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===zl)throw Error(n(160));$l(o,a,r),zl=null,Fl=!1,null!==(o=r.alternate)&&(o.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Yl(t,e),t=t.sibling}var Kl=null;function Yl(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ql(t,e),Gl(e),4&s&&(yl(3,e,e.return),bl(3,e),yl(5,e,e.return));break;case 1:ql(t,e),Gl(e),512&s&&(Rl||null===i||Cl(i,i.return)),64&s&&Tl&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?s:i.concat(s))));break;case 26:var r=Kl;if(ql(t,e),Gl(e),512&s&&(Rl||null===i||Cl(i,i.return)),4&s){var o=null!==i?i.memoizedState:null;if(s=e.memoizedState,null===i)if(null===s)if(null===e.stateNode){e:{s=e.type,i=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":(!(o=r.getElementsByTagName("title")[0])||o[Ke]||o[Fe]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=r.createElement(s),r.head.insertBefore(o,r.querySelector("head > title"))),gd(o,s,i),o[Fe]=e,et(o),s=o;break e;case"link":var a=nu("link","href",r).get(s+(i.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==i.href||""===i.href?null:i.href)&&o.getAttribute("rel")===(null==i.rel?null:i.rel)&&o.getAttribute("title")===(null==i.title?null:i.title)&&o.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(l,1);break t}gd(o=r.createElement(s),s,i),r.head.appendChild(o);break;case"meta":if(a=nu("meta","content",r).get(s+(i.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&o.getAttribute("name")===(null==i.name?null:i.name)&&o.getAttribute("property")===(null==i.property?null:i.property)&&o.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&o.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(l,1);break t}gd(o=r.createElement(s),s,i),r.head.appendChild(o);break;default:throw Error(n(468,s))}o[Fe]=e,et(o),s=o}e.stateNode=s}else ou(r,e.type,e.stateNode);else e.stateNode=eu(r,s,e.memoizedProps);else o!==s?(null===o?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):o.count--,null===s?ou(r,e.type,e.stateNode):eu(r,s,e.memoizedProps)):null===s&&null!==e.stateNode&&El(e,e.memoizedProps,i.memoizedProps)}break;case 27:ql(t,e),Gl(e),512&s&&(Rl||null===i||Cl(i,i.return)),null!==i&&4&s&&El(e,e.memoizedProps,i.memoizedProps);break;case 5:if(ql(t,e),Gl(e),512&s&&(Rl||null===i||Cl(i,i.return)),32&e.flags){r=e.stateNode;try{Et(r,"")}catch(g){Eh(e,e.return,g)}}4&s&&null!=e.stateNode&&El(e,r=e.memoizedProps,null!==i?i.memoizedProps:r),1024&s&&(Pl=!0);break;case 6:if(ql(t,e),Gl(e),4&s){if(null===e.stateNode)throw Error(n(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(g){Eh(e,e.return,g)}}break;case 3:if(ru=null,r=Kl,Kl=Ud(t.containerInfo),ql(t,e),Kl=r,Gl(e),4&s&&null!==i&&i.memoizedState.isDehydrated)try{Ku(t.containerInfo)}catch(g){Eh(e,e.return,g)}Pl&&(Pl=!1,Xl(e));break;case 4:s=Kl,Kl=Ud(e.stateNode.containerInfo),ql(t,e),Gl(e),Kl=s;break;case 12:default:ql(t,e),Gl(e);break;case 31:case 19:ql(t,e),Gl(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Vl(e,s)));break;case 13:ql(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==i&&null!==i.memoizedState)&&(Nc=ae()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Vl(e,s)));break;case 22:r=null!==e.memoizedState;var c=null!==i&&null!==i.memoizedState,h=Tl,d=Rl;if(Tl=h||r,Rl=d||c,ql(t,e),Rl=d,Tl=h,Gl(e),8192&s)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===i||c||Tl||Rl||Jl(e)),i=null,t=e;;){if(5===t.tag||26===t.tag){if(null===i){c=i=t;try{if(o=c.stateNode,r)"function"==typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var u=c.memoizedProps.style,f=null!=u&&u.hasOwnProperty("display")?u.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(g){Eh(c,c.return,g)}}}else if(6===t.tag){if(null===i){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(g){Eh(c,c.return,g)}}}else if(18===t.tag){if(null===i){c=t;try{var p=c.stateNode;r?Ad(p,!0):Ad(c.stateNode,!1)}catch(g){Eh(c,c.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(i=s.retryQueue)&&(s.retryQueue=null,Vl(e,i))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var i,s=e.return;null!==s;){if(jl(s)){i=s;break}s=s.return}if(null==i)throw Error(n(160));switch(i.tag){case 27:var r=i.stateNode;Ml(e,Ll(e),r);break;case 5:var o=i.stateNode;32&i.flags&&(Et(o,""),i.flags&=-33),Ml(e,Ll(e),o);break;case 3:case 4:var a=i.stateNode.containerInfo;Dl(e,Ll(e),a);break;default:throw Error(n(161))}}catch(l){Eh(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Xl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Xl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Il(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Jl(t);break;case 1:Cl(t,t.return);var i=t.stateNode;"function"==typeof i.componentWillUnmount&&Sl(t,t.return,i),Jl(t);break;case 27:Hd(t.stateNode);case 26:case 5:Cl(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function Zl(e,t,i){for(i=i&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,r=e,n=t,o=n.flags;switch(n.tag){case 0:case 11:case 15:Zl(r,n,i),bl(4,n);break;case 1:if(Zl(r,n,i),"function"==typeof(r=(s=n).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){Eh(s,s.return,c)}if(null!==(r=(s=n).updateQueue)){var a=s.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)jn(l[r],a)}catch(c){Eh(s,s.return,c)}}i&&64&o&&xl(n),wl(n,n.return);break;case 27:Al(n);case 26:case 5:Zl(r,n,i),i&&null===s&&4&o&&kl(n),wl(n,n.return);break;case 12:Zl(r,n,i);break;case 31:Zl(r,n,i),i&&4&o&&Wl(r,n);break;case 13:Zl(r,n,i),i&&4&o&&Ul(r,n);break;case 22:null===n.memoizedState&&Zl(r,n,i),wl(n,n.return);break;case 30:break;default:Zl(r,n,i)}t=t.sibling}}function ec(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&Hr(i))}function tc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hr(e))}function ic(e,t,i,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)sc(e,t,i,s),t=t.sibling}function sc(e,t,i,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ic(e,t,i,s),2048&r&&bl(9,t);break;case 1:case 31:case 13:default:ic(e,t,i,s);break;case 3:ic(e,t,i,s),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hr(e)));break;case 12:if(2048&r){ic(e,t,i,s),e=t.stateNode;try{var n=t.memoizedProps,o=n.id,a=n.onPostCommit;"function"==typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Eh(t,t.return,l)}}else ic(e,t,i,s);break;case 23:break;case 22:n=t.stateNode,o=t.alternate,null!==t.memoizedState?2&n._visibility?ic(e,t,i,s):nc(e,t):2&n._visibility?ic(e,t,i,s):(n._visibility|=2,rc(e,t,i,s,!!(10256&t.subtreeFlags)||!1)),2048&r&&ec(o,t);break;case 24:ic(e,t,i,s),2048&r&&tc(t.alternate,t)}}function rc(e,t,i,s,r){for(r=r&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var n=e,o=t,a=i,l=s,c=o.flags;switch(o.tag){case 0:case 11:case 15:rc(n,o,a,l,r),bl(8,o);break;case 23:break;case 22:var h=o.stateNode;null!==o.memoizedState?2&h._visibility?rc(n,o,a,l,r):nc(n,o):(h._visibility|=2,rc(n,o,a,l,r)),r&&2048&c&&ec(o.alternate,o);break;case 24:rc(n,o,a,l,r),r&&2048&c&&tc(o.alternate,o);break;default:rc(n,o,a,l,r)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,s=t,r=s.flags;switch(s.tag){case 22:nc(i,s),2048&r&&ec(s.alternate,s);break;case 24:nc(i,s),2048&r&&tc(s.alternate,s);break;default:nc(i,s)}t=t.sibling}}var oc=8192;function ac(e,t,i){if(e.subtreeFlags&oc)for(e=e.child;null!==e;)lc(e,t,i),e=e.sibling}function lc(e,t,i){switch(e.tag){case 26:ac(e,t,i),e.flags&oc&&null!==e.memoizedState&&function(e,t,i,s){if(!("stylesheet"!==i.type||"string"==typeof s.media&&!1===matchMedia(s.media).matches||4&i.state.loading)){if(null===i.instance){var r=Gd(s.href),n=t.querySelector(Xd(r));if(n)return null!==(t=n._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=cu.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=n,void et(n);n=t.ownerDocument||t,s=Qd(s),(r=$d.get(r))&&iu(s,r),et(n=n.createElement("link"));var o=n;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),gd(n,"link",s),i.instance=n}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&!(3&i.state.loading)&&(e.count++,i=cu.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}(i,Kl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,i);break;case 3:case 4:var s=Kl;Kl=Ud(e.stateNode.containerInfo),ac(e,t,i),Kl=s;break;case 22:null===e.memoizedState&&(null!==(s=e.alternate)&&null!==s.memoizedState?(s=oc,oc=16777216,ac(e,t,i),oc=s):ac(e,t,i))}}function cc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function hc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var i=0;i<t.length;i++){var s=t[i];Ol=s,fc(s,e)}cc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)dc(e),e=e.sibling}function dc(e){switch(e.tag){case 0:case 11:case 15:hc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:hc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):hc(e)}}function uc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var i=0;i<t.length;i++){var s=t[i];Ol=s,fc(s,e)}cc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),uc(t);break;case 22:2&(i=t.stateNode)._visibility&&(i._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function fc(e,t){for(;null!==Ol;){var i=Ol;switch(i.tag){case 0:case 11:case 15:yl(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var s=i.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:Hr(i.memoizedState.cache)}if(null!==(s=i.child))s.return=i,Ol=s;else e:for(i=e;null!==Ol;){var r=(s=Ol).sibling,n=s.return;if(Bl(s),s===i){Ol=null;break e}if(null!==r){r.return=n,Ol=r;break e}Ol=n}}}var pc={getCacheForType:function(e){var t=Rr(zr),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Rr(zr).controller.signal}},gc="function"==typeof WeakMap?WeakMap:Map,mc=0,vc=null,_c=null,bc=0,yc=0,xc=null,Sc=!1,wc=!1,Cc=!1,kc=0,Ec=0,jc=0,Lc=0,Dc=0,Mc=0,Ac=0,Tc=null,Rc=null,Pc=!1,Nc=0,Oc=0,Ic=1/0,Bc=null,zc=null,Fc=0,Hc=null,$c=null,Wc=0,Uc=0,Vc=null,qc=null,Kc=0,Yc=null;function Gc(){return 2&mc&&0!==bc?bc&-bc:null!==R.T?Vh():Ie()}function Xc(){if(0===Mc)if(536870912&bc&&!ur)Mc=536870912;else{var e=we;!(3932160&(we<<=1))&&(we=262144),Mc=e}return null!==(e=Pn.current)&&(e.flags|=32),Mc}function Qc(e,t,i){(e!==vc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(rh(e,0),th(e,bc,Mc,!1)),Ae(e,i),2&mc&&e===vc||(e===vc&&(!(2&mc)&&(Lc|=i),4===Ec&&th(e,bc,Mc,!1)),Bh(e))}function Jc(e,t,i){if(6&mc)throw Error(n(327));for(var s=!i&&!(127&t)&&0===(t&e.expiredLanes)||je(e,t),r=s?function(e,t){var i=mc;mc|=2;var s=ah(),r=lh();vc!==e||bc!==t?(Bc=null,Ic=ae()+500,rh(e,t)):wc=je(e,t);e:for(;;)try{if(0!==yc&&null!==_c){t=_c;var o=xc;t:switch(yc){case 1:yc=0,xc=null,gh(e,t,o,1);break;case 2:case 9:if(sn(o)){yc=0,xc=null,ph(t);break}t=function(){2!==yc&&9!==yc||vc!==e||(yc=7),Bh(e)},o.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:sn(o)?(yc=0,xc=null,ph(t)):(yc=0,xc=null,gh(e,t,o,7));break;case 5:var a=null;switch(_c.tag){case 26:a=_c.memoizedState;case 5:case 27:var l=_c;if(a?au(a):l.stateNode.complete){yc=0,xc=null;var c=l.sibling;if(null!==c)_c=c;else{var h=l.return;null!==h?(_c=h,mh(h)):_c=null}break t}}yc=0,xc=null,gh(e,t,o,5);break;case 6:yc=0,xc=null,gh(e,t,o,6);break;case 8:sh(),Ec=6;break e;default:throw Error(n(462))}}uh();break}catch(d){nh(e,d)}return kr=Cr=null,R.H=s,R.A=r,mc=i,null!==_c?0:(vc=null,bc=0,As(),Ec)}(e,t):hh(e,t,!0),o=s;;){if(0===r){wc&&!s&&th(e,t,0,!1);break}if(i=e.current.alternate,!o||eh(i)){if(2===r){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;r=Tc;var c=l.current.memoizedState.isDehydrated;if(c&&(rh(l,a).flags|=256),2!==(a=hh(l,a,!1))){if(Cc&&!c){l.errorRecoveryDisabledLanes|=o,Lc|=o,r=4;break e}o=Rc,Rc=r,null!==o&&(null===Rc?Rc=o:Rc.push.apply(Rc,o))}r=a}if(o=!1,2!==r)continue}}if(1===r){rh(e,0),th(e,t,0,!0);break}e:{switch(s=e,o=r){case 0:case 1:throw Error(n(345));case 4:if((4194048&t)!==t)break;case 6:th(s,t,Mc,!Sc);break e;case 2:Rc=null;break;case 3:case 5:break;default:throw Error(n(329))}if((62914560&t)===t&&10<(r=Nc+300-ae())){if(th(s,t,Mc,!Sc),0!==Ee(s,0,!0))break e;Wc=t,s.timeoutHandle=Cd(Zc.bind(null,s,i,Rc,Bc,Pc,t,Mc,Lc,Ac,Sc,o,"Throttled",-0,0),r)}else Zc(s,i,Rc,Bc,Pc,t,Mc,Lc,Ac,Sc,o,null,-0,0)}break}r=hh(e,t,!1),o=!1}Bh(e)}function Zc(e,t,i,s,r,n,o,a,l,c,h,d,u,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){lc(t,n,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt});var p=(62914560&n)===n?Nc-ae():(4194048&n)===n?Oc-ae():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&du(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&du(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===lu&&(lu=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var r=i[s],n=r.transferSize,o=r.initiatorType,a=r.duration;if(n&&a&&md(o)){for(o=0,a=r.responseEnd,s+=1;s<i.length;s++){var l=i[s],c=l.startTime;if(c>a)break;var h=l.transferSize,d=l.initiatorType;h&&md(d)&&(o+=h*((l=l.responseEnd)<a?1:(a-c)/(l-c)))}if(--s,t+=8*(n+o)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&du(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>lu?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}(d,p)))return Wc=n,e.cancelPendingCommit=p(_h.bind(null,e,t,n,i,s,r,o,a,l,h,d,null,u,f)),void th(e,n,o,!c)}_h(e,t,n,i,s,r,o,a,l)}function eh(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var s=0;s<i.length;s++){var r=i[s],n=r.getSnapshot;r=r.value;try{if(!Zi(n(),r))return!1}catch(o){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function th(e,t,i,s){t&=~Dc,t&=~Lc,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var n=31-be(r),o=1<<n;s[n]=-1,r&=~o}0!==i&&Te(e,i,t)}function ih(){return!!(6&mc)||(zh(0),!1)}function sh(){if(null!==_c){if(0===yc)var e=_c.return;else kr=Cr=null,lo(e=_c),cn=null,hn=0,e=_c;for(;null!==e;)_l(e.alternate,e),e=e.return;_c=null}}function rh(e,t){var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,kd(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),Wc=0,sh(),vc=e,_c=i=Hs(e.current,null),bc=t,yc=0,xc=null,Sc=!1,wc=je(e,t),Cc=!1,Ac=Mc=Dc=Lc=jc=Ec=0,Rc=Tc=null,Pc=!1,8&t&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var r=31-be(s),n=1<<r;t|=e[r],s&=~n}return kc=t,As(),i}function nh(e,t){Un=null,R.H=_a,t===Jr||t===en?(t=an(),yc=3):t===Zr?(t=an(),yc=4):yc=t===Na?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,xc=t,null===_c&&(Ec=1,Ma(e,Gs(t,e.current)))}function oh(){var e=Pn.current;return null===e||((4194048&bc)===bc?null===Nn:!!((62914560&bc)===bc||536870912&bc)&&e===Nn)}function ah(){var e=R.H;return R.H=_a,null===e?_a:e}function lh(){var e=R.A;return R.A=pc,e}function ch(){Ec=4,Sc||(4194048&bc)!==bc&&null!==Pn.current||(wc=!0),!(134217727&jc)&&!(134217727&Lc)||null===vc||th(vc,bc,Mc,!1)}function hh(e,t,i){var s=mc;mc|=2;var r=ah(),n=lh();vc===e&&bc===t||(Bc=null,rh(e,t)),t=!1;var o=Ec;e:for(;;)try{if(0!==yc&&null!==_c){var a=_c,l=xc;switch(yc){case 8:sh(),o=6;break e;case 3:case 2:case 9:case 6:null===Pn.current&&(t=!0);var c=yc;if(yc=0,xc=null,gh(e,a,l,c),i&&wc){o=0;break e}break;default:c=yc,yc=0,xc=null,gh(e,a,l,c)}}dh(),o=Ec;break}catch(h){nh(e,h)}return t&&e.shellSuspendCounter++,kr=Cr=null,mc=s,R.H=r,R.A=n,null===_c&&(vc=null,bc=0,As()),o}function dh(){for(;null!==_c;)fh(_c)}function uh(){for(;null!==_c&&!ne();)fh(_c)}function fh(e){var t=cl(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?mh(e):_c=t}function ph(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Ya(i,t,t.pendingProps,t.type,void 0,bc);break;case 11:t=Ya(i,t,t.pendingProps,t.type.render,t.ref,bc);break;case 5:lo(t);default:_l(i,t),t=cl(i,t=_c=$s(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?mh(e):_c=t}function gh(e,t,i,s){kr=Cr=null,lo(t),cn=null,hn=0;var r=t.return;try{if(function(e,t,i,s,r){if(i.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){if(null!==(t=i.alternate)&&Mr(t,i,r,!0),null!==(i=Pn.current)){switch(i.tag){case 31:case 13:return null===Nn?ch():null===i.alternate&&0===Ec&&(Ec=3),i.flags&=-257,i.flags|=65536,i.lanes=r,s===tn?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([s]):t.add(s),jh(e,s,r)),!1;case 22:return i.flags|=65536,s===tn?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([s]):i.add(s),jh(e,s,r)),!1}throw Error(n(435,i.tag))}return jh(e,s,r),ch(),!1}if(ur)return null!==(t=Pn.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==gr&&Sr(Gs(e=Error(n(422),{cause:s}),i))):(s!==gr&&Sr(Gs(t=Error(n(423),{cause:s}),i)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,s=Gs(s,i),wn(e,r=Ta(e.stateNode,s,r)),4!==Ec&&(Ec=2)),!1;var o=Error(n(520),{cause:s});if(o=Gs(o,i),null===Tc?Tc=[o]:Tc.push(o),4!==Ec&&(Ec=2),null===t)return!0;s=Gs(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=r&-r,i.lanes|=e,wn(i,e=Ta(i.stateNode,s,e)),!1;case 1:if(t=i.type,o=i.stateNode,!(128&i.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==zc&&zc.has(o))))return i.flags|=65536,r&=-r,i.lanes|=r,Pa(r=Ra(r),e,i,s),wn(i,r),!1}i=i.return}while(null!==i);return!1}(e,r,t,i,bc))return Ec=1,Ma(e,Gs(i,e.current)),void(_c=null)}catch(o){if(null!==r)throw _c=r,o;return Ec=1,Ma(e,Gs(i,e.current)),void(_c=null)}32768&t.flags?(ur||1===s?e=!0:wc||536870912&bc?e=!1:(Sc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=Pn.current)&&13===s.tag&&(s.flags|=16384))),vh(t,e)):mh(t)}function mh(e){var t=e;do{if(32768&t.flags)return void vh(t,Sc);e=t.return;var i=ml(t.alternate,t,kc);if(null!==i)return void(_c=i);if(null!==(t=t.sibling))return void(_c=t);_c=t=e}while(null!==t);0===Ec&&(Ec=5)}function vh(e,t){do{var i=vl(e.alternate,e);if(null!==i)return i.flags&=32767,void(_c=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(_c=e);_c=e=i}while(null!==e);Ec=6,_c=null}function _h(e,t,i,s,r,o,a,l,c){e.cancelPendingCommit=null;do{wh()}while(0!==Fc);if(6&mc)throw Error(n(327));if(null!==t){if(t===e.current)throw Error(n(177));if(o=t.lanes|t.childLanes,function(e,t,i,s,r,n){var o=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(i=o&~i;0<i;){var h=31-be(i),d=1<<h;a[h]=0,l[h]=-1;var u=c[h];if(null!==u)for(c[h]=null,h=0;h<u.length;h++){var f=u[h];null!==f&&(f.lane&=-536870913)}i&=~d}0!==s&&Te(e,s,0),0!==n&&0===r&&0!==e.tag&&(e.suspendedLanes|=n&~(o&~t))}(e,i,o|=Ms,a,l,c),e===vc&&(_c=vc=null,bc=0),$c=t,Hc=e,Wc=i,Uc=o,Vc=r,qc=s,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,se(de,function(){return Ch(),null})):(e.callbackNode=null,e.callbackPriority=0),s=!!(13878&t.flags),13878&t.subtreeFlags||s){s=R.T,R.T=null,r=P.p,P.p=2,a=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,vd=Su,ns(e=rs(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(s&&0!==s.rangeCount){i=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{i.nodeType,o.nodeType}catch(m){i=null;break e}var a=0,l=-1,c=-1,h=0,d=0,u=e,f=null;t:for(;;){for(var p;u!==i||0!==r&&3!==u.nodeType||(l=a+r),u!==o||0!==s&&3!==u.nodeType||(c=a+s),3===u.nodeType&&(a+=u.nodeValue.length),null!==(p=u.firstChild);)f=u,u=p;for(;;){if(u===e)break t;if(f===i&&++h===r&&(l=a),f===o&&++d===s&&(c=a),null!==(p=u.nextSibling))break;f=(u=f).parentNode}u=p}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(_d={focusedElem:e,selectionRange:i},Su=!1,Ol=t;null!==Ol;)if(e=(t=Ol).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ol=e;else for(;null!==Ol;){switch(o=(t=Ol).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(i=0;i<e.length;i++)(r=e[i]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,i=t,r=o.memoizedProps,o=o.memoizedState,s=i.stateNode;try{var g=Ea(i.type,r);e=s.getSnapshotBeforeUpdate(g,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(v){Eh(i,i.return,v)}}break;case 3:if(1024&e)if(9===(i=(e=t.stateNode.containerInfo).nodeType))Td(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(n(163))}if(null!==(e=t.sibling)){e.return=t.return,Ol=e;break}Ol=t.return}}(e,t)}finally{mc=a,P.p=r,R.T=s}}Fc=1,bh(),yh(),xh()}}function bh(){if(1===Fc){Fc=0;var e=Hc,t=$c,i=!!(13878&t.flags);if(13878&t.subtreeFlags||i){i=R.T,R.T=null;var s=P.p;P.p=2;var r=mc;mc|=4;try{Yl(t,e);var n=_d,o=rs(e.containerInfo),a=n.focusedElem,l=n.selectionRange;if(o!==a&&a&&a.ownerDocument&&ss(a.ownerDocument.documentElement,a)){if(null!==l&&ns(a)){var c=l.start,h=l.end;if(void 0===h&&(h=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(h,a.value.length);else{var d=a.ownerDocument||document,u=d&&d.defaultView||window;if(u.getSelection){var f=u.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(o=m,m=g,g=o);var v=is(a,g),_=is(a,m);if(v&&_&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==_.node||f.focusOffset!==_.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(_.node,_.offset)):(b.setEnd(_.node,_.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof a.focus&&a.focus(),a=0;a<d.length;a++){var y=d[a];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}Su=!!vd,_d=vd=null}finally{mc=r,P.p=s,R.T=i}}e.current=t,Fc=2}}function yh(){if(2===Fc){Fc=0;var e=Hc,t=$c,i=!!(8772&t.flags);if(8772&t.subtreeFlags||i){i=R.T,R.T=null;var s=P.p;P.p=2;var r=mc;mc|=4;try{Il(e,t.alternate,t)}finally{mc=r,P.p=s,R.T=i}}Fc=3}}function xh(){if(4===Fc||3===Fc){Fc=0,oe();var e=Hc,t=$c,i=Wc,s=qc;10256&t.subtreeFlags||10256&t.flags?Fc=5:(Fc=0,$c=Hc=null,Sh(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(zc=null),Oe(i),t=t.stateNode,ve&&"function"==typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(me,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==s){t=R.T,r=P.p,P.p=2,R.T=null;try{for(var n=e.onRecoverableError,o=0;o<s.length;o++){var a=s[o];n(a.value,{componentStack:a.stack})}}finally{R.T=t,P.p=r}}3&Wc&&wh(),Bh(e),r=e.pendingLanes,261930&i&&42&r?e===Yc?Kc++:(Kc=0,Yc=e):Kc=0,zh(0)}}function Sh(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Hr(t)))}function wh(){return bh(),yh(),xh(),Ch()}function Ch(){if(5!==Fc)return!1;var e=Hc,t=Uc;Uc=0;var i=Oe(Wc),s=R.T,r=P.p;try{P.p=32>i?32:i,R.T=null,i=Vc,Vc=null;var o=Hc,a=Wc;if(Fc=0,$c=Hc=null,Wc=0,6&mc)throw Error(n(331));var l=mc;if(mc|=4,dc(o.current),sc(o,o.current,a,i),mc=l,zh(0,!1),ve&&"function"==typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(me,o)}catch(c){}return!0}finally{P.p=r,R.T=s,Sh(e,t)}}function kh(e,t,i){t=Gs(i,t),null!==(e=xn(e,t=Ta(e.stateNode,t,2),2))&&(Ae(e,2),Bh(e))}function Eh(e,t,i){if(3===e.tag)kh(e,e,i);else for(;null!==t;){if(3===t.tag){kh(t,e,i);break}if(1===t.tag){var s=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===zc||!zc.has(s))){e=Gs(i,e),null!==(s=xn(t,i=Ra(2),2))&&(Pa(i,s,t,e),Ae(s,2),Bh(s));break}}t=t.return}}function jh(e,t,i){var s=e.pingCache;if(null===s){s=e.pingCache=new gc;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(i)||(Cc=!0,r.add(i),e=Lh.bind(null,e,t,i),t.then(e,e))}function Lh(e,t,i){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,vc===e&&(bc&i)===i&&(4===Ec||3===Ec&&(62914560&bc)===bc&&300>ae()-Nc?!(2&mc)&&rh(e,0):Dc|=i,Ac===bc&&(Ac=0)),Bh(e)}function Dh(e,t){0===t&&(t=De()),null!==(e=Ps(e,t))&&(Ae(e,t),Bh(e))}function Mh(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Dh(e,i)}function Ah(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(i=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(n(314))}null!==s&&s.delete(t),Dh(e,i)}var Th=null,Rh=null,Ph=!1,Nh=!1,Oh=!1,Ih=0;function Bh(e){e!==Rh&&null===e.next&&(null===Rh?Th=Rh=e:Rh=Rh.next=e),Nh=!0,Ph||(Ph=!0,jd(function(){6&mc?se(ce,Fh):Hh()}))}function zh(e,t){if(!Oh&&Nh){Oh=!0;do{for(var i=!1,s=Th;null!==s;){if(0!==e){var r=s.pendingLanes;if(0===r)var n=0;else{var o=s.suspendedLanes,a=s.pingedLanes;n=(1<<31-be(42|e)+1)-1,n=201326741&(n&=r&~(o&~a))?201326741&n|1:n?2|n:0}0!==n&&(i=!0,Uh(s,n))}else n=bc,!(3&(n=Ee(s,s===vc?n:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||je(s,n)||(i=!0,Uh(s,n));s=s.next}}while(i);Oh=!1}}function Fh(){Hh()}function Hh(){Nh=Ph=!1;var e=0;0!==Ih&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wd&&(wd=e,!0);return wd=null,!1}()&&(e=Ih);for(var t=ae(),i=null,s=Th;null!==s;){var r=s.next,n=$h(s,t);0===n?(s.next=null,null===i?Th=r:i.next=r,null===r&&(Rh=i)):(i=s,(0!==e||3&n)&&(Nh=!0)),s=r}0!==Fc&&5!==Fc||zh(e),0!==Ih&&(Ih=0)}function $h(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,n=-62914561&e.pendingLanes;0<n;){var o=31-be(n),a=1<<o,l=r[o];-1===l?0!==(a&i)&&0===(a&s)||(r[o]=Le(a,t)):l<=t&&(e.expiredLanes|=a),n&=~a}if(i=bc,i=Ee(e,e===(t=vc)?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),s=e.callbackNode,0===i||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&re(s),e.callbackNode=null,e.callbackPriority=0;if(!(3&i)||je(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==s&&re(s),Oe(i)){case 2:case 8:i=he;break;case 32:default:i=de;break;case 268435456:i=fe}return s=Wh.bind(null,e),i=se(i,s),e.callbackPriority=t,e.callbackNode=i,t}return null!==s&&null!==s&&re(s),e.callbackPriority=2,e.callbackNode=null,2}function Wh(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(wh()&&e.callbackNode!==i)return null;var s=bc;return 0===(s=Ee(e,e===vc?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,s,t),$h(e,ae()),null!=e.callbackNode&&e.callbackNode===i?Wh.bind(null,e):null)}function Uh(e,t){if(wh())return null;Jc(e,t,!0)}function Vh(){if(0===Ih){var e=Ur;0===e&&(e=Se,!(261888&(Se<<=1))&&(Se=256)),Ih=e}return Ih}function qh(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Rt(""+e)}function Kh(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var Yh=0;Yh<ks.length;Yh++){var Gh=ks[Yh];Es(Gh.toLowerCase(),"on"+(Gh[0].toUpperCase()+Gh.slice(1)))}Es(vs,"onAnimationEnd"),Es(_s,"onAnimationIteration"),Es(bs,"onAnimationStart"),Es("dblclick","onDoubleClick"),Es("focusin","onFocus"),Es("focusout","onBlur"),Es(ys,"onTransitionRun"),Es(xs,"onTransitionStart"),Es(Ss,"onTransitionCancel"),Es(ws,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xh));function Jh(e,t){t=!!(4&t);for(var i=0;i<e.length;i++){var s=e[i],r=s.event;s=s.listeners;e:{var n=void 0;if(t)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==n&&r.isPropagationStopped())break e;n=a,r.currentTarget=c;try{n(r)}catch(h){js(h)}r.currentTarget=null,n=l}else for(o=0;o<s.length;o++){if(l=(a=s[o]).instance,c=a.currentTarget,a=a.listener,l!==n&&r.isPropagationStopped())break e;n=a,r.currentTarget=c;try{n(r)}catch(h){js(h)}r.currentTarget=null,n=l}}}}function Zh(e,t){var i=t[We];void 0===i&&(i=t[We]=new Set);var s=e+"__bubble";i.has(s)||(sd(t,e,2,!1),i.add(s))}function ed(e,t,i){var s=0;t&&(s|=4),sd(i,e,s,t)}var td="_reactListening"+Math.random().toString(36).slice(2);function id(e){if(!e[td]){e[td]=!0,it.forEach(function(t){"selectionchange"!==t&&(Qh.has(t)||ed(t,!1,e),ed(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[td]||(t[td]=!0,ed("selectionchange",!1,t))}}function sd(e,t,i,s){switch(Du(t)){case 2:var r=wu;break;case 8:r=Cu;break;default:r=ku}i=r.bind(null,t,i,e),r=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function rd(e,t,i,s,r){var n=s;if(!(1&t||2&t||null===s))e:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var l=s.stateNode.containerInfo;if(l===r)break;if(4===o)for(o=s.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===r)return;o=o.return}for(;null!==l;){if(null===(o=Ge(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){s=n=o;continue e}l=l.parentNode}}s=s.return}Ht(function(){var s=n,r=Ot(i),o=[];e:{var l=Cs.get(e);if(void 0!==l){var c=ri,h=e;switch(e){case"keypress":if(0===Xt(i))break e;case"keydown":case"keyup":c=bi;break;case"focusin":h="focus",c=hi;break;case"focusout":h="blur",c=hi;break;case"beforeblur":case"afterblur":c=hi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ci;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xi;break;case vs:case _s:case bs:c=di;break;case ws:c=Si;break;case"scroll":case"scrollend":c=oi;break;case"wheel":c=wi;break;case"copy":case"cut":case"paste":c=ui;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yi;break;case"toggle":case"beforetoggle":c=Ci}var d=!!(4&t),u=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var p,g=s;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=$t(g,f))&&d.push(nd(g,m,p)),u)break;g=g.return}0<d.length&&(l=new c(l,h,null,i,r),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||i===Nt||!(h=i.relatedTarget||i.fromElement)||!Ge(h)&&!h[$e])&&(c||l)&&(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=s,null!==(h=(h=i.relatedTarget||i.toElement)?Ge(h):null)&&(u=a(h),d=h.tag,h!==u||5!==d&&27!==d&&6!==d)&&(h=null)):(c=null,h=s),c!==h)){if(d=li,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=yi,m="onPointerLeave",f="onPointerEnter",g="pointer"),u=null==c?l:Qe(c),p=null==h?l:Qe(h),(l=new d(m,g+"leave",c,i,r)).target=u,l.relatedTarget=p,m=null,Ge(r)===s&&((d=new d(f,g+"enter",h,i,r)).target=p,d.relatedTarget=u,m=d),u=m,c&&h)e:{for(d=ad,g=h,p=0,m=f=c;m;m=d(m))p++;m=0;for(var v=g;v;v=d(v))m++;for(;0<p-m;)f=d(f),p--;for(;0<m-p;)g=d(g),m--;for(;p--;){if(f===g||null!==g&&f===g.alternate){d=f;break e}f=d(f),g=d(g)}d=null}else d=null;null!==c&&ld(o,l,c,d,!1),null!==h&&null!==u&&ld(o,u,h,d,!0)}if("select"===(c=(l=s?Qe(s):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var _=$i;else if(Oi(l))if(Wi)_=Ji;else{_=Xi;var b=Gi}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?s&&Mt(s.elementType)&&(_=$i):_=Qi;switch(_&&(_=_(e,s))?Ii(o,_,i,r):(b&&b(e,l,s),"focusout"===e&&s&&"number"===l.type&&null!=s.memoizedProps.value&&St(l,"number",l.value)),b=s?Qe(s):window,e){case"focusin":(Oi(b)||"true"===b.contentEditable)&&(as=b,ls=s,cs=null);break;case"focusout":cs=ls=as=null;break;case"mousedown":hs=!0;break;case"contextmenu":case"mouseup":case"dragend":hs=!1,ds(o,i,r);break;case"selectionchange":if(os)break;case"keydown":case"keyup":ds(o,i,r)}var y;if(Ei)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Pi?Ti(e,i)&&(x="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(x="onCompositionStart");x&&(Di&&"ko"!==i.locale&&(Pi||"onCompositionStart"!==x?"onCompositionEnd"===x&&Pi&&(y=Gt()):(Kt="value"in(qt=r)?qt.value:qt.textContent,Pi=!0)),0<(b=od(s,x)).length&&(x=new fi(x,e,null,i,r),o.push({event:x,listeners:b}),y?x.data=y:null!==(y=Ri(i))&&(x.data=y))),(y=Li?function(e,t){switch(e){case"compositionend":return Ri(t);case"keypress":return 32!==t.which?null:(Ai=!0,Mi);case"textInput":return(e=t.data)===Mi&&Ai?null:e;default:return null}}(e,i):function(e,t){if(Pi)return"compositionend"===e||!Ei&&Ti(e,t)?(e=Gt(),Yt=Kt=qt=null,Pi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Di&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(x=od(s,"onBeforeInput")).length&&(b=new fi("onBeforeInput","beforeinput",null,i,r),o.push({event:b,listeners:x}),b.data=y)),function(e,t,i,s,r){if("submit"===t&&i&&i.stateNode===r){var n=qh((r[He]||null).action),o=s.submitter;o&&null!==(t=(t=o[He]||null)?qh(t.formAction):o.getAttribute("formAction"))&&(n=t,o=null);var a=new ri("action","action",null,s,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==Ih){var e=o?Kh(r,o):new FormData(r);ra(i,{pending:!0,data:e,method:r.method,action:n},null,e)}}else"function"==typeof n&&(a.preventDefault(),e=o?Kh(r,o):new FormData(r),ra(i,{pending:!0,data:e,method:r.method,action:n},n,e))},currentTarget:r}]})}}(o,e,s,i,r)}Jh(o,t)})}function nd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function od(e,t){for(var i=t+"Capture",s=[];null!==e;){var r=e,n=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===n||(null!=(r=$t(e,i))&&s.unshift(nd(e,r,n)),null!=(r=$t(e,t))&&s.push(nd(e,r,n))),3===e.tag)return s;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ld(e,t,i,s,r){for(var n=t._reactName,o=[];null!==i&&i!==s;){var a=i,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===s)break;5!==a&&26!==a&&27!==a||null===c||(l=c,r?null!=(c=$t(i,n))&&o.unshift(nd(i,c,l)):r||null!=(c=$t(i,n))&&o.push(nd(i,c,l))),i=i.return}0!==o.length&&e.push({event:t,listeners:o})}var cd=/\r\n?/g,hd=/\u0000|\uFFFD/g;function dd(e){return("string"==typeof e?e:""+e).replace(cd,"\n").replace(hd,"")}function ud(e,t){return t=dd(t),dd(e)===t}function fd(e,t,i,s,r,o){switch(i){case"children":"string"==typeof s?"body"===t||"textarea"===t&&""===s||Et(e,s):("number"==typeof s||"bigint"==typeof s)&&"body"!==t&&Et(e,""+s);break;case"className":dt(e,"class",s);break;case"tabIndex":dt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,i,s);break;case"style":Dt(e,s,o);break;case"data":if("object"!==t){dt(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==s||"function"==typeof s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(i);break}s=Rt(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if("function"==typeof s){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===i?("input"!==t&&fd(e,t,"name",r.name,r,null),fd(e,t,"formEncType",r.formEncType,r,null),fd(e,t,"formMethod",r.formMethod,r,null),fd(e,t,"formTarget",r.formTarget,r,null)):(fd(e,t,"encType",r.encType,r,null),fd(e,t,"method",r.method,r,null),fd(e,t,"target",r.target,r,null))),null==s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(i);break}s=Rt(""+s),e.setAttribute(i,s);break;case"onClick":null!=s&&(e.onclick=Pt);break;case"onScroll":null!=s&&Zh("scroll",e);break;case"onScrollEnd":null!=s&&Zh("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(n(61));if(null!=(i=s.__html)){if(null!=r.children)throw Error(n(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"muted":e.muted=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"==typeof s||"boolean"==typeof s||"symbol"==typeof s){e.removeAttribute("xlink:href");break}i=Rt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===s?e.setAttribute(i,""):!1!==s&&null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":null==s||"function"==typeof s||"symbol"==typeof s||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Zh("beforetoggle",e),Zh("toggle",e),ht(e,"popover",s);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ht(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&ht(e,i=At.get(i)||i,s)}}function pd(e,t,i,s,r,o){switch(i){case"style":Dt(e,s,o);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(n(61));if(null!=(i=s.__html)){if(null!=r.children)throw Error(n(60));e.innerHTML=i}}break;case"children":"string"==typeof s?Et(e,s):("number"==typeof s||"bigint"==typeof s)&&Et(e,""+s);break;case"onScroll":null!=s&&Zh("scroll",e);break;case"onScrollEnd":null!=s&&Zh("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:st.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(r=i.endsWith("Capture"),t=i.slice(2,r?i.length-7:void 0),"function"==typeof(o=null!=(o=e[He]||null)?o[i]:null)&&e.removeEventListener(t,o,r),"function"!=typeof s)?i in e?e[i]=s:!0===s?e.setAttribute(i,""):ht(e,i,s):("function"!=typeof o&&null!==o&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,r)))}}function gd(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zh("error",e),Zh("load",e);var s,r=!1,o=!1;for(s in i)if(i.hasOwnProperty(s)){var a=i[s];if(null!=a)switch(s){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,t));default:fd(e,t,s,a,i,null)}}return o&&fd(e,t,"srcSet",i.srcSet,i,null),void(r&&fd(e,t,"src",i.src,i,null));case"input":Zh("invalid",e);var l=s=a=o=null,c=null,h=null;for(r in i)if(i.hasOwnProperty(r)){var d=i[r];if(null!=d)switch(r){case"name":o=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(n(137,t));break;default:fd(e,t,r,d,i,null)}}return void xt(e,s,l,c,h,a,o,!1);case"select":for(o in Zh("invalid",e),r=a=s=null,i)if(i.hasOwnProperty(o)&&null!=(l=i[o]))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":r=l;default:fd(e,t,o,l,i,null)}return t=s,i=a,e.multiple=!!r,void(null!=t?wt(e,!!r,t,!1):null!=i&&wt(e,!!r,i,!0));case"textarea":for(a in Zh("invalid",e),s=o=r=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(n(91));break;default:fd(e,t,a,l,i,null)}return void kt(e,r,o,s);case"option":for(c in i)if(i.hasOwnProperty(c)&&null!=(r=i[c]))if("selected"===c)e.selected=r&&"function"!=typeof r&&"symbol"!=typeof r;else fd(e,t,c,r,i,null);return;case"dialog":Zh("beforetoggle",e),Zh("toggle",e),Zh("cancel",e),Zh("close",e);break;case"iframe":case"object":Zh("load",e);break;case"video":case"audio":for(r=0;r<Xh.length;r++)Zh(Xh[r],e);break;case"image":Zh("error",e),Zh("load",e);break;case"details":Zh("toggle",e);break;case"embed":case"source":case"link":Zh("error",e),Zh("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in i)if(i.hasOwnProperty(h)&&null!=(r=i[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,t));default:fd(e,t,h,r,i,null)}return;default:if(Mt(t)){for(d in i)i.hasOwnProperty(d)&&(void 0!==(r=i[d])&&pd(e,t,d,r,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(r=i[l])&&fd(e,t,l,r,i,null))}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var vd=null,_d=null;function bd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Sd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wd=null;var Cd="function"==typeof setTimeout?setTimeout:void 0,kd="function"==typeof clearTimeout?clearTimeout:void 0,Ed="function"==typeof Promise?Promise:void 0,jd="function"==typeof queueMicrotask?queueMicrotask:void 0!==Ed?function(e){return Ed.resolve(null).then(e).catch(Ld)}:Cd;function Ld(e){setTimeout(function(){throw e})}function Dd(e){return"head"===e}function Md(e,t){var i=t,s=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&8===r.nodeType)if("/$"===(i=r.data)||"/&"===i){if(0===s)return e.removeChild(r),void Ku(t);s--}else if("$"===i||"$?"===i||"$~"===i||"$!"===i||"&"===i)s++;else if("html"===i)Hd(e.ownerDocument.documentElement);else if("head"===i){Hd(i=e.ownerDocument.head);for(var n=i.firstChild;n;){var o=n.nextSibling,a=n.nodeName;n[Ke]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===n.rel.toLowerCase()||i.removeChild(n),n=o}}else"body"===i&&Hd(e.ownerDocument.body);i=r}while(i);Ku(t)}function Ad(e,t){var i=e;e=0;do{var s=i.nextSibling;if(1===i.nodeType?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",""===i.getAttribute("style")&&i.removeAttribute("style")):3===i.nodeType&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&8===s.nodeType)if("/$"===(i=s.data)){if(0===e)break;e--}else"$"!==i&&"$?"!==i&&"$~"!==i&&"$!"!==i||e++;i=s}while(i)}function Td(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Td(i),Ye(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function Rd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Od(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function Nd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Od(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Id=null;function Bd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i||"/&"===i){if(0===t)return Od(e.nextSibling);t--}else"$"!==i&&"$!"!==i&&"$?"!==i&&"$~"!==i&&"&"!==i||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i||"$~"===i||"&"===i){if(0===t)return e;t--}else"/$"!==i&&"/&"!==i||t++}e=e.previousSibling}return null}function Fd(e,t,i){switch(t=bd(i),e){case"html":if(!(e=t.documentElement))throw Error(n(452));return e;case"head":if(!(e=t.head))throw Error(n(453));return e;case"body":if(!(e=t.body))throw Error(n(454));return e;default:throw Error(n(451))}}function Hd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var $d=new Map,Wd=new Set;function Ud(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Vd=P.d;P.d={f:function(){var e=Vd.f(),t=ih();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?oa(t):Vd.r(e)},D:function(e){Vd.D(e),Kd("dns-prefetch",e,null)},C:function(e,t){Vd.C(e,t),Kd("preconnect",e,t)},L:function(e,t,i){Vd.L(e,t,i);var s=qd;if(s&&e&&t){var r='link[rel="preload"][as="'+bt(t)+'"]';"image"===t&&i&&i.imageSrcSet?(r+='[imagesrcset="'+bt(i.imageSrcSet)+'"]',"string"==typeof i.imageSizes&&(r+='[imagesizes="'+bt(i.imageSizes)+'"]')):r+='[href="'+bt(e)+'"]';var n=r;switch(t){case"style":n=Gd(e);break;case"script":n=Jd(e)}$d.has(n)||(e=u({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),$d.set(n,e),null!==s.querySelector(r)||"style"===t&&s.querySelector(Xd(n))||"script"===t&&s.querySelector(Zd(n))||(gd(t=s.createElement("link"),"link",e),et(t),s.head.appendChild(t)))}},m:function(e,t){Vd.m(e,t);var i=qd;if(i&&e){var s=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+bt(s)+'"][href="'+bt(e)+'"]',n=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":n=Jd(e)}if(!$d.has(n)&&(e=u({rel:"modulepreload",href:e},t),$d.set(n,e),null===i.querySelector(r))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Zd(n)))return}gd(s=i.createElement("link"),"link",e),et(s),i.head.appendChild(s)}}},X:function(e,t){Vd.X(e,t);var i=qd;if(i&&e){var s=Ze(i).hoistableScripts,r=Jd(e),n=s.get(r);n||((n=i.querySelector(Zd(r)))||(e=u({src:e,async:!0},t),(t=$d.get(r))&&su(e,t),et(n=i.createElement("script")),gd(n,"link",e),i.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},s.set(r,n))}},S:function(e,t,i){Vd.S(e,t,i);var s=qd;if(s&&e){var r=Ze(s).hoistableStyles,n=Gd(e);t=t||"default";var o=r.get(n);if(!o){var a={loading:0,preload:null};if(o=s.querySelector(Xd(n)))a.loading=5;else{e=u({rel:"stylesheet",href:e,"data-precedence":t},i),(i=$d.get(n))&&iu(e,i);var l=o=s.createElement("link");et(l),gd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,tu(o,t,s)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(n,o)}}},M:function(e,t){Vd.M(e,t);var i=qd;if(i&&e){var s=Ze(i).hoistableScripts,r=Jd(e),n=s.get(r);n||((n=i.querySelector(Zd(r)))||(e=u({src:e,async:!0,type:"module"},t),(t=$d.get(r))&&su(e,t),et(n=i.createElement("script")),gd(n,"link",e),i.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},s.set(r,n))}}};var qd="undefined"==typeof document?null:document;function Kd(e,t,i){var s=qd;if(s&&"string"==typeof t&&t){var r=bt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof i&&(r+='[crossorigin="'+i+'"]'),Wd.has(r)||(Wd.add(r),e={rel:e,crossOrigin:i,href:t},null===s.querySelector(r)&&(gd(t=s.createElement("link"),"link",e),et(t),s.head.appendChild(t)))}}function Yd(e,t,i,s){var r,o,a,l,c=(c=V.current)?Ud(c):null;if(!c)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof i.precedence&&"string"==typeof i.href?(t=Gd(i.href),(s=(i=Ze(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"==typeof i.href&&"string"==typeof i.precedence){e=Gd(i.href);var h=Ze(c).hoistableStyles,d=h.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,d),(h=c.querySelector(Xd(e)))&&!h._p&&(d.instance=h,d.state.loading=5),$d.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},$d.set(e,i),h||(r=c,o=e,a=i,l=d.state,r.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=r.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),gd(o,"link",a),et(o),r.head.appendChild(o))))),t&&null===s)throw Error(n(528,""));return d}if(t&&null!==s)throw Error(n(529,""));return null;case"script":return t=i.async,"string"==typeof(i=i.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Jd(i),(s=(i=Ze(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Gd(e){return'href="'+bt(e)+'"'}function Xd(e){return'link[rel="stylesheet"]['+e+"]"}function Qd(e){return u({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+bt(e)+'"]'}function Zd(e){return"script[async]"+e}function eu(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+bt(i.href)+'"]');if(s)return t.instance=s,et(s),s;var r=u({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return et(s=(e.ownerDocument||e).createElement("style")),gd(s,"style",r),tu(s,i.precedence,e),t.instance=s;case"stylesheet":r=Gd(i.href);var o=e.querySelector(Xd(r));if(o)return t.state.loading|=4,t.instance=o,et(o),o;s=Qd(i),(r=$d.get(r))&&iu(s,r),et(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),gd(o,"link",s),t.state.loading|=4,tu(o,i.precedence,e),t.instance=o;case"script":return o=Jd(i.src),(r=e.querySelector(Zd(o)))?(t.instance=r,et(r),r):(s=i,(r=$d.get(o))&&su(s=u({},i),r),et(r=(e=e.ownerDocument||e).createElement("script")),gd(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(n(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,tu(s,i.precedence,e));return t.instance}function tu(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,n=r,o=0;o<s.length;o++){var a=s[o];if(a.dataset.precedence===t)n=a;else if(n!==r)break}n?n.parentNode.insertBefore(e,n.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function iu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function su(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ru=null;function nu(e,t,i){if(null===ru){var s=new Map,r=ru=new Map;r.set(i,s)}else(s=(r=ru).get(i))||(s=new Map,r.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),r=0;r<i.length;r++){var n=i[r];if(!(n[Ke]||n[Fe]||"link"===e&&"stylesheet"===n.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==n.namespaceURI){var o=n.getAttribute(t)||"";o=e+o;var a=s.get(o);a?a.push(n):s.set(o,[n])}}return s}function ou(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function au(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var lu=0;function cu(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)du(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var hu=null;function du(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,hu=new Map,t.forEach(uu,e),hu=null,cu.call(e))}function uu(e,t){if(!(4&t.state.loading)){var i=hu.get(e);if(i)var s=i.get(null);else{i=new Map,hu.set(e,i);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<r.length;n++){var o=r[n];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(i.set(o.dataset.precedence,o),s=o)}s&&i.set(null,s)}o=(r=t.instance).getAttribute("data-precedence"),(n=i.get(o)||s)===s&&i.set(null,r),i.set(o,r),this.count++,s=cu.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),n?n.parentNode.insertBefore(r,n.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var fu={$$typeof:y,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function pu(e,t,i,s,r,n,o,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=n,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function gu(e,t,i,s,r,n,o,a,l,c,h,d){return e=new pu(e,t,i,o,l,c,h,d,a),t=1,!0===n&&(t|=24),n=zs(3,null,null,t),e.current=n,n.stateNode=e,(t=Fr()).refCount++,e.pooledCache=t,t.refCount++,n.memoizedState={element:s,isDehydrated:i,cache:t},_n(n),e}function mu(e){return e?e=Is:Is}function vu(e,t,i,s,r,n){r=mu(r),null===s.context?s.context=r:s.pendingContext=r,(s=yn(t)).payload={element:i},null!==(n=void 0===n?null:n)&&(s.callback=n),null!==(i=xn(e,s,t))&&(Qc(i,0,t),Sn(i,e,t))}function _u(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function bu(e,t){_u(e,t),(e=e.alternate)&&_u(e,t)}function yu(e){if(13===e.tag||31===e.tag){var t=Ps(e,67108864);null!==t&&Qc(t,0,67108864),bu(e,67108864)}}function xu(e){if(13===e.tag||31===e.tag){var t=Gc(),i=Ps(e,t=Ne(t));null!==i&&Qc(i,0,t),bu(e,t)}}var Su=!0;function wu(e,t,i,s){var r=R.T;R.T=null;var n=P.p;try{P.p=2,ku(e,t,i,s)}finally{P.p=n,R.T=r}}function Cu(e,t,i,s){var r=R.T;R.T=null;var n=P.p;try{P.p=8,ku(e,t,i,s)}finally{P.p=n,R.T=r}}function ku(e,t,i,s){if(Su){var r=Eu(s);if(null===r)rd(e,t,s,ju,i),Bu(e,s);else if(function(e,t,i,s,r){switch(t){case"focusin":return Au=zu(Au,e,t,i,s,r),!0;case"dragenter":return Tu=zu(Tu,e,t,i,s,r),!0;case"mouseover":return Ru=zu(Ru,e,t,i,s,r),!0;case"pointerover":var n=r.pointerId;return Pu.set(n,zu(Pu.get(n)||null,e,t,i,s,r)),!0;case"gotpointercapture":return n=r.pointerId,Nu.set(n,zu(Nu.get(n)||null,e,t,i,s,r)),!0}return!1}(r,e,t,i,s))s.stopPropagation();else if(Bu(e,s),4&t&&-1<Iu.indexOf(e)){for(;null!==r;){var n=Xe(r);if(null!==n)switch(n.tag){case 3:if((n=n.stateNode).current.memoizedState.isDehydrated){var o=ke(n.pendingLanes);if(0!==o){var a=n;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-be(o);a.entanglements[1]|=l,o&=~l}Bh(n),!(6&mc)&&(Ic=ae()+500,zh(0))}}break;case 31:case 13:null!==(a=Ps(n,2))&&Qc(a,0,2),ih(),bu(n,2)}if(null===(n=Eu(s))&&rd(e,t,s,ju,i),n===r)break;r=n}null!==r&&s.stopPropagation()}else rd(e,t,s,null,i)}}function Eu(e){return Lu(e=Ot(e))}var ju=null;function Lu(e){if(ju=null,null!==(e=Ge(e))){var t=a(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=l(t)))return e;e=null}else if(31===i){if(null!==(e=c(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ju=e,null}function Du(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case ce:return 2;case he:return 8;case de:case ue:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Mu=!1,Au=null,Tu=null,Ru=null,Pu=new Map,Nu=new Map,Ou=[],Iu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bu(e,t){switch(e){case"focusin":case"focusout":Au=null;break;case"dragenter":case"dragleave":Tu=null;break;case"mouseover":case"mouseout":Ru=null;break;case"pointerover":case"pointerout":Pu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(t.pointerId)}}function zu(e,t,i,s,r,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:n,targetContainers:[r]},null!==t&&(null!==(t=Xe(t))&&yu(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Fu(e){var t=Ge(e.target);if(null!==t){var i=a(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=l(i)))return e.blockedOn=t,void Be(e.priority,function(){xu(i)})}else if(31===t){if(null!==(t=c(i)))return e.blockedOn=t,void Be(e.priority,function(){xu(i)})}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Hu(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Eu(e.nativeEvent);if(null!==i)return null!==(t=Xe(i))&&yu(t),e.blockedOn=i,!1;var s=new(i=e.nativeEvent).constructor(i.type,i);Nt=s,i.target.dispatchEvent(s),Nt=null,t.shift()}return!0}function $u(e,t,i){Hu(e)&&i.delete(t)}function Wu(){Mu=!1,null!==Au&&Hu(Au)&&(Au=null),null!==Tu&&Hu(Tu)&&(Tu=null),null!==Ru&&Hu(Ru)&&(Ru=null),Pu.forEach($u),Nu.forEach($u)}function Uu(e,t){e.blockedOn===t&&(e.blockedOn=null,Mu||(Mu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Wu)))}var Vu=null;function qu(e){Vu!==e&&(Vu=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Vu===e&&(Vu=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],r=e[t+2];if("function"!=typeof s){if(null===Lu(s||i))continue;break}var n=Xe(i);null!==n&&(e.splice(t,3),t-=3,ra(n,{pending:!0,data:r,method:i.method,action:s},s,r))}}))}function Ku(e){function t(t){return Uu(t,e)}null!==Au&&Uu(Au,e),null!==Tu&&Uu(Tu,e),null!==Ru&&Uu(Ru,e),Pu.forEach(t),Nu.forEach(t);for(var i=0;i<Ou.length;i++){var s=Ou[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ou.length&&null===(i=Ou[0]).blockedOn;)Fu(i),null===i.blockedOn&&Ou.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(s=0;s<i.length;s+=3){var r=i[s],n=i[s+1],o=r[He]||null;if("function"==typeof n)o||qu(i);else if(o){var a=null;if(n&&n.hasAttribute("formAction")){if(r=n,o=n[He]||null)a=o.formAction;else if(null!==Lu(r))continue}else a=o.action;"function"==typeof a?i[s+1]=a:(i.splice(s,3),s-=3),qu(i)}}}function Yu(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var s=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function Gu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}Xu.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));vu(t.current,Gc(),e,t,null,null)},Xu.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;vu(e.current,2,null,e,null,null),ih(),t[$e]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ou.length&&0!==t&&t<Ou[i].priority;i++);Ou.splice(i,0,e),0===i&&Fu(e)}};var Qu=s.version;if("19.2.0"!==Qu)throw Error(n(527,Qu,"19.2.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error(n(188));return t!==e?null:e}for(var i=e,s=t;;){var r=i.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(s=r.return)){i=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===i)return h(r),e;if(o===s)return h(r),t;o=o.sibling}throw Error(n(188))}if(i.return!==s.return)i=r,s=o;else{for(var l=!1,c=r.child;c;){if(c===i){l=!0,i=r,s=o;break}if(c===s){l=!0,s=r,i=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===i){l=!0,i=o,s=r;break}if(c===s){l=!0,s=o,i=r;break}c=c.sibling}if(!l)throw Error(n(189))}}if(i.alternate!==s)throw Error(n(190))}if(3!==i.tag)throw Error(n(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ju={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{me=Zu.inject(Ju),ve=Zu}catch(ef){}}return tt.createRoot=function(e,t){if(!o(e))throw Error(n(299));var i=!1,s="",r=ja,a=La,l=Da;return null!=t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=gu(e,1,!1,null,0,i,s,null,r,a,l,Yu),e[$e]=t.current,id(e),new Gu(t)},tt.hydrateRoot=function(e,t,i){if(!o(e))throw Error(n(299));var s=!1,r="",a=ja,l=La,c=Da,h=null;return null!=i&&(!0===i.unstable_strictMode&&(s=!0),void 0!==i.identifierPrefix&&(r=i.identifierPrefix),void 0!==i.onUncaughtError&&(a=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(c=i.onRecoverableError),void 0!==i.formState&&(h=i.formState)),(t=gu(e,1,!0,t,0,s,r,h,a,l,c,Yu)).context=mu(null),i=t.current,(r=yn(s=Ne(s=Gc()))).callback=null,xn(i,r,s),i=s,t.current.lanes=i,Ae(t,i),Bh(t),e[$e]=t.current,id(e),new Xu(t)},tt.version="19.2.0",tt}var ot=(Ze||(Ze=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),et.exports=nt()),et.exports);const at=i.createContext(),lt=()=>{const e=i.useContext(at);if(!e)throw new Error("useTerminal must be used within TerminalProvider");return e},ct=({children:e})=>{const[t,r]=i.useState({isOpen:!1,serverId:null,nodeId:null,name:null});return s.jsx(at.Provider,{value:{...t,openTerminal:({serverId:e,nodeId:t,name:i})=>{r({isOpen:!0,serverId:e||null,nodeId:t||null,name:i||null})},closeTerminal:()=>{r({isOpen:!1,serverId:null,nodeId:null,name:null})},toggleTerminal:()=>{r(e=>({...e,isOpen:!e.isOpen}))}},children:e})};function ht(e){const t=function(e){if(!e)return!1;const t="solid"===e.accentType&&"#636363"===e.accentColor1,i="gradient"===e.backgroundType&&"#404040"===e.backgroundColor1&&"#16191d"===e.backgroundColor2;return t&&i}(e),i=t?function(e){return e?"#111111"===Re(e,"accent")?"static/logo.svg-2":"static/logo.svg":null}(e):null;return{isActive:t,logoSrc:i}}const dt=({show:e,onClose:t})=>{const{customSettings:p,setCustomSettings:g}=i.useContext(Pe),[m,v]=i.useState("theme"),[_,b]=i.useState(!1),[y,x]=i.useState([]),S=i.useRef(null),w=Ne(p.backgroundColor1),C=(e,t)=>{g(i=>{const s={...i,[e]:t};return _||g(s),s})};return e?s.jsx("div",{className:"theme-popup-overlay",onClick:t,children:s.jsxs("div",{className:"theme-popup advanced-popup",onClick:e=>e.stopPropagation(),style:{borderRadius:`${p.borderRadius}px`,backdropFilter:`blur(${p.backdropBlur}px)`,background:"solid"===p.backgroundType?`${p.backgroundColor1}ee`:`linear-gradient(135deg, ${p.backgroundColor1}ee, ${p.backgroundColor2}ee)`},children:[s.jsxs("div",{className:"popup-header",style:{color:w},children:[s.jsxs("h3",{style:{color:w},children:[s.jsx(r,{size:20,style:{color:w}}),"Theme Customizer"]}),s.jsxs("div",{className:"header-actions",children:[s.jsxs("button",{onClick:()=>b(!_),className:_?"active":"",style:{color:w},children:[s.jsx(n,{size:16,style:{color:w}})," ",_?"Live":"Preview"]}),s.jsx("button",{onClick:()=>{g({accentType:"gradient",accentColor1:"#6366f1",accentColor2:"#8b5cf6",fontFamily:"Inter",fontSize:"14",fontWeight:"400",letterSpacing:"0",lineHeight:"1.5",cpuColor:"#4fc3f7",gpuColor:"#26c6da",ramColor:"#81c784",storageColor:"#ffb74d",networkColor:"#f06292",borderRadius:"12",glassEffect:!0,shadowIntensity:"3",animationSpeed:"0.3",backdropBlur:"12",backgroundType:"gradient",backgroundColor1:"#0f0f23",backgroundColor2:"#1a1a2e",textColor:"#ffffff",secondaryTextColor:"#a0a0a0",particleEffect:!1,gradientAnimation:!0,hoverEffects:!0,customCursor:!1})},title:"Reset to defaults",style:{color:w},children:s.jsx(o,{size:16,style:{color:w}})})]})]}),s.jsx("div",{className:"tabs-container",children:s.jsxs("div",{className:"tabs",children:[s.jsxs("button",{className:"theme"===m?"active":"",onClick:()=>v("theme"),style:{color:w},children:[s.jsx(a,{size:16,style:{color:w}})," Theme Mode"]}),s.jsxs("button",{className:"colors"===m?"active":"",onClick:()=>v("colors"),style:{color:w},children:[s.jsx(l,{size:16,style:{color:w}})," Colors & Effects"]}),s.jsxs("button",{className:"typography"===m?"active":"",onClick:()=>v("typography"),style:{color:w},children:[s.jsx(c,{size:16,style:{color:w}})," Typography"]}),s.jsxs("button",{className:"graphs"===m?"active":"",onClick:()=>v("graphs"),style:{color:w},children:[s.jsx(h,{}),"Graph Colors"]}),s.jsxs("button",{className:"advanced"===m?"active":"",onClick:()=>v("advanced"),style:{color:w},children:[s.jsx(d,{size:16,style:{color:w}})," Advanced"]}),s.jsxs("button",{className:"presets"===m?"active":"",onClick:()=>v("presets"),style:{color:w},children:[s.jsx(u,{size:16,style:{color:w}})," Presets"]})]})}),s.jsxs("div",{className:"tab-content",style:{color:w},children:["theme"===m&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{style:{color:w},children:"Background Style"}),s.jsxs("div",{className:"radio-group",children:[s.jsxs("label",{className:"radio-label",style:{color:w},children:[s.jsx("input",{type:"radio",value:"solid",checked:"solid"===p.backgroundType,onChange:e=>C("backgroundType",e.target.value)}),s.jsx("span",{className:"radio-custom"}),"Solid Background"]}),s.jsxs("label",{className:"radio-label",style:{color:w},children:[s.jsx("input",{type:"radio",value:"gradient",checked:"gradient"===p.backgroundType,onChange:e=>C("backgroundType",e.target.value)}),s.jsx("span",{className:"radio-custom"}),"Gradient Background"]})]}),s.jsxs("div",{className:"color-grid",children:[s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Background Color 1"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.backgroundColor1,onChange:e=>C("backgroundColor1",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.backgroundColor1}})]})]}),"gradient"===p.backgroundType&&s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Background Color 2"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.backgroundColor2,onChange:e=>C("backgroundColor2",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.backgroundColor2}})]})]})]})]}),"colors"===m&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{style:{color:w},children:"Accent Colors"}),s.jsxs("div",{className:"radio-group",children:[s.jsxs("label",{className:"radio-label",style:{color:w},children:[s.jsx("input",{type:"radio",value:"solid",checked:"solid"===p.accentType,onChange:e=>C("accentType",e.target.value)}),s.jsx("span",{className:"radio-custom"}),"Solid Accent"]}),s.jsxs("label",{className:"radio-label",style:{color:w},children:[s.jsx("input",{type:"radio",value:"gradient",checked:"gradient"===p.accentType,onChange:e=>C("accentType",e.target.value)}),s.jsx("span",{className:"radio-custom"}),"Gradient Accent"]})]}),s.jsxs("div",{className:"color-grid",children:[s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Primary Accent"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.accentColor1,onChange:e=>C("accentColor1",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.accentColor1}})]})]}),"gradient"===p.accentType&&s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Secondary Accent"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.accentColor2,onChange:e=>C("accentColor2",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.accentColor2}})]})]})]}),"gradient"===p.accentType&&s.jsx("div",{className:"gradient-preview-large",style:{background:`linear-gradient(45deg, ${p.accentColor1}, ${p.accentColor2})`,color:w},children:"Gradient Preview"}),s.jsx("h4",{style:{color:w},children:"Text Colors"}),s.jsxs("div",{className:"color-grid",children:[s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Primary Text"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.textColor,onChange:e=>C("textColor",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.textColor},onClick:e=>e.target.previousElementSibling.click()})]})]}),s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Secondary Text"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.secondaryTextColor,onChange:e=>C("secondaryTextColor",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.secondaryTextColor},onClick:e=>e.target.previousElementSibling.click()})]})]})]})]}),"typography"===m&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{style:{color:w},children:"Font Family"}),s.jsx("select",{value:p.fontFamily,onChange:e=>C("fontFamily",e.target.value),className:"font-select",style:{color:w},children:["Inter","Roboto","Open Sans","Poppins","Montserrat","Source Sans Pro","Lato","Nunito","Raleway","Ubuntu","Playfair Display","Merriweather","Fira Sans","IBM Plex Sans","Work Sans"].map(e=>s.jsx("option",{value:e,style:{fontFamily:e},children:e},e))}),s.jsxs("div",{className:"typography-controls",children:[s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:[s.jsx(l,{size:16,style:{color:w}})," Font Size"]}),s.jsxs("div",{className:"input-with-slider",children:[s.jsx("input",{type:"number",min:"10",max:"24",value:p.fontSize,onChange:e=>C("fontSize",e.target.value),className:"number-input",style:{color:w}}),s.jsx("input",{type:"range",min:"10",max:"24",value:p.fontSize,onChange:e=>C("fontSize",e.target.value),className:"slider"})]})]}),s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:[s.jsx(l,{size:16,style:{color:w}})," Font Weight"]}),s.jsxs("div",{className:"input-with-slider",children:[s.jsx("input",{type:"number",min:"100",max:"900",step:"100",value:p.fontWeight,onChange:e=>C("fontWeight",e.target.value),className:"number-input",style:{color:w}}),s.jsx("input",{type:"range",min:"100",max:"900",step:"100",value:p.fontWeight,onChange:e=>C("fontWeight",e.target.value),className:"slider"})]})]}),s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:[s.jsx(l,{size:16,style:{color:w}})," Letter Spacing"]}),s.jsxs("div",{className:"input-with-slider",children:[s.jsx("input",{type:"number",min:"-2",max:"4",step:"0.1",value:p.letterSpacing,onChange:e=>C("letterSpacing",e.target.value),className:"number-input",style:{color:w}}),s.jsx("input",{type:"range",min:"-2",max:"4",step:"0.1",value:p.letterSpacing,onChange:e=>C("letterSpacing",e.target.value),className:"slider"})]})]}),s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:[s.jsx(l,{size:16,style:{color:w}})," Line Height"]}),s.jsxs("div",{className:"input-with-slider",children:[s.jsx("input",{type:"number",min:"1",max:"2",step:"0.1",value:p.lineHeight,onChange:e=>C("lineHeight",e.target.value),className:"number-input",style:{color:w}}),s.jsx("input",{type:"range",min:"1",max:"2",step:"0.1",value:p.lineHeight,onChange:e=>C("lineHeight",e.target.value),className:"slider"})]})]})]}),s.jsxs("div",{className:"typography-preview",style:{fontFamily:p.fontFamily,fontSize:`${p.fontSize}px`,fontWeight:p.fontWeight,letterSpacing:`${p.letterSpacing}px`,lineHeight:p.lineHeight,color:w},children:[s.jsx("h3",{style:{color:w},children:"Typography Preview"}),s.jsx("p",{style:{color:w},children:"This is how your text will look with the current settings. You can adjust the font family, size, weight, letter spacing, and line height above."})]})]}),"graphs"===m&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{style:{color:w},children:"Graph & Metric Colors"}),s.jsxs("div",{className:"color-grid",children:[s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"CPU Graph"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.cpuColor,onChange:e=>C("cpuColor",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.cpuColor}})]})]}),s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"GPU Graph"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.gpuColor,onChange:e=>C("gpuColor",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.gpuColor}})]})]}),s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"RAM Graph"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.ramColor,onChange:e=>C("ramColor",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.ramColor}})]})]}),s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Storage Graph"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.storageColor,onChange:e=>C("storageColor",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.storageColor}})]})]}),s.jsxs("div",{className:"color-input-group",children:[s.jsx("label",{style:{color:w},children:"Network Graph"}),s.jsxs("div",{className:"color-picker-wrapper",children:[s.jsx("input",{type:"color",value:p.networkColor,onChange:e=>C("networkColor",e.target.value)}),s.jsx("div",{className:"color-preview",style:{background:p.networkColor}})]})]})]}),s.jsxs("div",{className:"graph-controls",children:[s.jsxs("button",{className:"action-btn small-btn",style:{color:w},onClick:()=>{const e=p.cpuColor;C("gpuColor",e),C("ramColor",e),C("storageColor",e),C("networkColor",e)},children:[s.jsx(l,{size:14,style:{color:w}})," Same Color"]}),s.jsx("div",{className:"preset-buttons",children:s.jsxs("div",{className:"preset-grid",children:[s.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#E1FDFE"),C("gpuColor","#B8FDFF"),C("ramColor","#BDFFF4"),C("storageColor","#91B0B1"),C("networkColor","#008C8F")},children:[s.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #E1FDFE, #B8FDFF, #BDFFF4, #91B0B1, #008C8F)"}}),s.jsx("span",{style:{color:w},children:"Alterion"})]}),s.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#4fc3f7"),C("gpuColor","#26c6da"),C("ramColor","#81c784"),C("storageColor","#ffb74d"),C("networkColor","#f06292")},children:[s.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #4fc3f7, #26c6da, #81c784, #ffb74d, #f06292)"}}),s.jsx("span",{style:{color:w},children:"Default"})]}),s.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#3b82f6"),C("gpuColor","#1d4ed8"),C("ramColor","#06b6d4"),C("storageColor","#0ea5e9"),C("networkColor","#0284c7")},children:[s.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #3b82f6, #1d4ed8, #06b6d4, #0ea5e9, #0284c7)"}}),s.jsx("span",{style:{color:w},children:"Cool Blues"})]}),s.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#f97316"),C("gpuColor","#dc2626"),C("ramColor","#ef4444"),C("storageColor","#ec4899"),C("networkColor","#f59e0b")},children:[s.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #f97316, #dc2626, #ef4444, #ec4899, #f59e0b)"}}),s.jsx("span",{style:{color:w},children:"Warm Reds"})]}),s.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#22c55e"),C("gpuColor","#059669"),C("ramColor","#16a34a"),C("storageColor","#15803d"),C("networkColor","#166534")},children:[s.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #22c55e, #059669, #16a34a, #15803d, #166534)"}}),s.jsx("span",{style:{color:w},children:"Forest"})]}),s.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#8b5cf6"),C("gpuColor","#7c3aed"),C("ramColor","#a855f7"),C("storageColor","#c084fc"),C("networkColor","#d946ef")},children:[s.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #8b5cf6, #7c3aed, #a855f7, #c084fc, #d946ef)"}}),s.jsx("span",{style:{color:w},children:"Purple"})]})]})})]})]}),"advanced"===m&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{style:{color:w},children:"Visual Effects"}),s.jsxs("div",{className:"effects-controls",children:[s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:["Border Radius: ",p.borderRadius,"px"]}),s.jsx("input",{type:"range",min:"0",max:"30",value:p.borderRadius,onChange:e=>C("borderRadius",e.target.value),className:"slider"})]}),s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:["Shadow Intensity: ",p.shadowIntensity]}),s.jsx("input",{type:"range",min:"0",max:"9",value:p.shadowIntensity,onChange:e=>C("shadowIntensity",e.target.value),className:"slider"})]}),s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:["Animation Speed: ",p.animationSpeed,"s"]}),s.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:p.animationSpeed,onChange:e=>C("animationSpeed",e.target.value),className:"slider"})]}),s.jsxs("div",{className:"control-group",children:[s.jsxs("label",{style:{color:w},children:["Backdrop Blur: ",p.backdropBlur,"px"]}),s.jsx("input",{type:"range",min:"0",max:"30",value:p.backdropBlur,onChange:e=>C("backdropBlur",e.target.value),className:"slider"})]})]}),s.jsx("h4",{style:{color:w},children:"Special Effects"}),s.jsxs("div",{className:"toggle-group",children:[s.jsxs("label",{className:"toggle-label",style:{color:w},children:[s.jsx("input",{type:"checkbox",checked:p.glassEffect,onChange:e=>C("glassEffect",e.target.checked)}),s.jsx("span",{className:"toggle-switch"}),"Glass Effect"]}),s.jsxs("label",{className:"toggle-label",style:{color:w},children:[s.jsx("input",{type:"checkbox",checked:p.gradientAnimation,onChange:e=>C("gradientAnimation",e.target.checked)}),s.jsx("span",{className:"toggle-switch"}),"Gradient Animation"]}),s.jsxs("label",{className:"toggle-label",style:{color:w},children:[s.jsx("input",{type:"checkbox",checked:p.hoverEffects,onChange:e=>C("hoverEffects",e.target.checked)}),s.jsx("span",{className:"toggle-switch"}),"Enhanced Hover Effects"]}),s.jsxs("label",{className:"toggle-label",style:{color:w},children:[s.jsx("input",{type:"checkbox",checked:p.particleEffect,onChange:e=>C("particleEffect",e.target.checked)}),s.jsx("span",{className:"toggle-switch"}),"Particle Background"]})]})]}),"presets"===m&&s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{style:{color:w},children:"Theme Presets"}),s.jsx("div",{className:"preset-grid",children:[{name:"Alterion",settings:{accentType:"solid",accentColor1:"#636363",backgroundColor1:"#404040",backgroundColor2:"#16191d",backgroundType:"gradient"}},{name:"Ocean Breeze",settings:{accentColor1:"#0ea5e9",accentColor2:"#06b6d4",backgroundColor1:"#0c4a6e",backgroundColor2:"#164e63"}},{name:"Sunset Glow",settings:{accentColor1:"#f97316",accentColor2:"#ef4444",backgroundColor1:"#7c2d12",backgroundColor2:"#991b1b"}},{name:"Forest Night",settings:{accentColor1:"#22c55e",accentColor2:"#16a34a",backgroundColor1:"#14532d",backgroundColor2:"#166534"}},{name:"Purple Haze",settings:{accentColor1:"#8b5cf6",accentColor2:"#a855f7",backgroundColor1:"#581c87",backgroundColor2:"#6b21a8"}},{name:"Rose Gold",settings:{accentColor1:"#f59e0b",accentColor2:"#ec4899",backgroundColor1:"#92400e",backgroundColor2:"#be185d"}}].map((e,t)=>s.jsx("div",{className:"preset-card",onClick:()=>{Object.keys(e.settings).forEach(t=>{C(t,e.settings[t])})},style:{background:`linear-gradient(45deg, ${e.settings.accentColor1}, ${e.settings.accentColor2})`},children:s.jsx("span",{style:{color:w},children:e.name})},t))}),s.jsx("h4",{style:{color:w},children:"Saved Themes"}),s.jsx("div",{className:"saved-themes",children:0===y.length?s.jsx("p",{className:"no-saved-themes",style:{color:w},children:"No saved themes yet"}):s.jsx("div",{className:"saved-themes-list",children:y.map((e,t)=>s.jsxs("div",{className:"saved-theme-item",children:[s.jsx("span",{style:{color:w},children:e.name}),s.jsx("button",{onClick:()=>{return t=e.settings,void g(t);var t},style:{color:w},children:"Load"})]},t))})})]})]}),_&&s.jsxs("div",{className:"preview-section",children:[s.jsx("h4",{style:{color:w},children:"Live Preview"}),s.jsxs("div",{className:"preview-container",ref:S,children:[s.jsx("div",{className:"preview-header",style:{background:Oe(p,"header"),borderRadius:`${p.borderRadius}px`,backdropFilter:p.glassEffect?`blur(${p.backdropBlur}px)`:"none",boxShadow:`0 ${2*p.shadowIntensity}px ${8*p.shadowIntensity}px rgba(0,0,0,0.${p.shadowIntensity})`},children:s.jsx("span",{style:{fontFamily:p.fontFamily,fontSize:`${p.fontSize}px`,fontWeight:p.fontWeight,letterSpacing:`${p.letterSpacing}px`,lineHeight:p.lineHeight,color:Re(p,"background")},children:"Alterion Panel Preview"})}),s.jsxs("div",{className:"preview-main",style:{background:"gradient"===p.backgroundType?`linear-gradient(135deg, ${p.backgroundColor1}, ${p.backgroundColor2})`:p.backgroundColor1,color:w,fontFamily:p.fontFamily,fontSize:`${p.fontSize}px`,borderRadius:`${p.borderRadius}px`},children:[s.jsx("p",{style:{color:w},children:"This is how your app background and text will look with the current settings."}),s.jsx("div",{className:"preview-sidebar",style:{background:Oe(p,"sidebar"),borderRadius:`${p.borderRadius}px`},children:s.jsxs("ul",{children:[s.jsx("li",{style:{color:Re(p,"background")},children:"Dashboard"}),s.jsx("li",{style:{color:Re(p,"background")},children:"File Manager"}),s.jsx("li",{style:{color:Re(p,"background")},children:"Databases"})]})})]})]})]}),s.jsxs("div",{className:"popup-actions",children:[s.jsxs("button",{className:"action-btn save-btn",onClick:()=>{const e=prompt("Enter theme name:");if(e){const t={name:e,settings:{...p}};x(e=>[...e,t])}},children:[s.jsx(f,{size:16})," Save Theme"]}),s.jsxs("button",{className:"action-btn apply-btn",onClick:t,children:[s.jsx(r,{size:16})," Apply & Close"]}),s.jsx("button",{className:"action-btn cancel-btn",onClick:t,children:"Cancel"})]})]})}):null},ut=({onMetricsToggle:e,title:t="Alterion Panel",logo:n})=>{const[o,a]=i.useState(!1),{theme:l,setTheme:c,customSettings:h,setCustomSettings:d}=i.useContext(Pe),{openTerminal:u,toggleTerminal:f,isOpen:m}=lt(),{selectedNode:v}=Ie(),_=Re(h),{isActive:b,logoSrc:y}=ht(h);return s.jsxs("header",{className:"floating-header",style:{background:Oe(h,"header"),backdropFilter:h.glassEffect?`blur(${h.backdropBlur}px)`:"none",boxShadow:`0 ${2*h.shadowIntensity}px ${8*h.shadowIntensity}px rgba(0,0,0,0.${h.shadowIntensity})`,color:_},children:[s.jsx("div",{className:"header-left",children:b?s.jsx("img",{src:y,alt:"Alterion",className:"header-logo alterion-easter-egg",style:{height:"32px",width:"auto",objectFit:"contain"}}):s.jsxs(s.Fragment,{children:[n&&s.jsx("img",{src:n,alt:"Logo",className:"header-logo"}),s.jsx("span",{className:"header-title",style:{fontFamily:h.fontFamily,fontSize:`${h.fontSize}px`,fontWeight:h.fontWeight,letterSpacing:`${h.letterSpacing}px`,lineHeight:h.lineHeight,color:_},children:t})]})}),s.jsxs("div",{className:"header-right",children:[s.jsx("button",{className:"header-btn",title:"Terminal",style:{color:_},onClick:()=>{m?f():u(v?{nodeId:v.id,name:v.name}:{serverId:1,name:"Local Server"})},children:s.jsx(p,{size:24,color:_})}),s.jsx("button",{className:"header-btn",onClick:e,title:"Toggle Metrics Sidebar",style:{color:_},children:s.jsx(g,{size:24,color:_})}),s.jsx("button",{className:"header-btn",onClick:()=>a(!0),title:"Theme Customizer",style:{color:_},children:s.jsx(r,{size:24,color:_})})]}),s.jsx(dt,{show:o,onClose:()=>a(!1)}),s.jsx("style",{jsx:"true",children:`\n        .floating-header {\n          transition: all ${h.animationSpeed}s ease;\n        }\n\n        .theme-popup-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.8);\n          backdrop-filter: blur(10px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 10000;\n          animation: fadeIn 0.3s ease;\n        }\n\n        .advanced-popup {\n          width: 90vw;\n          max-width: 1200px;\n          max-height: 90vh;\n          background: rgba(15, 15, 35, 0.95);\n          border-radius: 24px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n          overflow: hidden;\n          display: flex;\n          flex-direction: column;\n          animation: slideUp 0.4s ease;\n        }\n\n        .popup-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 24px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));\n        }\n\n        .popup-header h3 {\n          margin: 0;\n          font-size: 20px;\n          font-weight: 600;\n          color: #ffffff;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .header-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .header-actions button {\n          padding: 8px 12px;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          background: rgba(255, 255, 255, 0.1);\n          color: #ffffff;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 12px;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          gap: 4px;\n        }\n\n        .header-actions button:hover {\n          background: rgba(255, 255, 255, 0.2);\n          transform: translateY(-1px);\n        }\n\n        .header-actions button.active {\n          background: rgba(99, 102, 241, 0.5);\n          border-color: rgba(99, 102, 241, 0.8);\n        }\n\n        .tabs-container {\n          padding: 0 24px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .tabs {\n          display: flex;\n          gap: 4px;\n          overflow-x: auto;\n        }\n\n        .tabs button {\n          padding: 12px 20px;\n          border: none;\n          background: transparent;\n          color: #a0a0a0;\n          border-radius: 12px 12px 0 0;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.2s ease;\n          white-space: nowrap;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          position: relative;\n        }\n\n        .tabs button:hover {\n          color: #ffffff;\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .tabs button.active {\n          color: #ffffff;\n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));\n          border-bottom: 2px solid #6366f1;\n        }\n\n        .tab-content {\n          flex: 1;\n          padding: 24px;\n          overflow-y: auto;\n          max-height: 60vh;\n        }\n\n        .settings-section {\n          margin-bottom: 32px;\n        }\n\n        .settings-section h4 {\n          color: #ffffff;\n          margin: 0 0 16px 0;\n          font-size: 16px;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .theme-options {\n          display: flex;\n          gap: 12px;\n          margin-bottom: 24px;\n        }\n\n        .theme-btn {\n          padding: 12px 24px;\n          border: 2px solid rgba(255, 255, 255, 0.2);\n          background: rgba(255, 255, 255, 0.05);\n          color: #ffffff;\n          border-radius: 12px;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.3s ease;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .theme-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);\n        }\n\n        .theme-btn.active {\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          border-color: #6366f1;\n          box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);\n        }\n\n        .radio-group {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n          margin-bottom: 20px;\n        }\n\n        .radio-label {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          color: #ffffff;\n          cursor: pointer;\n          padding: 12px;\n          border-radius: 8px;\n          transition: background 0.2s ease;\n        }\n\n        .radio-label:hover {\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .radio-label input[type="radio"] {\n          display: none;\n        }\n\n        .radio-custom {\n          width: 20px;\n          height: 20px;\n          border: 2px solid rgba(255, 255, 255, 0.3);\n          border-radius: 50%;\n          position: relative;\n          transition: all 0.2s ease;\n        }\n\n        .radio-label input[type="radio"]:checked + .radio-custom {\n          border-color: #6366f1;\n          background: #6366f1;\n        }\n\n        .radio-label input[type="radio"]:checked + .radio-custom::after {\n          content: '';\n          width: 8px;\n          height: 8px;\n          background: white;\n          border-radius: 50%;\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n\n        .color-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 20px;\n          margin-bottom: 24px;\n        }\n\n        .color-input-group {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 16px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .color-input-group label {\n          display: block;\n          color: #ffffff;\n          font-weight: 500;\n          margin-bottom: 8px;\n          font-size: 14px;\n        }\n\n        .color-picker-wrapper {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .color-picker-wrapper input[type="color"] {\n          width: 40px;\n          height: 40px;\n          border: none;\n          border-radius: 8px;\n          cursor: pointer;\n          background: none;\n        }\n\n        .color-preview {\n          width: 40px;\n          height: 40px;\n          border-radius: 8px;\n          border: 2px solid rgba(255, 255, 255, 0.2);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n        }\n\n        .color-value {\n          color: #a0a0a0;\n          font-family: monospace;\n          font-size: 12px;\n          font-weight: 500;\n          background: rgba(0, 0, 0, 0.2);\n          padding: 4px 8px;\n          border-radius: 4px;\n          flex: 1;\n        }\n\n        .gradient-preview-large {\n          height: 60px;\n          border-radius: 12px;\n          margin: 16px 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: 600;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .font-select {\n          width: 100%;\n          padding: 12px;\n          background: rgba(255, 255, 255, 0.1);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 8px;\n          color: #ffffff;\n          font-size: 14px;\n          margin-bottom: 24px;\n        }\n\n        .font-select option {\n          background: #1a1a2e;\n          color: #ffffff;\n        }\n\n        .typography-controls, .effects-controls {\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n        }\n\n        .control-group {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 16px;\n        }\n\n        .control-group label {\n          display: block;\n          color: #ffffff;\n          font-weight: 500;\n          margin-bottom: 8px;\n          font-size: 14px;\n        }\n\n        .slider {\n          width: 100%;\n          height: 6px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 3px;\n          outline: none;\n          -webkit-appearance: none;\n        }\n\n        .slider::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          width: 18px;\n          height: 18px;\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          border-radius: 50%;\n          cursor: pointer;\n          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n        }\n\n        .slider::-moz-range-thumb {\n          width: 18px;\n          height: 18px;\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          border-radius: 50%;\n          cursor: pointer;\n          border: none;\n          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n        }\n\n        .typography-preview {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          margin-top: 20px;\n        }\n\n        .typography-preview h3 {\n          margin: 0 0 12px 0;\n        }\n\n        .typography-preview p {\n          margin: 0;\n          opacity: 0.8;\n        }\n\n        .toggle-group {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n\n        .toggle-label {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          color: #ffffff;\n          cursor: pointer;\n          padding: 12px;\n          border-radius: 8px;\n          transition: background 0.2s ease;\n        }\n\n        .toggle-label:hover {\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .toggle-label input[type="checkbox"] {\n          display: none;\n        }\n\n        .toggle-switch {\n          width: 44px;\n          height: 24px;\n          background: rgba(255, 255, 255, 0.2);\n          border-radius: 12px;\n          position: relative;\n          transition: all 0.3s ease;\n        }\n\n        .toggle-switch::after {\n          content: '';\n          width: 20px;\n          height: 20px;\n          background: white;\n          border-radius: 50%;\n          position: absolute;\n          top: 2px;\n          left: 2px;\n          transition: all 0.3s ease;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        }\n\n        .toggle-label input[type="checkbox"]:checked + .toggle-switch {\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n        }\n\n        .toggle-label input[type="checkbox"]:checked + .toggle-switch::after {\n          left: 22px;\n        }\n\n        .preset-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n          gap: 16px;\n          margin-bottom: 32px;\n        }\n\n        .preset-card {\n          height: 80px;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          border: 2px solid rgba(255, 255, 255, 0.1);\n          color: white;\n          font-weight: 600;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);\n        }\n\n        .preset-card:hover {\n          transform: translateY(-4px) scale(1.02);\n          box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);\n        }\n\n        .saved-themes {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .no-saved-themes {\n          color: #a0a0a0;\n          text-align: center;\n          font-style: italic;\n          margin: 0;\n        }\n\n        .saved-themes-list {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n\n        .saved-theme-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 12px;\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 8px;\n          color: #ffffff;\n        }\n\n        .saved-theme-item button {\n          padding: 6px 12px;\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          color: white;\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n          transition: all 0.2s ease;\n        }\n\n        .saved-theme-item button:hover {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);\n        }\n\n        .popup-actions {\n          display: flex;\n          justify-content: flex-end;\n          gap: 12px;\n          padding: 24px;\n          border-top: 1px solid rgba(255, 255, 255, 0.1);\n          background: rgba(0, 0, 0, 0.2);\n        }\n\n        .action-btn {\n          padding: 12px 24px;\n          border: none;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.3s ease;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .save-btn {\n          background: linear-gradient(135deg, #22c55e, #16a34a);\n          color: white;\n        }\n\n        .apply-btn {\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          color: white;\n        }\n\n        .cancel-btn {\n          background: rgba(255, 255, 255, 0.1);\n          color: #ffffff;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .action-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);\n        }\n\n        .preview-section {\n          padding: 24px;\n          border-top: 1px solid rgba(255, 255, 255, 0.1);\n          background: rgba(0, 0, 0, 0.1);\n        }\n\n        .preview-section h4 {\n          color: #ffffff;\n          margin: 0 0 16px 0;\n          font-size: 16px;\n          font-weight: 600;\n        }\n\n        .preview-container {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n          max-height: 300px;\n          overflow: hidden;\n          border-radius: 12px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .preview-header {\n          padding: 16px;\n          color: white;\n          font-weight: 600;\n          transition: all var(--animation-speed, 0.3s) ease;\n        }\n\n        .preview-main {\n          padding: 16px;\n          min-height: 120px;\n          transition: all var(--animation-speed, 0.3s) ease;\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n        }\n\n        .preview-main p {\n          margin: 0;\n          flex: 1;\n        }\n\n        .preview-sidebar {\n          width: 150px;\n          padding: 12px;\n          color: white;\n          transition: all var(--animation-speed, 0.3s) ease;\n        }\n\n        .preview-sidebar ul {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n\n        .preview-sidebar li {\n          padding: 8px 0;\n          font-size: 14px;\n        }\n\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        @keyframes slideUp {\n          from { \n            opacity: 0;\n            transform: translateY(40px) scale(0.95);\n          }\n          to { \n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n\n        @media (max-width: 768px) {\n          .advanced-popup {\n            width: 95vw;\n            max-height: 95vh;\n          }\n          \n          .color-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .preset-grid {\n            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n          }\n          \n          .tabs {\n            flex-wrap: wrap;\n          }\n          \n          .popup-actions {\n            flex-direction: column;\n          }\n        }\n\n        .graph-controls {\n          margin-top: 20px;\n        }\n\n        .graph-controls .action-btn {\n          margin-bottom: 15px;\n        }\n\n        .preset-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));\n          gap: 15px;\n          margin-top: 10px;\n        }\n\n        .preset-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          cursor: pointer;\n          transition: transform 0.2s ease;\n        }\n\n        .preset-item:hover {\n          transform: scale(1.05);\n        }\n\n        .preset-circle {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          border: 2px solid rgba(255, 255, 255, 0.2);\n          margin-bottom: 5px;\n          transition: border-color 0.2s ease;\n        }\n\n        .preset-item:hover .preset-circle {\n          border-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .preset-item span {\n          font-size: 11px;\n          color: #ccc;\n          text-align: center;\n          font-weight: 500;\n        }\n      `})]})},ft=({isOpen:e,onClose:t,onAuthenticate:r,actionType:o="view"})=>{const[a,l]=i.useState([]),[c,h]=i.useState(null),[d,u]=i.useState(""),[f,p]=i.useState(!1),[g,_]=i.useState(""),[b,y]=i.useState(!1);i.useEffect(()=>{e&&(x(),u(""),_(""),p(!1))},[e]);const x=async()=>{try{const e=await Be.get("/api/alterion/panel/auth/users/recent/",{withCredentials:!0});if(e.data.users&&e.data.users.length>0)l(e.data.users);else{const e=await Be.get("/api/alterion/panel/auth/users/",{withCredentials:!0});l(e.data.users||[])}}catch(e){_("Failed to load user list")}};return e?s.jsx("div",{className:"account-selector-overlay",onClick:t,children:s.jsxs("div",{className:"account-selector-modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"account-selector-header",children:[s.jsxs("div",{children:[s.jsxs("h3",{children:[s.jsx(m,{size:20})," Verify Identity"]}),s.jsxs("p",{children:["Authenticate to ",o," this secret"]})]}),s.jsx("button",{className:"close-btn",onClick:t,children:""})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c)if(d){y(!0),_("");try{const e=new URLSearchParams;e.append("identifier",c.username),e.append("password",d),e.append("grant_type","password"),e.append("client_id","XpjXSgFQQ30AQ9RWpm8NsMULl3pcwIt5i9QfdksJ");(await Be.post("/api/alterion/panel/auth/login/",e,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.access_token?(r(!0),t()):_("Authentication failed")}catch(i){401===i.response?.status||400===i.response?.status?_("Invalid password"):_("Authentication failed. Please try again.")}finally{y(!1)}}else _("Please enter your password");else _("Please select a user")},className:"account-selector-body",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("label",{children:"Select Account"}),s.jsx("div",{className:"users-grid",children:a.map(e=>s.jsxs("div",{className:"user-card "+(c?.id===e.id?"selected":""),onClick:()=>(e=>{h(e),_("")})(e),children:[s.jsx("div",{className:"user-avatar",children:e.username.charAt(0).toUpperCase()}),s.jsxs("div",{className:"user-details",children:[s.jsx("div",{className:"user-name",children:e.username}),e.email&&s.jsx("div",{className:"user-email",children:e.email}),e.last_login&&s.jsxs("div",{className:"user-last-login",children:["Last login: ",new Date(e.last_login).toLocaleDateString()]})]}),c?.id===e.id&&s.jsx("div",{className:"check-icon",children:""})]},e.id))})]}),c&&s.jsxs("div",{className:"form-section",children:[s.jsxs("label",{children:["Password for ",c.username]}),s.jsxs("div",{className:"password-input-container",children:[s.jsx("input",{type:f?"text":"password",value:d,onChange:e=>u(e.target.value),placeholder:"Enter your password",autoFocus:!0,className:"password-input"}),s.jsx("button",{type:"button",className:"toggle-password",onClick:()=>p(!f),tabIndex:-1,children:f?s.jsx(v,{size:18}):s.jsx(n,{size:18})})]})]}),g&&s.jsx("div",{className:"error-message",children:g}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:t,disabled:b,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn-primary",disabled:!c||!d||b,children:b?"Verifying...":"Authenticate"})]})]})]})}):null},pt=()=>{const{handleProjectContextMenu:e}=ze(),[t,r]=i.useState([]),[o,a]=i.useState(null),[l,c]=i.useState(null),[h,d]=i.useState([]),[u,p]=i.useState(!1),[g,j]=i.useState(""),[L,D]=i.useState(!1),[M,A]=i.useState(!1),[T,R]=i.useState(!1),[P,N]=i.useState(!1),[O,I]=i.useState(!1),[B,z]=i.useState({name:"",description:""}),[F,H]=i.useState({key:"",value:"",description:""}),[$,W]=i.useState(null),[U,V]=i.useState([]),[q,K]=i.useState(new Set),[Y,G]=i.useState(""),[X,Q]=i.useState(null);i.useEffect(()=>{J()},[]),i.useEffect(()=>{o&&l&&Z()},[o,l]);const J=async()=>{try{p(!0);const e=await Be.get("/api/alterion/panel/secret-projects/",{withCredentials:!0});if(r(e.data),e.data.length>0&&!o){const t=e.data[0];a(t),t.environments&&t.environments.length>0&&c(t.environments[0])}}catch(e){j("Failed to load projects")}finally{p(!1)}},Z=async()=>{if(l)try{p(!0);const e=await Be.get(`/api/alterion/panel/secret-environments/${l.id}/secrets/`,{withCredentials:!0});d(e.data)}catch(e){j("Failed to load secrets")}finally{p(!1)}},ee=h.filter(e=>e.key.toLowerCase().includes(Y.toLowerCase())||e.description&&e.description.toLowerCase().includes(Y.toLowerCase()));return s.jsxs("div",{className:"secret-manager",children:[s.jsxs("div",{className:"secret-manager-header",children:[s.jsxs("div",{children:[s.jsxs("h2",{children:[s.jsx(m,{size:24})," Secret Manager"]}),s.jsx("p",{children:"Manage your application secrets and environment variables securely"})]}),s.jsxs("button",{className:"btn btn-secondary",onClick:()=>D(!0),children:[s.jsx(_,{size:18})," New Project"]})]}),g&&s.jsxs("div",{className:"error-banner",children:[g,s.jsx("button",{onClick:()=>j(""),children:""})]}),s.jsxs("div",{className:"secret-manager-content",children:[s.jsxs("div",{className:"projects-sidebar",children:[s.jsx("h3",{children:"Projects"}),s.jsx("div",{className:"projects-list",children:t.map(t=>s.jsxs("div",{className:"project-item "+(o?.id===t.id?"active":""),onClick:()=>{a(t),t.environments&&t.environments.length>0&&c(t.environments[0])},onContextMenu:i=>e(i,t,{onEdit:e=>{},onDelete:async e=>{if(confirm(`Are you sure you want to delete project "${e.name}"? This will delete all secrets in this project.`))try{await Be.delete(`/api/alterion/panel/secret-projects/${e.id}/`,{withCredentials:!0}),J(),o?.id===e.id&&(a(null),c(null))}catch(t){j("Failed to delete project")}}}),children:[s.jsx(b,{size:16}),s.jsxs("div",{className:"project-info",children:[s.jsx("div",{className:"project-name",children:t.name}),s.jsxs("div",{className:"project-meta",children:[t.secret_count," secrets"]})]})]},t.id))})]}),s.jsx("div",{className:"secrets-main",children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"environment-tabs",children:o.environments?.map(e=>s.jsxs("button",{className:"env-tab "+(l?.id===e.id?"active":""),onClick:()=>c(e),children:[e.name,s.jsx("span",{className:"env-count",children:e.secret_count})]},e.id))}),s.jsxs("div",{className:"secrets-toolbar",children:[s.jsxs("div",{className:"search-box",children:[s.jsx(y,{size:16}),s.jsx("input",{type:"text",placeholder:"Search secrets...",value:Y,onChange:e=>G(e.target.value)})]}),s.jsxs("div",{className:"toolbar-actions",children:[s.jsx("button",{className:"btn-icon",onClick:Z,title:"Refresh",children:s.jsx(x,{size:16})}),s.jsx("button",{className:"btn-icon",onClick:()=>{const e=h.map(e=>({key:e.key,value:e.value,description:e.description})),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),s=document.createElement("a");s.href=i,s.download=`${o.name}-${l.name}-secrets.json`,s.click()},title:"Export",children:s.jsx(f,{size:16})}),s.jsxs("button",{className:"btn btn-secondary",onClick:()=>A(!0),children:[s.jsx(_,{size:18})," Add Secret"]})]})]}),s.jsx("div",{className:"secrets-table-container",children:u?s.jsx("div",{className:"loading",children:"Loading secrets..."}):0===ee.length?s.jsxs("div",{className:"empty-state",children:[s.jsx(S,{size:48}),s.jsx("h3",{children:"No secrets yet"}),s.jsx("p",{children:"Add your first secret to get started"})]}):s.jsxs("table",{className:"secrets-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Key"}),s.jsx("th",{children:"Value"}),s.jsx("th",{children:"Description"}),s.jsx("th",{children:"Last Updated"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:ee.map(e=>s.jsxs("tr",{children:[s.jsxs("td",{className:"secret-key",children:[s.jsx(S,{size:14}),s.jsx("span",{children:e.key})]}),s.jsx("td",{className:"secret-value",children:s.jsxs("div",{className:"value-container",children:[s.jsx("code",{children:q.has(e.id)?e.value:"".repeat(Math.min(e.value.length,20))}),s.jsxs("div",{className:"value-actions",children:[s.jsx("button",{className:"btn-icon-small",onClick:()=>((e,t)=>{if(q.has(e)){const t=new Set(q);t.delete(e),K(t)}else Q({type:"view",secretId:e,value:t}),I(!0)})(e.id,e.value),title:q.has(e.id)?"Hide":"Show",children:q.has(e.id)?s.jsx(v,{size:14}):s.jsx(n,{size:14})}),s.jsx("button",{className:"btn-icon-small",onClick:()=>(e=>{Q({type:"copy",secret:e}),I(!0)})(e),title:"Copy API Endpoint",children:s.jsx(w,{size:14})})]})]})}),s.jsx("td",{className:"secret-description",children:e.description||"-"}),s.jsx("td",{className:"secret-updated",children:new Date(e.updated_at).toLocaleString()}),s.jsxs("td",{className:"secret-actions",children:[s.jsx("button",{className:"btn-icon",onClick:()=>(async e=>{try{const t=await Be.get(`/api/alterion/panel/secrets/${e.id}/history/`,{withCredentials:!0});V(t.data),N(!0)}catch(t){j("Failed to load history")}})(e),title:"History",children:s.jsx(C,{size:14})}),s.jsx("button",{className:"btn-icon",onClick:()=>{W(e),R(!0)},title:"Edit",children:s.jsx(k,{size:14})}),s.jsx("button",{className:"btn-icon btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this secret?"))try{await Be.delete(`/api/alterion/panel/secrets/${e}/`,{withCredentials:!0}),Z()}catch(t){j("Failed to delete secret")}})(e.id),title:"Delete",children:s.jsx(E,{size:14})})]})]},e.id))})]})})]}):s.jsxs("div",{className:"empty-state",children:[s.jsx(b,{size:48}),s.jsx("h3",{children:"No project selected"}),s.jsx("p",{children:"Create or select a project to manage secrets"})]})})]}),L&&s.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:s.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Create New Project"}),s.jsx("button",{onClick:()=>D(!1),children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Project Name"}),s.jsx("input",{type:"text",value:B.name,onChange:e=>z({...B,name:e.target.value}),placeholder:"my-app"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Description"}),s.jsx("textarea",{value:B.description,onChange:e=>z({...B,description:e.target.value}),placeholder:"Project description...",rows:"3"})]})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>D(!1),children:"Cancel"}),s.jsx("button",{className:"btn-primary",onClick:async()=>{try{await Be.post("/api/alterion/panel/secret-projects/",B,{withCredentials:!0}),D(!1),z({name:"",description:""}),J()}catch(e){j(e.response?.data?.error||"Failed to create project")}},children:"Create Project"})]})]})}),M&&s.jsx("div",{className:"modal-overlay",onClick:()=>A(!1),children:s.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Add New Secret"}),s.jsx("button",{onClick:()=>A(!1),children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Key"}),s.jsx("input",{type:"text",value:F.key,onChange:e=>H({...F,key:e.target.value}),placeholder:"DATABASE_URL"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Value"}),s.jsx("textarea",{value:F.value,onChange:e=>H({...F,value:e.target.value}),placeholder:"postgresql://user:pass@host:5432/db",rows:"3"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Description (Optional)"}),s.jsx("input",{type:"text",value:F.description,onChange:e=>H({...F,description:e.target.value}),placeholder:"Database connection string"})]})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>A(!1),children:"Cancel"}),s.jsx("button",{className:"btn-primary",onClick:async()=>{try{await Be.post(`/api/alterion/panel/secret-environments/${l.id}/add_secret/`,F,{withCredentials:!0}),A(!1),H({key:"",value:"",description:""}),Z()}catch(e){j(e.response?.data?.error||"Failed to create secret")}},children:"Add Secret"})]})]})}),T&&$&&s.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:s.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Edit Secret"}),s.jsx("button",{onClick:()=>R(!1),children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Key"}),s.jsx("input",{type:"text",value:$.key,onChange:e=>W({...$,key:e.target.value})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Value"}),s.jsx("textarea",{value:$.value,onChange:e=>W({...$,value:e.target.value}),rows:"3"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Description"}),s.jsx("input",{type:"text",value:$.description||"",onChange:e=>W({...$,description:e.target.value})})]})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>R(!1),children:"Cancel"}),s.jsx("button",{className:"btn-primary",onClick:async()=>{try{await Be.put(`/api/alterion/panel/secrets/${$.id}/`,{key:$.key,value:$.value,description:$.description},{withCredentials:!0}),R(!1),W(null),Z()}catch(e){j(e.response?.data?.error||"Failed to update secret")}},children:"Save Changes"})]})]})}),P&&s.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:s.jsxs("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Secret History"}),s.jsx("button",{onClick:()=>N(!1),children:""})]}),s.jsx("div",{className:"modal-body",children:s.jsx("div",{className:"history-list",children:U.map(e=>s.jsxs("div",{className:"history-item",children:[s.jsxs("div",{className:"history-meta",children:[s.jsx("span",{className:`change-type ${e.change_type}`,children:e.change_type}),s.jsx("span",{className:"history-time",children:new Date(e.changed_at).toLocaleString()}),s.jsxs("span",{className:"history-user",children:["by ",e.changed_by_name]})]}),s.jsx("div",{className:"history-value",children:s.jsx("code",{children:e.value})})]},e.id))})}),s.jsx("div",{className:"modal-footer",children:s.jsx("button",{className:"btn-secondary",onClick:()=>N(!1),children:"Close"})})]})}),s.jsx(ft,{isOpen:O,onClose:()=>{I(!1),Q(null)},onAuthenticate:e=>{if(e&&X){if("view"===X.type){const e=new Set(q);e.add(X.secretId),K(e)}else if("copy"===X.type){const e=X.secret,t=o?.access_token||"",i=l?.id||"",s=e?.raw_key||"",r=`/api/alterion/panel/secrets/get_by_key/?environment_id=${encodeURIComponent(i)}&key=${encodeURIComponent(s)}&api_key=${encodeURIComponent(t)}`;navigator.clipboard.writeText(r),j("API URL with api_key and encrypted key copied to clipboard")}Q(null)}},actionType:X?.type||"view"})]})},gt=()=>{const{serverId:e}=j(),t=L(),{openTerminal:r}=lt(),[n,o]=i.useState(null),[a,l]=i.useState(!0),[c,h]=i.useState(null);i.useEffect(()=>{d()},[e]);const d=async()=>{try{const i=await Be.get(`/api/servers/${e}/`);o(i.data),r({serverId:e,name:i.data.name}),l(!1),setTimeout(()=>{t("/dashboard")},100)}catch(i){h("Failed to load server details"),l(!1)}};return a?s.jsx("div",{className:"terminal-page",children:s.jsx("div",{className:"loading-container",children:s.jsx("p",{children:"Opening terminal..."})})}):c?s.jsx("div",{className:"terminal-page",children:s.jsxs("div",{className:"error-container",children:[s.jsx("h2",{children:"Error"}),s.jsx("p",{children:c}),s.jsx("button",{onClick:()=>t(-1),children:"Go Back"})]})}):null},mt=({selectedTool:e,setSelectedTool:t,selectedElement:r,deleteElement:n,duplicateElement:o,undo:a,redo:l,zoomIn:c,zoomOut:h,fitToScreen:u,toggleGrid:f,gridVisible:p,toggleSnap:g,snapEnabled:m,zoomLevel:v,onComponentDragStart:_,onComponentDragEnd:b})=>{const y=[{id:"select",icon:D,label:"Select"},{id:"text",icon:M,label:"Text"},{id:"image",icon:A,label:"Image"}],x=[{id:"rectangle",icon:T,label:"Rectangle"},{id:"ellipse",icon:R,label:"Ellipse"},{id:"triangle",icon:P,label:"Triangle"}],S=[{id:"pan",icon:O,label:"Pan"},{id:"pen",icon:function(e){return s.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),s.jsx("path",{d:"M18 13l-6-6a2 2 0 0 1 2.83-2.83l6 6a2 2 0 0 1-2.83 2.83z"})]})},label:"Pen"}];const[C,k]=i.useState(!1),[j,L]=i.useState(!1);return s.jsxs("div",{className:"builder-toolbar",children:[s.jsxs("div",{className:"toolbar-section",children:[y.map(i=>s.jsx("button",{className:"toolbar-btn "+(e===i.id?"active":""),onClick:()=>{return e=i.id,void t(e);var e},title:i.label,draggable:!0,onDragStart:e=>_&&_(e,{type:i.id,label:i.label}),onDragEnd:b,children:s.jsx(i.icon,{size:32})},i.id)),s.jsxs("div",{className:"toolbar-shape-menu",style:{display:"inline-block",position:"relative"},children:[s.jsx("button",{className:"toolbar-btn",title:"Shapes",onClick:e=>{e.stopPropagation(),k(e=>!e),L(!1)},children:s.jsx(T,{size:32})}),C&&s.jsx("div",{className:"toolbar-dropdown",style:{position:"absolute",bottom:40,left:0,background:"#232323",border:"1px solid #444",borderRadius:6,zIndex:100},children:x.map(i=>s.jsxs("button",{className:"toolbar-btn "+(e===i.id?"active":""),onClick:()=>{t(i.id),k(!1)},title:i.label,style:{display:"flex",alignItems:"center",gap:8,width:120,background:"none",border:"none",color:"#fff",padding:8,cursor:"pointer"},children:[s.jsx(i.icon,{size:24}),s.jsx("span",{children:i.label})]},i.id))})]}),s.jsxs("div",{className:"toolbar-more-menu",style:{display:"inline-block",position:"relative"},children:[s.jsx("button",{className:"toolbar-btn",title:"More Tools",onClick:e=>{e.stopPropagation(),L(e=>!e),k(!1)},children:s.jsx(N,{size:32})}),j&&s.jsx("div",{className:"toolbar-dropdown",style:{position:"absolute",bottom:40,left:0,background:"#232323",border:"1px solid #444",borderRadius:6,zIndex:100},children:S.map(i=>s.jsxs("button",{className:"toolbar-btn "+(e===i.id?"active":""),onClick:()=>{t(i.id),L(!1)},title:i.label,style:{display:"flex",alignItems:"center",gap:8,width:120,background:"none",border:"none",color:"#fff",padding:8,cursor:"pointer"},children:[s.jsx(i.icon,{size:24}),s.jsx("span",{children:i.label})]},i.id))})]})]}),s.jsx("div",{className:"toolbar-separator"}),s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:"toolbar-btn",onClick:o,disabled:!r,title:"Duplicate (Ctrl+D)",children:s.jsx(w,{size:24})}),s.jsx("button",{className:"toolbar-btn",onClick:n,disabled:!r,title:"Delete (Del)",children:s.jsx(E,{size:24})})]}),s.jsx("div",{className:"toolbar-separator"}),s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:"toolbar-btn",onClick:a,title:"Undo (Ctrl+Z)",children:s.jsx(I,{size:24})}),s.jsx("button",{className:"toolbar-btn",onClick:l,title:"Redo (Ctrl+Y)",children:s.jsx(B,{size:24})})]}),s.jsx("div",{className:"toolbar-separator"}),s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:"toolbar-btn",onClick:h,title:"Zoom Out",children:s.jsx(z,{size:24})}),s.jsx("span",{className:"zoom-level",children:"number"!=typeof v||isNaN(v)?"100%":`${Math.round(v)}%`}),s.jsx("button",{className:"toolbar-btn",onClick:c,title:"Zoom In",children:s.jsx(F,{size:24})}),s.jsx("button",{className:"toolbar-btn",onClick:u,title:"Fit to Screen",children:s.jsx(H,{size:24})})]}),s.jsx("div",{className:"toolbar-separator"}),s.jsxs("div",{className:"toolbar-section",children:[s.jsx("button",{className:"toolbar-btn "+(p?"active":""),onClick:f,title:"Toggle Grid",children:s.jsx($,{size:24})}),s.jsx("button",{className:"toolbar-btn "+(m?"active":""),onClick:g,title:"Toggle Snap to Grid",children:s.jsx(O,{size:24})})]}),s.jsx("div",{className:"toolbar-separator"}),s.jsx("div",{className:"toolbar-section",children:s.jsx("button",{className:"toolbar-btn",title:"Settings",children:s.jsx(d,{size:24})})})]})},vt=({leftSidebarWidth:e,leftTab:t,setLeftTab:r,pages:o,currentPage:a,setCurrentPage:l,handleAddPage:c,handlePageVisibility:h,componentLibrary:d,handleComponentDragStart:u,handleComponentDragEnd:f,uploadedAssets:p,handleAssetUpload:g,handleLeftSidebarResizeStart:m})=>{const[b,x]=i.useState(""),S=[{id:"pages",label:"Pages",icon:s.jsx(W,{size:18})},{id:"components",label:"Components",icon:s.jsx(U,{size:18})},{id:"assets",label:"Assets",icon:s.jsx(A,{size:18})}];return s.jsxs("div",{className:"builder-left-sidebar",style:{width:e},children:[s.jsx("div",{className:"sidebar-tabs",children:S.map(e=>s.jsxs("button",{className:"sidebar-tab "+(t===e.id?"active":""),onClick:()=>r(e.id),children:[e.icon,s.jsx("span",{children:e.label})]},e.id))}),s.jsxs("div",{className:"sidebar-content",children:["pages"===t&&s.jsxs("div",{className:"pages-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx(y,{size:16}),s.jsx("input",{type:"text",placeholder:"Search pages...",value:b,onChange:e=>x(e.target.value)})]}),s.jsx("div",{className:"pages-list",children:o.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())).map(e=>s.jsxs("div",{className:"page-item "+(a===e.id?"active":""),onClick:()=>l(e.id),children:[s.jsx("button",{className:"page-visibility",onClick:t=>{t.stopPropagation(),h(e.id)},children:e.visible?s.jsx(n,{size:14}):s.jsx(v,{size:14})}),s.jsx(W,{size:16}),s.jsx("span",{children:e.name})]},e.id))}),s.jsxs("button",{className:"add-page-btn",onClick:c,children:[s.jsx(_,{size:16}),"Add Page"]})]}),"components"===t&&s.jsxs("div",{className:"layers-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx(U,{size:16}),s.jsx("span",{children:"Components"})]}),s.jsx("div",{className:"layers-content",children:a&&o.find(e=>e.id===a)?.elements?.length>0?s.jsx("div",{className:"layers-list",children:o.find(e=>e.id===a)?.elements.map(e=>s.jsxs("div",{className:"layer-item",children:[s.jsx(M,{size:14}),s.jsx("span",{children:e.type})]},e.id))}):s.jsxs("div",{className:"layers-empty",children:[s.jsx(U,{size:48}),s.jsx("p",{children:"No components on this page"})]})})]}),"assets"===t&&s.jsxs("div",{className:"assets-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx(A,{size:16}),s.jsx("span",{children:"Uploaded Assets"})]}),s.jsxs("div",{className:"assets-upload",children:[s.jsxs("label",{htmlFor:"asset-upload",className:"upload-btn",children:[s.jsx(_,{size:16}),"Upload Images"]}),s.jsx("input",{id:"asset-upload",type:"file",accept:"image/*",multiple:!0,onChange:g,style:{display:"none"}})]}),s.jsxs("div",{className:"assets-grid",children:[p.map(e=>s.jsxs("div",{className:"asset-item",draggable:!0,onDragStart:t=>{t.dataTransfer.setData("asset-url",e.url),t.dataTransfer.setData("asset-name",e.name)},children:[s.jsx("img",{src:e.url,alt:e.name}),s.jsx("span",{className:"asset-name",children:e.name})]},e.id)),0===p.length&&s.jsxs("div",{className:"assets-empty",children:[s.jsx(A,{size:48}),s.jsx("p",{children:"No assets uploaded"}),s.jsx("p",{className:"assets-hint",children:"Upload images to use in your project"})]})]})]})]}),s.jsx("div",{className:"sidebar-resize-handle sidebar-resize-handle-right",onMouseDown:m})]})},_t=({rightSidebarWidth:e,rightTab:t,setRightTab:i,selectedElement:r,updateElementPosition:n,updateElementSize:o,updateElementStyle:a,pages:l,currentPage:c,aspectRatioLocked:h,setAspectRatioLocked:u,handleUpdatePageSize:f,handleRightSidebarResizeStart:p})=>s.jsxs("div",{className:"builder-right-sidebar",style:{width:e},children:[s.jsx("div",{className:"sidebar-tabs",children:[{id:"properties",label:"Properties",icon:null},{id:"animate",label:"Animate",icon:null},{id:"integrations",label:"Integrations",icon:null}].map(e=>s.jsxs("button",{className:"sidebar-tab "+(t===e.id?"active":""),onClick:()=>i(e.id),children:[e.icon,s.jsx("span",{children:e.label})]},e.id))}),s.jsxs("div",{className:"sidebar-content",children:["properties"===t&&s.jsxs("div",{className:"properties-panel",children:[s.jsxs("div",{className:"properties-header",children:[s.jsx(V,{size:18}),s.jsx("span",{children:"Properties"})]}),s.jsx("div",{className:"properties-content",children:r&&"object"==typeof r?s.jsxs("div",{className:"properties-form",children:[s.jsxs("div",{className:"property-section",children:[s.jsx("div",{className:"section-title",children:"Transform"}),s.jsxs("div",{className:"property-grid-2col",children:[s.jsxs("div",{className:"property-field",children:[s.jsx("label",{children:"X"}),s.jsx("input",{type:"number",value:null!=r?.x?Math.round(r.x):"",onChange:e=>r&&n(r.id,parseFloat(e.target.value),r.y),className:"property-input-dark"})]}),s.jsxs("div",{className:"property-field",children:[s.jsx("label",{children:"Y"}),s.jsx("input",{type:"number",value:null!=r?.y?Math.round(r.y):"",onChange:e=>r&&n(r.id,r.x,parseFloat(e.target.value)),className:"property-input-dark"})]}),s.jsxs("div",{className:"property-field",children:[s.jsx("label",{children:"W"}),s.jsx("input",{type:"number",value:null!=r?.width?Math.round(r.width):"",onChange:e=>r&&o(r.id,parseFloat(e.target.value),r.height),className:"property-input-dark"})]}),s.jsxs("div",{className:"property-field",children:[s.jsx("label",{children:"H"}),s.jsx("input",{type:"number",value:null!=r?.height?Math.round(r.height):"",onChange:e=>r&&o(r.id,r.width,parseFloat(e.target.value)),className:"property-input-dark"})]})]}),s.jsxs("div",{className:"aspect-ratio-lock",children:[s.jsx("button",{className:"lock-btn "+(h?"locked":""),onClick:()=>u(!h),title:h?"Unlock aspect ratio":"Lock aspect ratio",children:h?s.jsx(q,{size:14}):s.jsx(K,{size:14})}),s.jsx("span",{className:"lock-label",children:h?"Constrain proportions":"Free transform"})]})]}),s.jsxs("div",{className:"property-section",children:[s.jsx("div",{className:"section-title",children:"Appearance"}),s.jsxs("div",{className:"appearance-row",children:[s.jsxs("label",{className:"appearance-label",children:[s.jsx("div",{className:"appearance-icon fill-icon",children:"image"===r.type?s.jsx(Y,{size:12}):s.jsx(T,{size:12})}),"Fill"]}),s.jsx("div",{className:"appearance-controls",children:r&&"image"===r.type?s.jsx("div",{className:"color-swatch disabled",title:"Cannot edit image fill",onClick:()=>alert("You cannot edit an image's fill"),children:s.jsx(Y,{size:14})}):s.jsx("input",{type:"color",value:r.style?.backgroundColor||"#ffffff",onChange:e=>a(r.id,"backgroundColor",e.target.value),className:"color-picker-input"})})]})]})]}):c&&l.find(e=>e.id===c)?s.jsx("div",{className:"properties-form",children:s.jsxs("div",{className:"property-section",children:[s.jsx("div",{className:"section-title",children:"Page Settings"}),s.jsxs("div",{className:"property-input",children:[s.jsx("label",{children:"Name"}),s.jsx("input",{type:"text",value:l.find(e=>e.id===c)?.name||"",onChange:e=>{l.find(e=>e.id===c)}})]}),s.jsxs("div",{className:"property-grid-2col",children:[s.jsxs("div",{className:"property-field",children:[s.jsx("label",{children:"Width"}),s.jsx("input",{type:"number",value:l.find(e=>e.id===c)?.width||1920,onChange:e=>{const t=l.find(e=>e.id===c);t&&f(c,parseInt(e.target.value)||1920,t.height)},className:"property-input-dark"})]}),s.jsxs("div",{className:"property-field",children:[s.jsx("label",{children:"Height"}),s.jsx("input",{type:"number",value:l.find(e=>e.id===c)?.height||1080,onChange:e=>{const t=l.find(e=>e.id===c);t&&f(c,t.width,parseInt(e.target.value)||1080)},className:"property-input-dark"})]})]})]})}):s.jsxs("div",{className:"properties-empty",children:[s.jsx(U,{size:48}),s.jsx("p",{children:"Select an element or page to view properties"})]})})]}),"animate"===t&&s.jsxs("div",{className:"layers-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx(V,{size:16}),s.jsx("span",{children:"Animate"})]}),s.jsx("div",{className:"layers-content",children:c&&l.find(e=>e.id===c)?.elements?.length>0?s.jsx("div",{className:"layers-list",children:l.find(e=>e.id===c)?.elements.map(e=>s.jsxs("div",{className:"layer-item",children:[s.jsx(M,{size:14}),s.jsx("span",{children:e.type})]},e.id))}):s.jsxs("div",{className:"layers-empty",children:[s.jsx(V,{size:48}),s.jsx("p",{children:"No components on this page"})]})})]}),"integration"===t&&s.jsxs("div",{className:"integrations-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx(y,{size:16}),s.jsx("input",{type:"text",placeholder:"Search integrations..."})]}),s.jsxs("div",{className:"integrations-content",children:[s.jsxs("button",{className:"add-integration-btn",children:[s.jsx(_,{size:16}),"Add Integration"]}),s.jsx("div",{className:"integrations-list",children:s.jsxs("div",{className:"integration-category",children:[s.jsx("div",{className:"category-header",children:"APIs"}),s.jsxs("div",{className:"integration-item",children:[s.jsx(G,{size:16}),s.jsxs("div",{className:"integration-details",children:[s.jsx("div",{className:"integration-name",children:"REST API"}),s.jsx("div",{className:"integration-desc",children:"Connect to backend endpoints"})]}),s.jsx("button",{className:"config-btn",children:s.jsx(d,{size:14})})]})]})})]})]})]}),s.jsx("div",{className:"sidebar-resize-handle sidebar-resize-handle-left",onMouseDown:p})]}),bt=({element:e,isSelected:t,onSelect:r,onUpdate:n,zoom:o})=>{const[a,l]=i.useState(!1),[c,h]=i.useState(!1),[d,u]=i.useState(null),[f,p]=i.useState({x:0,y:0}),[g,m]=i.useState({x:0,y:0,width:0,height:0}),v=i.useRef(null);i.useEffect(()=>{if(a||c){const t=t=>{if(a){const i=(t.clientX-f.x)/(o/100),s=(t.clientY-f.y)/(o/100);n({x:e.x+i,y:e.y+s}),p({x:t.clientX,y:t.clientY})}else if(c&&d){const i=(t.clientX-g.x)/(o/100),s=(t.clientY-g.y)/(o/100);let r=e.x,a=e.y,l=g.width,c=g.height;d.includes("left")?(r=e.x+i,l=g.width-i):d.includes("right")&&(l=g.width+i),d.includes("top")?(a=e.y+s,c=g.height-s):d.includes("bottom")&&(c=g.height+s),n({x:r,y:a,width:Math.max(20,l),height:Math.max(20,c)})}},i=()=>{l(!1),h(!1),u(null),document.body.style.cursor="default"};return window.addEventListener("mousemove",t),window.addEventListener("mouseup",i),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)}}},[a,c,f,g,d,e,o,n]);const _=(t,i)=>{t.stopPropagation(),h(!0),u(i),m({x:t.clientX,y:t.clientY,width:e.width,height:e.height}),r(),document.body.style.cursor=b(i)},b=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top":case"bottom":return"ns-resize";case"left":case"right":return"ew-resize";default:return"default"}};return s.jsxs("div",{ref:v,onMouseDown:e=>{0===e.button&&(l(!0),p({x:e.clientX,y:e.clientY}),r(),document.body.style.cursor="grabbing")},style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height,cursor:a?"grabbing":"grab",zIndex:t?2:1,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",pointerEvents:"auto"},className:"canvas-element"+(t?" selected":""),tabIndex:-1,draggable:!1,onDragStart:e=>e.preventDefault(),children:["box"===e.type&&s.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:e.properties.backgroundColor,borderRadius:"4px"}}),"text"===e.type&&s.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.properties.fontSize,color:e.properties.color,fontWeight:500},children:e.properties.text}),t&&s.jsxs(s.Fragment,{children:[["top-left","top-right","bottom-left","bottom-right"].map(e=>s.jsx("div",{onMouseDown:t=>_(t,e),style:{position:"absolute",width:"8px",height:"8px",backgroundColor:"hsl(var(--primary))",border:"1px solid hsl(var(--background))",borderRadius:"50%",cursor:b(e),..."top-left"===e&&{top:-4,left:-4},..."top-right"===e&&{top:-4,right:-4},..."bottom-left"===e&&{bottom:-4,left:-4},..."bottom-right"===e&&{bottom:-4,right:-4}}},e)),["top","right","bottom","left"].map(e=>s.jsx("div",{onMouseDown:t=>_(t,e),style:{position:"absolute",backgroundColor:"hsl(var(--primary))",cursor:b(e),..."top"===e&&{top:-2,left:"50%",transform:"translateX(-50%)",width:"20px",height:"4px"},..."bottom"===e&&{bottom:-2,left:"50%",transform:"translateX(-50%)",width:"20px",height:"4px"},..."left"===e&&{left:-2,top:"50%",transform:"translateY(-50%)",width:"4px",height:"20px"},..."right"===e&&{right:-2,top:"50%",transform:"translateY(-50%)",width:"4px",height:"20px"}}},e))]})]})},yt=({elements:e,selectedElementId:t,onSelectElement:r,onUpdateElement:n,zoom:o,onZoomChange:a,panOffset:l,onPanOffsetChange:c,pageWidth:h,pageHeight:d,selectedTool:u})=>{const f=i.useRef(null),[p,g]=i.useState(!1),[m,v]=i.useState(!1),[_,b]=i.useState({x:0,y:0}),[y,x]=i.useState(!1),[S,w]=i.useState(null),[C,k]=i.useState(null),E=i.useRef(null);i.useEffect(()=>{const e=e=>{if(e.altKey){e.preventDefault();const t=e.deltaY>0?-10:10,i=Math.max(10,Math.min(200,o+t));a(i)}},t=f.current;if(t)return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)},[o,a]),i.useEffect(()=>{let e=null;const t=t=>{"Space"!==t.code||p||(t.preventDefault(),v(!0),document.body.style.cursor="grab","pan"!==u&&(e=u,"function"==typeof window.setSelectedTool&&window.setSelectedTool("pan")))},i=t=>{"Space"===t.code&&(v(!1),document.body.style.cursor="",e&&"function"==typeof window.setSelectedTool&&(window.setSelectedTool(e),e=null))};return window.addEventListener("keydown",t),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",i)}},[p,u]);const j=()=>{if(p&&(g(!1),document.body.style.cursor="grab"),y&&C){const t=e.filter(e=>{const t=e.x,i=e.y,s=e.width,r=e.height;return t+s>C.x&&t<C.x+C.width&&i+r>C.y&&i<C.y+C.height}).map(e=>e.id);t.length>0?r(t):r(""),E.current&&"function"==typeof window.setSelectedTool&&(window.setSelectedTool(E.current),E.current=null)}x(!1),w(null),k(null)},L=`translate(${l.x}px, ${l.y}px) scale(${o/100})`;return s.jsxs("div",{ref:f,className:`canvas-artboard${m?" cursor-grab":""}${p?" cursor-grabbing":""}`,onMouseDown:e=>{if(0===e.button)if("pan"===u)g(!0),b({x:e.clientX-l.x,y:e.clientY-l.y}),document.body.style.cursor="grabbing";else if("select"===u){x(!0);const t=f.current.getBoundingClientRect();w({x:(e.clientX-t.left-l.x)/(o/100),y:(e.clientY-t.top-l.y)/(o/100)}),k(null),E.current||"function"!=typeof window.setSelectedTool||"select"!==u&&(E.current=u)}},onMouseMove:e=>{if(p&&c({x:e.clientX-_.x,y:e.clientY-_.y}),y&&S){const t=f.current.getBoundingClientRect(),i={x:(e.clientX-t.left-l.x)/(o/100),y:(e.clientY-t.top-l.y)/(o/100)};k({x:Math.min(S.x,i.x),y:Math.min(S.y,i.y),width:Math.abs(i.x-S.x),height:Math.abs(i.y-S.y)})}},onMouseUp:j,onMouseLeave:j,onDrop:e=>{if(e.preventDefault(),!e.dataTransfer)return;const t=e.dataTransfer.getData("asset-url"),i=e.dataTransfer.getData("asset-name");if(t){const s=f.current.getBoundingClientRect(),r=(e.clientX-s.left-l.x)/(o/100),n=(e.clientY-s.top-l.y)/(o/100);"function"==typeof onDropImage&&onDropImage(r,n,t,i)}},onDragOver:e=>{e.dataTransfer.types.includes("asset-url")&&e.preventDefault()},style:{width:h,height:d,position:"relative",overflow:"visible",background:"#fff",boxShadow:"0 2px 12px rgba(0,0,0,0.10)",borderRadius:0,transform:L,transformOrigin:"0 0",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},tabIndex:0,onDragStart:e=>e.preventDefault(),children:[e.map(e=>s.jsx(bt,{element:e,isSelected:Array.isArray(t)?t.includes(e.id):e.id===t,onSelect:()=>r(e.id),onUpdate:t=>n(e.id,t),zoom:o},e.id)),y&&C&&s.jsx("div",{style:{position:"absolute",left:C.x,top:C.y,width:C.width,height:C.height,background:"rgba(60, 132, 255, 0.15)",border:"1.5px solid #3b82f6",borderRadius:2,pointerEvents:"none",zIndex:1e3}})]})},xt=()=>{const[e,t]=i.useState(!1),[r,n]=i.useState(!1);i.useEffect(()=>{if(!e&&!r)return;const i=t=>{if(e){const e=Math.max(200,Math.min(500,t.clientX));b(e)}if(r){const e=Math.max(200,Math.min(500,window.innerWidth-t.clientX));x(e)}},s=()=>{t(!1),n(!1)};return document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)}},[e,r]);const[o,a]=i.useState([{id:"page-1",name:"Page 1",width:1200,height:800,elements:[],visible:!0}]),[l,c]=i.useState("page-1"),[h,d]=i.useState(null),[u,f]=i.useState(100),[p,g]=i.useState({x:0,y:0}),[m,v]=i.useState("select"),[_,b]=i.useState(280),[y,x]=i.useState(300),[S,w]=i.useState("pages"),[C,k]=i.useState("properties"),[E,j]=i.useState([]),L=o.find(e=>e.id===l),D=e=>{const t={id:`element-${Date.now()}`,type:e,x:50,y:50,width:"text"===e?200:150,height:"text"===e?50:150,properties:{backgroundColor:"box"===e?"#3b82f6":void 0,text:"text"===e?"Text":void 0,fontSize:"text"===e?16:void 0,color:"text"===e?"#ffffff":void 0}};a(e=>e.map(e=>e.id===l?{...e,elements:[...e.elements,t]}:e)),d(t.id)},M=(e,t)=>{a(i=>i.map(i=>i.id===l?{...i,elements:i.elements.map(i=>i.id===e?{...i,...t}:i)}:i))},A=e=>{a(t=>t.map(t=>t.id===l?{...t,elements:t.elements.filter(t=>t.id!==e)}:t)),d(null)};return i.useEffect(()=>{const e=e=>{"Delete"===e.key&&h&&A(h),"Escape"===e.key&&d(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h,o,l]),s.jsxs("div",{className:"nocode-builder",style:{background:"#1a1a1a",color:"#e6e6e6"},children:[s.jsxs("div",{className:"builder-topbar",children:[s.jsx("div",{className:"topbar-left",children:s.jsx("div",{className:"topbar-project-name",children:L?.name||"Untitled Project"})}),s.jsxs("div",{className:"topbar-right",children:[s.jsx("button",{className:"topbar-preview-btn",children:"Preview"}),s.jsx("button",{className:"topbar-deploy-btn",children:"Deploy"})]})]}),s.jsxs("div",{className:"builder-main",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:[s.jsxs("div",{className:"builder-left-sidebar",style:{width:_,position:"relative"},children:[s.jsx(vt,{elements:L?.elements||[],selectedElementId:h,onSelectElement:d,onAddElement:D,leftSidebarWidth:_,leftTab:S,setLeftTab:w,pages:o,currentPage:l,setCurrentPage:c,handleAddPage:()=>{const e={id:`page-${Date.now()}`,name:`Page ${o.length+1}`,width:1200,height:800,elements:[],visible:!0};a(t=>[...t,e]),c(e.id)},handlePageVisibility:e=>{a(t=>t.map(t=>t.id===e?{...t,visible:!t.visible}:t))},componentLibrary:[],handleComponentDragStart:()=>{},handleComponentDragEnd:()=>{},uploadedAssets:E,handleAssetUpload:e=>{const t=Array.from(e.target.files).map(e=>{const t=URL.createObjectURL(e);return{id:`asset-${Date.now()}-${Math.random().toString(36).slice(2)}`,name:e.name,url:t,file:e}});j(e=>[...e,...t]),e.target.value=""},handleLeftSidebarResizeStart:()=>{}}),s.jsx("div",{className:"sidebar-resize-handle sidebar-resize-handle-right",style:{position:"absolute",top:0,right:0,height:"100%",width:"6px",cursor:"ew-resize",zIndex:10},onMouseDown:e=>{e.preventDefault(),t(!0)}})]}),s.jsx("div",{className:"builder-canvas",style:{display:"flex",flexWrap:"wrap",gap:"48px",alignItems:"flex-start",justifyContent:"center",minHeight:"100%"},children:o.filter(e=>e.visible).map(e=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("div",{style:{color:"#b0b0b0",fontSize:13,marginBottom:8,fontWeight:600,letterSpacing:.2},children:e.name}),s.jsx(yt,{elements:e.elements,selectedElementId:e.id===l?h:null,onSelectElement:d,onUpdateElement:M,zoom:u,onZoomChange:f,panOffset:p,onPanOffsetChange:g,pageWidth:e.width||1200,pageHeight:e.height||800,selectedTool:m,onDropImage:(t,i,s,r)=>{const n={id:`element-${Date.now()}`,type:"image",x:t,y:i,width:200,height:200,properties:{url:s,name:r}};a(t=>t.map(t=>t.id===e.id?{...t,elements:[...t.elements,n]}:t))}})]},e.id))}),s.jsxs("div",{className:"builder-right-sidebar",style:{width:y,position:"relative"},children:[s.jsx("div",{className:"sidebar-resize-handle sidebar-resize-handle-left",style:{position:"absolute",top:0,left:0,height:"100%",width:"6px",cursor:"ew-resize",zIndex:10},onMouseDown:e=>{e.preventDefault(),n(!0)}}),s.jsx(_t,{selectedElement:L?.elements.find(e=>e.id===h)||null,onUpdateElement:M,rightSidebarWidth:y,rightTab:C,setRightTab:k,updateElementPosition:(e,t,i)=>{const s=L?.elements.find(t=>t.id===e);s&&M(e,{x:t,y:i})},updateElementSize:(e,t,i)=>{const s=L?.elements.find(t=>t.id===e);s&&M(e,{width:t,height:i})},updateElementStyle:(e,t,i)=>{const s=L?.elements.find(t=>t.id===e);s&&M(e,{style:{...s.style,[t]:i}})},pages:o,currentPage:l,aspectRatioLocked:!0,setAspectRatioLocked:()=>{},handleUpdatePageSize:()=>{},handleRightSidebarResizeStart:()=>{}})]})]}),s.jsxs("div",{className:"builder-toolbar",children:["undefined"!=typeof window&&(window.setSelectedTool=v),s.jsx(mt,{selectedTool:m,setSelectedTool:v,selectedElement:L?.elements.find(e=>e.id===h)||null,deleteElement:()=>h&&A(h),duplicateElement:()=>{const e=L?.elements.find(e=>e.id===h);if(e){const t={...e,id:`element-${Date.now()}`,x:e.x+20,y:e.y+20};M(e.id,t)}},undo:()=>{},redo:()=>{},zoomIn:()=>f(e=>Math.min(200,e+10)),zoomOut:()=>f(e=>Math.max(10,e-10)),fitToScreen:()=>f(100),toggleGrid:()=>{},gridVisible:!1,toggleSnap:()=>{},snapEnabled:!1,zoomLevel:u,onComponentDragStart:(e,t)=>{"rectangle"!==t.type&&"box"!==t.type||D("box"),"text"===t.type&&D("text"),"image"===t.type&&D("image"),"ellipse"===t.type&&D("ellipse"),"triangle"===t.type&&D("triangle"),"pen"===t.type&&D("pen")},onComponentDragEnd:()=>{}})]})]})},St=()=>{const{customSettings:e}=i.useContext(Pe),t=Oe(e,"sidebar"),r=Re(e);return s.jsx("aside",{className:"sidebar-content",style:{background:t,color:r},children:s.jsx("nav",{children:s.jsxs("ul",{children:[s.jsx("li",{children:s.jsxs(X,{to:"/dashboard",style:{color:r},children:[s.jsx(Q,{size:18,color:r})," Dashboard"]})}),s.jsx("li",{children:s.jsxs(X,{to:"/file-manager",style:{color:r},children:[s.jsx(J,{size:18,color:r})," File Manager"]})}),s.jsx("li",{children:s.jsxs(X,{to:"/databases",style:{color:r},children:[s.jsx(Z,{size:18,color:r})," Databases"]})}),s.jsx("li",{children:s.jsxs(X,{to:"/load-balancer",style:{color:r},children:[s.jsx(ee,{size:18,color:r})," Load Balancer"]})}),s.jsx("li",{children:s.jsxs(X,{to:"/security",style:{color:r},children:[s.jsx(te,{size:18,color:r})," Security"]})}),s.jsx("li",{children:s.jsxs(X,{to:"/backups",style:{color:r},children:[s.jsx(ie,{size:18,color:r})," Backups"]})}),s.jsx("li",{children:s.jsxs(X,{to:"/domains",style:{color:r},children:[s.jsx(se,{size:18,color:r})," Domains"]})}),s.jsx("li",{children:s.jsxs(X,{to:"/services",style:{color:r},children:[s.jsx(re,{size:18,color:r})," Services"]})})]})})})};
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function wt(e){return e+.5|0}const Ct=(e,t,i)=>Math.max(Math.min(e,i),t);function kt(e){return Ct(wt(2.55*e),0,255)}function Et(e){return Ct(wt(255*e),0,255)}function jt(e){return Ct(wt(e/2.55)/100,0,1)}function Lt(e){return Ct(wt(100*e),0,100)}const Dt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Mt=[..."0123456789ABCDEF"],At=e=>Mt[15&e],Tt=e=>Mt[(240&e)>>4]+Mt[15&e],Rt=e=>(240&e)>>4==(15&e);function Pt(e){var t=(e=>Rt(e.r)&&Rt(e.g)&&Rt(e.b)&&Rt(e.a))(e)?At:Tt;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Nt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ot(e,t,i){const s=t*Math.min(i,1-i),r=(t,r=(t+e/30)%12)=>i-s*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function It(e,t,i){const s=(s,r=(s+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function Bt(e,t,i){const s=Ot(e,1,.5);let r;for(t+i>1&&(r=1/(t+i),t*=r,i*=r),r=0;r<3;r++)s[r]*=1-t-i,s[r]+=t;return s}function zt(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(t,i,s),n=Math.min(t,i,s),o=(r+n)/2;let a,l,c;return r!==n&&(c=r-n,l=o>.5?c/(2-r-n):c/(r+n),a=function(e,t,i,s,r){return e===r?(t-i)/s+(t<i?6:0):t===r?(i-e)/s+2:(e-t)/s+4}(t,i,s,c,r),a=60*a+.5),[0|a,l||0,o]}function Ft(e,t,i,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,s)).map(Et)}function Ht(e,t,i){return Ft(Ot,e,t,i)}function $t(e){return(e%360+360)%360}function Wt(e){const t=Nt.exec(e);let i,s=255;if(!t)return;t[5]!==i&&(s=t[6]?kt(+t[5]):Et(+t[5]));const r=$t(+t[2]),n=+t[3]/100,o=+t[4]/100;return i="hwb"===t[1]?function(e,t,i){return Ft(Bt,e,t,i)}(r,n,o):"hsv"===t[1]?function(e,t,i){return Ft(It,e,t,i)}(r,n,o):Ht(r,n,o),{r:i[0],g:i[1],b:i[2],a:s}}const Ut={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let qt;function Kt(e){qt||(qt=function(){const e={},t=Object.keys(Vt),i=Object.keys(Ut);let s,r,n,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],r=0;r<i.length;r++)n=i[r],a=a.replace(n,Ut[n]);n=parseInt(Vt[o],16),e[a]=[n>>16&255,n>>8&255,255&n]}return e}(),qt.transparent=[0,0,0,0]);const t=qt[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Yt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Gt=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Xt=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Qt(e,t,i){if(e){let s=zt(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*i,0===t?360:1)),s=Ht(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function Jt(e,t){return e?Object.assign(t||{},e):e}function Zt(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Et(e[3]))):(t=Jt(e,{r:0,g:0,b:0,a:1})).a=Et(t.a),t}function ei(e){return"r"===e.charAt(0)?function(e){const t=Yt.exec(e);let i,s,r,n=255;if(t){if(t[7]!==i){const e=+t[7];n=t[8]?kt(e):Ct(255*e,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?kt(i):Ct(i,0,255)),s=255&(t[4]?kt(s):Ct(s,0,255)),r=255&(t[6]?kt(r):Ct(r,0,255)),{r:i,g:s,b:r,a:n}}}(e):Wt(e)}class ti{constructor(e){if(e instanceof ti)return e;const t=typeof e;let i;var s,r,n;"object"===t?i=Zt(e):"string"===t&&(n=(s=e).length,"#"===s[0]&&(4===n||5===n?r={r:255&17*Dt[s[1]],g:255&17*Dt[s[2]],b:255&17*Dt[s[3]],a:5===n?17*Dt[s[4]]:255}:7!==n&&9!==n||(r={r:Dt[s[1]]<<4|Dt[s[2]],g:Dt[s[3]]<<4|Dt[s[4]],b:Dt[s[5]]<<4|Dt[s[6]],a:9===n?Dt[s[7]]<<4|Dt[s[8]]:255})),i=r||Kt(e)||ei(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Jt(this._rgb);return e&&(e.a=jt(e.a)),e}set rgb(e){this._rgb=Zt(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${jt(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?Pt(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=zt(e),i=t[0],s=Lt(t[1]),r=Lt(t[2]);return e.a<255?`hsla(${i}, ${s}%, ${r}%, ${jt(e.a)})`:`hsl(${i}, ${s}%, ${r}%)`}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const n=t===r?.5:t,o=2*n-1,a=i.a-s.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,i.r=255&l*i.r+r*s.r+.5,i.g=255&l*i.g+r*s.g+.5,i.b=255&l*i.b+r*s.b+.5,i.a=n*i.a+(1-n)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,i){const s=Xt(jt(e.r)),r=Xt(jt(e.g)),n=Xt(jt(e.b));return{r:Et(Gt(s+i*(Xt(jt(t.r))-s))),g:Et(Gt(r+i*(Xt(jt(t.g))-r))),b:Et(Gt(n+i*(Xt(jt(t.b))-n))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new ti(this.rgb)}alpha(e){return this._rgb.a=Et(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=wt(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Qt(this._rgb,2,e),this}darken(e){return Qt(this._rgb,2,-e),this}saturate(e){return Qt(this._rgb,1,e),this}desaturate(e){return Qt(this._rgb,1,-e),this}rotate(e){return function(e,t){var i=zt(e);i[0]=$t(i[0]+t),i=Ht(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ii(){}const si=(()=>{let e=0;return()=>e++})();function ri(e){return null==e}function ni(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function oi(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ai(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function li(e,t){return ai(e)?e:t}function ci(e,t){return void 0===e?t:e}const hi=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function di(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function ui(e,t,i,s){let r,n,o;if(ni(e))for(n=e.length,r=0;r<n;r++)t.call(i,e[r],r);else if(oi(e))for(o=Object.keys(e),n=o.length,r=0;r<n;r++)t.call(i,e[o[r]],o[r])}function fi(e,t){let i,s,r,n;if(!e||!t||e.length!==t.length)return!1;for(i=0,s=e.length;i<s;++i)if(r=e[i],n=t[i],r.datasetIndex!==n.datasetIndex||r.index!==n.index)return!1;return!0}function pi(e){if(ni(e))return e.map(pi);if(oi(e)){const t=Object.create(null),i=Object.keys(e),s=i.length;let r=0;for(;r<s;++r)t[i[r]]=pi(e[i[r]]);return t}return e}function gi(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function mi(e,t,i,s){if(!gi(e))return;const r=t[e],n=i[e];oi(r)&&oi(n)?vi(r,n,s):t[e]=pi(n)}function vi(e,t,i){const s=ni(t)?t:[t],r=s.length;if(!oi(e))return e;const n=(i=i||{}).merger||mi;let o;for(let a=0;a<r;++a){if(o=s[a],!oi(o))continue;const t=Object.keys(o);for(let s=0,r=t.length;s<r;++s)n(t[s],e,o,i)}return e}function _i(e,t){return vi(e,t,{merger:bi})}function bi(e,t,i){if(!gi(e))return;const s=t[e],r=i[e];oi(s)&&oi(r)?_i(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=pi(r))}const yi={"":e=>e,x:e=>e.x,y:e=>e.y};function xi(e,t){const i=yi[t]||(yi[t]=function(e){const t=function(e){const t=e.split("."),i=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}(e);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t));return i(e)}function Si(e){return e.charAt(0).toUpperCase()+e.slice(1)}const wi=e=>void 0!==e,Ci=e=>"function"==typeof e,ki=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};const Ei=Math.PI,ji=2*Ei,Li=Number.POSITIVE_INFINITY,Di=Ei/180,Mi=Ei/2,Ai=Ei/4,Ti=2*Ei/3,Ri=Math.sign;function Pi(e){return!function(e){return"symbol"==typeof e||"object"==typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ni(e){return e*(Ei/180)}function Oi(e,t){const i=t.x-e.x,s=t.y-e.y,r=Math.sqrt(i*i+s*s);let n=Math.atan2(s,i);return n<-.5*Ei&&(n+=ji),{angle:n,distance:r}}function Ii(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Bi(e){return(e%ji+ji)%ji}function zi(e,t,i,s){const r=Bi(e),n=Bi(t),o=Bi(i),a=Bi(n-r),l=Bi(o-r),c=Bi(r-n),h=Bi(r-o);return r===n||r===o||s&&n===o||a>l&&c<h}function Fi(e,t,i){return Math.max(t,Math.min(i,e))}function Hi(e,t,i,s=1e-6){return e>=Math.min(t,i)-s&&e<=Math.max(t,i)+s}function $i(e,t,i){i=i||(i=>e[i]<t);let s,r=e.length-1,n=0;for(;r-n>1;)s=n+r>>1,i(s)?n=s:r=s;return{lo:n,hi:r}}const Wi=(e,t,i,s)=>$i(e,i,s?s=>{const r=e[s][t];return r<i||r===i&&e[s+1][t]===i}:s=>e[s][t]<i),Ui=(e,t,i)=>$i(e,i,s=>e[s][t]>=i);const Vi=["push","pop","shift","splice","unshift"];function qi(e,t){const i=e._chartjs;if(!i)return;const s=i.listeners,r=s.indexOf(t);-1!==r&&s.splice(r,1),s.length>0||(Vi.forEach(t=>{delete e[t]}),delete e._chartjs)}const Ki="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function Yi(e,t){let i=[],s=!1;return function(...r){i=r,s||(s=!0,Ki.call(window,()=>{s=!1,e.apply(t,i)}))}}const Gi=e=>"start"===e?"left":"end"===e?"right":"center",Xi=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2,Qi=e=>0===e||1===e,Ji=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ji/i),Zi=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*ji/i)+1,es={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Mi),easeOutSine:e=>Math.sin(e*Mi),easeInOutSine:e=>-.5*(Math.cos(Ei*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Qi(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Qi(e)?e:Ji(e,.075,.3),easeOutElastic:e=>Qi(e)?e:Zi(e,.075,.3),easeInOutElastic(e){const t=.1125;return Qi(e)?e:e<.5?.5*Ji(2*e,t,.45):.5+.5*Zi(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-es.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*es.easeInBounce(2*e):.5*es.easeOutBounce(2*e-1)+.5};function ts(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function is(e){return ts(e)?e:new ti(e)}function ss(e){return ts(e)?e:new ti(e).saturate(.5).darken(.1).hexString()}const rs=["x","y","borderWidth","radius","tension"],ns=["color","borderColor","backgroundColor"];const os=new Map;function as(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let s=os.get(i);return s||(s=new Intl.NumberFormat(e,t),os.set(i,s)),s}(t,i).format(e)}var ls={formatters:{values:e=>ni(e)?e:""+e}};const cs=Object.create(null),hs=Object.create(null);function ds(e,t){if(!t)return e;const i=t.split(".");for(let s=0,r=i.length;s<r;++s){const t=i[s];e=e[t]||(e[t]=Object.create(null))}return e}function us(e,t,i){return"string"==typeof t?vi(ds(e,t),i):vi(ds(e,""),t)}class fs{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>ss(t.backgroundColor),this.hoverBorderColor=(e,t)=>ss(t.borderColor),this.hoverColor=(e,t)=>ss(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return us(this,e,t)}get(e){return ds(this,e)}describe(e,t){return us(hs,e,t)}override(e,t){return us(cs,e,t)}route(e,t,i,s){const r=ds(this,e),n=ds(this,i),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=n[s];return oi(e)?Object.assign({},t,e):ci(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}var ps=new fs({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:ns},numbers:{type:"number",properties:rs}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ls.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function gs(e,t,i,s,r){let n=t[r];return n||(n=t[r]=e.measureText(r).width,i.push(r)),n>s&&(s=n),s}function ms(e,t,i){const s=e.currentDevicePixelRatio,r=0!==i?Math.max(i/2,.5):0;return Math.round((t-r)*s)/s+r}function vs(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function _s(e,t,i,s){bs(e,t,i,s,null)}function bs(e,t,i,s,r){let n,o,a,l,c,h,d,u;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*Di;if(f&&"object"==typeof f&&(n=f.toString(),"[object HTMLImageElement]"===n||"[object HTMLCanvasElement]"===n))return e.save(),e.translate(i,s),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(i,s,r/2,g,0,0,ji):e.arc(i,s,g,0,ji),e.closePath();break;case"triangle":h=r?r/2:g,e.moveTo(i+Math.sin(m)*h,s-Math.cos(m)*g),m+=Ti,e.lineTo(i+Math.sin(m)*h,s-Math.cos(m)*g),m+=Ti,e.lineTo(i+Math.sin(m)*h,s-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+Ai)*l,d=Math.cos(m+Ai)*(r?r/2-c:l),a=Math.sin(m+Ai)*l,u=Math.sin(m+Ai)*(r?r/2-c:l),e.arc(i-d,s-a,c,m-Ei,m-Mi),e.arc(i+u,s-o,c,m-Mi,m),e.arc(i+d,s+a,c,m,m+Mi),e.arc(i-u,s+o,c,m+Mi,m+Ei),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=r?r/2:l,e.rect(i-h,s-l,2*h,2*l);break}m+=Ai;case"rectRot":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),e.moveTo(i-d,s-a),e.lineTo(i+u,s-o),e.lineTo(i+d,s+a),e.lineTo(i-u,s+o),e.closePath();break;case"crossRot":m+=Ai;case"cross":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),e.moveTo(i-d,s-a),e.lineTo(i+d,s+a),e.moveTo(i+u,s-o),e.lineTo(i-u,s+o);break;case"star":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),e.moveTo(i-d,s-a),e.lineTo(i+d,s+a),e.moveTo(i+u,s-o),e.lineTo(i-u,s+o),m+=Ai,d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),e.moveTo(i-d,s-a),e.lineTo(i+d,s+a),e.moveTo(i+u,s-o),e.lineTo(i-u,s+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(i-o,s-a),e.lineTo(i+o,s+a);break;case"dash":e.moveTo(i,s),e.lineTo(i+Math.cos(m)*(r?r/2:g),s+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function ys(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function xs(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Ss(e){e.restore()}function ws(e,t,i,s,r){if(r.strikethrough||r.underline){const n=e.measureText(s),o=t-n.actualBoundingBoxLeft,a=t+n.actualBoundingBoxRight,l=i-n.actualBoundingBoxAscent,c=i+n.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function Cs(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function ks(e,t,i,s,r,n={}){const o=ni(t)?t:[t],a=n.strokeWidth>0&&""!==n.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ri(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,n),l=0;l<o.length;++l)c=o[l],n.backdrop&&Cs(e,n.backdrop),a&&(n.strokeColor&&(e.strokeStyle=n.strokeColor),ri(n.strokeWidth)||(e.lineWidth=n.strokeWidth),e.strokeText(c,i,s,n.maxWidth)),e.fillText(c,i,s,n.maxWidth),ws(e,i,s,c,n),s+=Number(r.lineHeight);e.restore()}function Es(e,t){const{x:i,y:s,w:r,h:n,radius:o}=t;e.arc(i+o.topLeft,s+o.topLeft,o.topLeft,1.5*Ei,Ei,!0),e.lineTo(i,s+n-o.bottomLeft),e.arc(i+o.bottomLeft,s+n-o.bottomLeft,o.bottomLeft,Ei,Mi,!0),e.lineTo(i+r-o.bottomRight,s+n),e.arc(i+r-o.bottomRight,s+n-o.bottomRight,o.bottomRight,Mi,0,!0),e.lineTo(i+r,s+o.topRight),e.arc(i+r-o.topRight,s+o.topRight,o.topRight,0,-Mi,!0),e.lineTo(i+o.topLeft,s)}const js=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ls=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ds(e,t){const i=(""+e).match(js);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}const Ms=e=>+e||0;function As(e,t){const i={},s=oi(t),r=s?Object.keys(t):t,n=oi(e)?s?i=>ci(e[i],e[t[i]]):t=>e[t]:()=>e;for(const o of r)i[o]=Ms(n(o));return i}function Ts(e){return As(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Rs(e){const t=function(e){return As(e,{top:"y",right:"x",bottom:"y",left:"x"})}(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ps(e,t){e=e||{},t=t||ps.font;let i=ci(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let s=ci(e.style,t.style);s&&!(""+s).match(Ls)&&(s=void 0);const r={family:ci(e.family,t.family),lineHeight:Ds(ci(e.lineHeight,t.lineHeight),i),size:i,style:s,weight:ci(e.weight,t.weight),string:""};return r.string=function(e){return!e||ri(e.size)||ri(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Ns(e,t,i,s){let r,n,o;for(r=0,n=e.length;r<n;++r)if(o=e[r],void 0!==o&&void 0!==o)return o}function Os(e,t){return Object.assign(Object.create(e),t)}function Is(e,t=[""],i,s,r=()=>e[0]){const n=i||e;void 0===s&&(s=Ys("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:s,_getTarget:r,override:i=>Is([i,...e],t,n,s)};return new Proxy(o,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,s)=>$s(i,s,()=>function(e,t,i,s){let r;for(const n of t)if(r=Ys(Fs(n,e),i),void 0!==r)return Hs(e,r)?qs(i,s,e,r):r}(s,t,e,i)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Gs(e).includes(t),ownKeys:e=>Gs(e),set(e,t,i){const s=e._storage||(e._storage=r());return e[t]=s[t]=i,delete e._keys,!0}})}function Bs(e,t,i,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:zs(e,s),setContext:t=>Bs(e,t,i,s),override:r=>Bs(e.override(r),t,i,s)};return new Proxy(r,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>$s(e,t,()=>function(e,t,i){const{_proxy:s,_context:r,_subProxy:n,_descriptors:o}=e;let a=s[t];Ci(a)&&o.isScriptable(t)&&(a=function(e,t,i,s){const{_proxy:r,_context:n,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(n,o||s);a.delete(e),Hs(e,l)&&(l=qs(r._scopes,r,e,l));return l}(t,a,e,i));ni(a)&&a.length&&(a=function(e,t,i,s){const{_proxy:r,_context:n,_subProxy:o,_descriptors:a}=i;if(void 0!==n.index&&s(e))return t[n.index%t.length];if(oi(t[0])){const i=t,s=r._scopes.filter(e=>e!==i);t=[];for(const l of i){const i=qs(s,r,e,l);t.push(Bs(i,n,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));Hs(t,a)&&(a=Bs(a,r,n&&n[t],o));return a}(e,t,i)),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,s)=>(e[i]=s,delete t[i],!0)})}function zs(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:i,indexable:s,isScriptable:Ci(i)?i:()=>i,isIndexable:Ci(s)?s:()=>s}}const Fs=(e,t)=>e?e+Si(t):t,Hs=(e,t)=>oi(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function $s(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const s=i();return e[t]=s,s}function Ws(e,t,i){return Ci(e)?e(t,i):e}const Us=(e,t)=>!0===e?t:"string"==typeof e?xi(t,e):void 0;function Vs(e,t,i,s,r){for(const n of t){const t=Us(i,n);if(t){e.add(t);const n=Ws(t._fallback,i,r);if(void 0!==n&&n!==i&&n!==s)return n}else if(!1===t&&void 0!==s&&i!==s)return null}return!1}function qs(e,t,i,s){const r=t._rootScopes,n=Ws(t._fallback,i,s),o=[...e,...r],a=new Set;a.add(s);let l=Ks(a,o,i,n||i,s);return null!==l&&((void 0===n||n===i||(l=Ks(a,o,n,l,s),null!==l))&&Is(Array.from(a),[""],r,n,()=>function(e,t,i){const s=e._getTarget();t in s||(s[t]={});const r=s[t];if(ni(r)&&oi(i))return i;return r||{}}(t,i,s)))}function Ks(e,t,i,s,r){for(;i;)i=Vs(e,t,i,s,r);return i}function Ys(e,t){for(const i of t){if(!i)continue;const t=i[e];if(void 0!==t)return t}}function Gs(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Xs(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Qs(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Js(e,t,i){let s;return"string"==typeof e?(s=parseInt(e,10),-1!==e.indexOf("%")&&(s=s/100*t.parentNode[i])):s=e,s}const Zs=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const er=["top","right","bottom","left"];function tr(e,t,i){const s={};i=i?"-"+i:"";for(let r=0;r<4;r++){const n=er[r];s[n]=parseFloat(e[t+"-"+n+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function ir(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:s}=t,r=Zs(i),n="border-box"===r.boxSizing,o=tr(r,"padding"),a=tr(r,"border","width"),{x:l,y:c,box:h}=function(e,t){const i=e.touches,s=i&&i.length?i[0]:e,{offsetX:r,offsetY:n}=s;let o,a,l=!1;if(((e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot))(r,n,e.target))o=r,a=n;else{const e=t.getBoundingClientRect();o=s.clientX-e.left,a=s.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,i),d=o.left+(h&&a.left),u=o.top+(h&&a.top);let{width:f,height:p}=t;return n&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*i.width/s),y:Math.round((c-u)/p*i.height/s)}}const sr=e=>Math.round(10*e)/10;function rr(e,t,i,s){const r=Zs(e),n=tr(r,"margin"),o=Js(r.maxWidth,e,"clientWidth")||Li,a=Js(r.maxHeight,e,"clientHeight")||Li,l=function(e,t,i){let s,r;if(void 0===t||void 0===i){const n=e&&Qs(e);if(n){const e=n.getBoundingClientRect(),o=Zs(n),a=tr(o,"border","width"),l=tr(o,"padding");t=e.width-l.width-a.width,i=e.height-l.height-a.height,s=Js(o.maxWidth,n,"clientWidth"),r=Js(o.maxHeight,n,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:s||Li,maxHeight:r||Li}}(e,t,i);let{width:c,height:h}=l;if("content-box"===r.boxSizing){const e=tr(r,"border","width"),t=tr(r,"padding");c-=t.width+e.width,h-=t.height+e.height}c=Math.max(0,c-n.width),h=Math.max(0,s?c/s:h-n.height),c=sr(Math.min(c,o,l.maxWidth)),h=sr(Math.min(h,a,l.maxHeight)),c&&!h&&(h=sr(c/2));return(void 0!==t||void 0!==i)&&s&&l.height&&h>l.height&&(h=l.height,c=sr(Math.floor(h*s))),{width:c,height:h}}function nr(e,t,i){const s=t||1,r=Math.floor(e.height*s),n=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==s||o.height!==r||o.width!==n)&&(e.currentDevicePixelRatio=s,o.height=r,o.width=n,e.ctx.setTransform(s,0,0,s,0,0),!0)}const or=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Xs()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Ko){}return e}();function ar(e,t){const i=function(e,t){return Zs(e).getPropertyValue(t)}(e,t),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function lr(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function cr(e,t){let i,s;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=s)}function hr(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function dr(e,t,i){return e.options.clip?e[i]:t[i]}function ur(e,t){const i=t._clip;if(i.disabled)return!1;const s=function(e,t){const{xScale:i,yScale:s}=e;return i&&s?{left:dr(i,t,"left"),right:dr(i,t,"right"),top:dr(s,t,"top"),bottom:dr(s,t,"bottom")}:t}(t,e.chartArea);return{left:!1===i.left?0:s.left-(!0===i.left?0:i.left),right:!1===i.right?e.width:s.right+(!0===i.right?0:i.right),top:!1===i.top?0:s.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?e.height:s.bottom+(!0===i.bottom?0:i.bottom)}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class fr{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],n=t.duration;r.forEach(s=>s({chart:e,initial:t.initial,numSteps:n,currentStep:Math.min(i-t.start,n)}))}_refresh(){this._request||(this._running=!0,this._request=Ki.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let n,o=r.length-1,a=!1;for(;o>=0;--o)n=r[o],n._active?(n._total>i.duration&&(i.duration=n._total),n.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var pr=new fr;const gr="transparent",mr={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const s=is(e||gr),r=s.valid&&is(t||gr);return r&&r.valid?r.mix(s,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class vr{constructor(e,t,i,s){const r=t[i];s=Ns([e.to,s,r,e.from]);const n=Ns([e.from,r,s]);this._active=!0,this._fn=e.fn||mr[e.type||typeof n],this._easing=es[e.easing]||es.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=n,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,n=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(n,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ns([e.to,t,s,e.from]),this._from=Ns([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,n=this._loop,o=this._to;let a;if(this._active=r!==o&&(n||t<i),!this._active)return this._target[s]=o,void this._notify(!0);t<0?this._target[s]=r:(a=t/i%2,a=n&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[s]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class _r{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!oi(e))return;const t=Object.keys(ps.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!oi(r))return;const n={};for(const e of t)n[e]=r[e];(ni(r.properties)&&r.properties||[s]).forEach(e=>{e!==s&&i.has(e)||i.set(e,n)})})}_animateOptions(e,t){const i=t.options,s=function(e,t){if(!t)return;let i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&function(e,t){const i=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const t=e[s[r]];t&&t.active()&&i.push(t.wait())}return Promise.all(i)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),n=Object.keys(t),o=Date.now();let a;for(a=n.length-1;a>=0;--a){const l=n[a];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(e,t));continue}const c=t[l];let h=r[l];const d=i.get(l);if(h){if(d&&h.active()){h.update(d,c,o);continue}h.cancel()}d&&d.duration?(r[l]=h=new vr(d,e,l,c),s.push(h)):e[l]=c}return s}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(pr.add(this._chart,i),!0):void 0}}function br(e,t){const i=e&&e.options||{},s=i.reverse,r=void 0===i.min?t:0,n=void 0===i.max?t:0;return{start:s?n:r,end:s?r:n}}function yr(e,t){const i=[],s=e._getSortedDatasetMetas(t);let r,n;for(r=0,n=s.length;r<n;++r)i.push(s[r].index);return i}function xr(e,t,i,s={}){const r=e.keys,n="single"===s.mode;let o,a,l,c;if(null===t)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===i){if(h=!0,s.all)continue;break}c=e.values[l],ai(c)&&(n||0===t||Ri(t)===Ri(c))&&(t+=c)}return h||s.all?t:0}function Sr(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function wr(e,t,i){const s=e[t]||(e[t]={});return s[i]||(s[i]={})}function Cr(e,t,i,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const t=e[r.index];if(i&&t>0||!i&&t<0)return r.index}return null}function kr(e,t){const{chart:i,_cachedMeta:s}=e,r=i._stacks||(i._stacks={}),{iScale:n,vScale:o,index:a}=s,l=n.axis,c=o.axis,h=function(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}(n,o,s),d=t.length;let u;for(let f=0;f<d;++f){const e=t[f],{[l]:i,[c]:n}=e;u=(e._stacks||(e._stacks={}))[c]=wr(r,h,i),u[a]=n,u._top=Cr(u,o,!0,s.type),u._bottom=Cr(u,o,!1,s.type);(u._visualValues||(u._visualValues={}))[a]=n}}function Er(e,t){const i=e.scales;return Object.keys(i).filter(e=>i[e].axis===t).shift()}function jr(e,t){const i=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[s]||void 0===t[s][i])return;delete t[s][i],void 0!==t[s]._visualValues&&void 0!==t[s]._visualValues[i]&&delete t[s]._visualValues[i]}}}const Lr=e=>"reset"===e||"none"===e,Dr=(e,t)=>t?e:Object.assign({},e);class Mr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Sr(e.vScale,e),this.addElements(),this.options.fill&&this.chart.isPluginEnabled("filler")}updateIndex(e){this.index!==e&&jr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(e,t,i,s)=>"x"===e?t:"r"===e?s:i,r=t.xAxisID=ci(i.xAxisID,Er(e,"x")),n=t.yAxisID=ci(i.yAxisID,Er(e,"y")),o=t.rAxisID=ci(i.rAxisID,Er(e,"r")),a=t.indexAxis,l=t.iAxisID=s(a,r,n,o),c=t.vAxisID=s(a,n,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(n),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&qi(this._data,this),e._stacked&&jr(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(oi(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:i,vScale:s}=t,r="x"===i.axis?"x":"y",n="x"===s.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[n]:e[h]};return a}(t,e)}else if(i!==t){if(i){qi(i,this);const e=this._cachedMeta;jr(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(s=t)._chartjs?s._chartjs.listeners.push(r):(Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Vi.forEach(e=>{const t="_onData"+Si(e),i=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(...e){const r=i.apply(this,e);return s._chartjs.listeners.forEach(i=>{"function"==typeof i[t]&&i[t](...e)}),r}})}))),this._syncList=[],this._data=t}var s,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=Sr(t.vScale,t),t.stack!==i.stack&&(s=!0,jr(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&(kr(this,t._parsed),t._stacked=Sr(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:n}=i,o=r.axis;let a,l,c,h=0===e&&t===s.length||i._sorted,d=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,c=s;else{c=ni(s[e])?this.parseArrayData(i,s,e,t):oi(s[e])?this.parseObjectData(i,s,e,t):this.parsePrimitiveData(i,s,e,t);const r=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<t;++a)i._parsed[a+e]=l=c[a],h&&(r()&&(h=!1),d=l);i._sorted=h}n&&kr(this,c)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:n}=e,o=r.axis,a=n.axis,l=r.getLabels(),c=r===n,h=new Array(s);let d,u,f;for(d=0,u=s;d<u;++d)f=d+i,h[d]={[o]:c||r.parse(l[f],f),[a]:n.parse(t[f],f)};return h}parseArrayData(e,t,i,s){const{xScale:r,yScale:n}=e,o=new Array(s);let a,l,c,h;for(a=0,l=s;a<l;++a)c=a+i,h=t[c],o[a]={x:r.parse(h[0],c),y:n.parse(h[1],c)};return o}parseObjectData(e,t,i,s){const{xScale:r,yScale:n}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(s);let c,h,d,u;for(c=0,h=s;c<h;++c)d=c+i,u=t[d],l[c]={x:r.parse(xi(u,o),d),y:n.parse(xi(u,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,n=t[e.axis];return xr({keys:yr(s,!0),values:t._stacks[e.axis]._visualValues},n,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let n=null===r?NaN:r;const o=s&&i._stacks[t.axis];s&&o&&(s.values=o,n=xr(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,n),e.max=Math.max(e.max,n)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,n=s.length,o=this._getOtherScale(e),a=((e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:yr(i,!0),values:null})(t,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=function(e){const{min:t,max:i,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?i:Number.POSITIVE_INFINITY}}(o);let d,u;function f(){u=s[d];const t=u[o.axis];return!ai(u[e.axis])||c>t||h<t}for(d=0;d<n&&(f()||(this.updateRangeFromParsed(l,e,u,a),!r));++d);if(r)for(d=n-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,u,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,n;for(s=0,r=t.length;s<r;++s)n=t[s][e.axis],ai(n)&&i.push(n);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,i,s,r;return oi(e)?(t=e.top,i=e.right,s=e.bottom,r=e.left):t=i=s=r=e,{top:t,right:i,bottom:s,left:r,disabled:!1===e}}(ci(this.options.clip,function(e,t,i){if(!1===i)return!1;const s=br(e,i),r=br(t,i);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,n=[],o=this._drawStart||0,a=this._drawCount||s.length-o,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(e,r,o,a),c=o;c<o+a;++c){const t=s[c];t.hidden||(t.active&&l?n.push(t):t.draw(e,r))}for(c=0;c<n.length;++c)n[c].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,i){return Os(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Os(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s="active"===t,r=this._cachedDataOpts,n=e+"-"+t,o=r[n],a=this.enableOptionSharing&&wi(i);if(o)return Dr(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),u=Object.keys(ps.elements[e]),f=l.resolveNamedOptions(d,u,()=>this.getContext(i,s,t),h);return f.$shared&&(f.$shared=a,r[n]=Object.freeze(Dr(f,a))),f}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,n=`animation-${t}`,o=r[n];if(o)return o;let a;if(!1!==s.options.animation){const s=this.chart.config,r=s.datasetAnimationScopeKeys(this._type,t),n=s.getOptionScopes(this.getDataset(),r);a=s.createResolver(n,this.getContext(e,i,t))}const l=new _r(s,a&&a.animations);return a&&a._cacheable&&(r[n]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Lr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),n=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:n}}updateElement(e,t,i,s){Lr(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!Lr(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const s=i.length,r=t.length,n=Math.min(r,s);n&&this.parse(0,n),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,n=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=n;o--)e[o]=e[o-t]};for(a(r),o=e;o<n;++o)r[o]=new this.dataElementType;this._parsing&&a(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&jr(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Ar extends Mr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((t,r)=>{const n=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,fontColor:s,lineWidth:n.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let r,n,o=e=>+i[e];if(oi(i[e])){const{key:e="value"}=this._parsing;o=t=>+xi(i[t],e)}for(r=e,n=e+t;r<n;++r)s._parsed[r]=o(r)}}_getRotation(){return Ni(this.options.rotation-90)}_getCircumference(){return Ni(this.options.circumference)}_getRotationExtents(){let e=ji,t=-ji;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),n=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+n)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,n=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-n)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const h=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,i){let s=1,r=1,n=0,o=0;if(t<ji){const a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),u=Math.sin(l),f=(e,t,s)=>zi(e,a,l,!0)?1:Math.max(t,t*i,s,s*i),p=(e,t,s)=>zi(e,a,l,!0)?-1:Math.min(t,t*i,s,s*i),g=f(0,c,d),m=f(Mi,h,u),v=p(Ei,c,d),_=p(Ei+Mi,h,u);s=(g-v)/2,r=(m-_)/2,n=-(g+v)/2,o=-(m+_)/2}return{ratioX:s,ratioY:r,offsetX:n,offsetY:o}}(u,d,a),v=(i.width-n)/f,_=(i.height-n)/p,b=Math.max(Math.min(v,_)/2,0),y=hi(this.options.radius,b),x=(y-Math.max(y*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*y,this.offsetY=m*y,s.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/ji)}updateElements(e,t,i,s){const r="reset"===s,n=this.chart,o=n.chartArea,a=n.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,h=r&&a.animateScale,d=h?0:this.innerRadius,u=h?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,s);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+i;++g){const t=this._circumference(g,r),i=e[g],n={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:u,innerRadius:d};p&&(n.options=f||this.resolveDataElementOptions(g,i.active?"active":s)),m+=t,this.updateElement(i,g,n,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,s=0;for(i=0;i<t.length;i++){const r=e._parsed[i];null===r||isNaN(r)||!this.chart.getDataVisibility(i)||t[i].hidden||(s+=Math.abs(r))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ji*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=as(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,n,o,a;if(!e)for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){n=i.getDatasetMeta(s),e=n.data,o=n.controller;break}if(!e)return 0;for(s=0,r=e.length;s<r;++s)a=o.resolveDataElementOptions(s),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(ci(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Tr(e,t,i,s){const{controller:r,data:n,_sorted:o}=e,a=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&o&&n.length){const o=a._reversePixels?Ui:Wi;if(!s){const s=o(n,t,i);if(l){const{vScale:t}=r._cachedMeta,{_parsed:i}=e,n=i.slice(0,s.lo+1).reverse().findIndex(e=>!ri(e[t.axis]));s.lo-=Math.max(0,n);const o=i.slice(s.hi).findIndex(e=>!ri(e[t.axis]));s.hi+=Math.max(0,o)}return s}if(r._sharedOptions){const e=n[0],s="function"==typeof e.getRange&&e.getRange(t);if(s){const e=o(n,t,i-s),r=o(n,t,i+s);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:n.length-1}}function Rr(e,t,i,s,r){const n=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=n.length;a<l;++a){const{index:e,data:i}=n[a],{lo:l,hi:c}=Tr(n[a],t,o,r);for(let t=l;t<=c;++t){const r=i[t];r.skip||s(r,e,t)}}}function Pr(e,t,i,s,r){const n=[];if(!r&&!e.isPointInArea(t))return n;return Rr(e,i,t,function(i,o,a){(r||ys(i,e.chartArea,0))&&i.inRange(t.x,t.y,s)&&n.push({element:i,datasetIndex:o,index:a})},!0),n}function Nr(e,t,i,s,r,n){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,s){const r=t?Math.abs(e.x-s.x):0,n=i?Math.abs(e.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(n,2))}}(i);let l=Number.POSITIVE_INFINITY;return Rr(e,i,t,function(i,c,h){const d=i.inRange(t.x,t.y,r);if(s&&!d)return;const u=i.getCenterPoint(r);if(!(!!n||e.isPointInArea(u))&&!d)return;const f=a(t,u);f<l?(o=[{element:i,datasetIndex:c,index:h}],l=f):f===l&&o.push({element:i,datasetIndex:c,index:h})}),o}function Or(e,t,i,s,r,n){return n||e.isPointInArea(t)?"r"!==i||s?Nr(e,t,i,s,r,n):function(e,t,i,s){let r=[];return Rr(e,i,t,function(e,i,n){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],s),{angle:l}=Oi(e,{x:t.x,y:t.y});zi(l,o,a)&&r.push({element:e,datasetIndex:i,index:n})}),r}(e,t,i,r):[]}function Ir(e,t,i,s,r){const n=[],o="x"===i?"inXRange":"inYRange";let a=!1;return Rr(e,i,t,(e,s,l)=>{e[o]&&e[o](t[i],r)&&(n.push({element:e,datasetIndex:s,index:l}),a=a||e.inRange(t.x,t.y,r))}),s&&!a?[]:n}var Br={modes:{index(e,t,i,s){const r=ir(t,e),n=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?Pr(e,r,n,s,o):Or(e,r,n,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=a[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,i,s){const r=ir(t,e),n=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?Pr(e,r,n,s,o):Or(e,r,n,!1,s,o);if(a.length>0){const t=a[0].datasetIndex,i=e.getDatasetMeta(t).data;a=[];for(let e=0;e<i.length;++e)a.push({element:i[e],datasetIndex:t,index:e})}return a},point:(e,t,i,s)=>Pr(e,ir(t,e),i.axis||"xy",s,i.includeInvisible||!1),nearest(e,t,i,s){const r=ir(t,e),n=i.axis||"xy",o=i.includeInvisible||!1;return Or(e,r,n,i.intersect,s,o)},x:(e,t,i,s)=>Ir(e,ir(t,e),"x",i.intersect,s),y:(e,t,i,s)=>Ir(e,ir(t,e),"y",i.intersect,s)}};const zr=["left","top","right","bottom"];function Fr(e,t){return e.filter(e=>e.pos===t)}function Hr(e,t){return e.filter(e=>-1===zr.indexOf(e.pos)&&e.box.axis===t)}function $r(e,t){return e.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Wr(e,t){const i=function(e){const t={};for(const i of e){const{stack:e,pos:s,stackWeight:r}=i;if(!e||!zr.includes(s))continue;const n=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});n.count++,n.weight+=r}return t}(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let n,o,a;for(n=0,o=e.length;n<o;++n){a=e[n];const{fullSize:o}=a.box,l=i[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*s:o&&t.availableWidth,a.height=r):(a.width=s,a.height=c?c*r:o&&t.availableHeight)}return i}function Ur(e,t,i,s){return Math.max(e[i],t[i])+Math.max(e[s],t[s])}function Vr(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function qr(e,t,i,s){const{pos:r,box:n}=i,o=e.maxPadding;if(!oi(r)){i.size&&(e[r]-=i.size);const t=s[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?n.height:n.width),i.size=t.size/t.count,e[r]+=i.size}n.getPadding&&Vr(o,n.getPadding());const a=Math.max(0,t.outerWidth-Ur(o,e,"left","right")),l=Math.max(0,t.outerHeight-Ur(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function Kr(e,t){const i=t.maxPadding;function s(e){const s={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{s[e]=Math.max(t[e],i[e])}),s}return s(e?["left","right"]:["top","bottom"])}function Yr(e,t,i,s){const r=[];let n,o,a,l,c,h;for(n=0,o=e.length,c=0;n<o;++n){a=e[n],l=a.box,l.update(a.width||t.w,a.height||t.h,Kr(a.horizontal,t));const{same:o,other:d}=qr(t,i,a,s);c|=o&&r.length,h=h||d,l.fullSize||r.push(a)}return c&&Yr(r,t,i,s)||h}function Gr(e,t,i,s,r){e.top=i,e.left=t,e.right=t+s,e.bottom=i+r,e.width=s,e.height=r}function Xr(e,t,i,s){const r=i.padding;let{x:n,y:o}=t;for(const a of e){const e=a.box,l=s[a.stack]||{placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const s=t.w*c,n=l.size||e.height;wi(l.start)&&(o=l.start),e.fullSize?Gr(e,r.left,o,i.outerWidth-r.right-r.left,n):Gr(e,t.left+l.placed,o,s,n),l.start=o,l.placed+=s,o=e.bottom}else{const s=t.h*c,o=l.size||e.width;wi(l.start)&&(n=l.start),e.fullSize?Gr(e,n,r.top,o,i.outerHeight-r.bottom-r.top):Gr(e,n,t.top+l.placed,o,s),l.start=n,l.placed+=s,n=e.right}}t.x=n,t.y=o}var Qr={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){if(!e)return;const r=Rs(e.options.layout.padding),n=Math.max(t-r.width,0),o=Math.max(i-r.height,0),a=function(e){const t=function(e){const t=[];let i,s,r,n,o,a;for(i=0,s=(e||[]).length;i<s;++i)r=e[i],({position:n,options:{stack:o,stackWeight:a=1}}=r),t.push({index:i,box:r,pos:n,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&n+o,stackWeight:a});return t}(e),i=$r(t.filter(e=>e.box.fullSize),!0),s=$r(Fr(t,"left"),!0),r=$r(Fr(t,"right")),n=$r(Fr(t,"top"),!0),o=$r(Fr(t,"bottom")),a=Hr(t,"x"),l=Hr(t,"y");return{fullSize:i,leftAndTop:s.concat(n),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Fr(t,"chartArea"),vertical:s.concat(r).concat(l),horizontal:n.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;ui(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});const h=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:i,padding:r,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/h,hBoxMaxHeight:o/2}),u=Object.assign({},r);Vr(u,Rs(s));const f=Object.assign({maxPadding:u,w:n,h:o,x:r.left,y:r.top},r),p=Wr(l.concat(c),d);Yr(a.fullSize,f,d,p),Yr(l,f,d,p),Yr(c,f,d,p)&&Yr(l,f,d,p),function(e){const t=e.maxPadding;function i(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(f),Xr(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Xr(a.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ui(a.chartArea,t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Jr{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class Zr extends Jr{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const en="$chartjs",tn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sn=e=>null===e||""===e;const rn=!!or&&{passive:!0};function nn(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,rn)}function on(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function an(e,t,i){const s=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const i of e)t=t||on(i.addedNodes,s),t=t&&!on(i.removedNodes,s);t&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}function ln(e,t,i){const s=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const i of e)t=t||on(i.removedNodes,s),t=t&&!on(i.addedNodes,s);t&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}const cn=new Map;let hn=0;function dn(){const e=window.devicePixelRatio;e!==hn&&(hn=e,cn.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function un(e,t,i){const s=e.canvas,r=s&&Qs(s);if(!r)return;const n=Yi((e,t)=>{const s=r.clientWidth;i(e,t),s<r.clientWidth&&i()},window),o=new ResizeObserver(e=>{const t=e[0],i=t.contentRect.width,s=t.contentRect.height;0===i&&0===s||n(i,s)});return o.observe(r),function(e,t){cn.size||window.addEventListener("resize",dn),cn.set(e,t)}(e,n),o}function fn(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){cn.delete(e),cn.size||window.removeEventListener("resize",dn)}(e)}function pn(e,t,i){const s=e.canvas,r=Yi(t=>{null!==e.ctx&&i(function(e,t){const i=tn[e.type]||e.type,{x:s,y:r}=ir(e,t);return{type:i,chart:t,native:e,x:void 0!==s?s:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,i){e&&e.addEventListener(t,i,rn)}(s,t,r),r}class gn extends Jr{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[en]={initial:{height:s,width:r,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",sn(r)){const t=ar(e,"width");void 0!==t&&(e.width=t)}if(sn(s))if(""===e.style.height)e.height=e.width/(t||2);else{const t=ar(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[en])return!1;const i=t[en].initial;["height","width"].forEach(e=>{const s=i[e];ri(s)?t.removeAttribute(e):t.setAttribute(e,s)});const s=i.style||{};return Object.keys(s).forEach(e=>{t.style[e]=s[e]}),t.width=t.width,delete t[en],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),r={attach:an,detach:ln,resize:un}[t]||pn;s[t]=r(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:fn,detach:fn,resize:fn}[t]||nn)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return rr(e,t,i,s)}isAttached(e){const t=e&&Qs(e);return!(!t||!t.isConnected)}}class mn{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Pi(this.x)&&Pi(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(e=>{s[e]=i[e]&&i[e].active()?i[e]._to:this[e]}),s}}function vn(e,t){const i=e.options.ticks,s=function(e){const t=e.options.offset,i=e._tickSize(),s=e._length/i+(t?0:1),r=e._maxLength/i;return Math.floor(Math.min(s,r))}(e),r=Math.min(i.maxTicksLimit||s,s),n=i.major.enabled?function(e){const t=[];let i,s;for(i=0,s=e.length;i<s;i++)e[i].major&&t.push(i);return t}(t):[],o=n.length,a=n[0],l=n[o-1],c=[];if(o>r)return function(e,t,i,s){let r,n=0,o=i[0];for(s=Math.ceil(s),r=0;r<e.length;r++)r===o&&(t.push(e[r]),n++,o=i[n*s])}(t,c,n,o/r),c;const h=function(e,t,i){const s=function(e){const t=e.length;let i,s;if(t<2)return!1;for(s=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==s)return!1;return s}(e),r=t.length/i;if(!s)return Math.max(r,1);const n=function(e){const t=[],i=Math.sqrt(e);let s;for(s=1;s<i;s++)e%s===0&&(t.push(s),t.push(e/s));return i===(0|i)&&t.push(i),t.sort((e,t)=>e-t).pop(),t}(s);for(let o=0,a=n.length-1;o<a;o++){const e=n[o];if(e>r)return e}return Math.max(r,1)}(n,t,r);if(o>0){let e,i;const s=o>1?Math.round((l-a)/(o-1)):null;for(_n(t,c,h,ri(s)?0:a-s,a),e=0,i=o-1;e<i;e++)_n(t,c,h,n[e],n[e+1]);return _n(t,c,h,l,ri(s)?t.length:l+s),c}return _n(t,c,h),c}function _n(e,t,i,s,r){const n=ci(s,0),o=Math.min(ci(r,e.length),e.length);let a,l,c,h=0;for(i=Math.ceil(i),r&&(a=r-s,i=a/Math.floor(a/i)),c=n;c<0;)h++,c=Math.round(n+h*i);for(l=Math.max(n,0);l<o;l++)l===c&&(t.push(e[l]),h++,c=Math.round(n+h*i))}const bn=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,yn=(e,t)=>Math.min(t||e,e);function xn(e,t){const i=[],s=e.length/t,r=e.length;let n=0;for(;n<r;n+=s)i.push(e[Math.floor(n)]);return i}function Sn(e,t,i){const s=e.ticks.length,r=Math.min(t,s-1),n=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(i&&(l=1===s?Math.max(c-n,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<n-a||c>o+a)))return c}function wn(e){return e.drawTicks?e.tickLength:0}function Cn(e,t){if(!e.display)return 0;const i=Ps(e.font,t),s=Rs(e.padding);return(ni(e.text)?e.text.length:1)*i.lineHeight+s.height}function kn(e,t,i){let s=Gi(e);return(i&&"right"!==t||!i&&"right"===t)&&(s=(e=>"left"===e?"right":"right"===e?"left":e)(s)),s}class En extends mn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=li(e,Number.POSITIVE_INFINITY),t=li(t,Number.NEGATIVE_INFINITY),i=li(i,Number.POSITIVE_INFINITY),s=li(s,Number.NEGATIVE_INFINITY),{min:li(e,i),max:li(t,s),minDefined:ai(e),maxDefined:ai(t)}}getMinMax(e){let t,{min:i,max:s,minDefined:r,maxDefined:n}=this.getUserBounds();if(r&&n)return{min:i,max:s};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),r||(i=Math.min(i,t.min)),n||(s=Math.max(s,t.max));return i=n&&i>s?s:i,s=r&&i>s?i:s,{min:li(i,li(s,i)),max:li(s,li(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){di(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:n}=this.options,o=n.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){const{min:s,max:r}=e,n=hi(t,(r-s)/2),o=(e,t)=>i&&0===e?0:e+t;return{min:o(s,-Math.abs(n)),max:o(r,n)}}(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?xn(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),n.display&&(n.autoSkip||"auto"===n.source)&&(this.ticks=vn(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){di(this.options.afterUpdate,[this])}beforeSetDimensions(){di(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){di(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),di(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){di(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=di(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){di(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){di(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=yn(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let n,o,a,l=s;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const c=this._getLabelSizes(),h=c.widest.width,d=c.highest.height,u=Fi(this.chart.width-h,0,this.maxWidth);n=e.offset?this.maxWidth/i:u/(i-1),h+6>n&&(n=u/(i-(e.offset?.5:1)),o=this.maxHeight-wn(e.grid)-t.padding-Cn(e.title,this.chart.options.font),a=Math.sqrt(h*h+d*d),l=Math.min(Math.asin(Fi((c.highest.height+6)/n,-1,1)),Math.asin(Fi(o/a,-1,1))-Math.asin(Fi(d/a,-1,1)))*(180/Ei),l=Math.max(s,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){di(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){di(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,n=this._isVisible(),o=this.isHorizontal();if(n){const n=Cn(s,t.options.font);if(o?(e.width=this.maxWidth,e.height=wn(r)+n):(e.height=this.maxHeight,e.width=wn(r)+n),i.display&&this.ticks.length){const{first:t,last:s,widest:r,highest:n}=this._getLabelSizes(),a=2*i.padding,l=Ni(this.labelRotation),c=Math.cos(l),h=Math.sin(l);if(o){const t=i.mirror?0:h*r.width+c*n.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=i.mirror?0:c*r.width+h*n.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,s,h,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:n},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;a?l?(h=s*e.width,d=i*t.height):(h=i*e.height,d=s*t.width):"start"===r?d=t.width:"end"===r?h=e.width:"inner"!==r&&(h=e.width/2,d=t.width/2),this.paddingLeft=Math.max((h-o+n)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-c+n)*this.width/(this.width-c),0)}else{let i=t.height/2,s=e.height/2;"start"===r?(i=0,s=e.height):"end"===r&&(i=t.height,s=0),this.paddingTop=i+n,this.paddingBottom=s+n}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){di(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)ri(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=xn(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,n=[],o=[],a=Math.floor(t/yn(t,i));let l,c,h,d,u,f,p,g,m,v,_,b=0,y=0;for(l=0;l<t;l+=a){if(d=e[l].label,u=this._resolveTickFontOptions(l),s.font=f=u.string,p=r[f]=r[f]||{data:{},gc:[]},g=u.lineHeight,m=v=0,ri(d)||ni(d)){if(ni(d))for(c=0,h=d.length;c<h;++c)_=d[c],ri(_)||ni(_)||(m=gs(s,p.data,p.gc,m,_),v+=g)}else m=gs(s,p.data,p.gc,m,d),v=g;n.push(m),o.push(v),b=Math.max(m,b),y=Math.max(v,y)}!function(e,t){ui(e,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}(r,t);const x=n.indexOf(b),S=o.indexOf(y),w=e=>({width:n[e]||0,height:o[e]||0});return{first:w(0),last:w(t-1),widest:w(x),highest:w(S),widths:n,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Fi(this._alignToPixels?ms(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function(e,t,i){return Os(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=Os(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Ni(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),n=e.autoSkipPadding||0,o=r?r.widest.width+n:0,a=r?r.highest.height+n:0;return this.isHorizontal()?a*i>o*s?o/i:a/s:a*s<o*i?a/i:o/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:n,border:o}=s,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),h=wn(r),d=[],u=o.setContext(this.getContext()),f=u.display?u.width:0,p=f/2,g=function(e){return ms(i,e,f)};let m,v,_,b,y,x,S,w,C,k,E,j;if("top"===n)m=g(this.bottom),x=this.bottom-h,w=m-p,k=g(e.top)+p,j=e.bottom;else if("bottom"===n)m=g(this.top),k=e.top,j=g(e.bottom)-p,x=m+p,w=this.top+h;else if("left"===n)m=g(this.right),y=this.right-h,S=m-p,C=g(e.left)+p,E=e.right;else if("right"===n)m=g(this.left),C=e.left,E=g(e.right)-p,y=m+p,S=this.left+h;else if("x"===t){if("center"===n)m=g((e.top+e.bottom)/2+.5);else if(oi(n)){const e=Object.keys(n)[0],t=n[e];m=g(this.chart.scales[e].getPixelForValue(t))}k=e.top,j=e.bottom,x=m+p,w=x+h}else if("y"===t){if("center"===n)m=g((e.left+e.right)/2);else if(oi(n)){const e=Object.keys(n)[0],t=n[e];m=g(this.chart.scales[e].getPixelForValue(t))}y=m-p,S=y-h,C=e.left,E=e.right}const L=ci(s.ticks.maxTicksLimit,c),D=Math.max(1,Math.ceil(c/L));for(v=0;v<c;v+=D){const e=this.getContext(v),t=r.setContext(e),s=o.setContext(e),n=t.lineWidth,c=t.color,h=s.dash||[],u=s.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;_=Sn(this,v,a),void 0!==_&&(b=ms(i,_,n),l?y=S=C=E=b:x=w=k=j=b,d.push({tx1:y,ty1:x,tx2:S,ty2:w,x1:C,y1:k,x2:E,y2:j,width:n,color:c,borderDash:h,borderDashOffset:u,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,n=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:h}=r,d=wn(i.grid),u=d+c,f=h?-c:u,p=-Ni(this.labelRotation),g=[];let m,v,_,b,y,x,S,w,C,k,E,j,L="middle";if("top"===s)x=this.bottom-f,S=this._getXAxisLabelAlignment();else if("bottom"===s)x=this.top+f,S=this._getXAxisLabelAlignment();else if("left"===s){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,y=e.x}else if("right"===s){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,y=e.x}else if("x"===t){if("center"===s)x=(e.top+e.bottom)/2+u;else if(oi(s)){const e=Object.keys(s)[0],t=s[e];x=this.chart.scales[e].getPixelForValue(t)+u}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===s)y=(e.left+e.right)/2-u;else if(oi(s)){const e=Object.keys(s)[0],t=s[e];y=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?L="top":"end"===a&&(L="bottom"));const D=this._getLabelSizes();for(m=0,v=o.length;m<v;++m){_=o[m],b=_.label;const e=r.setContext(this.getContext(m));w=this.getPixelForTick(m)+r.labelOffset,C=this._resolveTickFontOptions(m),k=C.lineHeight,E=ni(b)?b.length:1;const t=E/2,i=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,u=S;if(n?(y=w,"inner"===S&&(u=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),j="top"===s?"near"===l||0!==p?-E*k+k/2:"center"===l?-D.highest.height/2-t*k+k:-D.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?D.highest.height/2-t*k:D.highest.height-E*k,h&&(j*=-1),0===p||e.showLabelBackdrop||(y+=k/2*Math.sin(p))):(x=w,j=(1-E)*k/2),e.showLabelBackdrop){const t=Rs(e.backdropPadding),i=D.heights[m],s=D.widths[m];let r=j-t.top,n=0-t.left;switch(L){case"middle":r-=i/2;break;case"bottom":r-=i}switch(S){case"center":n-=s/2;break;case"right":n-=s;break;case"inner":m===v-1?n-=s:m>0&&(n-=s/2)}d={left:n,top:r,width:s+t.width,height:i+t.height,color:e.backdropColor}}g.push({label:b,font:C,textOffset:j,options:{rotation:p,color:i,strokeColor:a,strokeWidth:c,textAlign:u,textBaseline:L,translation:[y,x],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ni(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,n=e+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?s?(l=this.right+r,"near"===i?a="left":"center"===i?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-n,"near"===i?a="right":"center"===i?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?s?(l=this.left+r,"near"===i?a="right":"center"===i?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+n,"near"===i?a="left":"center"===i?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:n}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,n),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(t=>t.value===e);if(i>=0){return t.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,n;const o=(e,t,s)=>{s.width&&s.color&&(i.save(),i.lineWidth=s.width,i.strokeStyle=s.color,i.setLineDash(s.borderDash||[]),i.lineDashOffset=s.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(t.display)for(r=0,n=s.length;r<n;++r){const e=s[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),n=i.display?r.width:0;if(!n)return;const o=s.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,h,d;this.isHorizontal()?(l=ms(e,this.left,n)-n/2,c=ms(e,this.right,o)+o/2,h=d=a):(h=ms(e,this.top,n)-n/2,d=ms(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,h),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,i=this._computeLabelArea();i&&xs(t,i);const s=this.getLabelItems(e);for(const r of s){const e=r.options,i=r.font;ks(t,r.label,0,r.textOffset,i,e)}i&&Ss(t)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=Ps(i.font),n=Rs(i.padding),o=i.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||oi(t)?(a+=n.bottom,ni(i.text)&&(a+=r.lineHeight*(i.text.length-1))):a+=n.top;const{titleX:l,titleY:c,maxWidth:h,rotation:d}=function(e,t,i,s){const{top:r,left:n,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let d,u,f,p=0;const g=o-r,m=a-n;if(e.isHorizontal()){if(u=Xi(s,n,a),oi(i)){const e=Object.keys(i)[0],s=i[e];f=h[e].getPixelForValue(s)+g-t}else f="center"===i?(c.bottom+c.top)/2+g-t:bn(e,i,t);d=a-n}else{if(oi(i)){const e=Object.keys(i)[0],s=i[e];u=h[e].getPixelForValue(s)-m+t}else u="center"===i?(c.left+c.right)/2-m+t:bn(e,i,t);f=Xi(s,o,r),p="left"===i?-Mi:Mi}return{titleX:u,titleY:f,maxWidth:d,rotation:p}}(this,a,t,o);ks(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:kn(o,t,s),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=ci(e.grid&&e.grid.z,-1),s=ci(e.border&&e.border.z,0);return this._isVisible()&&this.draw===En.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,n;for(r=0,n=t.length;r<n;++r){const n=t[r];n[i]!==this.id||e&&n.type!==e||s.push(n)}return s}_resolveTickFontOptions(e){return Ps(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class jn{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function(e){return"id"in e&&"defaults"in e})(t)&&(i=this.register(t));const s=this.items,r=e.id,n=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,function(e,t,i){const s=vi(Object.create(null),[i?ps.get(i):{},ps.get(t),e.defaults]);ps.set(t,s),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(i=>{const s=i.split("."),r=s.pop(),n=[e].concat(s).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");ps.route(n,r,l,a)})}(t,e.defaultRoutes);e.descriptors&&ps.describe(t,e.descriptors)}(e,n,i),this.override&&ps.override(e.id,e.overrides)),n}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in ps[s]&&(delete ps[s][i],this.override&&delete cs[i])}}class Ln{constructor(){this.controllers=new jn(Mr,"datasets",!0),this.elements=new jn(mn,"elements"),this.plugins=new jn(Object,"plugins"),this.scales=new jn(En,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(t=>{const s=i||this._getRegistryForType(t);i||s.isForType(t)||s===this.plugins&&t.id?this._exec(e,s,t):ui(t,t=>{const s=i||this._getRegistryForType(t);this._exec(e,s,t)})})}_exec(e,t,i){const s=Si(e);di(i["before"+s],[],i),t[e](i),di(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(void 0===s)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Dn=new Ln;class Mn{constructor(){this._init=[]}notify(e,t,i,s){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),n=this._notify(r,e,t,i);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),n}_notify(e,t,i,s){s=s||{};for(const r of e){const e=r.plugin;if(!1===di(e[i],[t,s,r.options],e)&&s.cancelable)return!1}return!0}invalidate(){ri(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=ci(i.options&&i.options.plugins,{}),r=function(e){const t={},i=[],s=Object.keys(Dn.plugins.items);for(let n=0;n<s.length;n++)i.push(Dn.getPlugin(s[n]));const r=e.plugins||[];for(let n=0;n<r.length;n++){const e=r[n];-1===i.indexOf(e)&&(i.push(e),t[e.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==s||t?function(e,{plugins:t,localIds:i},s,r){const n=[],o=e.getContext();for(const a of t){const t=a.id,l=An(s[t],r);null!==l&&n.push({plugin:a,options:Tn(e.config,{plugin:a,local:i[t]},l,o)})}return n}(e,r,s,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function An(e,t){return t||!1!==e?!0===e?{}:e:null}function Tn(e,{plugin:t,local:i},s,r){const n=e.pluginScopeKeys(t),o=e.getOptionScopes(s,n);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Rn(e,t){const i=ps.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Pn(e){if("x"===e||"y"===e||"r"===e)return e}function Nn(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function On(e,...t){if(Pn(e))return e;for(const i of t){const t=i.axis||Nn(i.position)||e.length>1&&Pn(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function In(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function Bn(e,t){const i=cs[e.type]||{scales:{}},s=t.scales||{},r=Rn(e.type,t),n=Object.create(null);return Object.keys(s).forEach(t=>{const o=s[t];if(!oi(o))return;if(o._proxy)return;const a=On(t,o,function(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(i.length)return In(e,"x",i[0])||In(e,"y",i[0])}return{}}(t,e),ps.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=i.scales||{};n[t]=_i(Object.create(null),[{axis:a},o,c[a],c[l]])}),e.data.datasets.forEach(i=>{const r=i.type||e.type,o=i.indexAxis||Rn(r,t),a=(cs[r]||{}).scales||{};Object.keys(a).forEach(e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,o),r=i[t+"AxisID"]||t;n[r]=n[r]||Object.create(null),_i(n[r],[{axis:t},s[r],a[e]])})}),Object.keys(n).forEach(e=>{const t=n[e];_i(t,[ps.scales[t.type],ps.scale])}),n}function zn(e){const t=e.options||(e.options={});t.plugins=ci(t.plugins,{}),t.scales=Bn(e,t)}function Fn(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Hn=new Map,$n=new Set;function Wn(e,t){let i=Hn.get(e);return i||(i=t(),Hn.set(e,i),$n.add(i)),i}const Un=(e,t,i)=>{const s=xi(t,i);void 0!==s&&e.add(s)};class Vn{constructor(e){this._config=function(e){return(e=e||{}).data=Fn(e.data),zn(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Fn(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),zn(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Wn(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Wn(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Wn(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Wn(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return s&&!t||(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,n=this._cachedScopes(e,i),o=n.get(t);if(o)return o;const a=new Set;t.forEach(t=>{e&&(a.add(e),t.forEach(t=>Un(a,e,t))),t.forEach(e=>Un(a,s,e)),t.forEach(e=>Un(a,cs[r]||{},e)),t.forEach(e=>Un(a,ps,e)),t.forEach(e=>Un(a,hs,e))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),$n.has(t)&&n.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,cs[t]||{},ps.datasets[t]||{},{type:t},ps,hs]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:n,subPrefixes:o}=qn(this._resolverCache,e,s);let a=n;if(function(e,t){const{isScriptable:i,isIndexable:s}=zs(e);for(const r of t){const t=i(r),n=s(r),o=(n||t)&&e[r];if(t&&(Ci(o)||Kn(o))||n&&ni(o))return!0}return!1}(n,t)){r.$shared=!1;a=Bs(n,i=Ci(i)?i():i,this.createResolver(e,i,o))}for(const l of t)r[l]=a[l];return r}createResolver(e,t,i=[""],s){const{resolver:r}=qn(this._resolverCache,e,i);return oi(t)?Bs(r,t,void 0,s):r}}function qn(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=i.join();let n=s.get(r);if(!n){n={resolver:Is(t,i),subPrefixes:i.filter(e=>!e.toLowerCase().includes("hover"))},s.set(r,n)}return n}const Kn=e=>oi(e)&&Object.getOwnPropertyNames(e).some(t=>Ci(e[t]));const Yn=["top","bottom","left","right","chartArea"];function Gn(e,t){return"top"===e||"bottom"===e||-1===Yn.indexOf(e)&&"x"===t}function Xn(e,t){return function(i,s){return i[e]===s[e]?i[t]-s[t]:i[e]-s[e]}}function Qn(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),di(i&&i.onComplete,[e],t)}function Jn(e){const t=e.chart,i=t.options.animation;di(i&&i.onProgress,[e],t)}function Zn(e){return Xs()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const eo={},to=e=>{const t=Zn(e);return Object.values(eo).filter(e=>e.canvas===t).pop()};function io(e,t,i){const s=Object.keys(e);for(const r of s){const s=+r;if(s>=t){const n=e[r];delete e[r],(i>0||s>t)&&(e[s+i]=n)}}}let so=class{static defaults=ps;static instances=eo;static overrides=cs;static registry=Dn;static version="4.5.0";static getChart=to;static register(...e){Dn.add(...e),ro()}static unregister(...e){Dn.remove(...e),ro()}constructor(e,t){const i=this.config=new Vn(t),s=Zn(e),r=to(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const n=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(e){return!Xs()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Zr:gn}(s)),this.platform.updateConfig(i);const o=this.platform.acquireContext(s,n.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=si(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=n,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Mn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let i;return function(...s){return t?(clearTimeout(i),i=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),n.resizeDelay||0),this._dataChanges=[],eo[this.id]=this,o&&a&&(pr.listen(this,"complete",Qn),pr.listen(this,"progress",Jn),this._initialize(),this.attached&&this.update())}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return ri(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Dn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vs(this.canvas,this.ctx),this}stop(){return pr.stop(this),this}resize(e,t){pr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,n=this.platform.getMaximumSize(s,e,t,r),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=n.width,this.height=n.height,this._aspectRatio=this.aspectRatio,nr(this,o,!0)&&(this.notifyPlugins("resize",{size:n}),di(i.onResize,[this,n],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){ui(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const i=t[e],s=On(e,i),r="r"===s,n="x"===s;return{options:i,dposition:r?"chartArea":n?"bottom":"left",dtype:r?"radialLinear":n?"category":"linear"}}))),ui(r,t=>{const r=t.options,n=r.id,o=On(n,r),a=ci(r.type,t.dtype);void 0!==r.position&&Gn(r.position,o)===Gn(t.dposition)||(r.position=t.dposition),s[n]=!0;let l=null;if(n in i&&i[n].type===a)l=i[n];else{l=new(Dn.getScale(a))({id:n,type:a,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(r,e)}),ui(s,(e,t)=>{e||delete i[t]}),ui(i,e=>{Qr.configure(this,e,e.options),Qr.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((e,t)=>e.index-t.index),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Xn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,i)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const s=t[i];let r=this.getDatasetMeta(i);const n=s.type||this.config.type;if(r.type&&r.type!==n&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=n,r.indexAxis=s.indexAxis||Rn(n,this.options),r.order=s.order||0,r.index=i,r.label=""+s.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const t=Dn.getController(n),{datasetElementType:s,dataElementType:o}=ps.datasets[n];Object.assign(t,{dataElementType:Dn.getElement(o),datasetElementType:s&&Dn.getElement(s)}),r.controller=new t(this,i),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){ui(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let n=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!s&&-1===r.indexOf(e);e.buildOrUpdateElements(t),n=Math.max(+e.getMaxOverflow(),n)}n=this._minPadding=i.layout.autoPadding?n:0,this._updateLayout(n),s||ui(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Xn("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ui(this.scales,e=>{Qr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);ki(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){io(e,s,"_removeElements"===i?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!ki(s,i(r)))return;return Array.from(s).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Qr.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],ui(this.boxes,e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Ci(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(pr.has(this)?this.attached&&!pr.running(this)&&pr.start(this):(this.draw(),Qn({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const r=t[s];e&&!r.visible||i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=ur(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(s&&xs(t,s),e.controller.draw(),s&&Ss(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return ys(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=Br.modes[t];return"function"==typeof r?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(e=>e&&e._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Os(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),n=r.controller._resolveAnimations(void 0,s);wi(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),n.update(r,{visible:i}),this.update(t=>t.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),pr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),vs(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete eo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(i,s)=>{t.addEventListener(this,i,s),e[i]=s},s=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};ui(this.options.events,e=>i(e,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(i,s)=>{t.addEventListener(this,i,s),e[i]=s},s=(i,s)=>{e[i]&&(t.removeEventListener(this,i,s),delete e[i])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let n;const o=()=>{s("attach",o),this.attached=!0,this.resize(),i("resize",r),i("detach",n)};n=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",o)},t.isAttached(this.canvas)?o():n()}unbindEvents(){ui(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ui(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,n,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){n=e[o];const t=n&&this.getDatasetMeta(n.datasetIndex).controller;t&&t[s+"HoverStyle"](n.element,n.datasetIndex,n.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:e,index:t})=>{const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}});!fi(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),n=r(t,e),o=i?e:r(e,t);n.length&&this.updateHoverStyle(n,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,n=t,o=this._getActiveElements(e,s,i,n),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,i,s){return i&&"mouseout"!==e.type?s?t:e:null}(e,this._lastEvent,i,a);i&&(this._lastEvent=null,di(r.onHover,[e,o,this],this),a&&di(r.onClick,[e,o,this],this));const c=!fi(o,s);return(c||t)&&(this._active=o,this._updateHoverStyles(o,s,t)),this._lastEvent=l,c}_getActiveElements(e,t,i,s){if("mouseout"===e.type)return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}};function ro(){return ui(so.instances,e=>e._plugins.invalidate())}function no(e,t,i,s){const r=As(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const n=(i-t)/2,o=Math.min(n,s*t/2),a=e=>{const t=(i-Math.min(n,e))*s/2;return Fi(e,0,Math.min(n,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Fi(r.innerStart,0,o),innerEnd:Fi(r.innerEnd,0,o)}}function oo(e,t,i,s){return{x:i+e*Math.cos(t),y:s+e*Math.sin(t)}}function ao(e,t,i,s,r,n){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,d=Math.max(t.outerRadius+s+i-c,0),u=h>0?h+s+i+c:0;let f=0;const p=r-l;if(s){const e=((h>0?h-s:0)+(d>0?d-s:0))/2;f=(p-(0!==e?p*e/(e+s):p))/2}const g=(p-Math.max(.001,p*d-i/Ei)/d)/2,m=l+g+f,v=r-g-f,{outerStart:_,outerEnd:b,innerStart:y,innerEnd:x}=no(t,u,d,v-m),S=d-_,w=d-b,C=m+_/S,k=v-b/w,E=u+y,j=u+x,L=m+y/E,D=v-x/j;if(e.beginPath(),n){const t=(C+k)/2;if(e.arc(o,a,d,C,t),e.arc(o,a,d,t,k),b>0){const t=oo(w,k,o,a);e.arc(t.x,t.y,b,k,v+Mi)}const i=oo(j,v,o,a);if(e.lineTo(i.x,i.y),x>0){const t=oo(j,D,o,a);e.arc(t.x,t.y,x,v+Mi,D+Math.PI)}const s=(v-x/u+(m+y/u))/2;if(e.arc(o,a,u,v-x/u,s,!0),e.arc(o,a,u,s,m+y/u,!0),y>0){const t=oo(E,L,o,a);e.arc(t.x,t.y,y,L+Math.PI,m-Mi)}const r=oo(S,m,o,a);if(e.lineTo(r.x,r.y),_>0){const t=oo(S,C,o,a);e.arc(t.x,t.y,_,m-Mi,C)}}else{e.moveTo(o,a);const t=Math.cos(C)*d+o,i=Math.sin(C)*d+a;e.lineTo(t,i);const s=Math.cos(k)*d+o,r=Math.sin(k)*d+a;e.lineTo(s,r)}e.closePath()}function lo(e,t,i,s,r){const{fullCircles:n,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:u,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=u,p?(e.lineWidth=2*c,e.lineJoin=h||"round"):(e.lineWidth=c,e.lineJoin=h||"bevel");let g=t.endAngle;if(n){ao(e,t,i,s,g,r);for(let t=0;t<n;++t)e.stroke();isNaN(a)||(g=o+(a%ji||ji))}p&&function(e,t,i){const{startAngle:s,pixelMargin:r,x:n,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(n,o,a,s-c,i+c),l>r?(c=r/l,e.arc(n,o,l,i+c,s-c,!0)):e.arc(n,o,r,i+Mi,s-Mi),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-o>=Ei&&0===f&&"miter"!==h&&function(e,t,i){const{startAngle:s,x:r,y:n,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/o,Bi(s-i));if(e.beginPath(),e.arc(r,n,o-c/2,s+d/2,i-d/2),a>0){const t=Math.min(c/a,Bi(s-i));e.arc(r,n,a+c/2,i-t/2,s+t/2,!0)}else{const t=Math.min(c/2,o*Bi(s-i));if("round"===h)e.arc(r,n,t,i-Ei/2,s+Ei/2,!0);else if("bevel"===h){const o=2*t*t,a=-o*Math.cos(i+Ei/2)+r,l=-o*Math.sin(i+Ei/2)+n,c=o*Math.cos(s+Ei/2)+r,h=o*Math.sin(s+Ei/2)+n;e.lineTo(a,l),e.lineTo(c,h)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),n||(ao(e,t,i,s,g,r),e.stroke())}const co=(e,t)=>{let{boxHeight:i=t,boxWidth:s=t}=e;return e.usePointStyle&&(i=Math.min(i,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}};class ho extends mn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=di(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,i)=>e.sort(t,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,s=Ps(i.font),r=s.size,n=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=co(i,r);let l,c;t.font=s.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(n,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(n,s,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:n,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=s+o;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,u=-c;return this.legendItems.forEach((e,f)=>{const p=i+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>n)&&(h+=c,l[l.length-(f>0?0:1)]=0,u+=c,d++),a[f]={left:0,top:u,row:d,width:p,height:s},l[l.length-1]+=p+o}),h}_fitCols(e,t,i,s){const{ctx:r,maxHeight:n,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=n-e;let h=o,d=0,u=0,f=0,p=0;return this.legendItems.forEach((e,n)=>{const{itemWidth:g,itemHeight:m}=function(e,t,i,s,r){const n=function(e,t,i,s){let r=e.text;r&&"string"!=typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+i.size/2+s.measureText(r).width}(s,e,t,i),o=function(e,t,i){let s=e;"string"!=typeof t.text&&(s=uo(t,i));return s}(r,s,t.lineHeight);return{itemWidth:n,itemHeight:o}}(i,t,r,e,s);n>0&&u+m+2*o>c&&(h+=d+o,l.push({width:d,height:u}),f+=d+o,p++,d=u=0),a[n]={left:f,top:u,col:p,width:g,height:m},d=Math.max(d,g),u+=m+o}),h+=d,l.push({width:d,height:u}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,n=lr(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=Xi(i,this.left+s,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,o=Xi(i,this.left+s,this.right-this.lineWidths[r])),a.top+=this.top+e+s,a.left=n.leftForLtr(n.x(o),a.width),o+=a.width+s}else{let r=0,o=Xi(i,this.top+e+s,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,o=Xi(i,this.top+e+s,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+s,a.left=n.leftForLtr(n.x(a.left),a.width),o+=a.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;xs(e,this),this._draw(),Ss(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:n}=e,o=ps.color,a=lr(e.rtl,this.left,this.width),l=Ps(n.font),{padding:c}=n,h=l.size,d=h/2;let u;this.drawTitle(),s.textAlign=a.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=co(n,h),m=this.isHorizontal(),v=this._computeTitleHeight();u=m?{x:Xi(r,this.left+c,this.right-i[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:Xi(r,this.top+v+c,this.bottom-t[0].height),line:0},cr(this.ctx,e.textDirection);const _=g+c;this.legendItems.forEach((b,y)=>{s.strokeStyle=b.fontColor,s.fillStyle=b.fontColor;const x=s.measureText(b.text).width,S=a.textAlign(b.textAlign||(b.textAlign=n.textAlign)),w=f+d+x;let C=u.x,k=u.y;a.setWidth(this.width),m?y>0&&C+w+c>this.right&&(k=u.y+=_,u.line++,C=u.x=Xi(r,this.left+c,this.right-i[u.line])):y>0&&k+_>this.bottom&&(C=u.x=C+t[u.line].width+c,u.line++,k=u.y=Xi(r,this.top+v+c,this.bottom-t[u.line].height));if(function(e,t,i){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;s.save();const r=ci(i.lineWidth,1);if(s.fillStyle=ci(i.fillStyle,o),s.lineCap=ci(i.lineCap,"butt"),s.lineDashOffset=ci(i.lineDashOffset,0),s.lineJoin=ci(i.lineJoin,"miter"),s.lineWidth=r,s.strokeStyle=ci(i.strokeStyle,o),s.setLineDash(ci(i.lineDash,[])),n.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:r},l=a.xPlus(e,f/2);bs(s,o,l,t+d,n.pointStyleWidth&&f)}else{const n=t+Math.max((h-p)/2,0),o=a.leftForLtr(e,f),l=Ts(i.borderRadius);s.beginPath(),Object.values(l).some(e=>0!==e)?Es(s,{x:o,y:n,w:f,h:p,radius:l}):s.rect(o,n,f,p),s.fill(),0!==r&&s.stroke()}s.restore()}(a.x(C),k,b),C=((e,t,i,s)=>e===(s?"left":"right")?i:"center"===e?(t+i)/2:t)(S,C+f+d,m?C+w:this.right,e.rtl),function(e,t,i){ks(s,i.text,e,t+g/2,l,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(C),k,b),m)u.x+=w+c;else if("string"!=typeof b.text){const e=l.lineHeight;u.y+=uo(b,e)+c}else u.y+=_}),hr(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Ps(t.font),s=Rs(t.padding);if(!t.display)return;const r=lr(e.rtl,this.left,this.width),n=this.ctx,o=t.position,a=i.size/2,l=s.top+a;let c,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,h=Xi(e.align,h,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+Xi(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const u=Xi(o,h,h+d);n.textAlign=r.textAlign(Gi(o)),n.textBaseline="middle",n.strokeStyle=t.color,n.fillStyle=t.color,n.font=i.string,ks(n,t.text,u,c,i)}_computeTitleHeight(){const e=this.options.title,t=Ps(e.font),i=Rs(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(Hi(e,this.left,this.right)&&Hi(t,this.top,this.bottom))for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Hi(e,s.left,s.left+s.width)&&Hi(t,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,o=(r=i,null!==(s=n)&&null!==r&&s.datasetIndex===r.datasetIndex&&s.index===r.index);n&&!o&&di(t.onLeave,[e,n,this],this),this._hoveredItem=i,i&&!o&&di(t.onHover,[e,i,this],this)}else i&&di(t.onClick,[e,i,this],this);var s,r}}function uo(e,t){return t*(e.text?e.text.length:0)}var fo={id:"legend",_element:ho,start(e,t,i){const s=e.legend=new ho({ctx:e.ctx,options:i,chart:e});Qr.configure(e,s,i),Qr.addBox(e,s)},stop(e){Qr.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const s=e.legend;Qr.configure(e,s,i),s.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const s=t.datasetIndex,r=i.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:r,color:n,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(i?0:void 0),c=Rs(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:n,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const po={average(e){if(!e.length)return!1;let t,i,s=new Set,r=0,n=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();s.add(e.x),r+=e.y,++n}}if(0===n||0===s.size)return!1;return{x:[...s].reduce((e,t)=>e+t)/s.size,y:r/n}},nearest(e,t){if(!e.length)return!1;let i,s,r,n=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(i=0,s=e.length;i<s;++i){const s=e[i].element;if(s&&s.hasValue()){const e=Ii(t,s.getCenterPoint());e<a&&(a=e,r=s)}}if(r){const e=r.tooltipPosition();n=e.x,o=e.y}return{x:n,y:o}}};function go(e,t){return t&&(ni(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function mo(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function vo(e,t){const{element:i,datasetIndex:s,index:r}=t,n=e.getDatasetMeta(s).controller,{label:o,value:a}=n.getLabelAndValue(r);return{chart:e,label:o,parsed:n.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:a,dataset:n.getDataset(),dataIndex:r,datasetIndex:s,element:i}}function _o(e,t){const i=e.chart.ctx,{body:s,footer:r,title:n}=e,{boxWidth:o,boxHeight:a}=t,l=Ps(t.bodyFont),c=Ps(t.titleFont),h=Ps(t.footerFont),d=n.length,u=r.length,f=s.length,p=Rs(t.padding);let g=p.height,m=0,v=s.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}u&&(g+=t.footerMarginTop+u*h.lineHeight+(u-1)*t.footerSpacing);let _=0;const b=function(e){m=Math.max(m,i.measureText(e).width+_)};return i.save(),i.font=c.string,ui(e.title,b),i.font=l.string,ui(e.beforeBody.concat(e.afterBody),b),_=t.displayColors?o+2+t.boxPadding:0,ui(s,e=>{ui(e.before,b),ui(e.lines,b),ui(e.after,b)}),_=0,i.font=h.string,ui(e.footer,b),i.restore(),m+=p.width,{width:m,height:g}}function bo(e,t,i,s){const{x:r,width:n}=i,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===s?c=r<=(a+l)/2?"left":"right":r<=n/2?c="left":r>=o-n/2&&(c="right"),function(e,t,i,s){const{x:r,width:n}=s,o=i.caretSize+i.caretPadding;return"left"===e&&r+n+o>t.width||"right"===e&&r-n-o<0||void 0}(c,e,t,i)&&(c="center"),c}function yo(e,t,i){const s=i.yAlign||t.yAlign||function(e,t){const{y:i,height:s}=t;return i<s/2?"top":i>e.height-s/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||bo(e,t,i,s),yAlign:s}}function xo(e,t,i,s){const{caretSize:r,caretPadding:n,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,c=r+n,{topLeft:h,topRight:d,bottomLeft:u,bottomRight:f}=Ts(o);let p=function(e,t){let{x:i,width:s}=e;return"right"===t?i-=s:"center"===t&&(i-=s/2),i}(t,a);const g=function(e,t,i){let{y:s,height:r}=e;return"top"===t?s+=i:s-="bottom"===t?r+i:r/2,s}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(h,u)+r:"right"===a&&(p+=Math.max(d,f)+r),{x:Fi(p,0,s.width-t.width),y:Fi(g,0,s.height-t.height)}}function So(e,t,i){const s=Rs(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-s.right:e.x+s.left}function wo(e){return go([],mo(e))}function Co(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const ko={beforeTitle:ii,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return i[t.dataIndex]}return""},afterTitle:ii,beforeBody:ii,beforeLabel:ii,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return ri(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ii,afterBody:ii,beforeFooter:ii,footer:ii,afterFooter:ii};function Eo(e,t,i,s){const r=e[t].call(i,s);return void 0===r?ko[t].call(i,s):r}class jo extends mn{static positioners=po;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new _r(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,i=this._tooltipItems,Os(e,{tooltip:t,tooltipItems:i,type:"tooltip"})));var e,t,i}getTitle(e,t){const{callbacks:i}=t,s=Eo(i,"beforeTitle",this,e),r=Eo(i,"title",this,e),n=Eo(i,"afterTitle",this,e);let o=[];return o=go(o,mo(s)),o=go(o,mo(r)),o=go(o,mo(n)),o}getBeforeBody(e,t){return wo(Eo(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return ui(e,e=>{const t={before:[],lines:[],after:[]},r=Co(i,e);go(t.before,mo(Eo(r,"beforeLabel",this,e))),go(t.lines,Eo(r,"label",this,e)),go(t.after,mo(Eo(r,"afterLabel",this,e))),s.push(t)}),s}getAfterBody(e,t){return wo(Eo(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=Eo(i,"beforeFooter",this,e),r=Eo(i,"footer",this,e),n=Eo(i,"afterFooter",this,e);let o=[];return o=go(o,mo(s)),o=go(o,mo(r)),o=go(o,mo(n)),o}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],n=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(vo(this.chart,t[o]));return e.filter&&(l=l.filter((t,s,r)=>e.filter(t,s,r,i))),e.itemSort&&(l=l.sort((t,s)=>e.itemSort(t,s,i))),ui(l,t=>{const i=Co(e.callbacks,t);s.push(Eo(i,"labelColor",this,t)),r.push(Eo(i,"labelPointStyle",this,t)),n.push(Eo(i,"labelTextColor",this,t))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=n,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,n=[];if(s.length){const e=po[i.position].call(this,s,this._eventPosition);n=this._createItems(i),this.title=this.getTitle(n,i),this.beforeBody=this.getBeforeBody(n,i),this.body=this.getBody(n,i),this.afterBody=this.getAfterBody(n,i),this.footer=this.getFooter(n,i);const t=this._size=_o(this,i),o=Object.assign({},e,t),a=yo(this.chart,i,o),l=xo(i,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=n,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:n,cornerRadius:o}=i,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:h}=Ts(o),{x:d,y:u}=e,{width:f,height:p}=t;let g,m,v,_,b,y;return"center"===r?(b=u+p/2,"left"===s?(g=d,m=g-n,_=b+n,y=b-n):(g=d+f,m=g+n,_=b-n,y=b+n),v=g):(m="left"===s?d+Math.max(a,c)+n:"right"===s?d+f-Math.max(l,h)-n:this.caretX,"top"===r?(_=u,b=_-n,g=m-n,v=m+n):(_=u+p,b=_+n,g=m+n,v=m-n),y=_),{x1:g,x2:m,x3:v,y1:_,y2:b,y3:y}}drawTitle(e,t,i){const s=this.title,r=s.length;let n,o,a;if(r){const l=lr(i.rtl,this.x,this.width);for(e.x=So(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",n=Ps(i.titleFont),o=i.titleSpacing,t.fillStyle=i.titleColor,t.font=n.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+o,a+1===r&&(e.y+=i.titleMarginBottom-o)}}_drawColorBox(e,t,i,s,r){const n=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=r,c=Ps(r.bodyFont),h=So(this,"left",r),d=s.x(h),u=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+u;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},i=s.leftForLtr(d,l)+l/2,c=f+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,_s(e,t,i,c),e.strokeStyle=n.borderColor,e.fillStyle=n.backgroundColor,_s(e,t,i,c)}else{e.lineWidth=oi(n.borderWidth)?Math.max(...Object.values(n.borderWidth)):n.borderWidth||1,e.strokeStyle=n.borderColor,e.setLineDash(n.borderDash||[]),e.lineDashOffset=n.borderDashOffset||0;const t=s.leftForLtr(d,l),i=s.leftForLtr(s.xPlus(d,1),l-2),o=Ts(n.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Es(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=n.backgroundColor,e.beginPath(),Es(e,{x:i,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=n.backgroundColor,e.fillRect(i,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:n,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=i,h=Ps(i.bodyFont);let d=h.lineHeight,u=0;const f=lr(i.rtl,this.x,this.width),p=function(i){t.fillText(i,f.x(e.x+u),e.y+d/2),e.y+=d+r},g=f.textAlign(n);let m,v,_,b,y,x,S;for(t.textAlign=n,t.textBaseline="middle",t.font=h.string,e.x=So(this,g,i),t.fillStyle=i.bodyColor,ui(this.beforeBody,p),u=o&&"right"!==g?"center"===n?l/2+c:l+2+c:0,b=0,x=s.length;b<x;++b){for(m=s[b],v=this.labelTextColors[b],t.fillStyle=v,ui(m.before,p),_=m.lines,o&&_.length&&(this._drawColorBox(t,e,b,f,i),d=Math.max(h.lineHeight,a)),y=0,S=_.length;y<S;++y)p(_[y]),d=h.lineHeight;ui(m.after,p)}u=0,d=h.lineHeight,ui(this.afterBody,p),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let n,o;if(r){const a=lr(i.rtl,this.x,this.width);for(e.x=So(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",n=Ps(i.footerFont),t.fillStyle=i.footerColor,t.font=n.string,o=0;o<r;++o)t.fillText(s[o],a.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:n}=this,{x:o,y:a}=e,{width:l,height:c}=i,{topLeft:h,topRight:d,bottomLeft:u,bottomRight:f}=Ts(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(o+h,a),"top"===n&&this.drawCaret(e,t,i,s),t.lineTo(o+l-d,a),t.quadraticCurveTo(o+l,a,o+l,a+d),"center"===n&&"right"===r&&this.drawCaret(e,t,i,s),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===n&&this.drawCaret(e,t,i,s),t.lineTo(o+u,a+c),t.quadraticCurveTo(o,a+c,o,a+c-u),"center"===n&&"left"===r&&this.drawCaret(e,t,i,s),t.lineTo(o,a+h),t.quadraticCurveTo(o,a,o+h,a),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const i=po[e.position].call(this,this._active,this._eventPosition);if(!i)return;const n=this._size=_o(this,e),o=Object.assign({},i,this._size),a=yo(t,e,o),l=xo(e,o,a,t);s._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=n.width,this.height=n.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const n=Rs(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),cr(e,t.textDirection),r.y+=n.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),hr(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:e,index:t})=>{const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}),r=!fi(i,s),n=this._positionChanged(s,t);(r||n)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],n=this._getActiveElements(e,r,t,i),o=this._positionChanged(n,e),a=t||!fi(n,r)||o;return a&&(this._active=n,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,s){const r=this.options;if("mouseout"===e.type)return[];if(!s)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const n=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&n.reverse(),n}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,n=po[r.position].call(this,e,t);return!1!==n&&(i!==n.x||s!==n.y)}}var Lo={id:"tooltip",_element:jo,positioners:po,afterInit(e,t,i){i&&(e.tooltip=new jo({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ko},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Do="label";function Mo(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Ao(e,t){e.labels=t}function To(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Do;const s=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[i]===t[i]);return r&&t.data&&!s.includes(r)?(s.push(r),Object.assign(r,t),r):{...t}})}function Ro(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Do;const i={labels:[],datasets:[]};return Ao(i,e.labels),To(i,e.datasets,t),i}function Po(e,t){const{height:s=150,width:r=300,redraw:n=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:h=[],fallbackContent:d,updateMode:u,...f}=e,p=i.useRef(null),g=i.useRef(null),m=()=>{p.current&&(g.current=new so(p.current,{type:a,data:Ro(l,o),options:c&&{...c},plugins:h}),Mo(t,g.current))},v=()=>{Mo(t,null),g.current&&(g.current.destroy(),g.current=null)};return i.useEffect(()=>{!n&&g.current&&c&&function(e,t){const i=e.options;i&&t&&Object.assign(i,t)}(g.current,c)},[n,c]),i.useEffect(()=>{!n&&g.current&&Ao(g.current.config.data,l.labels)},[n,l.labels]),i.useEffect(()=>{!n&&g.current&&l.datasets&&To(g.current.config.data,l.datasets,o)},[n,l.datasets]),i.useEffect(()=>{g.current&&(n?(v(),setTimeout(m)):g.current.update(u))},[n,c,l.labels,l.datasets,u]),i.useEffect(()=>{g.current&&(v(),setTimeout(m))},[a]),i.useEffect(()=>(m(),()=>v()),[]),ne.createElement("canvas",{ref:p,role:"img",height:s,width:r,...f},d)}const No=i.forwardRef(Po);function Oo(e,t){return so.register(t),i.forwardRef((t,i)=>ne.createElement(No,{...t,ref:i,type:e}))}const Io=Oo("doughnut",Ar);so.register(class extends mn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:r,distance:n}=Oi(s,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,u=ci(h,a-o),f=zi(r,o,a)&&o!==a,p=u>=ji||f,g=Hi(n,l+d,c+d);return p&&g}getCenterPoint(e){const{x:t,y:i,startAngle:s,endAngle:r,innerRadius:n,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(s+r)/2,h=(n+o+l+a)/2;return{x:t+Math.cos(c)*h,y:i+Math.sin(c)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/4,r=(t.spacing||0)/2,n=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>ji?Math.floor(i/ji):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*s,Math.sin(o)*s);const a=s*(1-Math.sin(Math.min(Ei,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,s,r){const{fullCircles:n,startAngle:o,circumference:a}=t;let l=t.endAngle;if(n){ao(e,t,i,s,l,r);for(let t=0;t<n;++t)e.fill();isNaN(a)||(l=o+(a%ji||ji))}ao(e,t,i,s,l,r),e.fill()}(e,this,a,r,n),lo(e,this,a,r,n),e.restore()}},Lo,fo);const Bo=({label:e,data:t,unit:r,total:n,detailed:o,metrics:a})=>{if(!a)return s.jsx("div",{children:"No data available"});const{customSettings:l}=i.useContext(Pe),c=Re(l,"background"),h=a.cpu_model,d=a.cpu_physical_cores,u=a.cpu_total_cores,f=a.cpu_freq_max,p=a.cpu_freq_current,g=a.cpu_temp,m=a.ram_type,v=a.memory_total_gb,_=a.memory_available_gb,b=a.disk_total_gb,y=a.disk_model,x=a.disk_type;a.network,a.network,a.network;const S=a.os_name,w=a.os_release,C=a.os_version,k=a.gpu,E=a.system_uptime,j=a.process_count,L=a.response_time_ms;let D=t;if(e.toLowerCase().includes("cpu"))D=a&&void 0!==a.cpu_percent?Array(12).fill(a.cpu_percent):Array(12).fill(0);else if(e.toLowerCase().includes("ram"))D=a&&void 0!==a.memory_gb?Array(12).fill(a.memory_gb):Array(12).fill(0);else if(e.toLowerCase().includes("storage"))D=a&&void 0!==a.disk_gb?Array(12).fill(a.disk_gb):Array(12).fill(0);else if(e.toLowerCase().includes("network")){let e=0;if(a?.internet_speed){const t=a.internet_speed.data||a.internet_speed;if(t&&"string"==typeof t.download){const i=t.download.split(":");if(i.length>1){const t=i[1].trim().split(" ")[0];e=parseFloat(t)||0}}}else a?.network?.download_speed_mbps&&(e=a.network.download_speed_mbps);D=Array(12).fill(e)}else e.toLowerCase().includes("gpu")&&(D=a&&a.gpu&&a.gpu.length>0?Array(12).fill(a.gpu[0].load):Array(12).fill(0));const M=D[D.length-1];let A=M,T=r||"",R=e,P="",N=M,O=n||Math.max(...t);if(e.toLowerCase().includes("cpu"))A=Math.round(M/O*100),T="%",R="CPU",N=M,O=n||O;else if(e.toLowerCase().includes("ram"))R="RAM",P=` / ${O} GB`,T="GB";else if(e.toLowerCase().includes("storage"))R="Storage",P=` / ${O} GB`,T="GB";else if(e.toLowerCase().includes("network")){R="Download Speed",T="Mbps";let e=0,t=0,i=null,s=!1,r="",n=a?._prevSpeed||{},o=null;if(a?.internet_speed?o=a.internet_speed.data||a.internet_speed:a?.download&&a?.upload&&a?.ping&&(o=a),o){if("string"==typeof o.download){const t=o.download.split(":");if(t.length>1){const i=t[1].trim().split(" ")[0];e=parseFloat(i)||0}}else"number"==typeof o.download&&(e=o.download);if("string"==typeof o.upload){const e=o.upload.split(":");if(e.length>1){const i=e[1].trim().split(" ")[0];t=parseFloat(i)||0}}else"number"==typeof o.upload&&(t=o.upload);if("string"==typeof o.ping){const e=o.ping.split(":");if(e.length>1){const t=e[1].trim().split(" ")[0];i=parseFloat(t)||null}}else"number"==typeof o.ping&&(i=o.ping);0!==e||0!==t||null!==i||o.error||(s=!0,r="Testing..."),o.error&&(A="Error",T="",N=0,O=100,a._parsedSpeed={downloadMbps:0,uploadMbps:0,pingMs:null,isTesting:!1,error:o.error})}!e&&a.network?.download_speed_mbps&&(e=a.network.download_speed_mbps),!t&&a.network?.upload_speed_mbps&&(t=a.network.upload_speed_mbps),e>0?(N=e,A=e.toFixed(1),T="Mbps",O=Math.max(100,1.2*e)):s&&n.downloadMbps?(N=n.downloadMbps,A=r||"Testing...",T="",O=Math.max(100,1.2*n.downloadMbps)):(N=0,A="0",T="Mbps",O=100),a._parsedSpeed={downloadMbps:e,uploadMbps:t,pingMs:i,isTesting:s},!s&&e>0&&(a._prevSpeed={downloadMbps:e,uploadMbps:t,pingMs:i}),e>0||n.downloadMbps,t>0||n.uploadMbps,"number"==typeof i||n.pingMs}else e.toLowerCase().includes("gpu")&&(A=Math.round(M),T="%",R="GPU Load",N=M,O=100);let I="#4fc3f7";e.toLowerCase().includes("cpu")?I=l.cpuColor:e.toLowerCase().includes("ram")?I=l.ramColor:e.toLowerCase().includes("storage")?I=l.storageColor:e.toLowerCase().includes("network")?I=l.networkColor:e.toLowerCase().includes("gpu")&&(I=l.gpuColor||"#ff9800");const B={labels:["Used","Available"],datasets:[{label:"",data:[N,Math.max(0,O-N)],backgroundColor:[I,"#333"],borderWidth:0}]};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:220,height:220,position:"relative",marginBottom:12},children:[s.jsx(Io,{data:B,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!1}},cutout:"90%",borderRadius:12,maintainAspectRatio:!1,rotation:225,circumference:270}}),s.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"none",fontWeight:"bold",fontSize:32,color:c,textShadow:"0 1px 4px rgba(0,0,0,0.3)"},children:[s.jsxs("span",{children:[A,s.jsx("span",{style:{fontSize:16,fontWeight:"normal",marginLeft:2},children:T})]}),s.jsxs("span",{style:{fontSize:15,color:c,fontWeight:"normal",marginTop:2},children:[R,P]})]})]}),o&&s.jsxs("div",{style:{width:"100%",padding:"8px 0",textAlign:"left",color:c},children:[e.toLowerCase().includes("cpu")&&s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"CPU:"}),s.jsxs("div",{children:["Model: ",h||"Unknown"]}),s.jsxs("div",{children:["Physical Cores: ",d||"N/A"]}),s.jsxs("div",{children:["Total Cores: ",u||"N/A"]}),s.jsxs("div",{children:["Max Frequency: ",f?f+" MHz":"N/A"]}),s.jsxs("div",{children:["Current Frequency: ",p?p+" MHz":"N/A"]}),s.jsxs("div",{children:["Temperature: ",null!==g?g+"C":"N/A"]})]}),e.toLowerCase().includes("gpu")&&Array.isArray(k)&&k.length>0&&s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"GPU:"}),k.map((e,t)=>s.jsxs("div",{style:{marginBottom:6},children:[s.jsxs("div",{children:["Name: ",e.name]}),s.jsxs("div",{children:["Load: ",e.load,"%"]}),s.jsxs("div",{children:["Memory: ",e.memory_used,"MB / ",e.memory_total,"MB"]}),s.jsxs("div",{children:["Temperature: ",e.temperature,"C"]})]},t))]}),e.toLowerCase().includes("ram")&&s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"RAM:"}),s.jsxs("div",{children:["Used: ",M," GB (",(M/O*100).toFixed(1),"%)"]}),s.jsxs("div",{children:["Free: ",(O-M).toFixed(2)," GB"]}),s.jsxs("div",{children:["Total: ",v||"N/A"," GB"]}),s.jsxs("div",{children:["Available: ",_||"N/A"," GB"]}),s.jsxs("div",{children:["Type: ",m]})]}),e.toLowerCase().includes("storage")&&s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"Storage:"}),s.jsxs("div",{children:["Used: ",M," GB (",(M/O*100).toFixed(1),"%)"]}),s.jsxs("div",{children:["Free: ",(O-M).toFixed(2)," GB"]}),s.jsxs("div",{children:["Total: ",b||"N/A"," GB"]}),s.jsxs("div",{children:["Model: ",y]}),s.jsxs("div",{children:["Type: ",x]})]}),e.toLowerCase().includes("network")&&s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"Internet Speed Test:"}),s.jsxs("div",{children:["Status: ",a._parsedSpeed?.error?"Error":a._parsedSpeed?.isTesting?"Testing":a?.internet_speed?"Complete":"Pending"]}),a._parsedSpeed?.error&&s.jsxs("div",{style:{marginTop:6,color:"#ff6b6b"},children:["Error: ",a._parsedSpeed.error]}),a._parsedSpeed&&!a._parsedSpeed.error&&(a._parsedSpeed.downloadMbps>0||a._parsedSpeed.isTesting&&a._prevSpeed)&&s.jsx("div",{style:{marginTop:6},children:a._parsedSpeed.isTesting&&a._prevSpeed?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontWeight:"bold",color:"#ffa726"},children:"Previous Results:"}),s.jsxs("div",{children:["Download: ",a._prevSpeed.downloadMbps?.toFixed(2)||"0.00"," Mbps"]}),s.jsxs("div",{children:["Upload: ",a._prevSpeed.uploadMbps?.toFixed(2)||"0.00"," Mbps"]}),"number"==typeof a._prevSpeed.pingMs&&s.jsxs("div",{children:["Ping: ",a._prevSpeed.pingMs.toFixed(1)," ms"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:["Download: ",a._parsedSpeed.downloadMbps?.toFixed(2)||"0.00"," Mbps"]}),s.jsxs("div",{children:["Upload: ",a._parsedSpeed.uploadMbps?.toFixed(2)||"0.00"," Mbps"]}),"number"==typeof a._parsedSpeed.pingMs&&s.jsxs("div",{children:["Ping: ",a._parsedSpeed.pingMs.toFixed(1)," ms"]})]})}),(!a._parsedSpeed||0===a._parsedSpeed.downloadMbps&&!a._parsedSpeed.isTesting&&!a._parsedSpeed.error)&&s.jsx("div",{style:{marginTop:6,color:"#888"},children:"No speed test data available"})]}),"OS Info"===e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontWeight:"bold",color:c},children:" OS INFO:"}),s.jsxs("div",{children:["OS Name: ",S||"Unknown"]}),s.jsxs("div",{children:["OS Release: ",w||"Unknown"]}),s.jsxs("div",{children:["OS Version: ",C||"Unknown"]}),s.jsxs("div",{children:["System Uptime: ",E?`${Math.floor(E/3600)}h ${Math.floor(E%3600/60)}m`:"N/A"]}),s.jsxs("div",{children:["Process Count: ",j||"N/A"]}),s.jsxs("div",{children:["Response Time: ",L?L+" ms":"N/A"]})]})]})]})},zo=[{name:"Server 1"}],Fo=({collapsed:e})=>{const{customSettings:t}=ne.useContext(Pe),r=Re(t,"background"),[n,o]=i.useState(null),[a,l]=i.useState(null),[c,h]=i.useState(!1),[d,u]=i.useState("pending"),f=i.useRef(null);if(i.useEffect(()=>{if(e)return;const t=()=>{fetch("/api/alterion/panel/system-metrics/").then(e=>e.json()).then(e=>{o(e)}).catch(()=>o(null))};t();const i=setInterval(t,2e3);return()=>clearInterval(i)},[e]),i.useEffect(()=>{if(e)return;const t=()=>{fetch("/api/alterion/panel/internet-speed-test/").then(e=>e.json()).then(e=>{"cached"===e.status||e.data&&!e.progress?(l(e.data||e),u("complete"),f.current&&clearInterval(f.current),f.current=setInterval(t,36e5)):"testing"===e.status||e.progress?(l(e),u("testing"),f.current&&clearInterval(f.current),f.current=setInterval(t,2e3)):e.error?(l({error:e.error}),u("error"),f.current&&clearInterval(f.current),f.current=setInterval(t,3e5)):e.download&&e.upload&&e.ping?(l(e),u("complete"),f.current&&clearInterval(f.current),f.current=setInterval(t,36e5)):(u("pending"),f.current&&clearInterval(f.current),f.current=setInterval(t,5e3))}).catch(e=>{l(null),u("pending")})};return t(),()=>{f.current&&clearInterval(f.current)}},[e]),e)return null;const p=n?Array(12).fill(n.cpu_percent):Array(12).fill(0),g=n?Array(12).fill(n.memory_gb):Array(12).fill(0),m=n?Array(12).fill(n.disk_gb):Array(12).fill(0),v=n?n.memory_total_gb:0,_=n?n.disk_total_gb:0,b=n&&n.network&&void 0!==n.network.download_speed_mbps?Array(12).fill(n.network.download_speed_mbps):Array(12).fill(0),y=n&&n.gpu&&n.gpu.length>0?Array(12).fill(n.gpu[0].load):Array(12).fill(0),x=n?{...n,internet_speed:a}:null,S={background:"gradient"===t.backgroundType?`linear-gradient(135deg, ${t.backgroundColor1}ee, ${t.backgroundColor2}ee)`:`${t.backgroundColor1}ee`,borderRadius:18,boxShadow:"0 4px 24px rgba(0,0,0,0.18)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",padding:24,marginBottom:24,color:r,maxWidth:400,minWidth:260,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"background 0.3s"},w={position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:c?t.cpuColor:"#888",borderRadius:16,transition:".2s"},C={position:"absolute",left:c?16:2,top:2,width:12,height:12,background:"#fff",borderRadius:"50%",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:".2s"};return s.jsxs("aside",{className:"metrics-content",style:{overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{color:r},children:"Metrics"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[s.jsxs("label",{style:{position:"relative",display:"inline-block",width:32,height:16},children:[s.jsx("input",{type:"checkbox",checked:c,onChange:()=>h(e=>!e),style:{display:"none"}}),s.jsx("span",{style:w}),s.jsx("span",{style:C})]}),s.jsx("span",{style:{fontWeight:"bold",color:r},children:c?"Detailed Mode":"Default Mode"})]}),zo.length>1&&s.jsx("select",{disabled:!0,children:zo.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))}),s.jsx("div",{style:S,children:s.jsx(Bo,{label:"CPU Usage",data:p,unit:"%",total:100,detailed:c,metrics:x})}),c&&s.jsx("div",{style:S,children:s.jsx(Bo,{label:"GPU Usage",data:y,unit:"%",total:100,detailed:c,metrics:x})}),s.jsx("div",{style:S,children:s.jsx(Bo,{label:"RAM Usage",data:g,unit:"GB",total:v,detailed:c,metrics:x})}),s.jsx("div",{style:S,children:s.jsx(Bo,{label:"Storage Usage",data:m,unit:"GB",total:_,detailed:c,metrics:x})}),s.jsx("div",{style:S,children:s.jsx(Bo,{label:"Network Usage",data:b,unit:"Mbps",total:1e3,detailed:c,metrics:x})})]}),c&&n&&s.jsx("div",{style:{...S},children:s.jsxs("div",{style:{textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:18,marginBottom:8},children:"OS Info"}),s.jsxs("div",{children:["OS Name: ",n.os_name]}),s.jsxs("div",{children:["OS Release: ",n.os_release]}),s.jsxs("div",{children:["OS Version: ",n.os_version]}),s.jsxs("div",{children:["System Uptime: ",n.system_uptime?`${Math.floor(n.system_uptime/3600)}h ${Math.floor(n.system_uptime%3600/60)}m`:"N/A"]}),s.jsxs("div",{children:["Process Count: ",n.process_count||"N/A"]}),s.jsxs("div",{children:["Response Time: ",n.response_time_ms?n.response_time_ms+" ms":"N/A"]})]})}),s.jsx("style",{children:"\n        .metrics-content::-webkit-scrollbar {\n          display: none;\n        }\n      "})]})};var Ho,$o={exports:{}};var Wo,Uo=Ho?$o.exports:(Ho=1,self,$o.exports=(()=>{var e={4567:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;const n=i(9042),o=i(6114),a=i(9924),l=i(844),c=i(5596),h=i(4725),d=i(3656);let u=t.AccessibilityManager=class extends l.Disposable{constructor(e,t){super(),this._terminal=e,this._renderService=t,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let i=0;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new a.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(e=>this._handleResize(e.rows))),this.register(this._terminal.onRender(e=>this._refreshRows(e.start,e.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(e=>this._handleChar(e))),this.register(this._terminal.onLineFeed(()=>this._handleChar("\n"))),this.register(this._terminal.onA11yTab(e=>this._handleTab(e))),this.register(this._terminal.onKey(e=>this._handleKey(e.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new c.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,l.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)),o.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,o.isMac&&this._liveRegion.remove()}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const i=this._terminal.buffer,s=i.lines.length.toString();for(let r=e;r<=t;r++){const e=i.translateBufferLineToString(i.ydisp+r,!0),t=(i.ydisp+r+1).toString(),n=this._rowElements[r];n&&(0===e.length?n.innerText="":n.textContent=e,n.setAttribute("aria-posinset",t),n.setAttribute("aria-setsize",s))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){const i=e.target,s=this._rowElements[0===t?1:this._rowElements.length-2];if(i.getAttribute("aria-posinset")===(0===t?"1":`${this._terminal.buffer.lines.length}`))return;if(e.relatedTarget!==s)return;let r,n;if(0===t?(r=i,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(r=this._rowElements.shift(),n=i,this._rowContainer.removeChild(r)),r.removeEventListener("focus",this._topBoundaryFocusListener),n.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};t.AccessibilityManager=u=s([r(1,h.IRenderService)],u)},3614:(e,t)=>{function i(e){return e.replace(/\r?\n/g,"\r")}function s(e,t){return t?"[200~"+e+"[201~":e}function r(e,t,r,n){e=s(e=i(e),r.decPrivateModes.bracketedPasteMode&&!0!==n.rawOptions.ignoreBracketedPasteMode),r.triggerDataEvent(e,!0),t.value=""}function n(e,t,i){const s=i.getBoundingClientRect(),r=e.clientX-s.left-10,n=e.clientY-s.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${r}px`,t.style.top=`${n}px`,t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=s,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,i,s){e.stopPropagation(),e.clipboardData&&r(e.clipboardData.getData("text/plain"),t,i,s)},t.paste=r,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,i,s,r){n(e,t,i),r&&s.rightClickSelect(e),t.value=s.selectionText,t.select()}},7239:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;const s=i(1505);t.ColorContrastCache=class{constructor(){this._color=new s.TwoKeyMap,this._css=new s.TwoKeyMap}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,s){e.addEventListener(t,i,s);let r=!1;return{dispose:()=>{r||(r=!0,e.removeEventListener(t,i,s))}}}},6465:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;const n=i(3656),o=i(8460),a=i(844),l=i(2585);let c=t.Linkifier2=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const t=this._linkProviders.indexOf(e);-1!==t&&this._linkProviders.splice(t,1)}}}attachToDom(e,t,i){this._element=e,this._mouseService=t,this._renderService=i,this.register((0,n.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,n.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const i=e.composedPath();for(let s=0;s<i.length;s++){const e=i[s];if(e.classList.contains("xterm"))break;if(e.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var i,s;this._activeProviderReplies&&t||(null===(i=this._activeProviderReplies)||void 0===i||i.forEach(e=>{null==e||e.forEach(e=>{e.link.dispose&&e.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let r=!1;for(const[n,o]of this._linkProviders.entries())t?(null===(s=this._activeProviderReplies)||void 0===s?void 0:s.get(n))&&(r=this._checkLinkProviderResult(n,e,r)):o.provideLinks(e.y,t=>{var i,s;if(this._isMouseOut)return;const o=null==t?void 0:t.map(e=>({link:e}));null===(i=this._activeProviderReplies)||void 0===i||i.set(n,o),r=this._checkLinkProviderResult(n,e,r),(null===(s=this._activeProviderReplies)||void 0===s?void 0:s.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){const i=new Set;for(let s=0;s<t.size;s++){const r=t.get(s);if(r)for(let t=0;t<r.length;t++){const s=r[t],n=s.link.range.start.y<e?0:s.link.range.start.x,o=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x;for(let e=n;e<=o;e++){if(i.has(e)){r.splice(t--,1);break}i.add(e)}}}}_checkLinkProviderResult(e,t,i){var s;if(!this._activeProviderReplies)return i;const r=this._activeProviderReplies.get(e);let n=!1;for(let o=0;o<e;o++)this._activeProviderReplies.has(o)&&!this._activeProviderReplies.get(o)||(n=!0);if(!n&&r){const e=r.find(e=>this._linkAtPosition(e.link,t));e&&(i=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviders.length&&!i)for(let o=0;o<this._activeProviderReplies.size;o++){const e=null===(s=this._activeProviderReplies.get(o))||void 0===s?void 0:s.find(e=>this._linkAtPosition(e.link,t));if(e){i=!0,this._handleNewLink(e);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.pointerCursor},set:e=>{var t,i;(null===(t=this._currentLink)||void 0===t?void 0:t.state)&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&(null===(i=this._element)||void 0===i||i.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.underline},set:t=>{var i,s,r;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(null===(r=null===(s=this._currentLink)||void 0===s?void 0:s.state)||void 0===r?void 0:r.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,i=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i&&(this._clearCurrentLink(t,i),this._lastMouseEvent&&this._element)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}})))}_linkHover(e,t,i){var s;(null===(s=this._currentLink)||void 0===s?void 0:s.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){const i=e.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-s-1,i.end.x,i.end.y-s-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(e,t,i){var s;(null===(s=this._currentLink)||void 0===s?void 0:s.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){const i=e.range.start.y*this._bufferService.cols+e.range.start.x,s=e.range.end.y*this._bufferService.cols+e.range.end.x,r=t.y*this._bufferService.cols+t.x;return i<=r&&r<=s}_positionFromMouseEvent(e,t,i){const s=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,s,r){return{x1:e,y1:t,x2:i,y2:s,cols:this._bufferService.cols,fg:r}}};t.Linkifier2=c=s([r(0,l.IBufferService)],c)},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkProvider=void 0;const n=i(511),o=i(2585);let a=t.OscLinkProvider=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){var i;const s=this._bufferService.buffer.lines.get(e-1);if(!s)return void t(void 0);const r=[],o=this._optionsService.rawOptions.linkHandler,a=new n.CellData,c=s.getTrimmedLength();let h=-1,d=-1,u=!1;for(let n=0;n<c;n++)if(-1!==d||s.hasContent(n)){if(s.loadCell(n,a),a.hasExtendedAttrs()&&a.extended.urlId){if(-1===d){d=n,h=a.extended.urlId;continue}u=a.extended.urlId!==h}else-1!==d&&(u=!0);if(u||-1!==d&&n===c-1){const t=null===(i=this._oscLinkService.getLinkData(h))||void 0===i?void 0:i.uri;if(t){const i={start:{x:d+1,y:e},end:{x:n+(u||n!==c-1?0:1),y:e}};let s=!1;if(!(null==o?void 0:o.allowNonHttpProtocols))try{const e=new URL(t);["http:","https:"].includes(e.protocol)||(s=!0)}catch(f){s=!0}s||r.push({text:t,range:i,activate:(e,t)=>o?o.activate(e,t,i):l(0,t),hover:(e,t)=>{var s;return null===(s=null==o?void 0:o.hover)||void 0===s?void 0:s.call(o,e,t,i)},leave:(e,t)=>{var s;return null===(s=null==o?void 0:o.leave)||void 0===s?void 0:s.call(o,e,t,i)}})}u=!1,a.hasExtendedAttrs()&&a.extended.urlId?(d=n,h=a.extended.urlId):(d=-1,h=-1)}}t(r)}};function l(e,t){if(confirm(`Do you want to navigate to ${t}?\n\nWARNING: This link could potentially be dangerous`)){const e=window.open();if(e){try{e.opener=null}catch(i){}e.location.href=t}}}t.OscLinkProvider=a=s([r(0,o.IBufferService),r(1,o.IOptionsService),r(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._parentWindow=e,this._renderCallback=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},5596:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;const s=i(844);class r extends s.Disposable{constructor(e){super(),this._parentWindow=e,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,s.toDisposable)(()=>{this.clearListener()}))}setListener(e){this._listener&&this.clearListener(),this._listener=e,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}t.ScreenDprMonitor=r},3236:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;const s=i(3614),r=i(3656),n=i(6465),o=i(9042),a=i(3730),l=i(1680),c=i(3107),h=i(5744),d=i(2950),u=i(1296),f=i(428),p=i(4269),g=i(5114),m=i(8934),v=i(3230),_=i(9312),b=i(4725),y=i(6731),x=i(8055),S=i(8969),w=i(8460),C=i(844),k=i(6114),E=i(8437),j=i(2584),L=i(7399),D=i(5941),M=i(9074),A=i(2585),T=i(5435),R=i(4567),P="undefined"!=typeof window?window.document:null;class N extends S.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(e={}){super(e),this.browser=k,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new C.MutableDisposable),this._onCursorMove=this.register(new w.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new w.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new w.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new w.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new w.EventEmitter),this._onBlur=this.register(new w.EventEmitter),this._onA11yCharEmitter=this.register(new w.EventEmitter),this._onA11yTabEmitter=this.register(new w.EventEmitter),this._onWillOpen=this.register(new w.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(n.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(A.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((e,t)=>this.refresh(e,t))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this.register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this.register((0,w.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,w.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,w.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,w.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this.register((0,C.toDisposable)(()=>{var e,t;this._customKeyEventHandler=void 0,null===(t=null===(e=this.element)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.element)}))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,i="";switch(t.index){case 256:e="foreground",i="10";break;case 257:e="background",i="11";break;case 258:e="cursor",i="12";break;default:e="ansi",i="4;"+t.index}switch(t.type){case 0:const s=x.color.toColorRGB("ansi"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent(`${j.C0.ESC}]${i};${(0,D.toRgbString)(s)}${j.C1_ESCAPED.ST}`);break;case 1:if("ansi"===e)this._themeService.modifyColors(e=>e.ansi[t.index]=x.rgba.toColor(...t.color));else{const i=e;this._themeService.modifyColors(e=>e[i]=x.rgba.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(R.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(j.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(j.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const i=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=t.getWidth(i),n=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+"px",this.textarea.style.top=o+"px",this.textarea.style.width=n+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,r.addDisposableDomListener)(this.element,"copy",e=>{this.hasSelection()&&(0,s.copyHandler)(e,this._selectionService)}));const e=e=>(0,s.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,r.addDisposableDomListener)(this.textarea,"paste",e)),this.register((0,r.addDisposableDomListener)(this.element,"paste",e)),k.isFirefox?this.register((0,r.addDisposableDomListener)(this.element,"mousedown",e=>{2===e.button&&(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,r.addDisposableDomListener)(this.element,"contextmenu",e=>{(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),k.isLinux&&this.register((0,r.addDisposableDomListener)(this.element,"auxclick",e=>{1===e.button&&(0,s.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,r.addDisposableDomListener)(this.textarea,"keyup",e=>this._keyUp(e),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keydown",e=>this._keyDown(e),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keypress",e=>this._keyPress(e),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,r.addDisposableDomListener)(this.textarea,"input",e=>this._inputEvent(e),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var t;if(!e)throw new Error("Terminal requires a parent element.");e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);const i=P.createDocumentFragment();this._viewportElement=P.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),i.appendChild(this._viewportElement),this._viewportScrollArea=P.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=P.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=P.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),i.appendChild(this.screenElement),this.textarea=P.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",o.promptLabel),k.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(g.CoreBrowserService,this.textarea,null!==(t=this._document.defaultView)&&void 0!==t?t:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,r.addDisposableDomListener)(this.textarea,"focus",e=>this._handleTextAreaFocus(e))),this.register((0,r.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(y.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(v.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(e=>this._onRender.fire(e))),this.onResize(e=>this._renderService.resize(e.cols,e.rows)),this._compositionView=P.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(i);try{this._onWillOpen.fire(this.element)}catch(s){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(m.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(l.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,r.addDisposableDomListener)(this.element,"mousedown",e=>this._selectionService.handleMouseDown(e))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(R.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",e=>this._handleScreenReaderModeOptionChange(e))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(u.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const e=this,t=this.element;function i(t){const i=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!i)return!1;let s,r;switch(t.overrideType||t.type){case"mousemove":r=32,void 0===t.buttons?(s=3,void 0!==t.button&&(s=t.button<3?t.button:3)):s=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":r=0,s=t.button<3?t.button:3;break;case"mousedown":r=1,s=t.button<3?t.button:3;break;case"wheel":if(0===e.viewport.getLinesScrolled(t))return!1;r=t.deltaY<0?0:1,s=4;break;default:return!1}return!(void 0===r||void 0===s||s>4)&&e.coreMouseService.triggerMouseEvent({col:i.col,row:i.row,x:i.x,y:i.y,button:s,action:r,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},n={mouseup:e=>(i(e),e.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(e)),wheel:e=>(i(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&i(e)},mousemove:e=>{e.buttons||i(e)}};this.register(this.coreMouseService.onProtocolChange(e=>{e?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(e)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&e?s.mousemove||(t.addEventListener("mousemove",n.mousemove),s.mousemove=n.mousemove):(t.removeEventListener("mousemove",s.mousemove),s.mousemove=null),16&e?s.wheel||(t.addEventListener("wheel",n.wheel,{passive:!1}),s.wheel=n.wheel):(t.removeEventListener("wheel",s.wheel),s.wheel=null),2&e?s.mouseup||(t.addEventListener("mouseup",n.mouseup),s.mouseup=n.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),t.removeEventListener("mouseup",s.mouseup),s.mouseup=null),4&e?s.mousedrag||(s.mousedrag=n.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,r.addDisposableDomListener)(t,"mousedown",e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return i(e),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(e)})),this.register((0,r.addDisposableDomListener)(t,"wheel",e=>{if(!s.wheel){if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const i=j.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(e.deltaY<0?"A":"B");let s="";for(let e=0;e<Math.abs(t);e++)s+=i;return this.coreService.triggerDataEvent(s,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}},{passive:!1})),this.register((0,r.addDisposableDomListener)(t,"touchstart",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)},{passive:!0})),this.register((0,r.addDisposableDomListener)(t,"touchmove",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)},{passive:!1}))}refresh(e,t){var i;null===(i=this._renderService)||void 0===i||i.refreshRows(e,t)}updateCursorStyle(e){var t;(null===(t=this._selectionService)||void 0===t?void 0:t.shouldColumnSelect(e))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t,i=0){var s;1===i?(super.scrollLines(e,t,i),this.refresh(0,this.rows-1)):null===(s=this.viewport)||void 0===s||s.scrollLines(e)}paste(e){(0,s.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}registerLinkProvider(e){return this.linkifier2.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()}selectAll(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()}selectLines(e,t){var i;null===(i=this._selectionService)||void 0===i||i.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);const i=(0,L.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===i.type||2===i.type){const t=this.rows-1;return this.scrollLines(2===i.type?-t:t),this.cancel(e,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(i.key!==j.C0.ETX&&i.key!==j.C0.CR||(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){var t;this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(16===(t=e).keyCode||17===t.keyCode||18===t.keyCode||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){var i,s;null===(i=this._charSizeService)||void 0===i||i.measure(),null===(s=this.viewport)||void 0===s||s.syncScrollArea(!0)}clear(){var e;if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(E.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),null===(e=this.viewport)||void 0===e||e.reset(),this.refresh(0,this.rows-1)}}reset(){var e,t;this.options.rows=this.rows,this.options.cols=this.cols;const i=this._customKeyEventHandler;this._setup(),super.reset(),null===(e=this._selectionService)||void 0===e||e.reset(),this._decorationService.reset(),null===(t=this.viewport)||void 0===t||t.reset(),this._customKeyEventHandler=i,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()}_reportFocus(){var e;(null===(e=this.element)||void 0===e?void 0:e.classList.contains("focus"))?this.coreService.triggerDataEvent(j.C0.ESC+"[I"):this.coreService.triggerDataEvent(j.C0.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${j.C0.ESC}[4;${t};${e}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const i=this._renderService.dimensions.css.cell.width.toFixed(0),s=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${j.C0.ESC}[6;${s};${i}t`)}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=N},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e,t=1e3){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const s=Date.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=s-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const n=i(3656),o=i(4725),a=i(8460),l=i(844),c=i(2585);let h=t.Viewport=class extends l.Disposable{constructor(e,t,i,s,r,o,l,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=i,this._optionsService=s,this._charSizeService=r,this._renderService=o,this._coreBrowserService=l,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(e=>this._renderDimensions=e)),this._handleThemeChange(c.colors),this.register(c.onChangeColors(e=>this._handleThemeChange(e))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){var i;let s,r="";const n=[],o=null!=t?t:this._bufferService.buffer.lines.length,a=this._bufferService.buffer.lines;for(let l=e;l<o;l++){const e=a.get(l);if(!e)continue;const t=null===(i=a.get(l+1))||void 0===i?void 0:i.isWrapped;if(r+=e.translateToString(!t),!t||l===a.length-1){const e=document.createElement("div");e.textContent=r,n.push(e),r.length>0&&(s=e),r=""}}return{bufferElements:n,cursorElement:s}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const i=this._optionsService.rawOptions.fastScrollModifier;return"alt"===i&&t.altKey||"ctrl"===i&&t.ctrlKey||"shift"===i&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=h=s([r(2,c.IBufferService),r(3,c.IOptionsService),r(4,o.ICharSizeService),r(5,o.IRenderService),r(6,o.ICoreBrowserService),r(7,o.IThemeService)],h)},3107:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;const n=i(3656),o=i(4725),a=i(844),l=i(2585);let c=t.BufferDecorationRenderer=class extends a.Disposable{constructor(e,t,i,s){super(),this._screenElement=e,this._bufferService=t,this._decorationService=i,this._renderService=s,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,n.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(e=>this._removeDecoration(e))),this.register((0,a.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var t,i;const s=document.createElement("div");s.classList.add("xterm-decoration"),s.classList.toggle("xterm-decoration-top-layer","top"===(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.layer)),s.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",s.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const r=null!==(i=e.options.x)&&void 0!==i?i:0;return r&&r>this._bufferService.cols&&(s.style.display="none"),this._refreshXPosition(e,s),s}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose(()=>{this._decorationElements.delete(e),i.remove()})),i.style.top=t*this._renderService.dimensions.css.cell.height+"px",i.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){var i;if(!t)return;const s=null!==(i=e.options.x)&&void 0!==i?i:0;"right"===(e.options.anchor||"left")?t.style.right=s?s*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=s?s*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var t;null===(t=this._decorationElements.get(e))||void 0===t||t.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=c=s([r(1,l.IBufferService),r(2,l.IDecorationService),r(3,o.IRenderService)],c)},5871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;const n=i(5871),o=i(3656),a=i(4725),l=i(844),c=i(2585),h={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0};let f=t.OverviewRulerRenderer=class extends l.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,i,s,r,o,a){var c;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=s,this._renderService=r,this._optionsService=o,this._coreBrowseService=a,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),null===(c=this._viewportElement.parentElement)||void 0===c||c.insertBefore(this._canvas,this._viewportElement);const h=this._canvas.getContext("2d");if(!h)throw new Error("Ctx cannot be null");this._ctx=h,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,l.toDisposable)(()=>{var e;null===(e=this._canvas)||void 0===e||e.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,o.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=e,d.center=t,d.right=e,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=d.left,u.right=d.left+d.center}_refreshDrawHeightConstants(){h.full=Math.round(2*this._coreBrowseService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowseService.dpr);h.left=t,h.center=t,h.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)"full"!==t.position&&this._renderColorZone(t);for(const t of e)"full"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(u[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-h[e.position||"full"]/2),d[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+h[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};t.OverviewRulerRenderer=f=s([r(2,c.IBufferService),r(3,c.IDecorationService),r(4,a.IRenderService),r(5,c.IOptionsService),r(6,a.ICoreBrowserService)],f)},2950:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;const n=i(4725),o=i(2585),a=i(2584);let l=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,i,s,r,n){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=s,this._coreService=r,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${a.C0.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,s=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=s+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const r=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};t.CompositionHelper=l=s([r(2,o.IBufferService),r(3,o.IOptionsService),r(4,o.ICoreService),r(5,n.IRenderService)],l)},9806:(e,t)=>{function i(e,t,i){const s=i.getBoundingClientRect(),r=e.getComputedStyle(i),n=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-top"));return[t.clientX-s.left-n,t.clientY-s.top-o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,s,r,n,o,a,l,c){if(!o)return;const h=i(e,t,s);return h?(h[0]=Math.ceil((h[0]+(c?a/2:0))/a),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),r+(c?1:0)),h[1]=Math.min(Math.max(h[1],1),n),h):void 0}},9504:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;const s=i(2584);function r(e,t,i,s){const r=e-n(e,i),a=t-n(t,i);return c(Math.abs(r-a)-function(e,t,i){let s=0;const r=e-n(e,i),a=t-n(t,i);for(let n=0;n<Math.abs(r-a);n++){const a="A"===o(e,t)?-1:1,l=i.buffer.lines.get(r+a*n);(null==l?void 0:l.isWrapped)&&s++}return s}(e,t,i),l(o(e,t),s))}function n(e,t){let i=0,s=t.buffer.lines.get(e),r=null==s?void 0:s.isWrapped;for(;r&&e>=0&&e<t.rows;)i++,s=t.buffer.lines.get(--e),r=null==s?void 0:s.isWrapped;return i}function o(e,t){return e>t?"A":"B"}function a(e,t,i,s,r,n){let o=e,a=t,l="";for(;o!==i||a!==s;)o+=r?1:-1,r&&o>n.cols-1?(l+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!r&&o<0&&(l+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return l+n.buffer.translateBufferLineToString(a,!1,e,o)}function l(e,t){const i=t?"O":"[";return s.C0.ESC+i+e}function c(e,t){e=Math.floor(e);let i="";for(let s=0;s<e;s++)i+=t;return i}t.moveToCellSequence=function(e,t,i,s){const o=i.buffer.x,h=i.buffer.y;if(!i.buffer.hasScrollback)return d=o,(0===r(u=h,t,f=i,p=s).length?"":c(a(d,u,d,u-n(u,f),!1,f).length,l("D",p)))+r(h,t,i,s)+function(e,t,i,s,o,h){let d;d=r(t,s,o,h).length>0?s-n(s,o):t;const u=s,f=function(e,t,i,s,o,a){let l;return l=r(i,s,o,a).length>0?s-n(s,o):t,e<i&&l<=s||e>=i&&l<s?"C":"D"}(e,t,i,s,o,h);return c(a(e,d,i,u,"C"===f,o).length,l(f,h))}(o,h,e,t,i,s);var d,u,f,p;let g;if(h===t)return g=o>e?"D":"C",c(Math.abs(o-e),l(g,s));g=h>t?"D":"C";const m=Math.abs(h-t);return c(function(e,t){return t.cols-e}(h>t?e:o,i)+(m-1)*i.cols+1+((h>t?o:e)-1),l(g,s))}},1296:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;const n=i(3787),o=i(2550),a=i(2223),l=i(6171),c=i(4725),h=i(8055),d=i(8460),u=i(844),f=i(2585),p="xterm-dom-renderer-owner-",g="xterm-rows",m="xterm-fg-",v="xterm-bg-",_="xterm-focus",b="xterm-selection";let y=1,x=t.DomRenderer=class extends u.Disposable{constructor(e,t,i,s,r,a,c,h,f,m){super(),this._element=e,this._screenElement=t,this._viewportElement=i,this._linkifier2=s,this._charSizeService=a,this._optionsService=c,this._bufferService=h,this._coreBrowserService=f,this._themeService=m,this._terminalClass=y++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,l.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(e=>this._injectCss(e))),this._injectCss(this._themeService.colors),this._rowFactory=r.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(e=>this._handleLinkHover(e))),this.register(this._linkifier2.onHideLinkUnderline(e=>this._handleLinkLeave(e))),this.register((0,u.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new o.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const i of this._rowElements)i.style.width=`${this.dimensions.css.canvas.width}px`,i.style.height=`${this.dimensions.css.cell.height}px`,i.style.lineHeight=`${this.dimensions.css.cell.height}px`,i.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const t=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${g} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${g} .xterm-dim { color: ${h.color.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",t+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${g}.${_} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g}.${_} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(const[i,s]of e.ansi.entries())t+=`${this._terminalSelector} .${m}${i} { color: ${s.css}; }${this._terminalSelector} .${m}${i}.xterm-dim { color: ${h.color.multiplyOpacity(s,.5).css}; }${this._terminalSelector} .${v}${i} { background-color: ${s.css}; }`;t+=`${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(e.background).css}; }${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(e.background),.5).css}; }${this._terminalSelector} .${v}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let i=this._rowElements.length;i<=t;i++){const e=document.createElement("div");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(_)}handleFocus(){this._rowContainer.classList.add(_),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;const s=e[1]-this._bufferService.buffer.ydisp,r=t[1]-this._bufferService.buffer.ydisp,n=Math.max(s,0),o=Math.min(r,this._bufferService.rows-1);if(n>=this._bufferService.rows||o<0)return;const a=document.createDocumentFragment();if(i){const i=e[0]>t[0];a.appendChild(this._createSelectionElement(n,i?t[0]:e[0],i?e[0]:t[0],o-n+1))}else{const i=s===n?e[0]:0,l=n===r?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,i,l));const c=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,c)),n!==o){const e=r===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,i,s=1){const r=document.createElement("div");return r.style.height=s*this.dimensions.css.cell.height+"px",r.style.top=e*this.dimensions.css.cell.height+"px",r.style.left=t*this.dimensions.css.cell.width+"px",r.style.width=this.dimensions.css.cell.width*(i-t)+"px",r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const i=this._bufferService.buffer,s=i.ybase+i.y,r=Math.min(i.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let l=e;l<=t;l++){const e=l+i.ydisp,t=this._rowElements[l],c=i.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===s,o,a,r,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,s,r,n){i<0&&(e=0),s<0&&(t=0);const o=this._bufferService.rows-1;i=Math.max(Math.min(i,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);const a=this._bufferService.buffer,l=a.ybase+a.y,c=Math.min(a.x,r-1),h=this._optionsService.rawOptions.cursorBlink,d=this._optionsService.rawOptions.cursorStyle,u=this._optionsService.rawOptions.cursorInactiveStyle;for(let f=i;f<=s;++f){const o=f+a.ydisp,p=this._rowElements[f],g=a.lines.get(o);if(!p||!g)break;p.replaceChildren(...this._rowFactory.createRow(g,o,o===l,d,u,c,h,this.dimensions.css.cell.width,this._widthCache,n?f===i?e:0:-1,n?(f===s?t:r)-1:-1))}}};t.DomRenderer=x=s([r(4,f.IInstantiationService),r(5,c.ICharSizeService),r(6,f.IOptionsService),r(7,f.IBufferService),r(8,c.ICoreBrowserService),r(9,c.IThemeService)],x)},3787:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=void 0;const n=i(2223),o=i(643),a=i(511),l=i(2585),c=i(8055),h=i(4725),d=i(4269),u=i(6171),f=i(3734);let p=t.DomRendererRowFactory=class{constructor(e,t,i,s,r,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=s,this._coreService=r,this._decorationService=n,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,s,r,a,l,h,u,p,m){const v=[],_=this._characterJoinerService.getJoinedCharacters(t),b=this._themeService.colors;let y,x=e.getNoBgTrimmedLength();i&&x<a+1&&(x=a+1);let S=0,w="",C=0,k=0,E=0,j=!1,L=0,D=!1,M=0;const A=[],T=-1!==p&&-1!==m;for(let R=0;R<x;R++){e.loadCell(R,this._workCell);let x=this._workCell.getWidth();if(0===x)continue;let P=!1,N=R,O=this._workCell;if(_.length>0&&R===_[0][0]){P=!0;const t=_.shift();O=new d.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),N=t[1]-1,x=O.getWidth()}const I=this._isCellInSelection(R,t),B=i&&R===a,z=T&&R>=p&&R<=m;let F=!1;this._decorationService.forEachDecorationAtCell(R,t,void 0,e=>{F=!0});let H=O.getChars()||o.WHITESPACE_CELL_CHAR;if(" "===H&&(O.isUnderline()||O.isOverline())&&(H=""),M=x*h-u.get(H,O.isBold(),O.isItalic()),y){if(S&&(I&&D||!I&&!D&&O.bg===C)&&(I&&D&&b.selectionForeground||O.fg===k)&&O.extended.ext===E&&z===j&&M===L&&!B&&!P&&!F){w+=H,S++;continue}S&&(y.textContent=w),y=this._document.createElement("span"),S=0,w=""}else y=this._document.createElement("span");if(C=O.bg,k=O.fg,E=O.extended.ext,j=z,L=M,D=I,P&&a>=R&&a<=N&&(a=R),!this._coreService.isCursorHidden&&B)if(A.push("xterm-cursor"),this._coreBrowserService.isFocused)l&&A.push("xterm-cursor-blink"),A.push("bar"===s?"xterm-cursor-bar":"underline"===s?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":A.push("xterm-cursor-outline");break;case"block":A.push("xterm-cursor-block");break;case"bar":A.push("xterm-cursor-bar");break;case"underline":A.push("xterm-cursor-underline")}if(O.isBold()&&A.push("xterm-bold"),O.isItalic()&&A.push("xterm-italic"),O.isDim()&&A.push("xterm-dim"),w=O.isInvisible()?o.WHITESPACE_CELL_CHAR:O.getChars()||o.WHITESPACE_CELL_CHAR,O.isUnderline()&&(A.push(`xterm-underline-${O.extended.underlineStyle}`)," "===w&&(w=""),!O.isUnderlineColorDefault()))if(O.isUnderlineColorRGB())y.style.textDecorationColor=`rgb(${f.AttributeData.toColorRGB(O.getUnderlineColor()).join(",")})`;else{let e=O.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&O.isBold()&&e<8&&(e+=8),y.style.textDecorationColor=b.ansi[e].css}O.isOverline()&&(A.push("xterm-overline")," "===w&&(w="")),O.isStrikethrough()&&A.push("xterm-strikethrough"),z&&(y.style.textDecoration="underline");let $=O.getFgColor(),W=O.getFgColorMode(),U=O.getBgColor(),V=O.getBgColorMode();const q=!!O.isInverse();if(q){const e=$;$=U,U=e;const t=W;W=V,V=t}let K,Y,G,X=!1;switch(this._decorationService.forEachDecorationAtCell(R,t,void 0,e=>{"top"!==e.options.layer&&X||(e.backgroundColorRGB&&(V=50331648,U=e.backgroundColorRGB.rgba>>8&16777215,K=e.backgroundColorRGB),e.foregroundColorRGB&&(W=50331648,$=e.foregroundColorRGB.rgba>>8&16777215,Y=e.foregroundColorRGB),X="top"===e.options.layer)}),!X&&I&&(K=this._coreBrowserService.isFocused?b.selectionBackgroundOpaque:b.selectionInactiveBackgroundOpaque,U=K.rgba>>8&16777215,V=50331648,X=!0,b.selectionForeground&&(W=50331648,$=b.selectionForeground.rgba>>8&16777215,Y=b.selectionForeground)),X&&A.push("xterm-decoration-top"),V){case 16777216:case 33554432:G=b.ansi[U],A.push(`xterm-bg-${U}`);break;case 50331648:G=c.rgba.toColor(U>>16,U>>8&255,255&U),this._addStyle(y,`background-color:#${g((U>>>0).toString(16),"0",6)}`);break;default:q?(G=b.foreground,A.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):G=b.background}switch(K||O.isDim()&&(K=c.color.multiplyOpacity(G,.5)),W){case 16777216:case 33554432:O.isBold()&&$<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&($+=8),this._applyMinimumContrast(y,G,b.ansi[$],O,K,void 0)||A.push(`xterm-fg-${$}`);break;case 50331648:const e=c.rgba.toColor($>>16&255,$>>8&255,255&$);this._applyMinimumContrast(y,G,e,O,K,Y)||this._addStyle(y,`color:#${g($.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(y,G,b.foreground,O,K,void 0)||q&&A.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}A.length&&(y.className=A.join(" "),A.length=0),B||P||F?y.textContent=w:S++,M!==this.defaultSpacing&&(y.style.letterSpacing=`${M}px`),v.push(y),R=N}return y&&S&&(y.textContent=w),v}_applyMinimumContrast(e,t,i,s,r,n){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,u.excludeFromContrastRatioDemands)(s.getCode()))return!1;const o=this._getContrastCache(s);let a;if(r||n||(a=o.getColor(t.rgba,i.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);a=c.color.ensureContrastRatio(r||t,n||i,e),o.setColor((r||t).rgba,(n||i).rgba,null!=a?a:null)}return!!a&&(this._addStyle(e,`color:${a.css}`),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){const i=this._selectionStart,s=this._selectionEnd;return!(!i||!s)&&(this._columnSelectMode?i[0]<=s[0]?e>=i[0]&&t>=i[1]&&e<s[0]&&t<=s[1]:e<i[0]&&t>=i[1]&&e>=s[0]&&t<=s[1]:t>i[1]&&t<s[1]||i[1]===s[1]&&t===i[1]&&e>=i[0]&&e<s[0]||i[1]<s[1]&&t===s[1]&&e<s[0]||i[1]<s[1]&&t===i[1]&&e>=i[0])}};function g(e,t,i){for(;e.length<i;)e=t+e;return e}t.DomRendererRowFactory=p=s([r(1,h.ICharacterJoinerService),r(2,l.IOptionsService),r(3,h.ICoreBrowserService),r(4,l.ICoreService),r(5,l.IDecorationService),r(6,h.IThemeService)],p)},2550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const t=e.createElement("span"),i=e.createElement("span");i.style.fontWeight="bold";const s=e.createElement("span");s.style.fontStyle="italic";const r=e.createElement("span");r.style.fontWeight="bold",r.style.fontStyle="italic",this._measureElements=[t,i,s,r],this._container.appendChild(t),this._container.appendChild(i),this._container.appendChild(s),this._container.appendChild(r),e.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,s){e===this._font&&t===this._fontSize&&i===this._weight&&s===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(e,t,i){let s=0;if(!t&&!i&&1===e.length&&(s=e.charCodeAt(0))<256)return-9999!==this._flat[s]?this._flat[s]:this._flat[s]=this._measure(e,0);let r=e;t&&(r+="B"),i&&(r+="I");let n=this._holey.get(r);if(void 0===n){let s=0;t&&(s|=1),i&&(s|=2),n=this._measure(e,s),this._holey.set(r,n)}return n}_measure(e,t){const i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}}},2223:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const s=i(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=s.isFirefox||s.isLegacyEdge?"bottom":"ideographic"},6171:(e,t)=>{function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return i(e)||9472<=(t=e)&&t<=9631;var t},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;const n=i(2585),o=i(8460),a=i(844);let l=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new c(e,t,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=l=s([r(2,n.IOptionsService)],l);class c{constructor(e,t,i){this._document=e,this._parentElement=t,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const e={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return 0!==e.width&&0!==e.height&&(this._result.width=e.width/32,this._result.height=Math.ceil(e.height)),this._result}}},4269:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=i(3734),o=i(643),a=i(511),l=i(2585);class c extends n.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let h=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const i=[],s=t.translateToString(!0);let r=0,n=0,a=0,l=t.getFg(0),c=t.getBg(0);for(let h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==l||this._workCell.bg!==c){if(h-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}r=h,a=n,l=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}return i}_getJoinedRanges(t,i,s,r,n){const o=t.substring(i,s);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(l){}for(let c=1;c<this._characterJoiners.length;c++)try{const t=this._characterJoiners[c].handler(o);for(let i=0;i<t.length;i++)e._mergeRanges(a,t[i])}catch(l){}return this._stringRangesToCellRanges(a,r,n),a}_stringRangesToCellRanges(e,t,i){let s=0,r=!1,n=0,a=e[s];if(a){for(let l=i;l<this._bufferService.cols;l++){const i=t.getWidth(l),c=t.getString(l).length||o.WHITESPACE_CELL_CHAR.length;if(0!==i){if(!r&&a[0]<=n&&(a[0]=l,r=!0),a[1]<=n){if(a[1]=l,a=e[++s],!a)break;a[0]<=n?(a[0]=l,r=!0):r=!1}n+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let s=0;s<e.length;s++){const r=e[s];if(i){if(t[1]<=r[0])return e[s-1][1]=t[1],e;if(t[1]<=r[1])return e[s-1][1]=Math.max(t[1],r[1]),e.splice(s,1),e;e.splice(s,1),s--}else{if(t[1]<=r[0])return e.splice(s,0,t),e;if(t[1]<=r[1])return r[0]=Math.min(t[0],r[0]),e;t[0]<r[1]&&(r[0]=Math.min(t[0],r[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=h=s([r(0,l.IBufferService)],h)},5114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0,t.CoreBrowserService=class{constructor(e,t){this._textarea=e,this.window=t,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;const n=i(4725),o=i(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,s,r){return(0,o.getCoords)(window,e,t,i,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(e,t){const i=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};t.MouseService=a=s([r(0,n.IRenderService),r(1,n.ICharSizeService)],a)},3230:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;const n=i(3656),o=i(6193),a=i(5596),l=i(4725),c=i(8460),h=i(844),d=i(7226),u=i(2585);let f=t.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,i,s,r,l,u,f){if(super(),this._rowCount=e,this._charSizeService=s,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new c.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new c.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new c.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new c.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new o.RenderDebouncer(u.window,(e,t)=>this._renderRows(e,t)),this.register(this._renderDebouncer),this._screenDprMonitor=new a.ScreenDprMonitor(u.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(l.onResize(()=>this._fullRefresh())),this.register(l.buffers.onBufferActivate(()=>{var e;return null===(e=this._renderer.value)||void 0===e?void 0:e.clear()})),this.register(i.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(r.onDecorationRegistered(()=>this._fullRefresh())),this.register(r.onDecorationRemoved(()=>this._fullRefresh())),this.register(i.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(l.cols,l.rows),this._fullRefresh()})),this.register(i.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(l.buffer.y,l.buffer.y,!0))),this.register((0,n.addDisposableDomListener)(u.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(f.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in u.window){const e=new u.window.IntersectionObserver(e=>this._handleIntersectionChange(e[e.length-1]),{threshold:0});e.observe(t),this.register({dispose:()=>e.disconnect()})}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){this._isPaused?this._needsFullRefresh=!0:(i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&(null===(t=(e=this._renderer.value).clearTextureAtlas)||void 0===t||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(e,t)):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCharSizeChanged()}handleBlur(){var e;null===(e=this._renderer.value)||void 0===e||e.handleBlur()}handleFocus(){var e;null===(e=this._renderer.value)||void 0===e||e.handleFocus()}handleSelectionChanged(e,t,i){var s;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,null===(s=this._renderer.value)||void 0===s||s.handleSelectionChanged(e,t,i)}handleCursorMove(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCursorMove()}clear(){var e;null===(e=this._renderer.value)||void 0===e||e.clear()}};t.RenderService=f=s([r(2,u.IOptionsService),r(3,l.ICharSizeService),r(4,u.IDecorationService),r(5,u.IBufferService),r(6,l.ICoreBrowserService),r(7,l.IThemeService)],f)},9312:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const n=i(9806),o=i(9504),a=i(456),l=i(4725),c=i(8460),h=i(844),d=i(6114),u=i(4841),f=i(511),p=i(2585),g=String.fromCharCode(160),m=new RegExp(g,"g");let v=t.SelectionService=class extends h.Disposable{constructor(e,t,i,s,r,n,o,l,d){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=s,this._coreService=r,this._mouseService=n,this._optionsService=o,this._renderService=l,this._coreBrowserService=d,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(e=>this._handleTrim(e)),this.register(this._bufferService.buffers.onBufferActivate(e=>this._handleBufferActivate(e))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";const i=this._bufferService.buffer,s=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";const r=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=i.translateBufferLineToString(o,!0,r,n);s.push(e)}}else{const r=e[1]===t[1]?t[0]:void 0;s.push(i.translateBufferLineToString(e[1],!0,e[0],r));for(let n=e[1]+1;n<=t[1]-1;n++){const e=i.lines.get(n),t=i.translateBufferLineToString(n,!0);(null==e?void 0:e.isWrapped)?s[s.length-1]+=t:s.push(t)}if(e[1]!==t[1]){const e=i.lines.get(t[1]),r=i.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?s[s.length-1]+=r:s.push(r)}}return s.map(e=>e.replace(m," ")).join(d.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!!(i&&s&&t)&&this._areCoordsInSelection(t,i,s)}isCellInSelection(e,t){const i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!(!i||!s)&&this._areCoordsInSelection([e,t],i,s)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var i,s;const r=null===(s=null===(i=this._linkifier.currentLink)||void 0===i?void 0:i.link)||void 0===s?void 0:s.range;if(r)return this._model.selectionStart=[r.start.x-1,r.start.y-1],this._model.selectionStartLength=(0,u.getRangeLength)(r,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const n=this._getMouseBufferCoords(e);return!!n&&(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return d.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){const e=i.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);i?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,i)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let s=0;t>=s;s++){const r=e.loadCell(s,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:r>1&&t!==s&&(i+=r-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,s=!0){if(e[0]>=this._bufferService.cols)return;const r=this._bufferService.buffer,n=r.lines.get(e[1]);if(!n)return;const o=r.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(n,e[0]),l=a;const c=e[0]-a;let h=0,d=0,u=0,f=0;if(" "===o.charAt(a)){for(;a>0&&" "===o.charAt(a-1);)a--;for(;l<o.length&&" "===o.charAt(l+1);)l++}else{let t=e[0],i=e[0];0===n.getWidth(t)&&(h++,t--),2===n.getWidth(i)&&(d++,i++);const s=n.getString(i).length;for(s>1&&(f+=s-1,l+=s-1);t>0&&a>0&&!this._isCharWordSeparator(n.loadCell(t-1,this._workCell));){n.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(h++,t--):e>1&&(u+=e-1,a-=e-1),a--,t--}for(;i<n.length&&l+1<o.length&&!this._isCharWordSeparator(n.loadCell(i+1,this._workCell));){n.loadCell(i+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(d++,i++):e>1&&(f+=e-1,l+=e-1),l++,i++}}l++;let p=a+c-h+u,g=Math.min(this._bufferService.cols,l-a+h+d-u-f);if(t||""!==o.slice(a,l).trim()){if(i&&0===p&&32!==n.getCodePoint(0)){const t=r.lines.get(e[1]-1);if(t&&n.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;p-=e,g+=e}}}if(s&&p+g===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){const t=r.lines.get(e[1]+1);if((null==t?void 0:t.isWrapped)&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(g+=t.length)}}return{start:p,length:g}}}_selectWordAt(e,t){const i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,u.getRangeLength)(i,this._bufferService.cols)}};t.SelectionService=v=s([r(3,p.IBufferService),r(4,p.ICoreService),r(5,l.IMouseService),r(6,p.IOptionsService),r(7,l.IRenderService),r(8,l.ICoreBrowserService)],v)},4725:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const s=i(8343);t.ICharSizeService=(0,s.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,s.createDecorator)("CoreBrowserService"),t.IMouseService=(0,s.createDecorator)("MouseService"),t.IRenderService=(0,s.createDecorator)("RenderService"),t.ISelectionService=(0,s.createDecorator)("SelectionService"),t.ICharacterJoinerService=(0,s.createDecorator)("CharacterJoinerService"),t.IThemeService=(0,s.createDecorator)("ThemeService")},6731:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const n=i(7239),o=i(8055),a=i(8460),l=i(844),c=i(2585),h=o.css.toColor("#ffffff"),d=o.css.toColor("#000000"),u=o.css.toColor("#ffffff"),f=o.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){const s=t[i/36%6|0],r=t[i/6%6|0],n=t[i%6];e.push({css:o.channels.toCss(s,r,n),rgba:o.channels.toRgba(s,r,n)})}for(let i=0;i<24;i++){const t=8+10*i;e.push({css:o.channels.toCss(t,t,t),rgba:o.channels.toRgba(t,t,t)})}return e})());let g=t.ThemeService=class extends l.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:d,cursor:u,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:o.color.blend(d,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:o.color.blend(d,p),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(e={}){const i=this._colors;if(i.foreground=m(e.foreground,h),i.background=m(e.background,d),i.cursor=m(e.cursor,u),i.cursorAccent=m(e.cursorAccent,f),i.selectionBackgroundTransparent=m(e.selectionBackground,p),i.selectionBackgroundOpaque=o.color.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=m(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=o.color.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?m(e.selectionForeground,o.NULL_COLOR):void 0,i.selectionForeground===o.NULL_COLOR&&(i.selectionForeground=void 0),o.color.isOpaque(i.selectionBackgroundTransparent)){const e=.3;i.selectionBackgroundTransparent=o.color.opacity(i.selectionBackgroundTransparent,e)}if(o.color.isOpaque(i.selectionInactiveBackgroundTransparent)){const e=.3;i.selectionInactiveBackgroundTransparent=o.color.opacity(i.selectionInactiveBackgroundTransparent,e)}if(i.ansi=t.DEFAULT_ANSI_COLORS.slice(),i.ansi[0]=m(e.black,t.DEFAULT_ANSI_COLORS[0]),i.ansi[1]=m(e.red,t.DEFAULT_ANSI_COLORS[1]),i.ansi[2]=m(e.green,t.DEFAULT_ANSI_COLORS[2]),i.ansi[3]=m(e.yellow,t.DEFAULT_ANSI_COLORS[3]),i.ansi[4]=m(e.blue,t.DEFAULT_ANSI_COLORS[4]),i.ansi[5]=m(e.magenta,t.DEFAULT_ANSI_COLORS[5]),i.ansi[6]=m(e.cyan,t.DEFAULT_ANSI_COLORS[6]),i.ansi[7]=m(e.white,t.DEFAULT_ANSI_COLORS[7]),i.ansi[8]=m(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),i.ansi[9]=m(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),i.ansi[10]=m(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),i.ansi[11]=m(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),i.ansi[12]=m(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),i.ansi[13]=m(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),i.ansi[14]=m(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),i.ansi[15]=m(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const s=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let r=0;r<s;r++)i.ansi[r+16]=m(e.extendedAnsi[r],t.DEFAULT_ANSI_COLORS[r+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function m(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch(i){}return t}t.ThemeService=g=s([r(0,c.IOptionsService)],g)},6349:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new s.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new s.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new s.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let i=e;i<this._length-t;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let s=this._length-1;s>=e;s--)this._array[this._getCyclicIndex(s+i.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<i.length;s++)this._array[this._getCyclicIndex(e+s)]=i[s];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){const e=this._length+i.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let r=t-1;r>=0;r--)this.set(e+r+i,this.get(e+r));const s=e+t+i-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<t;s++)this.set(e+s+i,this.get(e+s))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,i=5){if("object"!=typeof t)return t;const s=Array.isArray(t)?[]:{};for(const r in t)s[r]=i<=1?t[r]:t[r]&&e(t[r],i-1);return s}},8055:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;const s=i(6114);let r=0,n=0,o=0,a=0;var l,c,h,d,u,f;function p(e){const t=e.toString(16);return t.length<2?"0"+t:t}function g(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},(f=l||(t.channels=l={})).toCss=function(e,t,i,s){return void 0!==s?`#${p(e)}${p(t)}${p(i)}${p(s)}`:`#${p(e)}${p(t)}${p(i)}`},f.toRgba=function(e,t,i,s=255){return(e<<24|t<<16|i<<8|s)>>>0},function(e){function t(e,t){return a=Math.round(255*t),[r,n,o]=u.toChannels(e.rgba),{css:l.toCss(r,n,o,a),rgba:l.toRgba(r,n,o,a)}}e.blend=function(e,t){if(a=(255&t.rgba)/255,1===a)return{css:t.css,rgba:t.rgba};const i=t.rgba>>24&255,s=t.rgba>>16&255,c=t.rgba>>8&255,h=e.rgba>>24&255,d=e.rgba>>16&255,u=e.rgba>>8&255;return r=h+Math.round((i-h)*a),n=d+Math.round((s-d)*a),o=u+Math.round((c-u)*a),{css:l.toCss(r,n,o),rgba:l.toRgba(r,n,o)}},e.isOpaque=function(e){return!(255&~e.rgba)},e.ensureContrastRatio=function(e,t,i){const s=u.ensureContrastRatio(e.rgba,t.rgba,i);if(s)return u.toColor(s>>24&255,s>>16&255,s>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[r,n,o]=u.toChannels(t),{css:l.toCss(r,n,o),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return a=255&e.rgba,t(e,a*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(c||(t.color=c={})),function(e){let t,i;if(!s.isNode){const e=document.createElement("canvas");e.width=1,e.height=1;const s=e.getContext("2d",{willReadFrequently:!0});s&&(t=s,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return r=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),u.toColor(r,n,o);case 5:return r=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),a=parseInt(e.slice(4,5).repeat(2),16),u.toColor(r,n,o,a);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const s=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return r=parseInt(s[1]),n=parseInt(s[2]),o=parseInt(s[3]),a=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),u.toColor(r,n,o,a);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[r,n,o,a]=t.getImageData(0,0,1,1).data,255!==a)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(r,n,o,a),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const s=e/255,r=t/255,n=i/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(d||(t.rgb=d={})),function(e){function t(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(s,r,n));for(;c<i&&(o>0||a>0||l>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(s,r,n));return(o<<24|a<<16|l<<8|255)>>>0}function i(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(s,r,n));for(;c<i&&(o<255||a<255||l<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(s,r,n));return(o<<24|a<<16|l<<8|255)>>>0}e.ensureContrastRatio=function(e,s,r){const n=d.relativeLuminance(e>>8),o=d.relativeLuminance(s>>8);if(g(n,o)<r){if(o<n){const o=t(e,s,r),a=g(n,d.relativeLuminance(o>>8));if(a<r){const t=i(e,s,r);return a>g(n,d.relativeLuminance(t>>8))?o:t}return o}const a=i(e,s,r),l=g(n,d.relativeLuminance(a>>8));if(l<r){const i=t(e,s,r);return l>g(n,d.relativeLuminance(i>>8))?a:i}return a}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,s){return{css:l.toCss(e,t,i,s),rgba:l.toRgba(e,t,i,s)}}}(u||(t.rgba=u={})),t.toPaddedHex=p,t.contrastRatio=g},8969:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;const s=i(844),r=i(2585),n=i(4348),o=i(7866),a=i(744),l=i(7302),c=i(6975),h=i(8460),d=i(1753),u=i(1480),f=i(7994),p=i(9282),g=i(5435),m=i(5981),v=i(2660);let _=!1;class b extends s.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event(e=>{var t;null===(t=this._onScrollApi)||void 0===t||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new s.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new l.OptionsService(e)),this._instantiationService.setService(r.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(r.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(r.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(r.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(r.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(u.UnicodeService)),this._instantiationService.setService(r.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(r.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(v.OscLinkService),this._instantiationService.setService(r.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new m.WriteBuffer((e,t)=>this._inputHandler.parse(e,t))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=r.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t,i){this._bufferService.scrollLines(e,t,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!("conpty"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,s.toDisposable)(()=>{for(const t of e)t.dispose()})}}}t.CoreTerminal=b},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let s=0;s<this._listeners.length;s++)i.push(this._listeners[s]);for(let s=0;s<i.length;s++)i[s].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e(e=>t.fire(e))}},5435:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const n=i(2584),o=i(7116),a=i(2015),l=i(844),c=i(482),h=i(8437),d=i(8460),u=i(643),f=i(511),p=i(3734),g=i(2585),m=i(6242),v=i(6351),_=i(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function x(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var S,w;(w=S||(t.WindowsOptionsReportType=S={}))[w.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",w[w.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";let C=0;class k extends l.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,i,s,r,l,u,p,g=new a.EscapeSequenceParser){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=s,this._optionsService=r,this._oscLinkService=l,this._coreMouseService=u,this._unicodeService=p,this._parser=g,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new E(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._parser.setCsiHandlerFallback((e,t)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(e),params:t.toArray()})}),this._parser.setEscHandlerFallback(e=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(e)})}),this._parser.setExecuteHandlerFallback(e=>{this._logService.debug("Unknown EXECUTE code: ",{code:e})}),this._parser.setOscHandlerFallback((e,t,i)=>{this._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:i})}),this._parser.setDcsHandlerFallback((e,t,i)=>{"HOOK"===t&&(i=i.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(e),action:t,payload:i})}),this._parser.setPrintHandler((e,t,i)=>this.print(e,t,i)),this._parser.registerCsiHandler({final:"@"},e=>this.insertChars(e)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},e=>this.scrollLeft(e)),this._parser.registerCsiHandler({final:"A"},e=>this.cursorUp(e)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},e=>this.scrollRight(e)),this._parser.registerCsiHandler({final:"B"},e=>this.cursorDown(e)),this._parser.registerCsiHandler({final:"C"},e=>this.cursorForward(e)),this._parser.registerCsiHandler({final:"D"},e=>this.cursorBackward(e)),this._parser.registerCsiHandler({final:"E"},e=>this.cursorNextLine(e)),this._parser.registerCsiHandler({final:"F"},e=>this.cursorPrecedingLine(e)),this._parser.registerCsiHandler({final:"G"},e=>this.cursorCharAbsolute(e)),this._parser.registerCsiHandler({final:"H"},e=>this.cursorPosition(e)),this._parser.registerCsiHandler({final:"I"},e=>this.cursorForwardTab(e)),this._parser.registerCsiHandler({final:"J"},e=>this.eraseInDisplay(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},e=>this.eraseInDisplay(e,!0)),this._parser.registerCsiHandler({final:"K"},e=>this.eraseInLine(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},e=>this.eraseInLine(e,!0)),this._parser.registerCsiHandler({final:"L"},e=>this.insertLines(e)),this._parser.registerCsiHandler({final:"M"},e=>this.deleteLines(e)),this._parser.registerCsiHandler({final:"P"},e=>this.deleteChars(e)),this._parser.registerCsiHandler({final:"S"},e=>this.scrollUp(e)),this._parser.registerCsiHandler({final:"T"},e=>this.scrollDown(e)),this._parser.registerCsiHandler({final:"X"},e=>this.eraseChars(e)),this._parser.registerCsiHandler({final:"Z"},e=>this.cursorBackwardTab(e)),this._parser.registerCsiHandler({final:"`"},e=>this.charPosAbsolute(e)),this._parser.registerCsiHandler({final:"a"},e=>this.hPositionRelative(e)),this._parser.registerCsiHandler({final:"b"},e=>this.repeatPrecedingCharacter(e)),this._parser.registerCsiHandler({final:"c"},e=>this.sendDeviceAttributesPrimary(e)),this._parser.registerCsiHandler({prefix:">",final:"c"},e=>this.sendDeviceAttributesSecondary(e)),this._parser.registerCsiHandler({final:"d"},e=>this.linePosAbsolute(e)),this._parser.registerCsiHandler({final:"e"},e=>this.vPositionRelative(e)),this._parser.registerCsiHandler({final:"f"},e=>this.hVPosition(e)),this._parser.registerCsiHandler({final:"g"},e=>this.tabClear(e)),this._parser.registerCsiHandler({final:"h"},e=>this.setMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"h"},e=>this.setModePrivate(e)),this._parser.registerCsiHandler({final:"l"},e=>this.resetMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"l"},e=>this.resetModePrivate(e)),this._parser.registerCsiHandler({final:"m"},e=>this.charAttributes(e)),this._parser.registerCsiHandler({final:"n"},e=>this.deviceStatus(e)),this._parser.registerCsiHandler({prefix:"?",final:"n"},e=>this.deviceStatusPrivate(e)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},e=>this.softReset(e)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},e=>this.setCursorStyle(e)),this._parser.registerCsiHandler({final:"r"},e=>this.setScrollRegion(e)),this._parser.registerCsiHandler({final:"s"},e=>this.saveCursor(e)),this._parser.registerCsiHandler({final:"t"},e=>this.windowOptions(e)),this._parser.registerCsiHandler({final:"u"},e=>this.restoreCursor(e)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},e=>this.insertColumns(e)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},e=>this.deleteColumns(e)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},e=>this.selectProtected(e)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},e=>this.requestMode(e,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},e=>this.requestMode(e,!1)),this._parser.setExecuteHandler(n.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(n.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(n.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(n.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(n.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(n.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(n.C1.IND,()=>this.index()),this._parser.setExecuteHandler(n.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(n.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new m.OscHandler(e=>(this.setTitle(e),this.setIconName(e),!0))),this._parser.registerOscHandler(1,new m.OscHandler(e=>this.setIconName(e))),this._parser.registerOscHandler(2,new m.OscHandler(e=>this.setTitle(e))),this._parser.registerOscHandler(4,new m.OscHandler(e=>this.setOrReportIndexedColor(e))),this._parser.registerOscHandler(8,new m.OscHandler(e=>this.setHyperlink(e))),this._parser.registerOscHandler(10,new m.OscHandler(e=>this.setOrReportFgColor(e))),this._parser.registerOscHandler(11,new m.OscHandler(e=>this.setOrReportBgColor(e))),this._parser.registerOscHandler(12,new m.OscHandler(e=>this.setOrReportCursorColor(e))),this._parser.registerOscHandler(104,new m.OscHandler(e=>this.restoreIndexedColor(e))),this._parser.registerOscHandler(110,new m.OscHandler(e=>this.restoreFgColor(e))),this._parser.registerOscHandler(111,new m.OscHandler(e=>this.restoreBgColor(e))),this._parser.registerOscHandler(112,new m.OscHandler(e=>this.restoreCursorColor(e))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const n in o.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:n},()=>this.selectCharset("("+n)),this._parser.registerEscHandler({intermediates:")",final:n},()=>this.selectCharset(")"+n)),this._parser.registerEscHandler({intermediates:"*",final:n},()=>this.selectCharset("*"+n)),this._parser.registerEscHandler({intermediates:"+",final:n},()=>this.selectCharset("+"+n)),this._parser.registerEscHandler({intermediates:"-",final:n},()=>this.selectCharset("-"+n)),this._parser.registerEscHandler({intermediates:".",final:n},()=>this.selectCharset("."+n)),this._parser.registerEscHandler({intermediates:"/",final:n},()=>this.selectCharset("/"+n));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(e=>(this._logService.error("Parsing error: ",e),e)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((e,t)=>this.requestStatusString(e,t)))}_preserveStack(e,t,i,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=s}_logSlowResolvingAsync(e){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([e,new Promise((e,t)=>setTimeout(()=>t("#SLOW_TIMEOUT"),5e3))]).catch(e=>{if("#SLOW_TIMEOUT"!==e)throw e})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,s=this._activeBuffer.x,r=this._activeBuffer.y,n=0;const o=this._parseStack.paused;if(o){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>y&&(n=this._parseStack.position+y)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?` "${e}"`:` "${Array.prototype.map.call(e,e=>String.fromCharCode(e)).join("")}"`),"string"==typeof e?e.split("").map(e=>e.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(e.length,y))),o||this._dirtyRowTracker.clearRange(),e.length>y)for(let a=n;a<e.length;a+=y){const t=a+y<e.length?a+y:e.length,n="string"==typeof e?this._stringDecoder.decode(e.substring(a,t),this._parseBuffer):this._utf8Decoder.decode(e.subarray(a,t),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,n))return this._preserveStack(s,r,n,a),this._logSlowResolvingAsync(i),i}else if(!o){const t="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,t))return this._preserveStack(s,r,t,0),this._logSlowResolvingAsync(i),i}this._activeBuffer.x===s&&this._activeBuffer.y===r||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(e,t,i){let s,r;const n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,d=this._curAttrData;let f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&2===f.getWidth(this._activeBuffer.x-1)&&f.setCellFromCodePoint(this._activeBuffer.x-1,0,1,d.fg,d.bg,d.extended);for(let p=t;p<i;++p){if(s=e[p],r=this._unicodeService.wcwidth(s),s<127&&n){const e=n[String.fromCharCode(s)];e&&(s=e.charCodeAt(0))}if(o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),r||!this._activeBuffer.x){if(this._activeBuffer.x+r-1>=a)if(l){for(;this._activeBuffer.x<a;)f.setCellFromCodePoint(this._activeBuffer.x++,0,1,d.fg,d.bg,d.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=a-1,2===r)continue;if(h&&(f.insertCells(this._activeBuffer.x,r,this._activeBuffer.getNullCell(d),d),2===f.getWidth(a-1)&&f.setCellFromCodePoint(a-1,u.NULL_CELL_CODE,u.NULL_CELL_WIDTH,d.fg,d.bg,d.extended)),f.setCellFromCodePoint(this._activeBuffer.x++,s,r,d.fg,d.bg,d.extended),r>0)for(;--r;)f.setCellFromCodePoint(this._activeBuffer.x++,0,0,d.fg,d.bg,d.extended)}else f.getWidth(this._activeBuffer.x-1)?f.addCodepointToCell(this._activeBuffer.x-1,s):f.addCodepointToCell(this._activeBuffer.x-2,s)}i-t>0&&(f.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<a&&i-t>0&&0===f.getWidth(this._activeBuffer.x)&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodePoint(this._activeBuffer.x,0,1,d.fg,d.bg,d.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,e=>!x(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new v.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new m.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===e?void 0:e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,s=!1,r=!1){const n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),r),s&&(n.isWrapped=!1)}_resetBufferLine(e,t=!1){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){let i;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;t--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y;let s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){if(!this._parser.precedingCodepoint)return!0;const t=e.params[0]||1,i=new Uint32Array(t);for(let s=0;s<t;++s)i[s]=this._parser.precedingCodepoint;return this.print(i,0,i.length),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(n.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(n.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(n.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(n.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(n.C0.ESC+"[>83;40003;0c")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const i=this._coreService.decPrivateModes,{activeProtocol:s,activeEncoding:r}=this._coreMouseService,o=this._coreService,{buffers:a,cols:l}=this._bufferService,{active:c,alt:h}=a,d=this._optionsService.rawOptions,u=e=>e?1:2,f=e.params[0];return p=f,g=t?2===f?4:4===f?u(o.modes.insertMode):12===f?3:20===f?u(d.convertEol):0:1===f?u(i.applicationCursorKeys):3===f?d.windowOptions.setWinLines?80===l?2:132===l?1:0:0:6===f?u(i.origin):7===f?u(i.wraparound):8===f?3:9===f?u("X10"===s):12===f?u(d.cursorBlink):25===f?u(!o.isCursorHidden):45===f?u(i.reverseWraparound):66===f?u(i.applicationKeypad):67===f?4:1e3===f?u("VT200"===s):1002===f?u("DRAG"===s):1003===f?u("ANY"===s):1004===f?u(i.sendFocus):1005===f?4:1006===f?u("SGR"===r):1015===f?4:1016===f?u("SGR_PIXELS"===r):1048===f?1:47===f||1047===f||1049===f?u(c===h):2004===f?u(i.bracketedPasteMode):0,o.triggerDataEvent(`${n.C0.ESC}[${t?"":"?"}${p};${g}$y`),!0;var p,g}_updateAttrColor(e,t,i,s,r){return 2===t?(e|=50331648,e&=-16777216,e|=p.AttributeData.fromColorRGB([i,s,r])):5===t&&(e&=-50331904,e|=33554432|255&i),e}_extractColor(e,t,i){const s=[0,0,-1,0,0,0];let r=0,n=0;do{if(s[n+r]=e.params[t+n],e.hasSubParams(t+n)){const i=e.getSubParams(t+n);let o=0;do{5===s[1]&&(r=1),s[n+o+1+r]=i[o]}while(++o<i.length&&o+n+1+r<s.length);break}if(5===s[1]&&n+r>=2||2===s[1]&&n+r>=5)break;s[1]&&(r=1)}while(++n+t<e.length&&n+r<s.length);for(let o=2;o<s.length;++o)-1===s[o]&&(s[o]=0);switch(s[0]){case 38:i.fg=this._updateAttrColor(i.fg,s[1],s[3],s[4],s[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,s[1],s[3],s[4],s[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,s[1],s[3],s[4],s[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=h.DEFAULT_ATTR_DATA.fg,e.bg=h.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let i;const s=this._curAttrData;for(let r=0;r<t;r++)i=e.params[r],i>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777224|i-90):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777224|i-100):0===i?this._processSGR0(s):1===i?s.fg|=134217728:3===i?s.bg|=67108864:4===i?(s.fg|=268435456,this._processUnderline(e.hasSubParams(r)?e.getSubParams(r)[0]:1,s)):5===i?s.fg|=536870912:7===i?s.fg|=67108864:8===i?s.fg|=1073741824:9===i?s.fg|=2147483648:2===i?s.bg|=134217728:21===i?this._processUnderline(2,s):22===i?(s.fg&=-134217729,s.bg&=-134217729):23===i?s.bg&=-67108865:24===i?(s.fg&=-268435457,this._processUnderline(0,s)):25===i?s.fg&=-536870913:27===i?s.fg&=-67108865:28===i?s.fg&=-1073741825:29===i?s.fg&=2147483647:39===i?(s.fg&=-67108864,s.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):49===i?(s.bg&=-67108864,s.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?r+=this._extractColor(e,r,s):53===i?s.bg|=1073741824:55===i?s.bg&=-1073741825:59===i?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):100===i?(s.fg&=-67108864,s.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,s.bg&=-67108864,s.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${e};${t}R`)}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${e};${t}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const i=t%2==1;return this._optionsService.options.cursorBlink=i,!0}setScrollRegion(e){const t=e.params[0]||1;let i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||0===i)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!x(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(S.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(S.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],i=e.split(";");for(;i.length>1;){const e=i.shift(),s=i.shift();if(/^\d+$/.exec(e)){const i=parseInt(e);if(j(i))if("?"===s)t.push({type:0,index:i});else{const e=(0,_.parseColor)(s);e&&t.push({type:1,index:i,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(";");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const i=e.split(":");let s;const r=i.findIndex(e=>e.startsWith("id="));return-1!==r&&(s=i[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const i=e.split(";");for(let s=0;s<i.length&&!(t>=this._specialColors.length);++s,++t)if("?"===i[s])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const e=(0,_.parseColor)(i[s]);e&&this._onColor.fire([{type:1,index:this._specialColors[t],color:e}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],i=e.split(";");for(let s=0;s<i.length;++s)if(/^\d+$/.exec(i[s])){const e=parseInt(i[s]);j(e)&&t.push({type:2,index:e})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(b[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new f.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const i=this._activeBuffer.ybase+this._activeBuffer.y+t,s=this._activeBuffer.lines.get(i);s&&(s.fill(e),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const i=this._bufferService.buffer,s=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${e}${n.C0.ESC}\\`),!0))('"q'===e?`P1$r${this._curAttrData.isProtected()?1:0}"q`:'"p'===e?'P1$r61;1"p':"r"===e?`P1$r${i.scrollTop+1};${i.scrollBottom+1}r`:"m"===e?"P1$r0m":" q"===e?`P1$r${{block:2,underline:4,bar:6}[s.cursorStyle]-(s.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=k;let E=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(C=e,e=t,t=C),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function j(e){return 0<=e&&e<256}E=s([r(0,g.IBufferService)],E)},844:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},1505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,s,r,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(s,r,n)}get(e,t,i,s){var r;return null===(r=this._data.get(e,t))||void 0===r?void 0:r.get(i,s)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;const i=t.isNode?"node":navigator.userAgent,s=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(s),t.isIpad="iPad"===s,t.isIphone="iPhone"===s,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(s),t.isLinux=s.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},6106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;let i=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(i=this._search(this._getKey(e)),this._array.splice(i,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(i=this._search(t),-1===i)return!1;if(this._getKey(this._array[i])!==t)return!1;do{if(this._array[i]===e)return this._array.splice(i,1),!0}while(++i<this._array.length&&this._getKey(this._array[i])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{yield this._array[i]}while(++i<this._array.length&&this._getKey(this._array[i])===e)}forEachByKey(e,t){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{t(this._array[i])}while(++i<this._array.length&&this._getKey(this._array[i])===e)}values(){return[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let s=t+i>>1;const r=this._getKey(this._array[s]);if(r>e)i=s-1;else{if(!(r<e)){for(;s>0&&this._getKey(this._array[s-1])===e;)s--;return s}t=s+1}}return t}}},7226:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const s=i(6114);class r{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,s=e.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),r=e.timeRemaining(),1.5*i>r)return void this._start();s=r}this.clear()}}class n extends r{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!s.isNode&&"requestIdleCallback"in window?class extends r{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;const s=i(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),i=null==t?void 0:t.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&i&&(r.isWrapped=i[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&i[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new s}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return!(50331648&~this.fg)}isBgRGB(){return!(50331648&~this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return!(50331648&this.fg)}isBgDefault(){return!(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&~this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=i;class s{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new s(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=s},9092:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const s=i(6349),r=i(7226),n=i(3734),o=i(8437),a=i(4634),l=i(511),c=i(643),h=i(4863),d=i(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=l.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new r.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const i=e+this._optionsService.rawOptions.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let s=0;const r=this._getCorrectBufferLength(t);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)s+=+this.lines.get(t).resize(e,i);let n=0;if(this._rows<t)for(let s=this._rows;s<t;s++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,i)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){const e=this.lines.length-r;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=r}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let n=0;n<this.lines.length;n++)s+=+this.lines.get(n).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&"conpty"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const i=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(i.length>0){const s=(0,a.reflowLargerCreateNewLayout)(this.lines,i);(0,a.reflowLargerApplyNewLayout)(this.lines,s.layout),this._reflowLargerAdjustViewport(e,t,s.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){const s=this.getNullCell(o.DEFAULT_ATTR_DATA);let r=i;for(;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA),s=[];let r=0;for(let n=this.lines.length-1;n>=0;n--){let l=this.lines.get(n);if(!l||!l.isWrapped&&l.getTrimmedLength()<=e)continue;const c=[l];for(;l.isWrapped&&n>0;)l=this.lines.get(--n),c.unshift(l);const h=this.ybase+this.y;if(h>=n&&h<n+c.length)continue;const d=c[c.length-1].getTrimmedLength(),u=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),f=u.length-c.length;let p;p=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+f):Math.max(0,this.lines.length-this.lines.maxLength+f);const g=[];for(let e=0;e<f;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);g.push(e)}g.length>0&&(s.push({start:n+c.length+r,newLines:g}),r+=g.length),c.push(...g);let m=u.length-1,v=u[m];0===v&&(m--,v=u[m]);let _=c.length-f-1,b=d;for(;_>=0;){const e=Math.min(b,v);if(void 0===c[m])break;if(c[m].copyCellsFrom(c[_],b-e,v-e,e,!0),v-=e,0===v&&(m--,v=u[m]),b-=e,0===b){_--;const e=Math.max(_,0);b=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)u[t]<e&&c[t].setCell(u[t],i);let y=f-p;for(;y-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+r)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+f,this.ybase+t-1)}if(s.length>0){const e=[],t=[];for(let s=0;s<this.lines.length;s++)t.push(this.lines.get(s));const i=this.lines.length;let n=i-1,o=0,a=s[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+r);let l=0;for(let d=Math.min(this.lines.maxLength-1,i+r-1);d>=0;d--)if(a&&a.start>n+l){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(d--,a.newLines[e]);d++,e.push({index:n+1,amount:a.newLines.length}),l+=a.newLines.length,a=s[++o]}else this.lines.set(d,t[n--]);let c=0;for(let s=e.length-1;s>=0;s--)e[s].index+=c,this.lines.onInsertEmitter.fire(e[s]),c+=e[s].amount;const h=Math.max(0,i+r-this.lines.maxLength);h>0&&this.lines.onTrimEmitter.fire(h)}}translateBufferLineToString(e,t,i=0,s){const r=this.lines.get(e);return r?r.translateToString(t,i,s):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new h.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim(e=>{t.line-=e,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(e=>{t.line>=e.index&&(t.line+=e.amount)})),t.register(this.lines.onDelete(e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const s=i(3734),r=i(511),n=i(643),o=i(482);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);let a=0;class l{constructor(e,t,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const s=t||r.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let r=0;r<e;++r)this.setCell(r,s);this.length=e}get(e){const t=this._data[3*e+0],i=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:i?(0,o.stringFromCodePoint)(i):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):i]}set(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodePoint(e,t,i,s,r,n){268435456&r&&(this._extendedAttrs[e]=n),this._data[3*e+0]=t|i<<22,this._data[3*e+1]=s,this._data[3*e+2]=r}addCodepointToCell(e,t){let i=this._data[3*e+0];2097152&i?this._combined[e]+=(0,o.stringFromCodePoint)(t):(2097151&i?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&i)+(0,o.stringFromCodePoint)(t),i&=-2097152,i|=2097152):i=t|1<<22,this._data[3*e+0]=i)}insertCells(e,t,i,n){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs),t<this.length-e){const s=new r.CellData;for(let i=this.length-e-t-1;i>=0;--i)this.setCell(e+t+i,this.loadCell(e+i,s));for(let r=0;r<t;++r)this.setCell(e+r,i)}else for(let s=e;s<this.length;++s)this.setCell(s,i);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs)}deleteCells(e,t,i,n){if(e%=this.length,t<this.length-e){const s=new r.CellData;for(let i=0;i<this.length-e-t;++i)this.setCell(e+i,this.loadCell(e+t+i,s));for(let e=this.length-t;e<this.length;++e)this.setCell(e,i)}else for(let s=e;s<this.length;++s)this.setCell(s,i);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs)}replaceCells(e,t,i,r,n=!1){if(n)for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new s.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodePoint(t,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new s.ExtendedAttrs);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,i),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new s.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==r?void 0:r.fg)||0,(null==r?void 0:r.bg)||0,(null==r?void 0:r.extended)||new s.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,i)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const e=new Uint32Array(i);e.set(this._data),this._data=e}for(let i=this.length;i<e;++i)this.setCell(i,t)}else{this._data=this._data.subarray(0,i);const t=Object.keys(this._combined);for(let i=0;i<t.length;i++){const s=parseInt(t[i],10);s>=e&&delete this._combined[s]}const s=Object.keys(this._extendedAttrs);for(let i=0;i<s.length;i++){const t=parseInt(s[i],10);t>=e&&delete this._extendedAttrs[t]}}return this.length=e,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,t=!1){if(t)for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new l(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,i,s,r){const n=e._data;if(r)for(let a=s-1;a>=0;a--){for(let e=0;e<3;e++)this._data[3*(i+a)+e]=n[3*(t+a)+e];268435456&n[3*(t+a)+2]&&(this._extendedAttrs[i+a]=e._extendedAttrs[t+a])}else for(let a=0;a<s;a++){for(let e=0;e<3;e++)this._data[3*(i+a)+e]=n[3*(t+a)+e];268435456&n[3*(t+a)+2]&&(this._extendedAttrs[i+a]=e._extendedAttrs[t+a])}const o=Object.keys(e._combined);for(let a=0;a<o.length;a++){const s=parseInt(o[a],10);s>=t&&(this._combined[s-t+i]=e._combined[s])}}translateToString(e=!1,t=0,i=this.length){e&&(i=Math.min(i,this.getTrimmedLength()));let s="";for(;t<i;){const e=this._data[3*t+0],i=2097151&e;s+=2097152&e?this._combined[t]:i?(0,o.stringFromCodePoint)(i):n.WHITESPACE_CELL_CHAR,t+=e>>22||1}return s}}t.BufferLine=l},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function i(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();const s=!e[t].hasContent(i-1)&&1===e[t].getWidth(i-1),r=2===e[t+1].getWidth(0);return s&&r?i-1:i}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,s,r,n){const o=[];for(let a=0;a<e.length-1;a++){let l=a,c=e.get(++l);if(!c.isWrapped)continue;const h=[e.get(a)];for(;l<e.length&&c.isWrapped;)h.push(c),c=e.get(++l);if(r>=a&&r<l){a+=h.length-1;continue}let d=0,u=i(h,d,t),f=1,p=0;for(;f<h.length;){const e=i(h,f,t),r=e-p,o=s-u,a=Math.min(r,o);h[d].copyCellsFrom(h[f],p,u,a,!1),u+=a,u===s&&(d++,u=0),p+=a,p===e&&(f++,p=0),0===u&&0!==d&&2===h[d-1].getWidth(s-1)&&(h[d].copyCellsFrom(h[d-1],s-1,u++,1,!1),h[d-1].setCell(s-1,n))}h[d].replaceCells(u,s,n);let g=0;for(let e=h.length-1;e>0&&(e>d||0===h[e].getTrimmedLength());e--)g++;g>0&&(o.push(a+h.length-g),o.push(g)),a+=h.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const i=[];let s=0,r=t[s],n=0;for(let o=0;o<e.length;o++)if(r===o){const i=t[++s];e.onDeleteEmitter.fire({index:o-n,amount:i}),o+=i-1,n+=i,r=t[++s]}else i.push(o);return{layout:i,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){const i=[];for(let s=0;s<t.length;s++)i.push(e.get(t[s]));for(let s=0;s<i.length;s++)e.set(s,i[s]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,s){const r=[],n=e.map((s,r)=>i(e,r,t)).reduce((e,t)=>e+t);let o=0,a=0,l=0;for(;l<n;){if(n-l<s){r.push(n-l);break}o+=s;const c=i(e,a,t);o>c&&(o-=c,a++);const h=2===e[a].getWidth(o-1);h&&o--;const d=h?s-1:s;r.push(d),l+=d}return r},t.getWrappedLineTrimmedLength=i},5295:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;const s=i(8460),r=i(844),n=i(9092);class o extends r.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new s.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const s=i(482),r=i(643),n=i(3734);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,s.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[r.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[r.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[r.CHAR_DATA_CHAR_INDEX].length){const i=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const s=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(i-55296)+s-56320+65536|e[r.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[r.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[r.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[r.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;const s=i(8460),r=i(844);class n{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,r.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=n,n._nextId=1},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},t.CHARSETS.A={"#":""},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},t.CHARSETS.C=t.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.E=t.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},t.CHARSETS.H=t.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(e,t)=>{var i,s,r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,(n=i||(t.C0=i={})).NUL="\0",n.SOH="",n.STX="",n.ETX="",n.EOT="",n.ENQ="",n.ACK="",n.BEL="",n.BS="\b",n.HT="\t",n.LF="\n",n.VT="\v",n.FF="\f",n.CR="\r",n.SO="",n.SI="",n.DLE="",n.DC1="",n.DC2="",n.DC3="",n.DC4="",n.NAK="",n.SYN="",n.ETB="",n.CAN="",n.EM="",n.SUB="",n.ESC="",n.FS="",n.GS="",n.RS="",n.US="",n.SP=" ",n.DEL="",function(e){e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""}(s||(t.C1=s={})),function(e){e.ST=`${i.ESC}\\`}(r||(t.C1_ESCAPED=r={}))},7399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;const s=i(2584),r={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,i,n){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?o.key=t?s.C0.ESC+"OA":s.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?o.key=t?s.C0.ESC+"OD":s.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?o.key=t?s.C0.ESC+"OC":s.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(o.key=t?s.C0.ESC+"OB":s.C0.ESC+"[B");break;case 8:if(e.altKey){o.key=s.C0.ESC+s.C0.DEL;break}o.key=s.C0.DEL;break;case 9:if(e.shiftKey){o.key=s.C0.ESC+"[Z";break}o.key=s.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,o.cancel=!0;break;case 27:o.key=s.C0.ESC,e.altKey&&(o.key=s.C0.ESC+s.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"D",o.key===s.C0.ESC+"[1;3D"&&(o.key=s.C0.ESC+(i?"b":"[1;5D"))):o.key=t?s.C0.ESC+"OD":s.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"C",o.key===s.C0.ESC+"[1;3C"&&(o.key=s.C0.ESC+(i?"f":"[1;5C"))):o.key=t?s.C0.ESC+"OC":s.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"A",i||o.key!==s.C0.ESC+"[1;3A"||(o.key=s.C0.ESC+"[1;5A")):o.key=t?s.C0.ESC+"OA":s.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"B",i||o.key!==s.C0.ESC+"[1;3B"||(o.key=s.C0.ESC+"[1;5B")):o.key=t?s.C0.ESC+"OB":s.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(o.key=s.C0.ESC+"[2~");break;case 46:o.key=a?s.C0.ESC+"[3;"+(a+1)+"~":s.C0.ESC+"[3~";break;case 36:o.key=a?s.C0.ESC+"[1;"+(a+1)+"H":t?s.C0.ESC+"OH":s.C0.ESC+"[H";break;case 35:o.key=a?s.C0.ESC+"[1;"+(a+1)+"F":t?s.C0.ESC+"OF":s.C0.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=s.C0.ESC+"[5;"+(a+1)+"~":o.key=s.C0.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=s.C0.ESC+"[6;"+(a+1)+"~":o.key=s.C0.ESC+"[6~";break;case 112:o.key=a?s.C0.ESC+"[1;"+(a+1)+"P":s.C0.ESC+"OP";break;case 113:o.key=a?s.C0.ESC+"[1;"+(a+1)+"Q":s.C0.ESC+"OQ";break;case 114:o.key=a?s.C0.ESC+"[1;"+(a+1)+"R":s.C0.ESC+"OR";break;case 115:o.key=a?s.C0.ESC+"[1;"+(a+1)+"S":s.C0.ESC+"OS";break;case 116:o.key=a?s.C0.ESC+"[15;"+(a+1)+"~":s.C0.ESC+"[15~";break;case 117:o.key=a?s.C0.ESC+"[17;"+(a+1)+"~":s.C0.ESC+"[17~";break;case 118:o.key=a?s.C0.ESC+"[18;"+(a+1)+"~":s.C0.ESC+"[18~";break;case 119:o.key=a?s.C0.ESC+"[19;"+(a+1)+"~":s.C0.ESC+"[19~";break;case 120:o.key=a?s.C0.ESC+"[20;"+(a+1)+"~":s.C0.ESC+"[20~";break;case 121:o.key=a?s.C0.ESC+"[21;"+(a+1)+"~":s.C0.ESC+"[21~";break;case 122:o.key=a?s.C0.ESC+"[23;"+(a+1)+"~":s.C0.ESC+"[23~";break;case 123:o.key=a?s.C0.ESC+"[24;"+(a+1)+"~":s.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!n||!e.altKey||e.metaKey)!i||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(o.key=s.C0.US),"@"===e.key&&(o.key=s.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=r[e.keyCode],i=null==t?void 0:t[e.shiftKey?1:0];if(i)o.key=s.C0.ESC+i;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let i=String.fromCharCode(t);e.shiftKey&&(i=i.toUpperCase()),o.key=s.C0.ESC+i}else if(32===e.keyCode)o.key=s.C0.ESC+(e.ctrlKey?s.C0.NUL:" ");else if("Dead"===e.key&&e.code.startsWith("Key")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=s.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=s.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=s.C0.DEL:219===e.keyCode?o.key=s.C0.ESC:220===e.keyCode?o.key=s.C0.FS:221===e.keyCode&&(o.key=s.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let s="";for(let r=t;r<i;++r){let t=e[r];t>65535?(t-=65536,s+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):s+=String.fromCharCode(t)}return s},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let s=0,r=0;if(this._interim){const i=e.charCodeAt(r++);56320<=i&&i<=57343?t[s++]=1024*(this._interim-55296)+i-56320+65536:(t[s++]=this._interim,t[s++]=i),this._interim=0}for(let n=r;n<i;++n){const r=e.charCodeAt(n);if(55296<=r&&r<=56319){if(++n>=i)return this._interim=r,s;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[s++]=1024*(r-55296)+o-56320+65536:(t[s++]=r,t[s++]=o)}else 65279!==r&&(t[s++]=r)}return s}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let s,r,n,o,a=0,l=0,c=0;if(this.interim[0]){let s=!1,r=this.interim[0];r&=192==(224&r)?31:224==(240&r)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)r<<=6,r|=n;const l=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=l-o;for(;c<h;){if(c>=i)return 0;if(n=e[c++],128!=(192&n)){c--,s=!0;break}this.interim[o++]=n,r<<=6,r|=63&n}s||(2===l?r<128?c--:t[a++]=r:3===l?r<2048||r>=55296&&r<=57343||65279===r||(t[a++]=r):r<65536||r>1114111||(t[a++]=r)),this.interim.fill(0)}const h=i-4;let d=c;for(;d<i;){for(;!(!(d<h)||128&(s=e[d])||128&(r=e[d+1])||128&(n=e[d+2])||128&(o=e[d+3]));)t[a++]=s,t[a++]=r,t[a++]=n,t[a++]=o,d+=4;if(s=e[d++],s<128)t[a++]=s;else if(192==(224&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(l=(31&s)<<6|63&r,l<128){d--;continue}t[a++]=l}else if(224==(240&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(l=(15&s)<<12|(63&r)<<6|63&n,l<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,this.interim[2]=n,a;if(o=e[d++],128!=(192&o)){d--;continue}if(l=(7&s)<<18|(63&r)<<12|(63&n)<<6|63&o,l<65536||l>1114111)continue;t[a++]=l}}return a}}},225:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;const i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let r;t.UnicodeV6=class{constructor(){if(this.version="6",!r){r=new Uint8Array(65536),r.fill(1),r[0]=0,r.fill(0,1,32),r.fill(0,127,160),r.fill(2,4352,4448),r[9001]=2,r[9002]=2,r.fill(2,11904,42192),r[12351]=1,r.fill(2,44032,55204),r.fill(2,63744,64256),r.fill(2,65040,65050),r.fill(2,65072,65136),r.fill(2,65280,65377),r.fill(2,65504,65511);for(let e=0;e<i.length;++e)r.fill(0,i[e][0],i[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?r[e]:function(e,t){let i,s=0,r=t.length-1;if(e<t[0][0]||e>t[r][1])return!1;for(;r>=s;)if(i=s+r>>1,e>t[i][1])s=i+1;else{if(!(e<t[i][0]))return!0;r=i-1}return!1}(e,s)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}}},5981:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){const i=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],s=this._action(e,t);if(s){const e=e=>Date.now()-i>=12?setTimeout(()=>this._innerWrite(0,e)):this._innerWrite(i,e);return void s.catch(e=>(queueMicrotask(()=>{throw e}),Promise.resolve(!1))).then(e)}const r=this._callbacks[this._bufferOffset];if(r&&r(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=n},5941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;const i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,s=/^[\da-f]+$/;function r(e,t){const i=e.toString(16),s=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);const e=i.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),s.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,i=[0,0,0];for(let s=0;s<3;++s){const r=parseInt(t.slice(e*s,e*s+e),16);i[s]=1===e?r<<4:2===e?r:3===e?r>>4:r>>8}return i}},t.toRgbString=function(e,t=16){const[i,s,n]=e;return`rgb:${r(i,t)}/${r(s,t)}/${r(n,t)}`}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const s=i(482),r=i(8742),n=i(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].hook(t);else this._handlerFb(this._ident,"HOOK",t)}put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._ident,"PUT",(0,s.utf32ToString)(e,t,i))}unhook(e,t=!0){if(this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].unhook(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",e);this._active=o,this._ident=0}};const a=new r.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data="",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,s.utf32ToString)(e,t,i),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(e=>(this._params=a,this._data="",this._hitLimit=!1,e));return this._params=a,this._data="",this._hitLimit=!1,t}}},2015:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const s=i(844),r=i(8742),n=i(6242),o=i(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,s){this.table[t<<8|e]=i<<4|s}addMany(e,t,i,s){for(let r=0;r<e.length;r++)this.table[t<<8|e[r]]=i<<4|s}}t.TransitionTable=a;const l=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map((e,t)=>t),i=(e,i)=>t.slice(e,i),s=i(32,127),r=i(0,24);r.push(25),r.push.apply(r,i(28,32));const n=i(0,14);let o;for(o in e.setDefault(1,0),e.addMany(s,0,2,0),n)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(r,0,3,0),e.addMany(r,1,3,1),e.add(127,1,0,1),e.addMany(r,8,0,8),e.addMany(r,3,3,3),e.add(127,3,0,3),e.addMany(r,4,3,4),e.add(127,4,0,4),e.addMany(r,6,3,6),e.addMany(r,5,3,5),e.add(127,5,0,5),e.addMany(r,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(s,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(s,7,0,7),e.addMany(r,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(r,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(r,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(r,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(r,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(r,13,13,13),e.addMany(s,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(l,0,2,0),e.add(l,8,5,8),e.add(l,6,0,6),e.add(l,11,0,11),e.add(l,13,13,13),e}();class c extends s.Disposable{constructor(e=t.VT500_TRANSITION_TABLE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new r.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(e,t,i)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,s.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let t=0;t<e.intermediates.length;++t){const s=e.intermediates.charCodeAt(t);if(32>s||s>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=s}}if(1!==e.final.length)throw new Error("final must be a single byte");const s=e.final.charCodeAt(0);if(t[0]>s||s>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=s,i}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const i=this._identifier(e,[48,126]);void 0===this._escHandlers[i]&&(this._escHandlers[i]=[]);const s=this._escHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const i=this._identifier(e);void 0===this._csiHandlers[i]&&(this._csiHandlers[i]=[]);const s=this._csiHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,s,r){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(e,t,i){let s,r=0,n=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===i||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const t=this._parseStack.handlers;let n=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](this._params),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 4:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 6:if(r=e[this._parseStack.chunkPos],s=this._dcsParser.unhook(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(r=e[this._parseStack.chunkPos],s=this._oscParser.end(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let a=o;a<t;++a){switch(r=e[a],n=this._transitions.table[this.currentState<<8|(r<160?r:l)],n>>4){case 2:for(let s=a+1;;++s){if(s>=t||(r=e[s])<32||r>126&&r<l){this._printHandler(e,a,s),a=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<l){this._printHandler(e,a,s),a=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<l){this._printHandler(e,a,s),a=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<l){this._printHandler(e,a,s),a=s-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:a,code:r,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const i=this._csiHandlers[this._collect<<8|r];let o=i?i.length-1:-1;for(;o>=0&&(s=i[o](this._params),!0!==s);o--)if(s instanceof Promise)return this._preserveStack(3,i,o,n,a),s;o<0&&this._csiHandlerFb(this._collect<<8|r,this._params),this.precedingCodepoint=0;break;case 8:do{switch(r){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(r-48)}}while(++a<t&&(r=e[a])>47&&r<60);a--;break;case 9:this._collect<<=8,this._collect|=r;break;case 10:const c=this._escHandlers[this._collect<<8|r];let h=c?c.length-1:-1;for(;h>=0&&(s=c[h](),!0!==s);h--)if(s instanceof Promise)return this._preserveStack(4,c,h,n,a),s;h<0&&this._escHandlerFb(this._collect<<8|r),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|r,this._params);break;case 13:for(let s=a+1;;++s)if(s>=t||24===(r=e[s])||26===r||27===r||r>127&&r<l){this._dcsParser.put(e,a,s),a=s-1;break}break;case 14:if(s=this._dcsParser.unhook(24!==r&&26!==r),s)return this._preserveStack(6,[],0,n,a),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let s=a+1;;s++)if(s>=t||(r=e[s])<32||r>127&&r<l){this._oscParser.put(e,a,s),a=s-1;break}break;case 6:if(s=this._oscParser.end(24!==r&&26!==r),s)return this._preserveStack(5,[],0,n,a),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&n}}}t.EscapeSequenceParser=c},6242:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;const s=i(5770),r=i(482),n=[];t.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")}_put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._id,"PUT",(0,r.utf32ToString)(e,t,i))}start(){this.reset(),this._state=1}put(e,t,i){if(3!==this._state){if(1===this._state)for(;t<i;){const i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].end(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._id,"END",e);this._active=n,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,r.utf32ToString)(e,t,i),this._data.length>s.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(e=>(this._data="",this._hitLimit=!1,e));return this._data="",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;const i=2147483647;class s{static fromArray(e){const t=new s;if(!e.length)return t;for(let i=Array.isArray(e[0])?1:0;i<e.length;++i){const s=e[i];if(Array.isArray(s))for(let e=0;e<s.length;++e)t.addSubParam(s[e]);else t.addParam(s)}return t}constructor(e=32,t=32){if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new s(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,s))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>i?i:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>i?i:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,i=255&this._subParamsIdx[e];return i-t>0?this._subParams.subarray(t,i):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&(e[t]=this._subParams.slice(i,s))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const s=this._digitIsSub?this._subParams:this.params,r=s[t-1];s[t-1]=~r?Math.min(10*r+e,i):e}}t.Params=s},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;const s=i(3785),r=i(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new s.BufferLineApiView(t)}getNullCell(){return new r.CellData}}},3785:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;const s=i(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new s.CellData)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}}},8285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;const s=i(8771),r=i(8460),n=i(844);class o extends n.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new r.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new s.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new s.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,e=>t(e.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(e,i)=>t(e,i.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const n=i(8460),o=i(844),a=i(5295),l=i(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){const i=this.buffer;let s;s=this._cachedBlankLine,s&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=i.getBlankLine(e,t),this._cachedBlankLine=s),s.isWrapped=t;const r=i.ybase+i.scrollTop,n=i.ybase+i.scrollBottom;if(0===i.scrollTop){const e=i.lines.isFull;n===i.lines.length-1?e?i.lines.recycle().copyFrom(s):i.lines.push(s.clone()):i.lines.splice(n+1,0,s.clone()),e?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const e=n-r+1;i.lines.shiftElements(r+1,e-1,-1),i.lines.set(n,s.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t,i){const s=this.buffer;if(e<0){if(0===s.ydisp)return;this.isUserScrolling=!0}else e+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);const r=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+e,s.ybase),0),r!==s.ydisp&&(t||this._onScroll.fire(s.ydisp))}};t.BufferService=c=s([r(0,l.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;const n=i(2585),o=i(8460),a=i(844),l={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(i|=64,i|=e.action):(i|=3&e.button,4&e.button&&(i|=64),8&e.button&&(i|=128),32===e.action?i|=32:0!==e.action||t||(i|=3)),i}const h=String.fromCharCode,d={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`[M${h(t[0])}${h(t[1])}${h(t[2])}`},SGR:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.x};${e.y}${t}`}};let u=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const i of Object.keys(l))this.addProtocol(i,l[i]);for(const i of Object.keys(d))this.addEncoding(i,d[i]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,"SGR_PIXELS"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=u=s([r(0,n.IBufferService),r(1,n.ICoreService)],u)},6975:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;const n=i(1439),o=i(8460),a=i(844),l=i(2585),c=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=t.CoreService=class extends a.Disposable{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(h)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(h)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(e=>e.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(e))}};t.CoreService=d=s([r(0,l.IBufferService),r(1,l.ILogService),r(2,l.IOptionsService)],d)},9074:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;const s=i(8055),r=i(8460),n=i(844),o=i(6106);let a=0,l=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList(e=>null==e?void 0:e.marker.line),this._onDecorationRegistered=this.register(new r.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new r.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new h(e);if(t){const e=t.marker.onDispose(()=>t.dispose());t.onDispose(()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())}),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){var s,r,n;let o=0,a=0;for(const l of this._decorations.getKeyIterator(t))o=null!==(s=l.options.x)&&void 0!==s?s:0,a=o+(null!==(r=l.options.width)&&void 0!==r?r:1),e>=o&&e<a&&(!i||(null!==(n=l.options.layer)&&void 0!==n?n:"bottom")===i)&&(yield l)}forEachDecorationAtCell(e,t,i,s){this._decorations.forEachByKey(t,t=>{var r,n,o;a=null!==(r=t.options.x)&&void 0!==r?r:0,l=a+(null!==(n=t.options.width)&&void 0!==n?n:1),e>=a&&e<l&&(!i||(null!==(o=t.options.layer)&&void 0!==o?o:"bottom")===i)&&s(t)})}}t.DecorationService=c;class h extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=s.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=s.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new r.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new r.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const s=i(2585),r=i(8343);class n{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(const[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n,t.InstantiationService=class{constructor(){this._services=new n,this._services.set(s.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){const i=(0,r.getServiceDependencies)(e).sort((e,t)=>e.index-t.index),s=[];for(const r of i){const t=this._services.get(r.id);if(!t)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${r.id}.`);s.push(t)}const n=i.length>0?i[0].index:t.length;if(t.length!==n)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${n+1} conflicts with ${t.length} static arguments`);return new e(...[...t,...s])}}},7866:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=i(844),o=i(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let l,c=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),l=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...i)}trace(e,...t){var i,s;this._logLevel<=o.LogLevelEnum.TRACE&&this._log(null!==(s=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.trace.bind(this._optionsService.options.logger))&&void 0!==s?s:console.log,e,t)}debug(e,...t){var i,s;this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(null!==(s=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.debug.bind(this._optionsService.options.logger))&&void 0!==s?s:console.log,e,t)}info(e,...t){var i,s;this._logLevel<=o.LogLevelEnum.INFO&&this._log(null!==(s=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.info.bind(this._optionsService.options.logger))&&void 0!==s?s:console.info,e,t)}warn(e,...t){var i,s;this._logLevel<=o.LogLevelEnum.WARN&&this._log(null!==(s=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.warn.bind(this._optionsService.options.logger))&&void 0!==s?s:console.warn,e,t)}error(e,...t){var i,s;this._logLevel<=o.LogLevelEnum.ERROR&&this._log(null!==(s=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.error.bind(this._optionsService.options.logger))&&void 0!==s?s:console.error,e,t)}};t.LogService=c=s([r(0,o.IOptionsService)],c),t.setTraceLogger=function(e){l=e},t.traceCall=function(e,t,i){if("function"!=typeof i.value)throw new Error("not supported");const s=i.value;i.value=function(...e){if(l.logLevel!==o.LogLevelEnum.TRACE)return s.apply(this,e);l.trace(`GlyphRenderer#${s.name}(${e.map(e=>JSON.stringify(e)).join(", ")})`);const t=s.apply(this,e);return l.trace(`GlyphRenderer#${s.name} return`,t),t}}},7302:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const s=i(8460),r=i(844),n=i(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:n.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const o=["normal","bold","100","200","300","400","500","600","700","800","900"];class a extends r.Disposable{constructor(e){super(),this._onOptionChange=this.register(new s.EventEmitter),this.onOptionChange=this._onOptionChange.event;const i=Object.assign({},t.DEFAULT_OPTIONS);for(const t in e)if(t in i)try{const s=e[t];i[t]=this._sanitizeAndValidateOption(t,s)}catch(r){}this.rawOptions=i,this.options=Object.assign({},i),this._setupOptions()}onSpecificOptionChange(e,t){return this.onOptionChange(i=>{i===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(i=>{-1!==e.indexOf(i)&&t()})}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);return this.rawOptions[e]},i=(e,i)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);i=this._sanitizeAndValidateOption(e,i),this.rawOptions[e]!==i&&(this.rawOptions[e]=i,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const s={get:e.bind(this,t),set:i.bind(this,t)};Object.defineProperty(this.options,t,s)}}_sanitizeAndValidateOption(e,i){switch(e){case"cursorStyle":if(i||(i=t.DEFAULT_OPTIONS[e]),!function(e){return"block"===e||"underline"===e||"bar"===e}(i))throw new Error(`"${i}" is not a valid value for ${e}`);break;case"wordSeparator":i||(i=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof i&&1<=i&&i<=1e3)break;i=o.includes(i)?i:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case"scrollback":if((i=Math.min(i,4294967295))<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&0!==i)throw new Error(`${e} must be numeric, value: ${i}`);break;case"windowsPty":i=null!=i?i:{}}return i}}t.OptionsService=a},2660:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkService=void 0;const n=i(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const i=t.addMarker(t.ybase+t.y),s={data:e,id:this._nextId++,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(s,i)),this._dataByLinkId.set(s.id,s),s.id}const i=e,s=this._getEntryIdKey(i),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,t.ybase+t.y),r.id;const n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(o,n)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const i=this._dataByLinkId.get(e);if(i&&i.lines.every(e=>e.line!==t)){const e=this._bufferService.buffer.addMarker(t);i.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(i,e))}}getLinkData(e){var t;return null===(t=this._dataByLinkId.get(e))||void 0===t?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){const i=e.lines.indexOf(t);-1!==i&&(e.lines.splice(i,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=s([r(0,n.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i="di$target",s="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[s]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const r=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");var o,a,l;o=r,l=n,(a=e)[i]===a?a[s].push({id:o,index:l}):(a[s]=[{id:o,index:l}],a[i]=a)};return r.toString=()=>e,t.serviceRegistry.set(e,r),r}},2585:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const s=i(8343);var r,n;t.IBufferService=(0,s.createDecorator)("BufferService"),t.ICoreMouseService=(0,s.createDecorator)("CoreMouseService"),t.ICoreService=(0,s.createDecorator)("CoreService"),t.ICharsetService=(0,s.createDecorator)("CharsetService"),t.IInstantiationService=(0,s.createDecorator)("InstantiationService"),(n=r||(t.LogLevelEnum=r={}))[n.TRACE=0]="TRACE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.OFF=5]="OFF",t.ILogService=(0,s.createDecorator)("LogService"),t.IOptionsService=(0,s.createDecorator)("OptionsService"),t.IOscLinkService=(0,s.createDecorator)("OscLinkService"),t.IUnicodeService=(0,s.createDecorator)("UnicodeService"),t.IDecorationService=(0,s.createDecorator)("DecorationService")},1480:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;const s=i(8460),r=i(225);t.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new s.EventEmitter,this.onChange=this._onChange.event;const e=new r.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0;const i=e.length;for(let s=0;s<i;++s){let r=e.charCodeAt(s);if(55296<=r&&r<=56319){if(++s>=i)return t+this.wcwidth(r);const n=e.charCodeAt(s);56320<=n&&n<=57343?r=1024*(r-55296)+n-56320+65536:t+=this.wcwidth(n)}t+=this.wcwidth(r)}return t}}}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,i),n.exports}var s={};return(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;const t=i(9042),r=i(3236),n=i(844),o=i(5741),a=i(8285),l=i(7975),c=i(7090),h=["cols","rows"];class d extends n.Disposable{constructor(e){super(),this._core=this.register(new r.Terminal(e)),this._addonManager=this.register(new o.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=e=>this._core.options[e],i=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const s in this._core.options){const e={get:t.bind(this,s),set:i.bind(this,s)};Object.defineProperty(this._publicOptions,s,e)}}_checkReadonlyOptions(e){if(h.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){var t,i,s;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(i=e.width)&&void 0!==i?i:0,null!==(s=e.height)&&void 0!==s?s:0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write("\r\n",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(...e){for(const t of e)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(const t of e)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}e.Terminal=d})(),s})()),Vo={exports:{}};var qo,Ko,Yo,Go=Wo?Vo.exports:(Wo=1,self,Vo.exports=(qo=Ko={},Object.defineProperty(qo,"__esModule",{value:!0}),qo.FitAddon=void 0,qo.FitAddon=class{activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const i=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(s.getPropertyValue("height")),n=Math.max(0,parseInt(s.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),a=r-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),l=n-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-i;return{cols:Math.max(2,Math.floor(l/t.css.cell.width)),rows:Math.max(1,Math.floor(a/t.css.cell.height))}}},Ko)),Xo={exports:{}};var Qo,Jo=(Yo||(Yo=1,Qo=Xo,function(e,t){Qo.exports=t()}(self,()=>(()=>{var e={6:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkComputer=t.WebLinkProvider=void 0,t.WebLinkProvider=class{constructor(e,t,i,s={}){this._terminal=e,this._regex=t,this._handler=i,this._options=s}provideLinks(e,t){const s=i.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(s))}_addCallbacks(e){return e.map(e=>(e.leave=this._options.leave,e.hover=(t,i)=>{if(this._options.hover){const{range:s}=e;this._options.hover(t,i,s)}},e))}};class i{static computeLink(e,t,s,r){const n=new RegExp(t.source,(t.flags||"")+"g"),[o,a]=i._getWindowedLineStrings(e-1,s),l=o.join("");let c;const h=[];for(;c=n.exec(l);){const e=c[0];try{const t=new URL(e),i=decodeURI(t.toString());if(e!==i&&e+"/"!==i)continue}catch(d){continue}const[t,n]=i._mapStrIdx(s,a,0,c.index),[o,l]=i._mapStrIdx(s,t,n,e.length);if(-1===t||-1===n||-1===o||-1===l)continue;const u={start:{x:n+1,y:t+1},end:{x:l,y:o+1}};h.push({range:u,text:e,activate:r})}return h}static _getWindowedLineStrings(e,t){let i,s=e,r=e,n=0,o="";const a=[];if(i=t.buffer.active.getLine(e)){const e=i.translateToString(!0);if(i.isWrapped&&" "!==e[0]){for(n=0;(i=t.buffer.active.getLine(--s))&&n<2048&&(o=i.translateToString(!0),n+=o.length,a.push(o),i.isWrapped&&-1===o.indexOf(" ")););a.reverse()}for(a.push(e),n=0;(i=t.buffer.active.getLine(++r))&&i.isWrapped&&n<2048&&(o=i.translateToString(!0),n+=o.length,a.push(o),-1===o.indexOf(" ")););}return[a,s]}static _mapStrIdx(e,t,i,s){const r=e.buffer.active,n=r.getNullCell();let o=i;for(;s;){const e=r.getLine(t);if(!e)return[-1,-1];for(let i=o;i<e.length;++i){e.getCell(i,n);const o=n.getChars();if(n.getWidth()&&(s-=o.length||1,i===e.length-1&&""===o)){const e=r.getLine(t+1);e&&e.isWrapped&&(e.getCell(0,n),2===n.getWidth()&&(s+=1))}if(s<0)return[t,i]}t++,o=0}return[t,o]}}t.LinkComputer=i}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}var s={};return(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.WebLinksAddon=void 0;const t=i(6),r=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function n(e,t){const i=window.open();if(i){try{i.opener=null}catch(s){}i.location.href=t}}e.WebLinksAddon=class{constructor(e=n,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;const i=this._options,s=i.urlRegex||r;this._linkProvider=this._terminal.registerLinkProvider(new t.WebLinkProvider(this._terminal,s,this._handler,i))}dispose(){var e;null===(e=this._linkProvider)||void 0===e||e.dispose()}}})(),s})())),Xo.exports);const Zo=({serverId:e,nodeId:t,name:r,isOpen:n,onClose:o,onToggle:a,onMaximizeChange:l})=>{const c=i.useRef(null),[h,u]=i.useState(null),[g,v]=i.useState(null),[_,b]=i.useState(null),[y,S]=i.useState(!1),[w,C]=i.useState(null),[k,E]=i.useState(!1),[j,L]=i.useState(!1),[D,M]=i.useState(!1),[A,T]=i.useState(!1),[R,P]=i.useState("all"),[N,O]=i.useState(null),[I,B]=i.useState("bottom"),z=i.useRef(null),F=i.useRef(null),H=i.useRef(null),$=i.useRef(null),W=i.useRef(null),U=i.useRef(""),V=i.useRef(0),q=i.useRef(""),K=i.useRef({}),Y={system:[{name:"System Info",icon:re,command:"systeminfo\r",platform:"windows"},{name:"System Info",icon:re,command:"uname -a && lsb_release -a\r",platform:"unix"},{name:"Disk Usage",icon:oe,command:"Get-Volume | Format-Table -AutoSize\r",platform:"windows"},{name:"Disk Usage",icon:oe,command:"df -h\r",platform:"unix"},{name:"Memory Usage",icon:ae,command:"Get-ComputerInfo | Select-Object CsTotalPhysicalMemory,CsFreePhysicalMemory\r",platform:"windows"},{name:"Memory Usage",icon:ae,command:"free -h\r",platform:"unix"}],network:[{name:"Network Config",icon:le,command:"ipconfig /all\r",platform:"windows"},{name:"Network Config",icon:le,command:"ip addr show\r",platform:"unix"},{name:"Test Connectivity",icon:se,command:"Test-NetConnection google.com\r",platform:"windows"},{name:"Test Connectivity",icon:se,command:"ping -c 4 google.com\r",platform:"unix"},{name:"Open Ports",icon:m,command:"netstat -ano | findstr LISTENING\r",platform:"windows"},{name:"Open Ports",icon:m,command:"ss -tulpn\r",platform:"unix"}],processes:[{name:"Top Processes",icon:ce,command:"Get-Process | Sort-Object CPU -Descending | Select-Object -First 10\r",platform:"windows"},{name:"Top Processes",icon:ce,command:"ps aux --sort=-%cpu | head -11\r",platform:"unix"},{name:"Services Status",icon:d,command:'Get-Service | Where-Object {$_.Status -eq "Running"} | Select-Object -First 10\r',platform:"windows"},{name:"Services Status",icon:d,command:"systemctl list-units --type=service --state=running | head -10\r",platform:"unix"}],databases:{mysql:[{name:"Install MySQL",icon:Z,command:'Write-Host "Downloading MySQL installer..." ; Invoke-WebRequest -Uri "https://dev.mysql.com/get/Downloads/MySQLInstaller/mysql-installer-community-8.0.39.0.msi" -OutFile "$env:TEMP\\mysql-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\mysql-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install MySQL",icon:Z,command:"sudo apt-get update && sudo apt-get install mysql-server -y\r",platform:"unix"},{name:"MySQL Status",icon:ae,command:"Get-Service MySQL*\r",platform:"windows"},{name:"MySQL Status",icon:ae,command:"sudo systemctl status mysql\r",platform:"unix"}],postgresql:[{name:"Install PostgreSQL",icon:Z,command:'Write-Host "Downloading PostgreSQL installer..." ; Invoke-WebRequest -Uri "https://get.enterprisedb.com/postgresql/postgresql-16.1-1-windows-x64.exe" -OutFile "$env:TEMP\\postgresql-installer.exe" ; Start-Process "$env:TEMP\\postgresql-installer.exe" -ArgumentList "--mode unattended" -Wait\r',platform:"windows"},{name:"Install PostgreSQL",icon:Z,command:"sudo apt-get update && sudo apt-get install postgresql postgresql-contrib -y\r",platform:"unix"},{name:"PostgreSQL Status",icon:ae,command:"Get-Service PostgreSQL*\r",platform:"windows"},{name:"PostgreSQL Status",icon:ae,command:"sudo systemctl status postgresql\r",platform:"unix"}],mongodb:[{name:"Install MongoDB",icon:Z,command:'Write-Host "Downloading MongoDB installer..." ; Invoke-WebRequest -Uri "https://fastdl.mongodb.org/windows/mongodb-windows-x86_64-7.0.4-signed.msi" -OutFile "$env:TEMP\\mongodb-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\mongodb-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install MongoDB",icon:Z,command:"sudo apt-get update && sudo apt-get install mongodb -y\r",platform:"unix"},{name:"MongoDB Status",icon:ae,command:"Get-Service MongoDB*\r",platform:"windows"},{name:"MongoDB Status",icon:ae,command:"sudo systemctl status mongodb\r",platform:"unix"}],redis:[{name:"Install Redis",icon:Z,command:'Write-Host "Downloading Redis for Windows..." ; Invoke-WebRequest -Uri "https://github.com/microsoftarchive/redis/releases/download/win-3.2.100/Redis-x64-3.2.100.msi" -OutFile "$env:TEMP\\redis-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\redis-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install Redis",icon:Z,command:"sudo apt-get update && sudo apt-get install redis-server -y\r",platform:"unix"},{name:"Redis Status",icon:ae,command:"Get-Service Redis*\r",platform:"windows"},{name:"Redis Status",icon:ae,command:"sudo systemctl status redis\r",platform:"unix"}]},webservers:{apache:[{name:"Install Apache",icon:se,command:"sudo apt-get update && sudo apt-get install apache2 -y\r",platform:"unix"},{name:"Apache Status",icon:ae,command:"sudo systemctl status apache2\r",platform:"unix"},{name:"Restart Apache",icon:x,command:"sudo systemctl restart apache2\r",platform:"unix"}],nginx:[{name:"Install Nginx",icon:se,command:'Write-Host "Downloading Nginx..." ; Invoke-WebRequest -Uri "http://nginx.org/download/nginx-1.24.0.zip" -OutFile "$env:TEMP\\nginx.zip" ; Expand-Archive -Path "$env:TEMP\\nginx.zip" -DestinationPath "C:\\nginx" -Force ; Write-Host "Nginx installed to C:\\nginx"\r',platform:"windows"},{name:"Install Nginx",icon:se,command:"sudo apt-get update && sudo apt-get install nginx -y\r",platform:"unix"},{name:"Nginx Status",icon:ae,command:"Get-Process nginx -ErrorAction SilentlyContinue\r",platform:"windows"},{name:"Nginx Status",icon:ae,command:"sudo systemctl status nginx\r",platform:"unix"},{name:"Restart Nginx",icon:x,command:"sudo systemctl restart nginx\r",platform:"unix"}],iis:[{name:"Install IIS",icon:se,command:"Install-WindowsFeature -name Web-Server -IncludeManagementTools\r",platform:"windows"},{name:"IIS Status",icon:ae,command:"Get-Service W3SVC\r",platform:"windows"},{name:"Restart IIS",icon:x,command:"iisreset\r",platform:"windows"}]},devtools:{nodejs:[{name:"Install Node.js",icon:G,command:'Write-Host "Downloading Node.js installer..." ; Invoke-WebRequest -Uri "https://nodejs.org/dist/v20.10.0/node-v20.10.0-x64.msi" -OutFile "$env:TEMP\\nodejs-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\nodejs-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install Node.js",icon:G,command:"curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash - && sudo apt-get install -y nodejs\r",platform:"unix"},{name:"Node Version",icon:G,command:"node --version ; npm --version\r",platform:"windows"},{name:"Node Version",icon:G,command:"node --version && npm --version\r",platform:"unix"}],python:[{name:"Install Python",icon:G,command:'Write-Host "Downloading Python installer..." ; Invoke-WebRequest -Uri "https://www.python.org/ftp/python/3.12.0/python-3.12.0-amd64.exe" -OutFile "$env:TEMP\\python-installer.exe" ; Start-Process "$env:TEMP\\python-installer.exe" -ArgumentList "/quiet", "InstallAllUsers=1", "PrependPath=1" -Wait\r',platform:"windows"},{name:"Install Python",icon:G,command:"sudo apt-get update && sudo apt-get install python3 python3-pip -y\r",platform:"unix"},{name:"Python Version",icon:G,command:"python --version\r",platform:"windows"},{name:"Python Version",icon:G,command:"python3 --version\r",platform:"unix"}],git:[{name:"Install Git",icon:f,command:'Write-Host "Downloading Git installer..." ; Invoke-WebRequest -Uri "https://github.com/git-for-windows/git/releases/download/v2.43.0.windows.1/Git-2.43.0-64-bit.exe" -OutFile "$env:TEMP\\git-installer.exe" ; Start-Process "$env:TEMP\\git-installer.exe" -ArgumentList "/VERYSILENT", "/NORESTART" -Wait\r',platform:"windows"},{name:"Install Git",icon:f,command:"sudo apt-get update && sudo apt-get install git -y\r",platform:"unix"},{name:"Git Version",icon:G,command:"git --version\r",platform:"windows"},{name:"Git Version",icon:G,command:"git --version\r",platform:"unix"}],docker:[{name:"Install Docker",icon:ce,command:'Write-Host "Downloading Docker Desktop..." ; Invoke-WebRequest -Uri "https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe" -OutFile "$env:TEMP\\docker-installer.exe" ; Start-Process "$env:TEMP\\docker-installer.exe" -ArgumentList "install", "--quiet" -Wait\r',platform:"windows"},{name:"Install Docker",icon:ce,command:"curl -fsSL https://get.docker.com | sudo sh\r",platform:"unix"},{name:"Docker Version",icon:G,command:"docker --version\r",platform:"windows"},{name:"Docker Version",icon:G,command:"docker --version\r",platform:"unix"}]},security:[{name:"Windows Update",icon:f,command:"Get-WindowsUpdate\r",platform:"windows"},{name:"System Update",icon:f,command:"sudo apt-get update && sudo apt-get upgrade -y\r",platform:"unix"},{name:"Check Firewall",icon:m,command:"Get-NetFirewallProfile\r",platform:"windows"},{name:"Check Firewall",icon:m,command:"sudo ufw status\r",platform:"unix"}]};Y.system,Y.network,Y.processes,Object.values(Y.databases).flat(),Object.values(Y.webservers).flat(),Object.values(Y.devtools).flat(),Y.security;const X=[{value:"all",label:"All Scripts",icon:me},{value:"system",label:"System Info",icon:re},{value:"network",label:"Network",icon:le},{value:"processes",label:"Processes",icon:ce},{value:"databases",label:"Install Database",icon:Z,hasNested:!0},{value:"webservers",label:"Install Web Server",icon:se,hasNested:!0},{value:"devtools",label:"Install Dev Tools",icon:G,hasNested:!0},{value:"security",label:"Security",icon:m}],[Q,J]=i.useState("windows");i.useEffect(()=>{const e=e=>{z.current&&!z.current.contains(e.target)&&$.current&&!$.current.contains(e.target)&&M(!1),F.current&&!F.current.contains(e.target)&&H.current&&!H.current.contains(e.target)&&T(!1),W.current&&!W.current.contains(e.target)&&O(null)};return document.addEventListener("mousedown",e),()=>{if(document.removeEventListener("mousedown",e),window&&window.chrome&&window.chrome.runtime&&window.chrome.runtime.onMessage)try{window.chrome.runtime.onMessage.removeListener(e)}catch(Ko){}}},[]),i.useEffect(()=>{if(N&&W.current){const e=W.current,t=e.querySelector(".nested-trigger"),i=e.querySelector(".nested-dropdown");if(t&&i){const e=t.getBoundingClientRect();i.style.top=`${e.bottom+4}px`,i.style.left=`${e.left}px`,i.style.minWidth=`${e.width}px`}}},[N]),i.useEffect(()=>{if(A&&H.current&&F.current){const e=F.current.getBoundingClientRect(),t=H.current;t.style.top=`${e.bottom+4}px`,t.style.left=`${e.left}px`,t.style.minWidth=`${e.width}px`}},[A]),i.useEffect(()=>{if(D&&$.current&&z.current){const e=z.current.getBoundingClientRect(),t=$.current;t.style.top=`${e.bottom+4}px`,t.style.left=`${e.left}px`,t.style.minWidth=`${e.width}px`}},[D]);const ee=(e,t)=>{e&&t&&requestAnimationFrame(()=>{const i=t.getBoundingClientRect();e.style.top=`${i.bottom+4}px`,e.style.left=`${i.left}px`,e.style.minWidth=`${i.width}px`})};i.useEffect(()=>{if(!n||!c.current)return;const e=new Uo.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Consolas, "Courier New", monospace',fastScrollModifier:"shift",scrollback:1e3,rendererType:"canvas",convertEol:!0,theme:{background:"#1a1a1a",foreground:"#ffffff",cursor:"#ffffff",cursorAccent:"#000000",selection:"rgba(255, 255, 255, 0.3)",black:"#000000",red:"#ef4444",green:"#10b981",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#ffffff",brightBlack:"#6b7280",brightRed:"#f87171",brightGreen:"#34d399",brightYellow:"#fbbf24",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#f9fafb"}}),t=new Go.FitAddon,i=new Jo.WebLinksAddon;let s;e.loadAddon(t),e.loadAddon(i),e.open(c.current),requestAnimationFrame(()=>{t.fit()}),u(e),v(t);const r=()=>{clearTimeout(s),s=setTimeout(()=>{t&&t.fit()},150)};return window.addEventListener("resize",r),te(e),()=>{window.removeEventListener("resize",r),clearTimeout(s),_&&_.close(),e.dispose()}},[n,e,t]),i.useEffect(()=>{g&&n&&requestAnimationFrame(()=>{g.fit(),h&&h.scrollToBottom()})},[k,j,g,n,h]);const te=(i,s)=>{const r="https:"===window.location.protocol?"wss:":"ws:";let n;if(t)n=`${r}//${window.location.host}/alterion/panel/terminal/node/${t}/`;else{if(!e)return void i.writeln("[31mError: No server or node ID provided[0m");n=`${r}//${window.location.host}/alterion/panel/terminal/server/${e}/`}const o=new WebSocket(n);let a;o.onopen=()=>{S(!0),C(null),i.writeln("[32mConnected to server...[0m"),o.send(JSON.stringify({type:"resize",cols:i.cols,rows:i.rows}))},o.onmessage=e=>{const t=JSON.parse(e.data);if("output"===t.type){let e=t.data;if(q.current){const t=q.current.trim();if(e.includes(t)){const i=e.indexOf(t);-1!==i&&(e=e.substring(i+t.length))}e.trim().length>0&&(q.current="")}e.length>0&&(i.write(e),i.scrollToBottom())}else"error"===t.type?(i.writeln(`\r\n[31mError: ${t.message}[0m\r\n`),i.scrollToBottom(),C(t.message)):"connected"===t.type&&(i.writeln(`\r\n${t.message}\r\n`),i.scrollToBottom())},o.onerror=e=>{C("Connection error"),i.writeln("\r\n[31mConnection error[0m\r\n")},o.onclose=()=>{S(!1),i.writeln("\r\n[33mConnection closed[0m\r\n"),c.current&&c.current.classList.add("terminal-disconnected")},i.onData(e=>{if(o.readyState===WebSocket.OPEN)if("\r"===e||"\n"===e)i.write("\r\n"),U.current.trim()&&o.send(JSON.stringify({type:"input",data:U.current+"\n"})),U.current="",V.current=0;else if(""===e||"\b"===e||"\b"===e){if(U.current.length>0&&V.current>0){const e=U.current,t=V.current;U.current=e.slice(0,t-1)+e.slice(t),V.current=t-1,i.write("\b \b")}}else if("[D"===e)V.current>0&&(V.current--,i.write(e));else if("[C"===e)V.current<U.current.length&&(V.current++,i.write(e));else if(""===e)i.write("^C\r\n"),o.send(JSON.stringify({type:"input",data:""})),U.current="",V.current=0;else if(1===e.length&&e>=" "&&e<="~"){const t=U.current,s=V.current;U.current=t.slice(0,s)+e+t.slice(s),V.current=s+1,i.write(e),i.scrollToBottom()}}),i.onResize(({cols:e,rows:t})=>{clearTimeout(a),a=setTimeout(()=>{o.readyState===WebSocket.OPEN&&o.send(JSON.stringify({type:"resize",cols:e,rows:t}))},100)}),b(o)},ie=()=>{h&&(c.current&&c.current.classList.remove("terminal-disconnected"),_&&_.close(),h.clear(),te(h))},ne=e=>{h&&y&&(h.writeln(`> ${e.replace(/\r$/,"")}`),_&&_.readyState===WebSocket.OPEN&&_.send(JSON.stringify({type:"input",data:e})),q.current=e)};return n?s.jsxs("div",{className:"terminal-panel",children:[s.jsxs("div",{className:"terminal-header",children:[s.jsxs("div",{className:"terminal-title",children:[s.jsx(p,{size:18}),s.jsx("span",{children:r||(t?`Node ${t}`:`Server ${e}`)}),s.jsx("span",{className:"status-indicator "+(y?"connected":"disconnected")})]}),s.jsxs("div",{className:"terminal-actions",children:[!y&&s.jsx("button",{className:"terminal-action-btn reconnect-btn-header",onClick:ie,title:"Reconnect",children:s.jsx(x,{size:16})}),s.jsx("button",{className:"terminal-action-btn "+(j?"active":""),onClick:()=>L(!j),title:"Quick Scripts",children:s.jsx(G,{size:16})}),s.jsx("button",{className:"terminal-action-btn",onClick:()=>{const e=!k;E(e),l&&l(e)},title:k?"Restore":"Maximize",children:k?s.jsx(he,{size:16}):s.jsx(de,{size:16})}),s.jsx("button",{className:"terminal-action-btn",onClick:o,title:"Close",children:s.jsx(ue,{size:16})})]})]}),j&&s.jsxs("div",{className:"terminal-toolbar",children:[s.jsxs("div",{className:"toolbar-controls",children:[s.jsxs("div",{className:"platform-selector-container",ref:F,children:[s.jsxs("button",{className:"platform-selector-button",onClick:()=>T(e=>!e),children:[s.jsx(re,{size:16}),s.jsx("span",{children:"windows"===Q?"Windows":"Unix/Linux"}),s.jsx(pe,{size:16,className:"chevron-icon "+(A?"open":"")})]}),A&&fe.createPortal(s.jsxs("div",{className:"platform-dropdown",ref:H,children:[s.jsxs("button",{className:"platform-option "+("windows"===Q?"active":""),onClick:()=>{J("windows"),T(!1)},children:[s.jsx(re,{size:16}),s.jsx("span",{children:"Windows"})]}),s.jsxs("button",{className:"platform-option "+("unix"===Q?"active":""),onClick:()=>{J("unix"),T(!1)},children:[s.jsx(re,{size:16}),s.jsx("span",{children:"Unix/Linux"})]})]}),document.body)]}),s.jsxs("div",{className:"category-filter-container",ref:z,children:[s.jsxs("button",{className:"category-filter-button",onClick:()=>M(e=>!e),children:[s.jsx(ge,{size:16}),s.jsx("span",{children:X.find(e=>e.value===R)?.label||"All Scripts"}),s.jsx(pe,{size:16,className:"chevron-icon "+(D?"open":"")})]}),D&&fe.createPortal(s.jsx("div",{className:"category-dropdown",ref:$,children:X.map(e=>{const t=e.icon;return s.jsxs("div",{className:"category-option "+(R===e.value?"active":""),onClick:()=>{P(e.value),M(!1)},children:[s.jsx(t,{size:16}),s.jsx("span",{children:e.label})]},e.value)})}),document.body)]})]}),s.jsxs("div",{className:"toolbar-scripts",children:[("all"===R||"system"===R)&&s.jsx("div",{className:"script-group",children:Y.system.filter(e=>e.platform===Q).map((e,t)=>{const i=e.icon;return s.jsxs("button",{className:"script-btn",onClick:()=>ne(e.command),disabled:!y,title:e.name,children:[s.jsx(i,{size:16}),s.jsx("span",{children:e.name})]},`system-${t}`)})}),("all"===R||"network"===R)&&s.jsx("div",{className:"script-group",children:Y.network.filter(e=>e.platform===Q).map((e,t)=>{const i=e.icon;return s.jsxs("button",{className:"script-btn",onClick:()=>ne(e.command),disabled:!y,title:e.name,children:[s.jsx(i,{size:16}),s.jsx("span",{children:e.name})]},`network-${t}`)})}),("all"===R||"processes"===R)&&s.jsx("div",{className:"script-group",children:Y.processes.filter(e=>e.platform===Q).map((e,t)=>{const i=e.icon;return s.jsxs("button",{className:"script-btn",onClick:()=>ne(e.command),disabled:!y,title:e.name,children:[s.jsx(i,{size:16}),s.jsx("span",{children:e.name})]},`processes-${t}`)})}),("all"===R||"security"===R)&&s.jsx("div",{className:"script-group",children:Y.security.filter(e=>e.platform===Q).map((e,t)=>{const i=e.icon;return s.jsxs("button",{className:"script-btn",onClick:()=>ne(e.command),disabled:!y,title:e.name,children:[s.jsx(i,{size:16}),s.jsx("span",{children:e.name})]},`security-${t}`)})}),("all"===R||"databases"===R)&&s.jsx("div",{className:"script-group",children:Object.entries(Y.databases).map(([e,t])=>s.jsxs("div",{className:"nested-dropdown-container",children:[s.jsxs("button",{ref:t=>K.current[`db-${e}`]=t,className:"script-btn nested-trigger",onClick:()=>O(N===`db-${e}`?null:`db-${e}`),disabled:!y,children:[s.jsx(Z,{size:16}),s.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),s.jsx(pe,{size:14,className:"nested-chevron "+(N===`db-${e}`?"open":"")})]}),N===`db-${e}`&&fe.createPortal(s.jsx("div",{className:"nested-dropdown",ref:t=>ee(t,K.current[`db-${e}`]),style:{position:"fixed",zIndex:10001},children:t.filter(e=>e.platform===Q).map((t,i)=>{const r=t.icon;return s.jsxs("button",{className:"nested-option",onClick:()=>{ne(t.command),O(null)},disabled:!y,children:[s.jsx(r,{size:14}),s.jsx("span",{children:t.name})]},`${e}-${i}`)})}),document.body)]},`db-${e}`))}),("all"===R||"webservers"===R)&&s.jsx("div",{className:"script-group",children:Object.entries(Y.webservers).map(([e,t])=>{const i=t.filter(e=>e.platform===Q);return 0===i.length?null:s.jsxs("div",{className:"nested-dropdown-container",children:[s.jsxs("button",{ref:t=>K.current[`web-${e}`]=t,className:"script-btn nested-trigger",onClick:()=>O(N===`web-${e}`?null:`web-${e}`),disabled:!y,children:[s.jsx(se,{size:16}),s.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),s.jsx(pe,{size:14,className:"nested-chevron "+(N===`web-${e}`?"open":"")})]}),N===`web-${e}`&&fe.createPortal(s.jsx("div",{className:"nested-dropdown",ref:t=>ee(t,K.current[`web-${e}`]),style:{position:"fixed",zIndex:10001},children:i.map((t,i)=>{const r=t.icon;return s.jsxs("button",{className:"nested-option",onClick:()=>{ne(t.command),O(null)},disabled:!y,children:[s.jsx(r,{size:14}),s.jsx("span",{children:t.name})]},`${e}-${i}`)})}),document.body)]},`web-${e}`)})}),("all"===R||"devtools"===R)&&s.jsx("div",{className:"script-group",children:Object.entries(Y.devtools).map(([e,t])=>s.jsxs("div",{className:"nested-dropdown-container",children:[s.jsxs("button",{ref:t=>K.current[`tool-${e}`]=t,className:"script-btn nested-trigger",onClick:()=>O(N===`tool-${e}`?null:`tool-${e}`),disabled:!y,children:[s.jsx(G,{size:16}),s.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),s.jsx(pe,{size:14,className:"nested-chevron "+(N===`tool-${e}`?"open":"")})]}),N===`tool-${e}`&&fe.createPortal(s.jsx("div",{className:"nested-dropdown",ref:t=>ee(t,K.current[`tool-${e}`]),style:{position:"fixed",zIndex:10001},children:t.filter(e=>e.platform===Q).map((t,i)=>{const r=t.icon;return s.jsxs("button",{className:"nested-option",onClick:()=>{ne(t.command),O(null)},disabled:!y,children:[s.jsx(r,{size:14}),s.jsx("span",{children:t.name})]},`${e}-${i}`)})}),document.body)]},`tool-${e}`))})]})]}),s.jsx("div",{ref:c,className:"terminal-body"}),!y&&s.jsx("div",{className:"terminal-reconnect-overlay",children:s.jsxs("button",{className:"reconnect-overlay-btn",onClick:ie,children:[s.jsx(x,{size:24}),s.jsx("span",{children:"Reconnect"})]})}),w&&s.jsx("div",{className:"terminal-error",children:s.jsx("span",{children:w})})]}):null},ea=["/"];function ta({children:e}){const{auth:t,sessionChecked:r}=i.useContext(ve),n=_e();return ea.some(e=>n.pathname.startsWith(e))||r&&t&&t.token?e:s.jsx("div",{style:{textAlign:"center",marginTop:"5rem"},children:s.jsx("h1",{children:"404 Not Found"})})}const ia=({onClose:e,onSuccess:t})=>{const{customSettings:r}=i.useContext(Pe),n=Re(r,"background"),[o,a]=i.useState(1),[l,c]=i.useState(null),[h,d]=i.useState(null),[u,f]=i.useState([]),[p,g]=i.useState(null),[m,v]=i.useState(""),[_,b]=i.useState(""),[y,x]=i.useState(!1),[S,w]=i.useState(""),[C,k]=i.useState(!1),[E,j]=i.useState({host:"",port:"22",username:"",password:"",privateKey:""}),[L,D]=i.useState(""),[M,A]=i.useState(null),[T,R]=i.useState(null),[P,N]=i.useState(""),[O,I]=i.useState(0),[B,z]=i.useState(0),[F,H]=i.useState(""),[$,W]=i.useState("pending"),[U,V]=i.useState(!1),[q,K]=i.useState(0),[Y,G]=i.useState(""),X=i.useRef(0),Q=i.useRef(null),J=i.useRef(null),Z=e=>{c(e),w(""),e?(a(2),x(!0),fetch("/api/alterion/panel/nodes/?status=pending").then(e=>e.json()).then(e=>{f(Array.isArray(e)?e:e.results||[]),x(!1)}).catch(()=>{f([]),x(!1)})):a(10)},ee=()=>{J.current&&J.current.close(),Q.current&&Q.current.close(),a(1),c(null),d(null),v(""),b(""),w(""),k(!1),e()},te=(e=>{const t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16),r=Math.max(0,Math.floor(.7*t)),n=Math.max(0,Math.floor(.7*i)),o=Math.max(0,Math.floor(.7*s));return`#${r.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`})(r.backgroundColor1),ie=!1===l?[{id:10,number:1,label:"SSH Details"},{id:12,number:2,label:"Install & Log"},{id:13,number:3,label:"Verification",loading:U},{id:14,number:4,label:"Complete"}]:[{id:1,number:1,label:"Node Agent"},{id:2,number:2,label:"Pending Node"},{id:3,number:3,label:"Registration"},{id:4,number:4,label:"Complete"}];return i.useEffect(()=>()=>{J.current&&J.current.close(),Q.current&&Q.current.close()},[]),s.jsxs("div",{className:"modal-overlay",onClick:ee,children:[s.jsxs("div",{className:"modal-content wizard-modal",onClick:e=>e.stopPropagation(),style:{background:"gradient"===r.backgroundType?`linear-gradient(135deg, ${r.backgroundColor1}ee, ${r.backgroundColor2}ee)`:`${r.backgroundColor1}ee`,color:n,maxWidth:"700px",borderRadius:`${r.borderRadius}px`,backdropFilter:`blur(${r.backdropBlur}px)`},children:[s.jsxs("div",{className:"modal-header",style:{marginBottom:"24px"},children:[s.jsxs("h2",{style:{color:n},children:[s.jsx(re,{size:24})," Add Node - Step ",o]}),s.jsx("button",{className:"modal-close",onClick:ee,style:{color:n},children:s.jsx(ue,{size:24})})]}),s.jsx("div",{className:"step-tracker",children:ie.map((e,t)=>s.jsxs(ne.Fragment,{children:[s.jsxs("div",{className:"step-item",children:[s.jsx("div",{className:`step-circle ${o>=e.id?"active":""} ${o>e.id?"completed":""}`,style:{background:o>=e.id?te:`${te}80`,color:n,border:`2px solid ${o>=e.id?r.accentColor1:`${te}80`}`},children:o>e.id?s.jsx(be,{size:16}):e.number}),s.jsx("span",{className:"step-label",style:{color:o>=e.id?n:`${n}80`,fontWeight:o===e.id?"bold":"normal"},children:e.label})]}),t<ie.length-1&&s.jsx("div",{className:"step-connector",style:{background:o>e.id?r.accentColor1:`${te}80`}})]},e.id))}),S&&s.jsx("div",{className:"error-message",style:{padding:"12px",background:"#ff444460",borderRadius:"8px",marginBottom:"16px",color:n},children:S}),s.jsxs("div",{className:"step-content",children:[1===o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[s.jsx("h3",{style:{color:n,marginBottom:"16px"},children:"Is the node agent already installed on the target node?"}),s.jsxs("div",{style:{display:"flex",gap:16,marginTop:24,justifyContent:"center"},children:[s.jsx("button",{onClick:()=>Z(!0),className:"installer-btn",children:"Yes"}),s.jsx("button",{onClick:()=>Z(!1),className:"installer-btn",children:"No"})]})]}),2===o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[s.jsx("h3",{style:{color:n,marginBottom:"16px"},children:"Select a Pending Node"}),y?s.jsx(ye,{size:48,style:{color:r.accentColor1,animation:"spin 1s linear infinite",margin:"0 auto 24px"}}):0===u.length?s.jsx("p",{style:{color:`${n}80`},children:"No pending nodes found. Please ensure the node agent is running and attempting to connect."}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center",marginTop:16},children:[u.map(e=>s.jsxs("label",{style:{display:"flex",alignItems:"center",background:"#2226",borderRadius:8,padding:16,cursor:"pointer",border:p===e.id?`2px solid ${r.accentColor1}`:"2px solid transparent",width:400,maxWidth:"100%"},children:[s.jsx("input",{type:"radio",name:"pendingNode",value:e.id,checked:p===e.id,onChange:()=>g(e.id),style:{marginRight:16}}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:600,color:n},children:e.name||e.hostname||e.ip_address}),s.jsx("div",{style:{fontSize:13,color:`${n}99`},children:e.ip_address}),s.jsxs("div",{style:{fontSize:12,color:`${n}66`},children:["Last seen: ",e.last_seen?new Date(e.last_seen).toLocaleString():"Never"]})]})]},e.id)),s.jsx("button",{className:"installer-btn",style:{marginTop:16},disabled:!p,onClick:()=>{const e=u.find(e=>e.id===p);d(e),v(e&&e.notes?e.notes:""),a(3)},children:"Continue"})]})]}),3===o&&h&&s.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[s.jsxs("h3",{style:{color:n,marginBottom:"16px"},children:["Node Found: ",h.name]}),s.jsxs("div",{className:"verification-method",style:{background:`${te}40`,padding:"20px",borderRadius:"8px",marginBottom:"16px",border:`2px solid ${te}`},children:[s.jsxs("h4",{style:{color:n,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[s.jsx(xe,{size:20})," Registration Code"]}),s.jsx("div",{style:{background:`${te}80`,padding:"12px",borderRadius:"6px",fontFamily:"monospace",fontSize:"16px",marginBottom:"8px",display:"inline-block",color:r.accentColor1},children:m}),s.jsx("p",{style:{color:`${n}80`,fontSize:"14px",marginTop:"8px"},children:"Enter this code on the node, or paste the code received from the node below:"}),s.jsx("input",{type:"text",value:_,onChange:e=>b(e.target.value),className:"installer-input",placeholder:"Enter registration code",style:{marginBottom:12,width:"100%",fontSize:"16px",padding:"10px"}}),s.jsx("button",{onClick:async()=>{x(!0),w("");try{const e=h?h.id:void 0;if(!e)return w("No node selected."),void x(!1);const i=`verify_${Date.now()}_${Math.floor(1e5*Math.random())}`,s=`wss://${window.location.host}/alterion/panel/agent/${encodeURIComponent(e.replace("node-",""))}/`,r=new WebSocket(s);J.current=r;let n=!1;r.onopen=()=>{r.send(JSON.stringify({action:"verify_code",code:_,verification_id:i}))},r.onmessage=e=>{let s;try{s=JSON.parse(e.data)}catch{return}s.verification_id===i&&(s.verified?(a(4),k(!0),t&&t()):w(s.error||"Verification failed."),x(!1),n=!0,r.close())},r.onerror=()=>{n||(w("WebSocket error during verification."),x(!1))},r.onclose=()=>{n||(w("Connection closed without response."),x(!1))}}catch(e){w("Verification failed: "+(e.message||e)),x(!1)}},className:"installer-btn",disabled:y||!_,style:{marginTop:8},children:y?"Verifying...":"Verify Code"})]})]}),4===o&&C&&s.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:r.accentColor1,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:s.jsx(be,{size:48,style:{color:Re(r,"accent")}})}),s.jsx("h3",{style:{color:n,marginBottom:"12px"},children:"Node Registered!"}),s.jsx("p",{style:{color:`${n}80`,marginBottom:"24px"},children:"The node has been successfully registered and is now available."}),s.jsx("button",{onClick:ee,className:"installer-btn",children:"Close"})]}),10===o&&s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(""),x(!0),H(""),W("pending"),K(0),G("Connecting...");const t=E.host,i=`wss://${window.location.host}/alterion/panel/ssh_onboard/${encodeURIComponent(t)}/`,s=new WebSocket(i);Q.current=s;let r=!1;s.onopen=()=>{s.send(JSON.stringify({type:"ssh_onboard",port:E.port,username:E.username,private_key:E.privateKey||E.password}))},s.onmessage=async e=>{let t;try{t=JSON.parse(e.data)}catch{return void H(t=>t+e.data)}if("node_info"===t.status&&t.node){A(t.node);const e=t.node.id;if(e){const t=`wss://${window.location.host}/alterion/panel/agent/${encodeURIComponent(e.replace("node-",""))}/`,i=new window.WebSocket(t);R(i),i.onopen=()=>{i.send(JSON.stringify({action:"get_registration_code"}))},i.onmessage=e=>{let t;try{t=JSON.parse(e.data)}catch{return}t.code&&(D(t.code),i.close())},i.onerror=()=>i.close()}}t.code&&D(t.code);let i=X.current;if("number"==typeof t.progress)i=Math.max(X.current,Math.min(100,t.progress));else if("number"==typeof t.step&&"number"==typeof t.total){let e=Math.round(t.step/t.total*90);i=Math.max(X.current,e)}else"installing"===t.status?i=Math.max(X.current,Math.min(90,X.current+2)):"done"===t.status&&(i=100);i>X.current&&(X.current=i,K(i)),"number"==typeof t.step&&"number"==typeof t.total&&(z(t.step),I(t.total)),"connected"!==t.status||r||(r=!0,W("installing"),G("SSH connection established. Installing..."),a(12),x(!1)),"connecting"===t.status&&G(t.step||"Connecting..."),"installing"===t.status&&(W("installing"),G(t.step||"Installing...")),void 0!==t.progress&&t.step&&G(t.step),t.log&&H(e=>e+t.log),"done"===t.status&&(W("done"),G(t.step||"Installation complete!"),X.current=100,K(100),setTimeout(()=>{a(13)},1200)),t.error&&(W("failed"),G("Installation failed."),w(t.error),s.close())},s.onerror=()=>{W("failed"),w("WebSocket error during SSH onboarding."),x(!1)},s.onclose=()=>{Q.current=null}},style:{maxWidth:420,margin:"0 auto",padding:24},children:[s.jsx("h3",{style:{color:n,marginBottom:16},children:"Enter SSH Connection Details"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Host"}),s.jsx("input",{type:"text",value:E.host,onChange:e=>j({...E,host:e.target.value}),required:!0,className:"installer-input",placeholder:"e.g. 192.168.1.100"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Port"}),s.jsx("input",{type:"number",value:E.port,onChange:e=>j({...E,port:e.target.value}),required:!0,className:"installer-input",placeholder:"22"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Username"}),s.jsx("input",{type:"text",value:E.username,onChange:e=>j({...E,username:e.target.value}),required:!0,className:"installer-input",placeholder:"e.g. root"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Password (or leave blank to use private key)"}),s.jsx("input",{type:"password",value:E.password,onChange:e=>j({...E,password:e.target.value}),className:"installer-input"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Upload Private Key (.pem or .ppk)"}),s.jsx("input",{type:"file",accept:".pem,.ppk",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{j(t=>({...t,privateKey:e.target.result}))},e.readAsText(t)}}})]}),s.jsx("button",{type:"submit",className:"installer-btn",style:{marginTop:16},disabled:y,children:y?"Connecting...":"Continue"})]}),12===o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px",maxHeight:480,overflow:"auto"},children:[s.jsx("h3",{style:{color:n,marginBottom:"16px"},children:"Installing Node Agent..."}),s.jsxs("div",{style:{margin:"24px auto",width:"80%",background:`${te}40`,borderRadius:8,height:18,overflow:"hidden",position:"relative"},children:[s.jsx("div",{style:{width:`${q}%`,height:"100%",background:r.accentColor1,transition:"width 0.5s"}}),O>0&&s.jsxs("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:n,fontWeight:600,fontSize:13},children:["Step ",B," / ",O]})]}),s.jsxs("div",{style:{margin:"12px auto 0",color:n,fontWeight:500,fontSize:15},children:["installing"===$&&(Y||"Connecting and starting install..."),"done"===$&&"Installation complete!","failed"===$&&"Installation failed."]}),s.jsx("div",{style:{margin:"24px auto 0",width:"90%",background:`${te}40`,borderRadius:8,minHeight:120,maxHeight:220,overflowY:"auto",textAlign:"left",fontFamily:"monospace",fontSize:14,color:n,padding:12,whiteSpace:"pre-wrap",boxShadow:"0 2px 8px #0002"},children:F||("installing"===$?"Connecting and starting install...":"")}),"failed"===$&&s.jsx("button",{className:"installer-btn",style:{marginTop:24},onClick:()=>{W("pending"),K(0),G(""),H(""),I(0),z(0),D(""),N(""),w(""),x(!1),a(10)},children:"Retry"})]}),13===o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[s.jsxs("h3",{style:{color:n,marginBottom:"16px"},children:["Node Found: ",M?.hostname||E.host]}),s.jsxs("div",{className:"verification-method",style:{background:`${te}40`,padding:"20px",borderRadius:"8px",marginBottom:"16px",border:`2px solid ${te}`},children:[s.jsxs("h4",{style:{color:n,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[s.jsx(xe,{size:20})," Registration Code"]}),M?.notes||L?s.jsx("div",{style:{background:`${te}80`,padding:"12px",borderRadius:"6px",fontFamily:"monospace",fontSize:"16px",marginBottom:"8px",display:"inline-block",color:r.accentColor1},children:M?.notes||L}):s.jsxs("div",{style:{background:`${te}80`,padding:"12px",borderRadius:"6px",marginBottom:"8px",display:"inline-flex",alignItems:"center",gap:"8px",color:`${n}80`},children:[s.jsx(ye,{size:16,className:"spinner",style:{color:r.accentColor1}}),"Loading registration code..."]}),s.jsx("p",{style:{color:`${n}80`,fontSize:"14px",marginTop:"8px"},children:"Enter this code on the node, or paste the code received from the node below:"}),s.jsx("input",{type:"text",value:P,onChange:e=>N(e.target.value),className:"installer-input",placeholder:"Enter registration code",style:{marginBottom:12,width:"100%",fontSize:"16px",padding:"10px"}}),s.jsx("button",{onClick:async()=>{x(!0),w("");try{const e=M?.id;if(!e)return w("No node ID available for verification."),void x(!1);const i=`verify_${Date.now()}_${Math.floor(1e5*Math.random())}`,s=`wss://${window.location.host}/alterion/panel/agent/${encodeURIComponent(e.replace("node-",""))}/`,r=new window.WebSocket(s);J.current=r;let n=!1;r.onopen=()=>{r.send(JSON.stringify({action:"verify_code",code:P,verification_id:i}))},r.onmessage=e=>{let s;try{s=JSON.parse(e.data)}catch{return}s.verification_id===i&&(s.verified?(a(14),k(!0),t&&t()):w(s.error||"Verification failed."),x(!1),n=!0,r.close())},r.onerror=()=>{n||(w("WebSocket error during verification."),x(!1))},r.onclose=()=>{n||(w("Connection closed without response."),x(!1))}}catch(e){w("Verification failed: "+(e.message||e)),x(!1)}},className:"installer-btn",disabled:y||!P,style:{marginTop:8},children:y?"Verifying...":"Verify Code"})]})]}),14===o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:r.accentColor1,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:s.jsx(be,{size:48,style:{color:Re(r,"accent")}})}),s.jsx("h3",{style:{color:n,marginBottom:"12px"},children:"Node Registered!"}),s.jsx("p",{style:{color:`${n}80`,marginBottom:"24px"},children:"The node has been successfully registered and is now available."}),s.jsx("button",{onClick:ee,className:"installer-btn",children:"Close"})]})]}),[3,99].includes(o)&&s.jsx("div",{className:"modal-actions",style:{display:"flex",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:`1px solid ${te}`},children:s.jsx("button",{onClick:()=>{3===o?(a(1),c(null),d(null),v(""),b(""),w("")):99===o&&(a(1),c(null),w(""))},style:{background:`${te}80`,color:n,padding:"12px 24px",borderRadius:"8px",border:"none",cursor:"pointer",opacity:1},children:"Back"})})]}),s.jsx("style",{jsx:!0,children:"\n        .wizard-modal {\n          padding: 32px;\n        }\n        .step-tracker {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-bottom: 32px;\n          position: relative;\n          padding: 0 20px;\n        }\n        .step-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: flex-start;\n          gap: 8px;\n          flex: 0 0 auto;\n          position: relative;\n          z-index: 2;\n        }\n        .step-circle {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: bold;\n          transition: all 0.3s ease;\n          box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);\n        }\n        .step-circle:hover {\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);\n        }\n        .step-circle.active {\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);\n        }\n        .step-circle.active:hover {\n          box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.5);\n        }\n        .step-circle.completed {\n          transform: scale(1.05);\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);\n        }\n        .step-circle.completed:hover {\n          box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.6);\n        }\n        .step-label {\n          font-size: 12px;\n          text-align: center;\n          max-width: 90px;\n          transition: all 0.3s ease;\n          white-space: nowrap;\n        }\n        .step-connector {\n          height: 2px;\n          width: 40px;\n          position: relative;\n          margin: 0 8px;\n          margin-bottom: 28px;\n          z-index: 1;\n          transition: all 0.3s ease;\n        }\n        .step-content {\n          min-height: 200px;\n        }\n        .spinner {\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      "})]})},sa=({onClose:e,onSuccess:t})=>{const r=L(),{customSettings:n}=i.useContext(Pe),o=Re(n,"background"),[a,l]=i.useState(1),[c,h]=i.useState(null),[u,f]=i.useState(!1),[p,g]=i.useState(""),[v,_]=i.useState(!1),[b,y]=i.useState(""),[x,S]=i.useState(""),[w,C]=i.useState(""),[k,E]=i.useState("react"),[j,D]=i.useState(null),[M,A]=i.useState(null),[T,R]=i.useState(null),[P,N]=i.useState({}),[O,I]=i.useState(!1),[B,z]=i.useState(null),[F,H]=i.useState(8e3),[$,U]=i.useState(!1),[V,q]=i.useState(""),[K,Y]=i.useState(!0),[X,Q]=i.useState(!1),[te,ie]=i.useState(!1),[ne,oe]=i.useState(null),[le,ce]=i.useState(null),[he,de]=i.useState(null),[fe,pe]=i.useState([]),[ge,me]=i.useState("pending");i.useEffect(()=>{if(b){const e=b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");S(e)}},[b]);const ve=async()=>{f(!0),g("");try{const e=await Be.post("/api/alterion/panel/pagebuilder/projects/create_full_project/",{name:b,slug:x,description:w,build_type:c,frontend_framework:k,has_backend:null!==T,has_domain:$,...$&&V&&{domain_name:V},...$&&K&&{ssl_enabled:!0}},{withCredentials:!0});ce(e.data.id),l(3)}catch(e){g(e.response?.data?.message||"Failed to create project")}finally{f(!1)}},_e=async()=>{if(le){f(!0),g("");try{if(j){const e=new FormData;e.append("file",j),await Be.post(`/api/alterion/panel/pagebuilder/projects/${le}/upload_frontend/`,e,{withCredentials:!0,onUploadProgress:e=>{const t=Math.round(100*e.loaded/e.total);N(e=>({...e,frontend:t}))}})}if(T){const e=new FormData;e.append("file",T);const t=await Be.post(`/api/alterion/panel/pagebuilder/projects/${le}/upload_backend/`,e,{withCredentials:!0,onUploadProgress:e=>{const t=Math.round(100*e.loaded/e.total);N(e=>({...e,backend:t}))}});t.data.detection&&(I(!0),z(t.data.detection),H(t.data.detection.port||8e3))}l(4)}catch(e){g(e.response?.data?.error||"Failed to upload files")}finally{f(!1)}}},be=async()=>{if(le&&V){ie(!0),g("");try{const e=await Be.get(`/api/alterion/panel/pagebuilder/projects/${le}/`,{withCredentials:!0}),t=e.data.domain_config?.id;if(t){const e=await Be.post(`/api/alterion/panel/pagebuilder/domains/${t}/verify_dns/`,{},{withCredentials:!0});oe(e.data),Q(e.data.verified),e.data.verified||g(`DNS not verified: ${e.data.message}`)}}catch(e){g(e.response?.data?.message||"DNS verification failed")}finally{ie(!1)}}},ye=async()=>{if(le){f(!0),g(""),me("deploying");try{const e=await Be.post("/api/alterion/panel/pagebuilder/deployments/trigger_deployment/",{project_id:le,deploy_frontend:!0,deploy_backend:O,restart_backend:O,apply_nginx:$&&V,verify_dns:$&&V},{withCredentials:!0});de(e.data.deployment_id),pe(e.data.logs||[]),me(e.data.status),"success"===e.data.status?(_(!0),setTimeout(()=>{t&&t()},2e3)):e.data.errors&&e.data.errors.length>0&&g(e.data.errors.join(", "))}catch(e){g(e.response?.data?.error||"Deployment failed"),me("failed")}finally{f(!1)}}},xe=(e,t)=>{const i=e.target.files[0];i&&(i.name.endsWith(".zip")?(g(""),"frontend-dist"===t?D(i):"frontend-dev"===t?A(i):"backend"===t&&R(i)):g("Please upload a ZIP file"))},Le=n.backgroundColor1,De=(e=>{const t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,t-20)}, ${Math.max(0,i-20)}, ${Math.max(0,s-20)})`})(Le),Me=[{id:1,label:"Build Type"},{id:2,label:"Project Details"},{id:3,label:"Upload Files"},{id:4,label:"Backend Setup"},{id:5,label:"Domain Config"},{id:6,label:"Deploy"}];return s.jsx("div",{className:"deploy-wizard-overlay",children:s.jsxs("div",{className:"deploy-wizard-modal",style:{background:Le},children:[s.jsxs("div",{className:"deploy-wizard-header",children:[s.jsxs("div",{className:"header-content",children:[s.jsx(Se,{size:24,style:{color:n.accentColor1}}),s.jsxs("div",{children:[s.jsx("h2",{style:{color:o},children:"Deploy to Web"}),s.jsx("p",{style:{color:`${o}99`},children:v?"Deployment Complete!":"Deploy your full-stack application"})]})]}),s.jsx("button",{className:"close-button",onClick:()=>{u||e()},disabled:u,style:{color:o},children:s.jsx(ue,{size:20})})]}),s.jsx("div",{className:"deploy-wizard-stepper",children:Me.map((e,t)=>s.jsxs("div",{className:"step-item",children:[s.jsx("div",{className:`step-circle ${a>=e.id?"active":""} ${a>e.id?"completed":""}`,style:{background:a>=e.id?n.accentColor1:De,borderColor:a>=e.id?n.accentColor1:`${o}33`},children:a>e.id?s.jsx(we,{size:16}):s.jsx("span",{style:{color:a>=e.id?"#fff":`${o}66`},children:e.id})}),s.jsx("span",{className:"step-label",style:{color:a>=e.id?o:`${o}66`},children:e.label}),t<Me.length-1&&s.jsx("div",{className:"step-connector",style:{background:a>e.id?n.accentColor1:`${o}22`}})]},e.id))}),s.jsxs("div",{className:"deploy-wizard-content",children:[1===a&&s.jsxs("div",{className:"step-content",children:[s.jsx("h3",{style:{color:o},children:"Choose Your Build Type"}),s.jsx("p",{style:{color:`${o}99`},children:"How would you like to create your project?"}),s.jsxs("div",{className:"build-type-options",children:[s.jsxs("div",{className:"build-option "+("nocode"===c?"selected":""),onClick:()=>h("nocode"),style:{borderColor:"nocode"===c?n.accentColor1:`${o}22`,background:"nocode"===c?`${n.accentColor1}15`:De},children:[s.jsx("div",{className:"option-icon",style:{color:n.accentColor1},children:s.jsx(d,{size:32})}),s.jsx("h4",{style:{color:o},children:"No-Code Builder"}),s.jsx("p",{style:{color:`${o}88`},children:"Build visually with drag-and-drop components"}),s.jsxs("ul",{children:[s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(ee,{size:14})," Visual canvas editor"]}),s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(G,{size:14})," Pre-built components"]}),s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(ae,{size:14})," Animation timeline"]}),s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(Z,{size:14})," Backend integration"]})]})]}),s.jsxs("div",{className:"build-option "+("import"===c?"selected":""),onClick:()=>h("import"),style:{borderColor:"import"===c?n.accentColor1:`${o}22`,background:"import"===c?`${n.accentColor1}15`:De},children:[s.jsx("div",{className:"option-icon",style:{color:n.accentColor1},children:s.jsx(Ce,{size:32})}),s.jsx("h4",{style:{color:o},children:"Import Existing"}),s.jsx("p",{style:{color:`${o}88`},children:"Upload your built project files"}),s.jsxs("ul",{children:[s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(J,{size:14})," Upload /dist folder (required)"]}),s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(W,{size:14})," Upload /dev folder (optional)"]}),s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(re,{size:14})," Upload backend (optional)"]}),s.jsxs("li",{style:{color:`${o}77`},children:[s.jsx(we,{size:14})," Auto-detect framework"]})]})]})]})]}),2===a&&s.jsxs("div",{className:"step-content",children:[s.jsx("h3",{style:{color:o},children:"Project Details"}),s.jsx("p",{style:{color:`${o}99`},children:"Configure your project settings"}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{style:{color:o},children:["Project Name ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"My Awesome Project",style:{background:De,borderColor:`${o}33`,color:o}})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{style:{color:o},children:["Project Slug ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",value:x,onChange:e=>S(e.target.value),placeholder:"my-awesome-project",style:{background:De,borderColor:`${o}33`,color:o}}),s.jsx("small",{style:{color:`${o}77`},children:"Used in URLs and file paths (auto-generated from name)"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{style:{color:o},children:"Description"}),s.jsx("textarea",{value:w,onChange:e=>C(e.target.value),placeholder:"Describe your project...",rows:3,style:{background:De,borderColor:`${o}33`,color:o}})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{style:{color:o},children:"Frontend Framework"}),s.jsxs("select",{value:k,onChange:e=>E(e.target.value),style:{background:De,borderColor:`${o}33`,color:o},children:[s.jsx("option",{value:"react",children:"React"}),s.jsx("option",{value:"vue",children:"Vue"}),s.jsx("option",{value:"angular",children:"Angular"}),s.jsx("option",{value:"static",children:"Static HTML/CSS"})]})]})]}),3===a&&s.jsxs("div",{className:"step-content",children:[s.jsx("h3",{style:{color:o},children:"nocode"===c?"Upload Backend (Optional)":"Upload Project Files"}),s.jsx("p",{style:{color:`${o}99`},children:"nocode"===c?"Frontend will be built with the no-code editor. Optionally upload a backend.":"Upload your project files as ZIP archives"}),"import"===c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"upload-section",children:[s.jsxs("div",{className:"upload-header",children:[s.jsxs("div",{className:"upload-title",children:[s.jsx(Ce,{size:18,style:{color:n.accentColor1}}),s.jsx("span",{style:{color:o},children:"Frontend Build Files"}),s.jsx("span",{className:"required",children:"*"})]}),s.jsx("small",{style:{color:`${o}77`},children:"Built production files ready for deployment"})]}),s.jsxs("div",{className:"file-upload-box compact",style:{background:De,borderColor:j?n.accentColor1:`${o}33`},children:[s.jsx("input",{type:"file",accept:".zip",onChange:e=>xe(e,"frontend-dist"),id:"frontend-dist-upload",style:{display:"none"}}),s.jsx("label",{htmlFor:"frontend-dist-upload",className:"file-upload-label compact",children:j?s.jsxs(s.Fragment,{children:[s.jsx(we,{size:20,style:{color:n.accentColor1}}),s.jsxs("div",{className:"file-info",children:[s.jsx("span",{style:{color:o},children:j.name}),s.jsxs("small",{style:{color:`${o}77`},children:[(j.size/1024/1024).toFixed(2)," MB"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{size:20,style:{color:`${o}66`}}),s.jsx("span",{style:{color:o},children:"Click to upload dist.zip"})]})}),P.frontend>0&&P.frontend<100&&s.jsx("div",{className:"upload-progress",children:s.jsx("div",{className:"progress-bar",style:{width:`${P.frontend}%`,background:n.accentColor1}})})]})]}),s.jsxs("div",{className:"upload-section",children:[s.jsxs("div",{className:"upload-header",children:[s.jsxs("div",{className:"upload-title",children:[s.jsx(W,{size:18,style:{color:n.accentColor1}}),s.jsx("span",{style:{color:o},children:"Frontend Source Files"}),s.jsx("span",{className:"optional",children:"(Optional)"})]}),s.jsx("small",{style:{color:`${o}77`},children:"Source code for future editing"})]}),s.jsxs("div",{className:"file-upload-box compact",style:{background:De,borderColor:M?n.accentColor1:`${o}33`},children:[s.jsx("input",{type:"file",accept:".zip",onChange:e=>xe(e,"frontend-dev"),id:"frontend-dev-upload",style:{display:"none"}}),s.jsx("label",{htmlFor:"frontend-dev-upload",className:"file-upload-label compact",children:M?s.jsxs(s.Fragment,{children:[s.jsx(we,{size:20,style:{color:n.accentColor1}}),s.jsxs("div",{className:"file-info",children:[s.jsx("span",{style:{color:o},children:M.name}),s.jsxs("small",{style:{color:`${o}77`},children:[(M.size/1024/1024).toFixed(2)," MB"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{size:20,style:{color:`${o}66`}}),s.jsx("span",{style:{color:o},children:"Click to upload dev.zip"})]})})]})]})]}),s.jsxs("div",{className:"upload-section",children:[s.jsxs("div",{className:"upload-header",children:[s.jsxs("div",{className:"upload-title",children:[s.jsx(re,{size:18,style:{color:n.accentColor1}}),s.jsx("span",{style:{color:o},children:"Backend Server"}),s.jsx("span",{className:"optional",children:"(Optional)"})]}),s.jsx("small",{style:{color:`${o}77`},children:"Django, FastAPI, or Node.js backend"})]}),s.jsxs("div",{className:"file-upload-box compact",style:{background:De,borderColor:T?n.accentColor1:`${o}33`},children:[s.jsx("input",{type:"file",accept:".zip",onChange:e=>xe(e,"backend"),id:"backend-upload",style:{display:"none"}}),s.jsx("label",{htmlFor:"backend-upload",className:"file-upload-label compact",children:T?s.jsxs(s.Fragment,{children:[s.jsx(we,{size:20,style:{color:n.accentColor1}}),s.jsxs("div",{className:"file-info",children:[s.jsx("span",{style:{color:o},children:T.name}),s.jsxs("small",{style:{color:`${o}77`},children:[(T.size/1024/1024).toFixed(2)," MB"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{size:20,style:{color:`${o}66`}}),s.jsx("span",{style:{color:o},children:"Click to upload backend.zip"})]})}),P.backend>0&&P.backend<100&&s.jsx("div",{className:"upload-progress",children:s.jsx("div",{className:"progress-bar",style:{width:`${P.backend}%`,background:n.accentColor1}})})]})]})]}),4===a&&s.jsxs("div",{className:"step-content",children:[s.jsx("h3",{style:{color:o},children:"Backend Configuration"}),O&&B?s.jsxs("div",{className:"detection-result success",children:[s.jsxs("div",{className:"result-header",children:[s.jsx(we,{size:24,style:{color:n.accentColor1}}),s.jsxs("div",{children:[s.jsx("h4",{style:{color:o},children:"Backend Detected!"}),s.jsxs("p",{style:{color:`${o}88`},children:["Framework: ",s.jsx("strong",{children:B.framework})," (",(100*B.confidence).toFixed(0),"% confidence)"]})]})]}),s.jsxs("div",{className:"detection-details",style:{background:De},children:[s.jsxs("div",{className:"detail-row",children:[s.jsx("span",{style:{color:`${o}99`},children:"Start Command:"}),s.jsx("code",{style:{color:n.accentColor1},children:B.suggested_start_command})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("span",{style:{color:`${o}99`},children:"Port:"}),s.jsx("span",{style:{color:o},children:B.port})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("span",{style:{color:`${o}99`},children:"APIs Found:"}),s.jsx("span",{style:{color:o},children:B.detected_apis?.length||0})]}),s.jsxs("div",{className:"detail-row",children:[s.jsx("span",{style:{color:`${o}99`},children:"Models Found:"}),s.jsx("span",{style:{color:o},children:B.detected_models?.length||0})]})]}),B.detected_apis&&B.detected_apis.length>0&&s.jsxs("div",{className:"apis-list",children:[s.jsx("h5",{style:{color:o},children:"Detected API Endpoints:"}),s.jsxs("div",{className:"api-items",children:[B.detected_apis.slice(0,5).map((e,t)=>s.jsxs("div",{className:"api-item",style:{background:De},children:[s.jsx("span",{className:"api-method",style:{color:n.accentColor1},children:e.method||"GET"}),s.jsx("span",{style:{color:o},children:e.path||e.name})]},t)),B.detected_apis.length>5&&s.jsxs("small",{style:{color:`${o}77`},children:["... and ",B.detected_apis.length-5," more"]})]})]})]}):s.jsxs("div",{className:"no-backend-message",children:[s.jsx(re,{size:48,style:{color:`${o}44`}}),s.jsx("p",{style:{color:`${o}88`},children:"No backend uploaded. You can deploy without a backend or go back to upload one."})]})]}),5===a&&s.jsxs("div",{className:"step-content",children:[s.jsx("h3",{style:{color:o},children:"Domain Configuration"}),s.jsx("p",{style:{color:`${o}99`},children:"nocode"===c?"Set up your domain (optional). You'll build your site in the Page Builder next.":"Configure your domain and SSL settings"}),"nocode"===c&&s.jsxs("div",{className:"info-banner",style:{background:`${n.accentColor1}15`,borderColor:n.accentColor1,marginBottom:"20px"},children:[s.jsx(d,{size:20,style:{color:n.accentColor1}}),s.jsxs("div",{children:[s.jsx("strong",{style:{color:o},children:"Next: Visual Page Builder"}),s.jsx("p",{style:{color:`${o}88`,margin:"4px 0 0 0",fontSize:"14px"},children:"After this step, you'll be taken to the drag-and-drop page builder where you can design your site visually, add components, and connect to your backend APIs."})]})]}),s.jsx("div",{className:"form-group",children:s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:$,onChange:e=>U(e.target.checked)}),s.jsx("span",{style:{color:o},children:"I have a domain to configure"})]})}),$&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{style:{color:o},children:["Domain Name ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",value:V,onChange:e=>q(e.target.value),placeholder:"example.com",style:{background:De,borderColor:`${o}33`,color:o}})]}),s.jsx("div",{className:"form-group",children:s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:K,onChange:e=>Y(e.target.checked)}),s.jsx(m,{size:16}),s.jsx("span",{style:{color:o},children:"Enable SSL (Let's Encrypt)"})]})}),V&&s.jsx("button",{className:"verify-dns-button",onClick:be,disabled:te,style:{background:n.accentColor1,opacity:te?.6:1},children:te?s.jsxs(s.Fragment,{children:[s.jsx(ke,{size:16,className:"spinning"}),"Verifying DNS..."]}):s.jsxs(s.Fragment,{children:[s.jsx(se,{size:16}),"Verify DNS Configuration"]})}),ne&&s.jsx("div",{className:"dns-result "+(X?"success":"warning"),style:{background:X?`${n.accentColor1}22`:"#f59e0b22",borderColor:X?n.accentColor1:"#f59e0b"},children:X?s.jsxs(s.Fragment,{children:[s.jsx(we,{size:20,style:{color:n.accentColor1}}),s.jsxs("div",{children:[s.jsx("strong",{style:{color:o},children:"DNS Verified!"}),s.jsx("p",{style:{color:`${o}88`},children:ne.message})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ee,{size:20,style:{color:"#f59e0b"}}),s.jsxs("div",{children:[s.jsx("strong",{style:{color:o},children:"DNS Not Verified"}),s.jsx("p",{style:{color:`${o}88`},children:ne.message}),s.jsx("small",{style:{color:`${o}77`},children:"You can continue deployment without DNS verification"})]})]})})]})]}),6===a&&s.jsxs("div",{className:"step-content",children:[s.jsx("h3",{style:{color:o},children:v?"Deployment Complete!":"deploying"===ge?"Deploying...":"Ready to Deploy"}),"deploying"===ge&&s.jsxs("div",{className:"deployment-progress",children:[s.jsx(ke,{size:48,className:"spinning",style:{color:n.accentColor1}}),s.jsx("p",{style:{color:`${o}88`},children:"Deploying your application... This may take a few minutes."})]}),v&&s.jsxs("div",{className:"deployment-success",children:[s.jsx(we,{size:64,style:{color:n.accentColor1}}),s.jsx("h4",{style:{color:o},children:"Successfully Deployed!"}),s.jsx("p",{style:{color:`${o}88`},children:"Your application is now live and accessible."}),$&&V&&s.jsxs("a",{href:`https://${V}`,target:"_blank",rel:"noopener noreferrer",className:"visit-site-button",style:{background:n.accentColor1},children:[s.jsx(se,{size:16}),"Visit ",V]})]}),fe.length>0&&s.jsxs("div",{className:"deployment-logs",children:[s.jsx("h5",{style:{color:o},children:"Deployment Logs"}),s.jsx("div",{className:"logs-container",style:{background:De,borderColor:`${o}22`},children:fe.map((e,t)=>s.jsx("div",{className:"log-entry "+(e.includes("[ERROR]")?"error":e.includes("[SUCCESS]")?"success":e.includes("[WARNING]")?"warning":""),style:{color:o},children:e},t))})]}),ge&&"pending"!==ge?null:s.jsxs("div",{className:"deployment-summary",style:{background:De},children:[s.jsx("h5",{style:{color:o},children:"Deployment Summary"}),s.jsxs("div",{className:"summary-items",children:[s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{style:{color:`${o}88`},children:"Project:"}),s.jsx("strong",{style:{color:o},children:b})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{style:{color:`${o}88`},children:"Build Type:"}),s.jsx("strong",{style:{color:o},children:"nocode"===c?"No-Code Builder":"Import Existing"})]}),O&&s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{style:{color:`${o}88`},children:"Backend:"}),s.jsx("strong",{style:{color:o},children:B?.framework||"Detected"})]}),$&&V&&s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{style:{color:`${o}88`},children:"Domain:"}),s.jsx("strong",{style:{color:o},children:V})]}),K&&s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{style:{color:`${o}88`},children:"SSL:"}),s.jsxs("strong",{style:{color:n.accentColor1},children:[s.jsx(m,{size:14})," Enabled"]})]})]})]})]}),p&&s.jsxs("div",{className:"error-message",style:{background:"#ef444422",borderColor:"#ef4444"},children:[s.jsx(Ee,{size:20,style:{color:"#ef4444"}}),s.jsx("span",{style:{color:o},children:p})]})]}),!v&&s.jsxs("div",{className:"deploy-wizard-footer",children:[a>1&&a<6&&s.jsx("button",{className:"wizard-button secondary",onClick:()=>{a>1&&(l(a-1),g(""))},disabled:u,style:{background:De,borderColor:`${o}33`,color:o},children:"Back"}),(4===a||5===a)&&s.jsx("button",{className:"wizard-button secondary",onClick:()=>{g(""),4===a?l(5):5===a&&(U(!1),l(6))},disabled:u,style:{background:De,borderColor:`${o}33`,color:o},children:"Skip"}),s.jsx("button",{className:"wizard-button primary",onClick:async()=>{if(g(""),1===a){if(!c)return void g("Please select a build type");l(2)}else if(2===a){if(!b.trim())return void g("Please enter a project name");if(!x.trim())return void g("Project slug is required");await ve()}else if(3===a){if("import"===c&&!j)return void g("Please upload frontend dist files (required)");if("nocode"===c&&!T)return void l(5);j||M||T?await _e():l(4)}else if(4===a)l(5);else if(5===a){if($&&V&&await be(),"nocode"===c)return e&&e(),void setTimeout(()=>{r(`/page-builder?project=${le}`)},200);l(6)}else 6===a&&await ye()},disabled:u||6===a&&"deploying"===ge,style:{background:n.accentColor1,opacity:u?.6:1},children:u?s.jsxs(s.Fragment,{children:[s.jsx(ke,{size:16,className:"spinning"}),"Processing..."]}):6===a?s.jsxs(s.Fragment,{children:[s.jsx(Se,{size:16}),"Deploy Now"]}):5===a&&"nocode"===c?s.jsxs(s.Fragment,{children:[s.jsx(d,{size:16}),"Open Page Builder"]}):s.jsxs(s.Fragment,{children:[1===a?"Continue":"Next",s.jsx(je,{size:16})]})})]})]})})},ra=i.createContext(null);function na(){const[e,t]=i.useState(!0),[r,n]=i.useState(null),[o,a]=i.useState(!1),[l,c]=i.useState(!1),[h,d]=i.useState(!1);_e();const{checkSession:u}=i.useContext(ve),f=lt(),[p,g]=i.useState({visible:!1,x:0,y:0,type:null,item:null});i.useEffect(()=>{fetch("/api/alterion/panel/initial-data/").then(e=>e.json()).then(e=>n(e)).catch(()=>n(null))},[]);const m=async e=>{const{type:t,item:i}=p;if("server"===t)switch(e){case"edit":break;case"delete":confirm(`Are you sure you want to delete server "${i.name}"?`)}else if("project"===t)switch(e){case"edit":break;case"delete":confirm(`Are you sure you want to delete project "${i.name}"?`)}g({visible:!1,x:0,y:0,type:null,item:null})};return i.useEffect(()=>{if(p.visible){const e=()=>{g({visible:!1,x:0,y:0,type:null,item:null})};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}},[p.visible]),s.jsx(ra.Provider,{value:r,children:s.jsx(He,{children:s.jsx($e,{handleServerContextMenu:(e,t)=>{e.preventDefault(),e.stopPropagation(),g({visible:!0,x:e.clientX,y:e.clientY,type:"server",item:t})},handleProjectContextMenu:(e,t)=>{e.preventDefault(),e.stopPropagation(),g({visible:!0,x:e.clientX,y:e.clientY,type:"project",item:t})},children:s.jsxs(Me,{children:[s.jsx(Ae,{path:"/",element:s.jsx(Te,{})}),s.jsx(Ae,{path:"/page-builder",element:s.jsx(ta,{children:s.jsx(xt,{})})}),s.jsx(Ae,{path:"*",element:s.jsxs(ta,{children:[s.jsx(ut,{onMetricsToggle:()=>t(e=>!e)}),s.jsxs("div",{id:"app-root",className:"app-root",children:[s.jsx("div",{className:"sidebar-fixed",children:s.jsx(St,{})}),s.jsx("main",{className:"main-content"+(e?" metrics-collapsed":""),children:s.jsxs(Me,{children:[s.jsx(Ae,{path:"/dashboard",element:s.jsx(We,{onAddNode:()=>c(!0),onDeploy:()=>d(!0)})}),s.jsx(Ae,{path:"/file-manager",element:s.jsx(Ue,{})}),s.jsx(Ae,{path:"/databases",element:s.jsx(Ve,{})}),s.jsx(Ae,{path:"/load-balancer",element:s.jsx(qe,{})}),s.jsx(Ae,{path:"/security",element:s.jsx(Ke,{})}),s.jsx(Ae,{path:"/secret-manager",element:s.jsx(pt,{})}),s.jsx(Ae,{path:"/backups",element:s.jsx(Ye,{})}),s.jsx(Ae,{path:"/domains",element:s.jsx(Ge,{})}),s.jsx(Ae,{path:"/terminal/:serverId",element:s.jsx(gt,{})}),s.jsx(Ae,{path:"/nocode-builder",element:s.jsx(ta,{children:s.jsx(xt,{})})}),s.jsx(Ae,{path:"/login",element:s.jsx(Te,{})}),s.jsx(Ae,{path:"*",element:s.jsx("div",{style:{textAlign:"center",marginTop:"5rem"},children:s.jsx("h1",{children:"404 Not Found"})})})]})}),s.jsx("div",{className:"metrics-fixed"+(e?" collapsed":""),children:s.jsx(Fo,{collapsed:e,setCollapsed:t})}),s.jsx("div",{className:`terminal-fixed${f.isOpen?"":" collapsed"}${o?" maximized":""}`,children:s.jsx(Zo,{serverId:f.serverId,nodeId:f.nodeId,name:f.name,isOpen:f.isOpen,onClose:f.closeTerminal,onToggle:f.toggleTerminal,onMaximizeChange:a})}),l&&s.jsx(ia,{onClose:()=>c(!1),onSuccess:()=>c(!1)}),h&&s.jsx(sa,{onClose:()=>d(!1),onSuccess:()=>d(!1)}),p.visible&&s.jsxs("div",{className:"context-menu",style:{position:"fixed",top:p.y,left:p.x,zIndex:1e4},children:["server"===p.type&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"context-menu-item",onClick:()=>m("edit"),children:[s.jsx("i",{className:"fas fa-edit"}),"Edit Server"]}),s.jsxs("div",{className:"context-menu-item danger",onClick:()=>m("delete"),children:[s.jsx("i",{className:"fas fa-trash"}),"Delete Server"]})]}),"project"===p.type&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"context-menu-item",onClick:()=>m("edit"),children:[s.jsx("i",{className:"fas fa-edit"}),"Edit Project"]}),s.jsxs("div",{className:"context-menu-item danger",onClick:()=>m("delete"),children:[s.jsx("i",{className:"fas fa-trash"}),"Delete Project"]})]})]})]})]})})]})})})})}function oa(){return s.jsx(Le,{children:s.jsx(De,{children:s.jsx(Fe,{children:s.jsx(ct,{children:s.jsx(na,{})})})})})}ot.createRoot(document.getElementById("root")).render(s.jsx(oa,{}));
