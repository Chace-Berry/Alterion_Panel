import{a as e,b as t,r as i,j as r,a6 as n,h as s,a7 as o,a8 as a,a9 as l,aa as c,ab as h,u as d,s as u,D as f,w as p,ac as g,Y as m,E as _,$ as v,J as b,d as y,R as x,W as S,ad as w,ae as C,af as k,v as E,ag as L,V as D,ah as M,ai as A,aj as R,p as T,Z as P,o as j,ak as O,G as B,S as I,l as N,al as F,A as z,am as H,an as W,ao as $,ap as U,aq as V,X as q,ar as K,a2 as G,a1 as Y,as as X,at as Q,au as J,C as Z,a0 as ee,av as te,aw as ie,ax as re,ay as ne,az as se,aA as oe}from"./index1-DU0OaFhi.js";import{g as ae,T as le,b as ce,c as he,d as de,a as ue,u as fe,e as pe,f as ge,C as me,D as _e}from"./index2-Bmvfhvwv.js";import{F as ve}from"./index3-C-zyD6UH.js";import{D as be}from"./index4-Rno0k7Cj.js";import{L as ye}from"./index5-DT4K0TtX.js";import{S as xe}from"./index6-br7sX2ac.js";import{B as Se}from"./index7-BrPJYfFT.js";import{D as we}from"./index8-DvLuqgJF.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ce,ke,Ee,Le,De={exports:{}},Me={},Ae={exports:{}},Re={};function Te(){return ke||(ke=1,Ae.exports=(Ce||(Ce=1,function(e){function t(e,t){var i=e.length;e.push(t);e:for(;0<i;){var r=i-1>>>1,s=e[r];if(!(0<n(s,t)))break e;e[r]=t,e[i]=s,i=r}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,h=e[c];if(0>n(l,i))c<s&&0>n(h,l)?(e[r]=h,e[c]=i,r=c):(e[r]=l,e[a]=i,r=a);else{if(!(c<s&&0>n(h,i)))break e;e[r]=h,e[c]=i,r=c}}}return t}function n(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,u=3,f=!1,p=!1,g=!1,m=!1,_="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var n=i(c);null!==n;){if(null===n.callback)r(c);else{if(!(n.startTime<=e))break;r(c),n.sortIndex=n.expirationTime,t(l,n)}n=i(c)}}function x(e){if(g=!1,y(e),!p)if(null!==i(l))p=!0,w||(w=!0,S());else{var t=i(c);null!==t&&R(x,t.startTime-e)}}var S,w=!1,C=-1,k=5,E=-1;function L(){return!(!m&&e.unstable_now()-E<k)}function D(){if(m=!1,w){var t=e.unstable_now();E=t;var n=!0;try{e:{p=!1,g&&(g=!1,v(C),C=-1),f=!0;var s=u;try{t:{for(y(t),d=i(l);null!==d&&!(d.expirationTime>t&&L());){var o=d.callback;if("function"==typeof o){d.callback=null,u=d.priorityLevel;var a=o(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof a){d.callback=a,y(t),n=!0;break t}d===i(l)&&r(l),y(t)}else r(l);d=i(l)}if(null!==d)n=!0;else{var h=i(c);null!==h&&R(x,h.startTime-t),n=!1}}break e}finally{d=null,u=s,f=!1}n=void 0}}finally{n?S():w=!1}}}if("function"==typeof b)S=function(){b(D)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,A=M.port2;M.port1.onmessage=D,S=function(){A.postMessage(null)}}else S=function(){_(D,0)};function R(t,i){C=_(function(){t(e.unstable_now())},i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var i=u;u=t;try{return e()}finally{u=i}},e.unstable_requestPaint=function(){m=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=u;u=e;try{return t()}finally{u=i}},e.unstable_scheduleCallback=function(r,n,s){var o=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:h++,callback:n,priorityLevel:r,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(r.sortIndex=s,t(c,r),null===i(l)&&r===i(c)&&(g?(v(C),C=-1):g=!0,R(x,s-o))):(r.sortIndex=a,t(l,r),p||f||(p=!0,w||(w=!0,S()))),r},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(e){var t=u;return function(){var i=u;u=t;try{return e.apply(this,arguments)}finally{u=i}}}}(Re)),Re)),Ae.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Pe(){if(Ee)return Me;Ee=1;var i=Te(),r=e(),n=t();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function a(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(a(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,u=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case _:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case w:return"SuspenseList";case E:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case y:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return R(e(t))}catch(i){}}return null}var T=Array.isArray,P=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},B=[],I=-1;function N(e){return{current:e}}function F(e){0>I||(e.current=B[I],B[I]=null,I--)}function z(e,t){I++,B[I]=e.current,e.current=t}var H=N(null),W=N(null),$=N(null),U=N(null);function V(e,t){switch(z($,t),z(W,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ad(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ld(t=ad(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(H),z(H,e)}function q(){F(H),F(W),F($)}function K(e){null!==e.memoizedState&&z(U,e);var t=H.current,i=ld(t,e.type);t!==i&&(z(W,e),z(H,i))}function G(e){W.current===e&&(F(H),F(W)),U.current===e&&(F(U),Qd._currentValue=O)}var Y=Object.prototype.hasOwnProperty,X=i.unstable_scheduleCallback,Q=i.unstable_cancelCallback,J=i.unstable_shouldYield,Z=i.unstable_requestPaint,ee=i.unstable_now,te=i.unstable_getCurrentPriorityLevel,ie=i.unstable_ImmediatePriority,re=i.unstable_UserBlockingPriority,ne=i.unstable_NormalPriority,se=i.unstable_LowPriority,oe=i.unstable_IdlePriority,ae=i.log,le=i.unstable_setDisableYieldValue,ce=null,he=null;function de(e){if("function"==typeof ae&&le(e),he&&"function"==typeof he.setStrictMode)try{he.setStrictMode(ce,e)}catch(t){}}var ue=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/pe|0)|0},fe=Math.log,pe=Math.LN2;var ge=256,me=4194304;function _e(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,i){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?n=_e(r):0!==(o&=a)?n=_e(o):i||0!==(i=a&~e)&&(n=_e(i)):0!==(a=r&~s)?n=_e(a):0!==o?n=_e(o):i||0!==(i=r&~e)&&(n=_e(i)),0===n?0:0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(i=t&-t)||32===s&&4194048&i)?t:n}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ye(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=ge;return!(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=me;return!(62914560&(me<<=1))&&(me=4194304),e}function we(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ue(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&i}function Le(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-ue(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Re(){var e=j.p;return 0!==e?e:void 0===(e=window.event)?32:uu(e.type)}var Pe=Math.random().toString(36).slice(2),je="__reactFiber$"+Pe,Oe="__reactProps$"+Pe,Be="__reactContainer$"+Pe,Ie="__reactEvents$"+Pe,Ne="__reactListeners$"+Pe,Fe="__reactHandles$"+Pe,ze="__reactResources$"+Pe,He="__reactMarker$"+Pe;function We(e){delete e[je],delete e[Oe],delete e[Ie],delete e[Ne],delete e[Fe]}function $e(e){var t=e[je];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Be]||i[je]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=Sd(e);null!==e;){if(i=e[je])return i;e=Sd(e)}return t}i=(e=i).parentNode}return null}function Ue(e){if(e=e[je]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ve(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function qe(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[He]=!0}var Ge=new Set,Ye={};function Xe(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ye[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Je,Ze,et=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},it={};function rt(e,t,i){if(n=t,Y.call(it,n)||!Y.call(tt,n)&&(et.test(n)?it[n]=!0:(tt[n]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var n}function nt(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function st(e,t,i,r){if(null===r)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+r)}}function ot(e){if(void 0===Je)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Ze=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Ze}var at=!1;function lt(e,t){if(!e||at)return"";at=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(n){var r=n}Reflect.construct(e,[],i)}else{try{i.call()}catch(s){r=s}e.call(i.prototype)}}else{try{throw Error()}catch(o){r=o}(i=e())&&"function"==typeof i.catch&&i.catch(function(){})}}catch(a){if(a&&r&&"string"==typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(n=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;if(r===l.length||n===c.length)for(r=l.length-1,n=c.length-1;1<=r&&0<=n&&l[r]!==c[n];)n--;for(;1<=r&&0<=n;r--,n--)if(l[r]!==c[n]){if(1!==r||1!==n)do{if(r--,0>--n||l[r]!==c[n]){var h="\n"+l[r].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}}while(1<=r&&0<=n);break}}}finally{at=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?ot(i):""}function ct(e){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return ot("Activity");default:return""}}function ht(e){try{var t="";do{t+=ct(e),e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var n=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==i&&(t.setValue(e),!0)}function gt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(go){return e.body}}var mt=/[\n"\\]/g;function _t(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,i,r,n,s,o,a){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,dt(t)):null!=i?yt(e,o,dt(i)):null!=r&&e.removeAttribute("value"),null==n&&null!=s&&(e.defaultChecked=!!s),null!=n&&(e.checked=n&&"function"!=typeof n&&"symbol"!=typeof n),null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.name=""+dt(a):e.removeAttribute("name")}function bt(e,t,i,r,n,s,o,a){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=i){if(("submit"===s||"reset"===s)&&null==t)return;i=null!=i?""+dt(i):"",t=null!=t?""+dt(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:n)&&"symbol"!=typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o)}function yt(e,t,i){"number"===t&&gt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function xt(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+dt(i),t=null,n=0;n<e.length;n++){if(e[n].value===i)return e[n].selected=!0,void(r&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function St(e,t,i){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+dt(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,i,r){if(null==t){if(null!=r){if(null!=i)throw Error(s(92));if(T(r)){if(1<r.length)throw Error(s(93));r=r[0]}i=r}null==i&&(i=""),t=i}i=dt(t),e.defaultValue=i,(r=e.textContent)===i&&""!==r&&null!==r&&(e.value=r)}function Ct(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,i){var r=0===t.indexOf("--");null==i||"boolean"==typeof i||""===i?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,i):"number"!=typeof i||0===i||kt.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Lt(e,t,i){if(null!=t&&"object"!=typeof t)throw Error(s(62));if(e=e.style,null!=i){for(var r in i)!i.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var n in t)r=t[n],t.hasOwnProperty(n)&&i[n]!==r&&Et(e,n,r)}else for(var o in t)t.hasOwnProperty(o)&&Et(e,o,t[o])}function Dt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,Ot=null;function Bt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var i=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+_t(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=r[Oe]||null;if(!n)throw Error(s(90));vt(r,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<i.length;t++)(r=i[t]).form===e.form&&pt(r)}break e;case"textarea":St(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&xt(e,!!i.multiple,t,!1)}}}var It=!1;function Nt(e,t,i){if(It)return e(t,i);It=!0;try{return e(t)}finally{if(It=!1,(null!==jt||null!==Ot)&&(Uc(),jt&&(t=jt,e=Ot,Ot=jt=null,Bt(t),e)))for(t=0;t<e.length;t++)Bt(e[t])}}function Ft(e,t){var i=e.stateNode;if(null===i)return null;var r=i[Oe]||null;if(null===r)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(i&&"function"!=typeof i)throw Error(s(231,t,typeof i));return i}var zt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ht=!1;if(zt)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(go){Ht=!1}var $t=null,Ut=null,Vt=null;function qt(){if(Vt)return Vt;var e,t,i=Ut,r=i.length,n="value"in $t?$t.value:$t.textContent,s=n.length;for(e=0;e<r&&i[e]===n[e];e++);var o=r-e;for(t=1;t<=o&&i[r-t]===n[s-t];t++);return Vt=n.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Yt(){return!1}function Xt(e){function t(t,i,r,n,s){for(var o in this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=n,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(n):n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Gt:Yt,this.isPropagationStopped=Yt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Qt,Jt,Zt,ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ti=Xt(ei),ii=d({},ei,{view:0,detail:0}),ri=Xt(ii),ni=d({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Qt=e.screenX-Zt.screenX,Jt=e.screenY-Zt.screenY):Jt=Qt=0,Zt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),si=Xt(ni),oi=Xt(d({},ni,{dataTransfer:0})),ai=Xt(d({},ii,{relatedTarget:0})),li=Xt(d({},ei,{animationName:0,elapsedTime:0,pseudoElement:0})),ci=Xt(d({},ei,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hi=Xt(d({},ei,{data:0})),di={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ui={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fi[e])&&!!t[e]}function gi(){return pi}var mi=Xt(d({},ii,{key:function(e){if(e.key){var t=di[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ui[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gi,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_i=Xt(d({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vi=Xt(d({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gi})),bi=Xt(d({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0})),yi=Xt(d({},ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xi=Xt(d({},ei,{newState:0,oldState:0})),Si=[9,13,27,32],wi=zt&&"CompositionEvent"in window,Ci=null;zt&&"documentMode"in document&&(Ci=document.documentMode);var ki=zt&&"TextEvent"in window&&!Ci,Ei=zt&&(!wi||Ci&&8<Ci&&11>=Ci),Li=String.fromCharCode(32),Di=!1;function Mi(e,t){switch(e){case"keyup":return-1!==Si.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ai(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ri=!1;var Ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ti[e.type]:"textarea"===t}function ji(e,t,i,r){jt?Ot?Ot.push(r):Ot=[r]:jt=r,0<(t=Kh(t,"onChange")).length&&(i=new ti("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var Oi=null,Bi=null;function Ii(e){Fh(e,0)}function Ni(e){if(pt(Ve(e)))return e}function Fi(e,t){if("change"===e)return t}var zi=!1;if(zt){var Hi;if(zt){var Wi="oninput"in document;if(!Wi){var $i=document.createElement("div");$i.setAttribute("oninput","return;"),Wi="function"==typeof $i.oninput}Hi=Wi}else Hi=!1;zi=Hi&&(!document.documentMode||9<document.documentMode)}function Ui(){Oi&&(Oi.detachEvent("onpropertychange",Vi),Bi=Oi=null)}function Vi(e){if("value"===e.propertyName&&Ni(Bi)){var t=[];ji(t,Bi,e,Pt(e)),Nt(Ii,t)}}function qi(e,t,i){"focusin"===e?(Ui(),Bi=i,(Oi=t).attachEvent("onpropertychange",Vi)):"focusout"===e&&Ui()}function Ki(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ni(Bi)}function Gi(e,t){if("click"===e)return Ni(t)}function Yi(e,t){if("input"===e||"change"===e)return Ni(t)}var Xi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Qi(e,t){if(Xi(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!Y.call(t,n)||!Xi(e[n],t[n]))return!1}return!0}function Ji(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zi(e,t){var i,r=Ji(e);for(e=0;r;){if(3===r.nodeType){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ji(r)}}function er(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?er(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tr(e){for(var t=gt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"==typeof t.contentWindow.location.href}catch(r){i=!1}if(!i)break;t=gt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rr=zt&&"documentMode"in document&&11>=document.documentMode,nr=null,sr=null,or=null,ar=!1;function lr(e,t,i){var r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;ar||null==nr||nr!==gt(r)||("selectionStart"in(r=nr)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Qi(or,r)||(or=r,0<(r=Kh(sr,"onSelect")).length&&(t=new ti("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=nr)))}function cr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var hr={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},dr={},ur={};function fr(e){if(dr[e])return dr[e];if(!hr[e])return e;var t,i=hr[e];for(t in i)if(i.hasOwnProperty(t)&&t in ur)return dr[e]=i[t];return e}zt&&(ur=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var pr=fr("animationend"),gr=fr("animationiteration"),mr=fr("animationstart"),_r=fr("transitionrun"),vr=fr("transitionstart"),br=fr("transitioncancel"),yr=fr("transitionend"),xr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){xr.set(e,t),Xe(t,[e])}Sr.push("scrollEnd");var Cr=new WeakMap;function kr(e,t){if("object"==typeof e&&null!==e){var i=Cr.get(e);return void 0!==i?i:(t={value:e,source:t,stack:ht(t)},Cr.set(e,t),t)}return{value:e,source:t,stack:ht(t)}}var Er=[],Lr=0,Dr=0;function Mr(){for(var e=Lr,t=Dr=Lr=0;t<e;){var i=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var n=Er[t];Er[t++]=null;var s=Er[t];if(Er[t++]=null,null!==r&&null!==n){var o=r.pending;null===o?n.next=n:(n.next=o.next,o.next=n),r.pending=n}0!==s&&Pr(i,n,s)}}function Ar(e,t,i,r){Er[Lr++]=e,Er[Lr++]=t,Er[Lr++]=i,Er[Lr++]=r,Dr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,i,r){return Ar(e,t,i,r),jr(e)}function Tr(e,t){return Ar(e,null,null,t),jr(e)}function Pr(e,t,i){e.lanes|=i;var r=e.alternate;null!==r&&(r.lanes|=i);for(var n=!1,s=e.return;null!==s;)s.childLanes|=i,null!==(r=s.alternate)&&(r.childLanes|=i),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(n=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,n&&null!==t&&(n=31-ue(i),null===(r=(e=s.hiddenUpdates)[n])?e[n]=[t]:r.push(t),t.lane=536870912|i),s):null}function jr(e){if(50<Oc)throw Oc=0,Bc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Br(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(e,t,i,r){return new Br(e,t,i,r)}function Nr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var i=e.alternate;return null===i?((i=Ir(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=65011712&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function zr(e,t){e.flags&=65011714;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,i,r,n,o){var a=0;if(r=e,"function"==typeof e)Nr(e)&&(a=1);else if("string"==typeof e)a=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,i,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Ir(31,i,t,n)).elementType=E,e.lanes=o,e;case g:return Wr(i.children,n,o,t);case m:a=8,n|=24;break;case _:return(e=Ir(12,i,t,2|n)).elementType=_,e.lanes=o,e;case S:return(e=Ir(13,i,t,n)).elementType=S,e.lanes=o,e;case w:return(e=Ir(19,i,t,n)).elementType=w,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case v:case y:a=10;break e;case b:a=9;break e;case x:a=11;break e;case C:a=14;break e;case k:a=16,r=null;break e}a=29,i=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Ir(a,i,t,n)).elementType=e,t.type=r,t.lanes=o,t}function Wr(e,t,i,r){return(e=Ir(7,e,r,t)).lanes=i,e}function $r(e,t,i){return(e=Ir(6,e,null,t)).lanes=i,e}function Ur(e,t,i){return(t=Ir(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],qr=0,Kr=null,Gr=0,Yr=[],Xr=0,Qr=null,Jr=1,Zr="";function en(e,t){Vr[qr++]=Gr,Vr[qr++]=Kr,Kr=e,Gr=t}function tn(e,t,i){Yr[Xr++]=Jr,Yr[Xr++]=Zr,Yr[Xr++]=Qr,Qr=e;var r=Jr;e=Zr;var n=32-ue(r)-1;r&=~(1<<n),i+=1;var s=32-ue(t)+n;if(30<s){var o=n-n%5;s=(r&(1<<o)-1).toString(32),r>>=o,n-=o,Jr=1<<32-ue(t)+n|i<<n|r,Zr=s+e}else Jr=1<<s|i<<n|r,Zr=e}function rn(e){null!==e.return&&(en(e,1),tn(e,1,0))}function nn(e){for(;e===Kr;)Kr=Vr[--qr],Vr[qr]=null,Gr=Vr[--qr],Vr[qr]=null;for(;e===Qr;)Qr=Yr[--Xr],Yr[Xr]=null,Zr=Yr[--Xr],Yr[Xr]=null,Jr=Yr[--Xr],Yr[Xr]=null}var sn=null,on=null,an=!1,ln=null,cn=!1,hn=Error(s(519));function dn(e){throw _n(kr(Error(s(418,"")),e)),hn}function un(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[je]=e,t[Oe]=r,i){case"dialog":zh("cancel",t),zh("close",t);break;case"iframe":case"object":case"embed":zh("load",t);break;case"video":case"audio":for(i=0;i<Ih.length;i++)zh(Ih[i],t);break;case"source":zh("error",t);break;case"img":case"image":case"link":zh("error",t),zh("load",t);break;case"details":zh("toggle",t);break;case"input":zh("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ft(t);break;case"select":zh("invalid",t);break;case"textarea":zh("invalid",t),wt(t,r.value,r.defaultValue,r.children),ft(t)}"string"!=typeof(i=r.children)&&"number"!=typeof i&&"bigint"!=typeof i||t.textContent===""+i||!0===r.suppressHydrationWarning||Zh(t.textContent,i)?(null!=r.popover&&(zh("beforetoggle",t),zh("toggle",t)),null!=r.onScroll&&zh("scroll",t),null!=r.onScrollEnd&&zh("scrollend",t),null!=r.onClick&&(t.onclick=ed),t=!0):t=!1,t||dn(e)}function fn(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 13:return void(cn=!1);case 27:case 3:return void(cn=!0);default:sn=sn.return}}function pn(e){if(e!==sn)return!1;if(!an)return fn(e),an=!0,!1;var t,i=e.tag;if((t=3!==i&&27!==i)&&((t=5===i)&&(t=!("form"!==(t=e.type)&&"button"!==t)||cd(e.type,e.memoizedProps)),t=!t),t&&on&&dn(e),fn(e),13===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,i=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===i){on=yd(e.nextSibling);break e}i--}else"$"!==t&&"$!"!==t&&"$?"!==t||i++;e=e.nextSibling}on=null}}else 27===i?(i=on,md(e.type)?(e=xd,xd=null,on=e):on=i):on=sn?yd(e.stateNode.nextSibling):null;return!0}function gn(){on=sn=null,an=!1}function mn(){var e=ln;return null!==e&&(null===Sc?Sc=e:Sc.push.apply(Sc,e),ln=null),e}function _n(e){null===ln?ln=[e]:ln.push(e)}var vn=N(null),bn=null,yn=null;function xn(e,t,i){z(vn,t._currentValue),t._currentValue=i}function Sn(e){e._currentValue=vn.current,F(vn)}function wn(e,t,i){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function Cn(e,t,i,r){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var o=n.dependencies;if(null!==o){var a=n.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=n;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=i,null!==(l=o.alternate)&&(l.lanes|=i),wn(o.return,i,e),r||(a=null);break e}o=l.next}}else if(18===n.tag){if(null===(a=n.return))throw Error(s(341));a.lanes|=i,null!==(o=a.alternate)&&(o.lanes|=i),wn(a,i,e),a=null}else a=n.child;if(null!==a)a.return=n;else for(a=n;null!==a;){if(a===e){a=null;break}if(null!==(n=a.sibling)){n.return=a.return,a=n;break}a=a.return}n=a}}function kn(e,t,i,r){e=null;for(var n=t,o=!1;null!==n;){if(!o)if(524288&n.flags)o=!0;else if(262144&n.flags)break;if(10===n.tag){var a=n.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=n.type;Xi(n.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(n===U.current){if(null===(a=n.alternate))throw Error(s(387));a.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(Qd):e=[Qd])}n=n.return}null!==e&&Cn(t,e,i,r),t.flags|=262144}function En(e){for(e=e.firstContext;null!==e;){if(!Xi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ln(e){bn=e,yn=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Dn(e){return An(bn,e)}function Mn(e,t){return null===bn&&Ln(e),An(e,t)}function An(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===yn){if(null===e)throw Error(s(308));yn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yn=yn.next=t;return i}var Rn="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Tn=i.unstable_scheduleCallback,Pn=i.unstable_NormalPriority,jn={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function On(){return{controller:new Rn,data:new Map,refCount:0}}function Bn(e){e.refCount--,0===e.refCount&&Tn(Pn,function(){e.controller.abort()})}var In=null,Nn=0,Fn=0,zn=null;function Hn(){if(0===--Nn&&null!==In){null!==zn&&(zn.status="fulfilled");var e=In;In=null,Fn=0,zn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Wn=P.S;P.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===In){var i=In=[];Nn=0,Fn=Th(),zn={status:"pending",value:void 0,then:function(e){i.push(e)}}}Nn++,t.then(Hn,Hn)}(0,t),null!==Wn&&Wn(e,t)};var $n=N(null);function Un(){var e=$n.current;return null!==e?e:oc.pooledCache}function Vn(e,t){z($n,null===t?$n.current:t.pool)}function qn(){var e=Un();return null===e?null:{parent:jn._currentValue,pool:e}}var Kn=Error(s(460)),Gn=Error(s(474)),Yn=Error(s(542)),Xn={then:function(){}};function Qn(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Jn(){}function Zn(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(Jn,Jn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e;default:if("string"==typeof t.status)t.then(Jn,Jn);else{if(null!==(e=oc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}},function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e}throw es=t,Kn}}var es=null;function ts(){if(null===es)throw Error(s(459));var e=es;return es=null,e}function is(e){if(e===Kn||e===Yn)throw Error(s(483))}var rs=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ss(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function os(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function as(e,t,i){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&sc){var n=r.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),r.pending=t,t=jr(e),Pr(e,null,i),t}return Ar(e,r,t,i),jr(e)}function ls(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&i)){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,Le(e,i)}}function cs(e,t){var i=e.updateQueue,r=e.alternate;if(null!==r&&i===(r=r.updateQueue)){var n=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var o={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===s?n=s=o:s=s.next=o,i=i.next}while(null!==i);null===s?n=s=t:s=s.next=t}else n=s=t;return i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var hs=!1;function ds(){if(hs){if(null!==zn)throw zn}}function us(e,t,i,r){hs=!1;var n=e.updateQueue;rs=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(null!==a){n.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var h=e.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(null!==s){var u=n.baseState;for(o=0,h=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(lc&f)===f:(r&f)===f){0!==f&&f===Fn&&(hs=!0),null!==h&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var _=i;switch(m.tag){case 1:if("function"==typeof(g=m.payload)){u=g.call(_,u,f);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(_,u,f):g))break e;u=d({},u,f);break e;case 2:rs=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=n.callbacks)?n.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,l=u):h=h.next=p,o|=f;if(null===(a=a.next)){if(null===(a=n.shared.pending))break;a=(p=a).next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}null===h&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,null===s&&(n.shared.lanes=0),mc|=o,e.lanes=o,e.memoizedState=u}}function fs(e,t){if("function"!=typeof e)throw Error(s(191,e));e.call(t)}function ps(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)fs(i[e],t)}var gs=N(null),ms=N(0);function _s(e,t){z(ms,e=pc),z(gs,t),pc=e|t.baseLanes}function vs(){z(ms,pc),z(gs,gs.current)}function bs(){pc=ms.current,F(gs),F(ms)}var ys=0,xs=null,Ss=null,ws=null,Cs=!1,ks=!1,Es=!1,Ls=0,Ds=0,Ms=null,As=0;function Rs(){throw Error(s(321))}function Ts(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Xi(e[i],t[i]))return!1;return!0}function Ps(e,t,i,r,n,s){return ys=s,xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?Yo:Xo,Es=!1,s=i(r,n),Es=!1,ks&&(s=Os(t,i,r,n)),js(e),s}function js(e){P.H=Go;var t=null!==Ss&&null!==Ss.next;if(ys=0,ws=Ss=xs=null,Cs=!1,Ds=0,Ms=null,t)throw Error(s(300));null===e||Aa||null!==(e=e.dependencies)&&En(e)&&(Aa=!0)}function Os(e,t,i,r){xs=e;var n=0;do{if(ks&&(Ms=null),Ds=0,ks=!1,25<=n)throw Error(s(301));if(n+=1,ws=Ss=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}P.H=Qo,o=t(i,r)}while(ks);return o}function Bs(){var e=P.H,t=e.useState()[0];return t="function"==typeof t.then?Ws(t):t,e=e.useState()[0],(null!==Ss?Ss.memoizedState:null)!==e&&(xs.flags|=1024),t}function Is(){var e=0!==Ls;return Ls=0,e}function Ns(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Fs(e){if(Cs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Cs=!1}ys=0,ws=Ss=xs=null,ks=!1,Ds=Ls=0,Ms=null}function zs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ws?xs.memoizedState=ws=e:ws=ws.next=e,ws}function Hs(){if(null===Ss){var e=xs.alternate;e=null!==e?e.memoizedState:null}else e=Ss.next;var t=null===ws?xs.memoizedState:ws.next;if(null!==t)ws=t,Ss=e;else{if(null===e){if(null===xs.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Ss=e).memoizedState,baseState:Ss.baseState,baseQueue:Ss.baseQueue,queue:Ss.queue,next:null},null===ws?xs.memoizedState=ws=e:ws=ws.next=e}return ws}function Ws(e){var t=Ds;return Ds+=1,null===Ms&&(Ms=[]),e=Zn(Ms,e,t),t=xs,null===(null===ws?t.memoizedState:ws.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?Yo:Xo),e}function $s(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ws(e);if(e.$$typeof===y)return Dn(e)}throw Error(s(438,String(e)))}function Us(e){var t=null,i=xs.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var r=xs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=L;return t.index++,i}function Vs(e,t){return"function"==typeof t?t(e):t}function qs(e){return Ks(Hs(),Ss,e)}function Ks(e,t,i){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=i;var n=e.baseQueue,o=r.pending;if(null!==o){if(null!==n){var a=n.next;n.next=o.next,o.next=a}t.baseQueue=n=o,r.pending=null}if(o=e.baseState,null===n)e.memoizedState=o;else{var l=a=null,c=null,h=t=n.next,d=!1;do{var u=-536870913&h.lane;if(u!==h.lane?(lc&u)===u:(ys&u)===u){var f=h.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),u===Fn&&(d=!0);else{if((ys&f)===f){h=h.next,f===Fn&&(d=!0);continue}u={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=u,a=o):c=c.next=u,xs.lanes|=f,mc|=f}u=h.action,Es&&i(o,u),o=h.hasEagerState?h.eagerState:i(o,u)}else f={lane:u,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=f,a=o):c=c.next=f,xs.lanes|=u,mc|=u;h=h.next}while(null!==h&&h!==t);if(null===c?a=o:c.next=l,!Xi(o,e.memoizedState)&&(Aa=!0,d&&null!==(i=zn)))throw i;e.memoizedState=o,e.baseState=a,e.baseQueue=c,r.lastRenderedState=o}return null===n&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Gs(e){var t=Hs(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,o=t.memoizedState;if(null!==n){i.pending=null;var a=n=n.next;do{o=e(o,a.action),a=a.next}while(a!==n);Xi(o,t.memoizedState)||(Aa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,r]}function Ys(e,t,i){var r=xs,n=Hs(),o=an;if(o){if(void 0===i)throw Error(s(407));i=i()}else i=t();var a=!Xi((Ss||n).memoizedState,i);if(a&&(n.memoizedState=i,Aa=!0),n=n.queue,yo(2048,8,Js.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==ws&&1&ws.memoizedState.tag){if(r.flags|=2048,_o(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,n,i,t),null),null===oc)throw Error(s(349));o||124&ys||Xs(r,t,i)}return i}function Xs(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=xs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Qs(e,t,i,r){t.value=i,t.getSnapshot=r,Zs(t)&&eo(e)}function Js(e,t,i){return i(function(){Zs(t)&&eo(e)})}function Zs(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Xi(e,i)}catch(r){return!0}}function eo(e){var t=Tr(e,2);null!==t&&Fc(t,e,2)}function to(e){var t=zs();if("function"==typeof e){var i=e;if(e=i(),Es){de(!0);try{i()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},t}function io(e,t,i,r){return e.baseState=i,Ks(e,Ss,"function"==typeof r?r:Vs)}function ro(e,t,i,r,n){if(Vo(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==P.T?i(!0):o.isTransition=!1,r(o),null===(i=t.pending)?(o.next=t.pending=o,no(t,o)):(o.next=i.next,t.pending=i.next=o)}}function no(e,t){var i=t.action,r=t.payload,n=e.state;if(t.isTransition){var s=P.T,o={};P.T=o;try{var a=i(n,r),l=P.S;null!==l&&l(o,a),so(e,t,a)}catch(c){ao(e,t,c)}finally{P.T=s}}else try{so(e,t,s=i(n,r))}catch(h){ao(e,t,h)}}function so(e,t,i){null!==i&&"object"==typeof i&&"function"==typeof i.then?i.then(function(i){oo(e,t,i)},function(i){return ao(e,t,i)}):oo(e,t,i)}function oo(e,t,i){t.status="fulfilled",t.value=i,lo(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,no(e,i)))}function ao(e,t,i){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=i,lo(t),t=t.next}while(t!==r)}e.action=null}function lo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function co(e,t){return t}function ho(e,t){if(an){var i=oc.formState;if(null!==i){e:{var r=xs;if(an){if(on){t:{for(var n=on,s=cn;8!==n.nodeType;){if(!s){n=null;break t}if(null===(n=yd(n.nextSibling))){n=null;break t}}n="F!"===(s=n.data)||"F"===s?n:null}if(n){on=yd(n.nextSibling),r="F!"===n.data;break e}}dn(r)}r=!1}r&&(t=i[0])}}return(i=zs()).memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:t},i.queue=r,i=Wo.bind(null,xs,r),r.dispatch=i,r=to(!1),s=Uo.bind(null,xs,!1,r.queue),n={state:t,dispatch:null,action:e,pending:null},(r=zs()).queue=n,i=ro.bind(null,xs,n,s,i),n.dispatch=i,r.memoizedState=e,[t,i,!1]}function uo(e){return fo(Hs(),Ss,e)}function fo(e,t,i){if(t=Ks(e,t,co)[0],e=qs(Vs)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Ws(t)}catch(o){if(o===Kn)throw Yn;throw o}else r=t;var n=(t=Hs()).queue,s=n.dispatch;return i!==t.memoizedState&&(xs.flags|=2048,_o(9,{destroy:void 0,resource:void 0},po.bind(null,n,i),null)),[r,s,e]}function po(e,t){e.action=t}function mo(e){var t=Hs(),i=Ss;if(null!==i)return fo(t,i,e);Hs(),t=t.memoizedState;var r=(i=Hs()).queue.dispatch;return i.memoizedState=e,[t,r,!1]}function _o(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},null===(t=xs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function vo(){return Hs().memoizedState}function bo(e,t,i,r){var n=zs();r=void 0===r?null:r,xs.flags|=e,n.memoizedState=_o(1|t,{destroy:void 0,resource:void 0},i,r)}function yo(e,t,i,r){var n=Hs();r=void 0===r?null:r;var s=n.memoizedState.inst;null!==Ss&&null!==r&&Ts(r,Ss.memoizedState.deps)?n.memoizedState=_o(t,s,i,r):(xs.flags|=e,n.memoizedState=_o(1|t,s,i,r))}function xo(e,t){bo(8390656,8,e,t)}function So(e,t){yo(2048,8,e,t)}function wo(e,t){return yo(4,2,e,t)}function Co(e,t){return yo(4,4,e,t)}function ko(e,t){if("function"==typeof t){e=e();var i=t(e);return function(){"function"==typeof i?i():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Eo(e,t,i){i=null!=i?i.concat([e]):null,yo(4,4,ko.bind(null,t,e),i)}function Lo(){}function Do(e,t){var i=Hs();t=void 0===t?null:t;var r=i.memoizedState;return null!==t&&Ts(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function Mo(e,t){var i=Hs();t=void 0===t?null:t;var r=i.memoizedState;if(null!==t&&Ts(t,r[1]))return r[0];if(r=e(),Es){de(!0);try{e()}finally{de(!1)}}return i.memoizedState=[r,t],r}function Ao(e,t,i){return void 0===i||1073741824&ys?e.memoizedState=t:(e.memoizedState=i,e=Nc(),xs.lanes|=e,mc|=e,i)}function Ro(e,t,i,r){return Xi(i,t)?i:null!==gs.current?(e=Ao(e,i,r),Xi(e,t)||(Aa=!0),e):42&ys?(e=Nc(),xs.lanes|=e,mc|=e,t):(Aa=!0,e.memoizedState=i)}function To(e,t,i,r,n){var s=j.p;j.p=0!==s&&8>s?s:8;var o,a,l,c=P.T,h={};P.T=h,Uo(e,!1,t,i);try{var d=n(),u=P.S;if(null!==u&&u(h,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)$o(e,t,(o=r,a=[],l={status:"pending",value:null,reason:null,then:function(e){a.push(e)}},d.then(function(){l.status="fulfilled",l.value=o;for(var e=0;e<a.length;e++)(0,a[e])(o)},function(e){for(l.status="rejected",l.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),l),Ic());else $o(e,t,r,Ic())}catch(f){$o(e,t,{then:function(){},status:"rejected",reason:f},Ic())}finally{j.p=s,P.T=c}}function Po(){}function jo(e,t,i,r){if(5!==e.tag)throw Error(s(476));var n=Oo(e).queue;To(e,n,t,O,null===i?Po:function(){return Bo(e),i(r)})}function Oo(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:O},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Bo(e){$o(e,Oo(e).next.queue,{},Ic())}function Io(){return Dn(Qd)}function No(){return Hs().memoizedState}function Fo(){return Hs().memoizedState}function zo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Ic(),r=as(t,e=os(i),i);return null!==r&&(Fc(r,t,i),ls(r,t,i)),t={cache:On()},void(e.payload=t)}t=t.return}}function Ho(e,t,i){var r=Ic();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Vo(e)?qo(t,i):null!==(i=Rr(e,t,i,r))&&(Fc(i,e,r),Ko(i,t,r))}function Wo(e,t,i){$o(e,t,i,Ic())}function $o(e,t,i,r){var n={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Vo(e))qo(t,n);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,i);if(n.hasEagerState=!0,n.eagerState=a,Xi(a,o))return Ar(e,t,n,0),null===oc&&Mr(),!1}catch(l){}if(null!==(i=Rr(e,t,n,r)))return Fc(i,e,r),Ko(i,t,r),!0}return!1}function Uo(e,t,i,r){if(r={lane:2,revertLane:Th(),action:r,hasEagerState:!1,eagerState:null,next:null},Vo(e)){if(t)throw Error(s(479))}else null!==(t=Rr(e,i,r,2))&&Fc(t,e,2)}function Vo(e){var t=e.alternate;return e===xs||null!==t&&t===xs}function qo(e,t){ks=Cs=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Ko(e,t,i){if(4194048&i){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,Le(e,i)}}var Go={readContext:Dn,use:$s,useCallback:Rs,useContext:Rs,useEffect:Rs,useImperativeHandle:Rs,useLayoutEffect:Rs,useInsertionEffect:Rs,useMemo:Rs,useReducer:Rs,useRef:Rs,useState:Rs,useDebugValue:Rs,useDeferredValue:Rs,useTransition:Rs,useSyncExternalStore:Rs,useId:Rs,useHostTransitionStatus:Rs,useFormState:Rs,useActionState:Rs,useOptimistic:Rs,useMemoCache:Rs,useCacheRefresh:Rs},Yo={readContext:Dn,use:$s,useCallback:function(e,t){return zs().memoizedState=[e,void 0===t?null:t],e},useContext:Dn,useEffect:xo,useImperativeHandle:function(e,t,i){i=null!=i?i.concat([e]):null,bo(4194308,4,ko.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bo(4194308,4,e,t)},useInsertionEffect:function(e,t){bo(4,2,e,t)},useMemo:function(e,t){var i=zs();t=void 0===t?null:t;var r=e();if(Es){de(!0);try{e()}finally{de(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=zs();if(void 0!==i){var n=i(t);if(Es){de(!0);try{i(t)}finally{de(!1)}}}else n=t;return r.memoizedState=r.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=Ho.bind(null,xs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zs().memoizedState=e},useState:function(e){var t=(e=to(e)).queue,i=Wo.bind(null,xs,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Lo,useDeferredValue:function(e,t){return Ao(zs(),e,t)},useTransition:function(){var e=to(!1);return e=To.bind(null,xs,e.queue,!0,!1),zs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=xs,n=zs();if(an){if(void 0===i)throw Error(s(407));i=i()}else{if(i=t(),null===oc)throw Error(s(349));124&lc||Xs(r,t,i)}n.memoizedState=i;var o={value:i,getSnapshot:t};return n.queue=o,xo(Js.bind(null,r,o,e),[e]),r.flags|=2048,_o(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,o,i,t),null),i},useId:function(){var e=zs(),t=oc.identifierPrefix;if(an){var i=Zr;t=""+t+"R"+(i=(Jr&~(1<<32-ue(Jr)-1)).toString(32)+i),0<(i=Ls++)&&(t+="H"+i.toString(32)),t+=""}else t=""+t+"r"+(i=As++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Io,useFormState:ho,useActionState:ho,useOptimistic:function(e){var t=zs();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Uo.bind(null,xs,!0,i),i.dispatch=t,[e,t]},useMemoCache:Us,useCacheRefresh:function(){return zs().memoizedState=zo.bind(null,xs)}},Xo={readContext:Dn,use:$s,useCallback:Do,useContext:Dn,useEffect:So,useImperativeHandle:Eo,useInsertionEffect:wo,useLayoutEffect:Co,useMemo:Mo,useReducer:qs,useRef:vo,useState:function(){return qs(Vs)},useDebugValue:Lo,useDeferredValue:function(e,t){return Ro(Hs(),Ss.memoizedState,e,t)},useTransition:function(){var e=qs(Vs)[0],t=Hs().memoizedState;return["boolean"==typeof e?e:Ws(e),t]},useSyncExternalStore:Ys,useId:No,useHostTransitionStatus:Io,useFormState:uo,useActionState:uo,useOptimistic:function(e,t){return io(Hs(),0,e,t)},useMemoCache:Us,useCacheRefresh:Fo},Qo={readContext:Dn,use:$s,useCallback:Do,useContext:Dn,useEffect:So,useImperativeHandle:Eo,useInsertionEffect:wo,useLayoutEffect:Co,useMemo:Mo,useReducer:Gs,useRef:vo,useState:function(){return Gs(Vs)},useDebugValue:Lo,useDeferredValue:function(e,t){var i=Hs();return null===Ss?Ao(i,e,t):Ro(i,Ss.memoizedState,e,t)},useTransition:function(){var e=Gs(Vs)[0],t=Hs().memoizedState;return["boolean"==typeof e?e:Ws(e),t]},useSyncExternalStore:Ys,useId:No,useHostTransitionStatus:Io,useFormState:mo,useActionState:mo,useOptimistic:function(e,t){var i=Hs();return null!==Ss?io(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Us,useCacheRefresh:Fo},Jo=null,Zo=0;function ea(e){var t=Zo;return Zo+=1,null===Jo&&(Jo=[]),Zn(Jo,e,t)}function ta(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ia(e,t){if(t.$$typeof===u)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ra(e){return(0,e._init)(e._payload)}function na(e){function t(t,i){if(e){var r=t.deletions;null===r?(t.deletions=[i],t.flags|=16):r.push(i)}}function i(i,r){if(!e)return null;for(;null!==r;)t(i,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function o(t,i,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<i?(t.flags|=67108866,i):r:(t.flags|=67108866,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,i,r){return null===t||6!==t.tag?((t=$r(i,e.mode,r)).return=e,t):((t=n(t,i)).return=e,t)}function c(e,t,i,r){var s=i.type;return s===g?d(e,t,i.props.children,r,i.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===k&&ra(s)===t.type)?(ta(t=n(t,i.props),i),t.return=e,t):(ta(t=Hr(i.type,i.key,i.props,null,e.mode,r),i),t.return=e,t)}function h(e,t,i,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Ur(i,e.mode,r)).return=e,t):((t=n(t,i.children||[])).return=e,t)}function d(e,t,i,r,s){return null===t||7!==t.tag?((t=Wr(i,e.mode,r,s)).return=e,t):((t=n(t,i)).return=e,t)}function u(e,t,i){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=$r(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case f:return ta(i=Hr(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case p:return(t=Ur(t,e.mode,i)).return=e,t;case k:return u(e,t=(0,t._init)(t._payload),i)}if(T(t)||M(t))return(t=Wr(t,e.mode,i,null)).return=e,t;if("function"==typeof t.then)return u(e,ea(t),i);if(t.$$typeof===y)return u(e,Mn(e,t),i);ia(e,t)}return null}function m(e,t,i,r){var n=null!==t?t.key:null;if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return null!==n?null:l(e,t,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case f:return i.key===n?c(e,t,i,r):null;case p:return i.key===n?h(e,t,i,r):null;case k:return m(e,t,i=(n=i._init)(i._payload),r)}if(T(i)||M(i))return null!==n?null:d(e,t,i,r,null);if("function"==typeof i.then)return m(e,t,ea(i),r);if(i.$$typeof===y)return m(e,t,Mn(e,i),r);ia(e,i)}return null}function _(e,t,i,r,n){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(i)||null,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?i:r.key)||null,r,n);case p:return h(t,e=e.get(null===r.key?i:r.key)||null,r,n);case k:return _(e,t,i,r=(0,r._init)(r._payload),n)}if(T(r)||M(r))return d(t,e=e.get(i)||null,r,n,null);if("function"==typeof r.then)return _(e,t,i,ea(r),n);if(r.$$typeof===y)return _(e,t,i,Mn(t,r),n);ia(t,r)}return null}function v(l,c,h,d){if("object"==typeof h&&null!==h&&h.type===g&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case f:e:{for(var b=h.key;null!==c;){if(c.key===b){if((b=h.type)===g){if(7===c.tag){i(l,c.sibling),(d=n(c,h.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===k&&ra(b)===c.type){i(l,c.sibling),ta(d=n(c,h.props),h),d.return=l,l=d;break e}i(l,c);break}t(l,c),c=c.sibling}h.type===g?((d=Wr(h.props.children,l.mode,d,h.key)).return=l,l=d):(ta(d=Hr(h.type,h.key,h.props,null,l.mode,d),h),d.return=l,l=d)}return a(l);case p:e:{for(b=h.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){i(l,c.sibling),(d=n(c,h.children||[])).return=l,l=d;break e}i(l,c);break}t(l,c),c=c.sibling}(d=Ur(h,l.mode,d)).return=l,l=d}return a(l);case k:return v(l,c,h=(b=h._init)(h._payload),d)}if(T(h))return function(n,s,a,l){for(var c=null,h=null,d=s,f=s=0,p=null;null!==d&&f<a.length;f++){d.index>f?(p=d,d=null):p=d.sibling;var g=m(n,d,a[f],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(n,d),s=o(g,s,f),null===h?c=g:h.sibling=g,h=g,d=p}if(f===a.length)return i(n,d),an&&en(n,f),c;if(null===d){for(;f<a.length;f++)null!==(d=u(n,a[f],l))&&(s=o(d,s,f),null===h?c=d:h.sibling=d,h=d);return an&&en(n,f),c}for(d=r(d);f<a.length;f++)null!==(p=_(d,n,f,a[f],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?f:p.key),s=o(p,s,f),null===h?c=p:h.sibling=p,h=p);return e&&d.forEach(function(e){return t(n,e)}),an&&en(n,f),c}(l,c,h,d);if(M(h)){if("function"!=typeof(b=M(h)))throw Error(s(150));return function(n,a,l,c){if(null==l)throw Error(s(151));for(var h=null,d=null,f=a,p=a=0,g=null,v=l.next();null!==f&&!v.done;p++,v=l.next()){f.index>p?(g=f,f=null):g=f.sibling;var b=m(n,f,v.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(n,f),a=o(b,a,p),null===d?h=b:d.sibling=b,d=b,f=g}if(v.done)return i(n,f),an&&en(n,p),h;if(null===f){for(;!v.done;p++,v=l.next())null!==(v=u(n,v.value,c))&&(a=o(v,a,p),null===d?h=v:d.sibling=v,d=v);return an&&en(n,p),h}for(f=r(f);!v.done;p++,v=l.next())null!==(v=_(f,n,p,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?p:v.key),a=o(v,a,p),null===d?h=v:d.sibling=v,d=v);return e&&f.forEach(function(e){return t(n,e)}),an&&en(n,p),h}(l,c,h=b.call(h),d)}if("function"==typeof h.then)return v(l,c,ea(h),d);if(h.$$typeof===y)return v(l,c,Mn(l,h),d);ia(l,h)}return"string"==typeof h&&""!==h||"number"==typeof h||"bigint"==typeof h?(h=""+h,null!==c&&6===c.tag?(i(l,c.sibling),(d=n(c,h)).return=l,l=d):(i(l,c),(d=$r(h,l.mode,d)).return=l,l=d),a(l)):i(l,c)}return function(e,t,i,r){try{Zo=0;var n=v(e,t,i,r);return Jo=null,n}catch(o){if(o===Kn||o===Yn)throw o;var s=Ir(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var sa=na(!0),oa=na(!1),aa=N(null),la=null;function ca(e){var t=e.alternate;z(fa,1&fa.current),z(aa,e),null===la&&(null===t||null!==gs.current||null!==t.memoizedState)&&(la=e)}function ha(e){if(22===e.tag){if(z(fa,fa.current),z(aa,e),null===la){var t=e.alternate;null!==t&&null!==t.memoizedState&&(la=e)}}else da()}function da(){z(fa,fa.current),z(aa,aa.current)}function ua(e){F(aa),la===e&&(la=null),F(fa)}var fa=N(0);function pa(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||bd(i)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ga(e,t,i,r){i=null==(i=i(r,t=e.memoizedState))?t:d({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var ma={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=Ic(),n=os(r);n.payload=t,null!=i&&(n.callback=i),null!==(t=as(e,n,r))&&(Fc(t,e,r),ls(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=Ic(),n=os(r);n.tag=1,n.payload=t,null!=i&&(n.callback=i),null!==(t=as(e,n,r))&&(Fc(t,e,r),ls(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ic(),r=os(i);r.tag=2,null!=t&&(r.callback=t),null!==(t=as(e,r,i))&&(Fc(t,e,i),ls(t,e,i))}};function _a(e,t,i,r,n,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Qi(i,r)||!Qi(n,s))}function va(e,t,i,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t){var i=t;if("ref"in t)for(var r in i={},t)"ref"!==r&&(i[r]=t[r]);if(e=e.defaultProps)for(var n in i===t&&(i=d({},i)),e)void 0===i[n]&&(i[n]=e[n]);return i}var ya="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function xa(e){ya(e)}function Sa(e){}function wa(e){ya(e)}function Ca(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function ka(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ea(e,t,i){return(i=os(i)).tag=3,i.payload={element:null},i.callback=function(){Ca(e,t)},i}function La(e){return(e=os(e)).tag=3,e}function Da(e,t,i,r){var n=i.type.getDerivedStateFromError;if("function"==typeof n){var s=r.value;e.payload=function(){return n(s)},e.callback=function(){ka(t,i,r)}}var o=i.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){ka(t,i,r),"function"!=typeof n&&(null===Lc?Lc=new Set([this]):Lc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ma=Error(s(461)),Aa=!1;function Ra(e,t,i,r){t.child=null===e?oa(t,null,i,r):sa(t,e.child,i,r)}function Ta(e,t,i,r,n){i=i.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ln(t),r=Ps(e,t,i,o,s,n),a=Is(),null===e||Aa?(an&&a&&rn(t),t.flags|=1,Ra(e,t,r,n),t.child):(Ns(e,t,n),Ja(e,t,n))}function Pa(e,t,i,r,n){if(null===e){var s=i.type;return"function"!=typeof s||Nr(s)||void 0!==s.defaultProps||null!==i.compare?((e=Hr(i.type,null,r,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ja(e,t,s,r,n))}if(s=e.child,!Za(e,n)){var o=s.memoizedProps;if((i=null!==(i=i.compare)?i:Qi)(o,r)&&e.ref===t.ref)return Ja(e,t,n)}return t.flags|=1,(e=Fr(s,r)).ref=t.ref,e.return=t,t.child=e}function ja(e,t,i,r,n){if(null!==e){var s=e.memoizedProps;if(Qi(s,r)&&e.ref===t.ref){if(Aa=!1,t.pendingProps=r=s,!Za(e,n))return t.lanes=e.lanes,Ja(e,t,n);131072&e.flags&&(Aa=!0)}}return Na(e,t,i,r,n)}function Oa(e,t,i){var r=t.pendingProps,n=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==s?s.baseLanes|i:i,null!==e){for(n=t.child=e.child,s=0;null!==n;)s=s|n.lanes|n.childLanes,n=n.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Ba(e,t,r,i)}if(!(536870912&i))return t.lanes=t.childLanes=536870912,Ba(e,t,null!==s?s.baseLanes|i:i,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Vn(0,null!==s?s.cachePool:null),null!==s?_s(t,s):vs(),ha(t)}else null!==s?(Vn(0,s.cachePool),_s(t,s),da(),t.memoizedState=null):(null!==e&&Vn(0,null),vs(),da());return Ra(e,t,n,i),t.child}function Ba(e,t,i,r){var n=Un();return n=null===n?null:{parent:jn._currentValue,pool:n},t.memoizedState={baseLanes:i,cachePool:n},null!==e&&Vn(0,null),vs(),ha(t),null!==e&&kn(e,t,r,!0),null}function Ia(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof i&&"object"!=typeof i)throw Error(s(284));null!==e&&e.ref===i||(t.flags|=4194816)}}function Na(e,t,i,r,n){return Ln(t),i=Ps(e,t,i,r,void 0,n),r=Is(),null===e||Aa?(an&&r&&rn(t),t.flags|=1,Ra(e,t,i,n),t.child):(Ns(e,t,n),Ja(e,t,n))}function Fa(e,t,i,r,n,s){return Ln(t),t.updateQueue=null,i=Os(t,r,i,n),js(e),r=Is(),null===e||Aa?(an&&r&&rn(t),t.flags|=1,Ra(e,t,i,s),t.child):(Ns(e,t,s),Ja(e,t,s))}function za(e,t,i,r,n){if(Ln(t),null===t.stateNode){var s=Or,o=i.contextType;"object"==typeof o&&null!==o&&(s=Dn(o)),s=new i(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ma,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=i.contextType,s.context="object"==typeof o&&null!==o?Dn(o):Or,s.state=t.memoizedState,"function"==typeof(o=i.getDerivedStateFromProps)&&(ga(t,i,o,r),s.state=t.memoizedState),"function"==typeof i.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(o=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&ma.enqueueReplaceState(s,s.state,null),us(t,r,s,n),ds(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ba(i,a);s.props=l;var c=s.context,h=i.contextType;o=Or,"object"==typeof h&&null!==h&&(o=Dn(h));var d=i.getDerivedStateFromProps;h="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a||c!==o)&&va(t,s,r,o),rs=!1;var u=t.memoizedState;s.state=u,us(t,r,s,n),ds(),c=t.memoizedState,a||u!==c||rs?("function"==typeof d&&(ga(t,i,d,r),c=t.memoizedState),(l=rs||_a(t,i,l,r,u,c,o))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ss(e,t),h=ba(i,o=t.memoizedProps),s.props=h,d=t.pendingProps,u=s.context,c=i.contextType,l=Or,"object"==typeof c&&null!==c&&(l=Dn(c)),(c="function"==typeof(a=i.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||u!==l)&&va(t,s,r,l),rs=!1,u=t.memoizedState,s.state=u,us(t,r,s,n),ds();var f=t.memoizedState;o!==d||u!==f||rs||null!==e&&null!==e.dependencies&&En(e.dependencies)?("function"==typeof a&&(ga(t,i,a,r),f=t.memoizedState),(h=rs||_a(t,i,h,r,u,f,l)||null!==e&&null!==e.dependencies&&En(e.dependencies))?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=h):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ia(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,i=r&&"function"!=typeof i.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=sa(t,e.child,null,n),t.child=sa(t,null,i,n)):Ra(e,t,i,n),t.memoizedState=s.state,e=t.child):e=Ja(e,t,n),e}function Ha(e,t,i,r){return gn(),t.flags|=256,Ra(e,t,i,r),t.child}var Wa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $a(e){return{baseLanes:e,cachePool:qn()}}function Ua(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=bc),e}function Va(e,t,i){var r,n=t.pendingProps,o=!1,a=!!(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&!!(2&fa.current)),r&&(o=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(an){if(o?ca(t):da(),an){var l,c=on;if(l=c){e:{for(l=c,c=cn;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qr?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},(l=Ir(18,null,null,0)).stateNode=c,l.return=t,t.child=l,sn=t,on=null,l=!0):l=!1}l||dn(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return bd(c)?t.lanes=32:t.lanes=536870912,null;ua(t)}return c=n.children,n=n.fallback,o?(da(),c=Ka({mode:"hidden",children:c},o=t.mode),n=Wr(n,o,i,null),c.return=t,n.return=t,c.sibling=n,t.child=c,(o=t.child).memoizedState=$a(i),o.childLanes=Ua(e,r,i),t.memoizedState=Wa,n):(ca(t),qa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(ca(t),t.flags&=-257,t=Ga(e,t,i)):null!==t.memoizedState?(da(),t.child=e.child,t.flags|=128,t=null):(da(),o=n.fallback,c=t.mode,n=Ka({mode:"visible",children:n.children},c),(o=Wr(o,c,i,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,sa(t,e.child,null,i),(n=t.child).memoizedState=$a(i),n.childLanes=Ua(e,r,i),t.memoizedState=Wa,t=o);else if(ca(t),bd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var h=r.dgst;r=h,(n=Error(s(419))).stack="",n.digest=r,_n({value:n,source:null,stack:null}),t=Ga(e,t,i)}else if(Aa||kn(e,t,i,!1),r=0!==(i&e.childLanes),Aa||r){if(null!==(r=oc)&&(0!==(n=0!==((n=42&(n=i&-i)?1:De(n))&(r.suspendedLanes|i))?0:n)&&n!==l.retryLane))throw l.retryLane=n,Tr(e,n),Fc(r,e,n),Ma;"$?"===c.data||Xc(),t=Ga(e,t,i)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,on=yd(c.nextSibling),sn=t,an=!0,ln=null,cn=!1,null!==e&&(Yr[Xr++]=Jr,Yr[Xr++]=Zr,Yr[Xr++]=Qr,Jr=e.id,Zr=e.overflow,Qr=t),(t=qa(t,n.children)).flags|=4096);return t}return o?(da(),o=n.fallback,c=t.mode,h=(l=e.child).sibling,(n=Fr(l,{mode:"hidden",children:n.children})).subtreeFlags=65011712&l.subtreeFlags,null!==h?o=Fr(h,o):(o=Wr(o,c,i,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,null===(c=e.child.memoizedState)?c=$a(i):(null!==(l=c.cachePool)?(h=jn._currentValue,l=l.parent!==h?{parent:h,pool:h}:l):l=qn(),c={baseLanes:c.baseLanes|i,cachePool:l}),o.memoizedState=c,o.childLanes=Ua(e,r,i),t.memoizedState=Wa,n):(ca(t),e=(i=e.child).sibling,(i=Fr(i,{mode:"visible",children:n.children})).return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i)}function qa(e,t){return(t=Ka({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ka(e,t){return(e=Ir(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ga(e,t,i){return sa(t,e.child,null,i),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ya(e,t,i){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wn(e.return,t,i)}function Xa(e,t,i,r,n){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function Qa(e,t,i){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(Ra(e,t,r.children,i),2&(r=fa.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ya(e,i,t);else if(19===e.tag)Ya(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(fa,r),n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===pa(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Xa(t,!1,n,i,s);break;case"backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===pa(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Xa(t,!0,i,null,s);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ja(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(kn(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(i=Fr(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Fr(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Za(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!En(e))}function el(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Aa=!0;else{if(!(Za(e,i)||128&t.flags))return Aa=!1,function(e,t,i){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),xn(0,jn,e.memoizedState.cache),gn();break;case 27:case 5:K(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:xn(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ca(t),t.flags|=128,null):0!==(i&t.child.childLanes)?Va(e,t,i):(ca(t),null!==(e=Ja(e,t,i))?e.sibling:null);ca(t);break;case 19:var n=!!(128&e.flags);if((r=0!==(i&t.childLanes))||(kn(e,t,i,!1),r=0!==(i&t.childLanes)),n){if(r)return Qa(e,t,i);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),z(fa,fa.current),r)break;return null;case 22:case 23:return t.lanes=0,Oa(e,t,i);case 24:xn(0,jn,e.memoizedState.cache)}return Ja(e,t,i)}(e,t,i);Aa=!!(131072&e.flags)}else Aa=!1,an&&1048576&t.flags&&tn(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,n=r._init;if(r=n(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((n=r.$$typeof)===x){t.tag=11,t=Ta(null,t,r,e,i);break e}if(n===C){t.tag=14,t=Pa(null,t,r,e,i);break e}}throw t=R(r)||r,Error(s(306,t,""))}Nr(r)?(e=ba(r,e),t.tag=1,t=za(null,t,r,e,i)):(t.tag=0,t=Na(null,t,r,e,i))}return t;case 0:return Na(e,t,t.type,t.pendingProps,i);case 1:return za(e,t,r=t.type,n=ba(r,t.pendingProps),i);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var o=t.memoizedState;n=o.element,ss(e,t),us(t,r,null,i);var a=t.memoizedState;if(r=a.cache,xn(0,jn,r),r!==o.cache&&Cn(t,[jn],i,!0),ds(),r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ha(e,t,r,i);break e}if(r!==n){_n(n=kr(Error(s(424)),t)),t=Ha(e,t,r,i);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(on=yd(e.firstChild),sn=t,an=!0,ln=null,cn=!0,i=oa(t,null,r,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(gn(),r===n){t=Ja(e,t,i);break e}Ra(e,t,r,i)}t=t.child}return t;case 26:return Ia(e,t),null===e?(i=Rd(t.type,null,t.pendingProps,null))?t.memoizedState=i:an||(i=t.type,e=t.pendingProps,(r=od($.current).createElement(i))[je]=t,r[Oe]=e,rd(r,i,e),Ke(r),t.stateNode=r):t.memoizedState=Rd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&an&&(r=t.stateNode=wd(t.type,t.pendingProps,$.current),sn=t,cn=!0,n=on,md(t.type)?(xd=n,on=yd(r.firstChild)):on=n),Ra(e,t,t.pendingProps.children,i),Ia(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&an&&((n=r=on)&&(null!==(r=function(e,t,i,r){for(;1===e.nodeType;){var n=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[He])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===s)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,cn))?(t.stateNode=r,sn=t,on=yd(r.firstChild),cn=!1,n=!0):n=!1),n||dn(t)),K(t),n=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,cd(n,o)?r=null:null!==a&&cd(n,a)&&(t.flags|=32),null!==t.memoizedState&&(n=Ps(e,t,Bs,null,null,i),Qd._currentValue=n),Ia(e,t),Ra(e,t,r,i),t.child;case 6:return null===e&&an&&((e=i=on)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(i,t.pendingProps,cn))?(t.stateNode=i,sn=t,on=null,e=!0):e=!1),e||dn(t)),null;case 13:return Va(e,t,i);case 4:return V(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=sa(t,null,r,i):Ra(e,t,r,i),t.child;case 11:return Ta(e,t,t.type,t.pendingProps,i);case 7:return Ra(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ra(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,xn(0,t.type,r.value),Ra(e,t,r.children,i),t.child;case 9:return n=t.type._context,r=t.pendingProps.children,Ln(t),r=r(n=Dn(n)),t.flags|=1,Ra(e,t,r,i),t.child;case 14:return Pa(e,t,t.type,t.pendingProps,i);case 15:return ja(e,t,t.type,t.pendingProps,i);case 19:return Qa(e,t,i);case 31:return r=t.pendingProps,i=t.mode,r={mode:r.mode,children:r.children},null===e?((i=Ka(r,i)).ref=t.ref,t.child=i,i.return=t,t=i):((i=Fr(e.child,r)).ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return Oa(e,t,i);case 24:return Ln(t),r=Dn(jn),null===e?(null===(n=Un())&&(n=oc,o=On(),n.pooledCache=o,o.refCount++,null!==o&&(n.pooledCacheLanes|=i),n=o),t.memoizedState={parent:r,cache:n},ns(t),xn(0,jn,n)):(0!==(e.lanes&i)&&(ss(e,t),us(t,null,null,i),ds()),n=e.memoizedState,o=t.memoizedState,n.parent!==r?(n={parent:r,cache:r},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),xn(0,jn,r)):(r=o.cache,xn(0,jn,r),r!==n.cache&&Cn(t,[jn],i,!0))),Ra(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function tl(e){e.flags|=4}function il(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Ud(t)){if(null!==(t=aa.current)&&((4194048&lc)===lc?null!==la:(62914560&lc)!==lc&&!(536870912&lc)||t!==la))throw es=Xn,Gn;e.flags|=8192}}function rl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function nl(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sl(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=65011712&n.subtreeFlags,r|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function ol(e,t,i){var r=t.pendingProps;switch(nn(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sl(t),null;case 3:return i=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Sn(jn),q(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(pn(t)?tl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,mn())),sl(t),null;case 26:return i=t.memoizedState,null===e?(tl(t),null!==i?(sl(t),il(t,i)):(sl(t),t.flags&=-16777217)):i?i!==e.memoizedState?(tl(t),sl(t),il(t,i)):(sl(t),t.flags&=-16777217):(e.memoizedProps!==r&&tl(t),sl(t),t.flags&=-16777217),null;case 27:G(t),i=$.current;var n=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&tl(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return sl(t),null}e=H.current,pn(t)?un(t):(e=wd(n,r,i),t.stateNode=e,tl(t))}return sl(t),null;case 5:if(G(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&tl(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return sl(t),null}if(e=H.current,pn(t))un(t);else{switch(n=od($.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?n.createElement("select",{is:r.is}):n.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?n.createElement(i,{is:r.is}):n.createElement(i)}}e[je]=t,e[Oe]=r;e:for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&27!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;null===n.sibling;){if(null===n.return||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(rd(e,i,r),i){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&tl(t)}}return sl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&tl(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(e=$.current,pn(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,null!==(n=sn))switch(n.tag){case 27:case 5:r=n.memoizedProps}e[je]=t,(e=!!(e.nodeValue===i||null!==r&&!0===r.suppressHydrationWarning||Zh(e.nodeValue,i)))||dn(t)}else(e=od(e).createTextNode(r))[je]=t,t.stateNode=e}return sl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=pn(t),null!==r&&null!==r.dehydrated){if(null===e){if(!n)throw Error(s(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(s(317));n[je]=t}else gn(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sl(t),n=!1}else n=mn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(ua(t),t):(ua(t),null)}if(ua(t),128&t.flags)return t.lanes=i,t;if(i=null!==r,e=null!==e&&null!==e.memoizedState,i){n=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(n=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==n&&(r.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),rl(t,t.updateQueue),sl(t),null;case 4:return q(),null===e&&$h(t.stateNode.containerInfo),sl(t),null;case 10:return Sn(t.type),sl(t),null;case 19:if(F(fa),null===(n=t.memoizedState))return sl(t),null;if(r=!!(128&t.flags),null===(o=n.rendering))if(r)nl(n,!1);else{if(0!==gc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=pa(e))){for(t.flags|=128,nl(n,!1),e=o.updateQueue,t.updateQueue=e,rl(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)zr(i,e),i=i.sibling;return z(fa,1&fa.current|2),t.child}e=e.sibling}null!==n.tail&&ee()>kc&&(t.flags|=128,r=!0,nl(n,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=pa(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,rl(t,e),nl(n,!0),null===n.tail&&"hidden"===n.tailMode&&!o.alternate&&!an)return sl(t),null}else 2*ee()-n.renderingStartTime>kc&&536870912!==i&&(t.flags|=128,r=!0,nl(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=n.last)?e.sibling=o:t.child=o,n.last=o)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=ee(),t.sibling=null,e=fa.current,z(fa,r?1&e|2:1&e),t):(sl(t),null);case 22:case 23:return ua(t),bs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&i)&&!(128&t.flags)&&(sl(t),6&t.subtreeFlags&&(t.flags|=8192)):sl(t),null!==(i=t.updateQueue)&&rl(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),null!==e&&F($n),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Sn(jn),sl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function al(e,t){switch(nn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Sn(jn),q(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return G(t),null;case 13:if(ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));gn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(fa),null;case 4:return q(),null;case 10:return Sn(t.type),null;case 22:case 23:return ua(t),bs(),null!==e&&F($n),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Sn(jn),null;default:return null}}function ll(e,t){switch(nn(t),t.tag){case 3:Sn(jn),q();break;case 26:case 27:case 5:G(t);break;case 4:q();break;case 13:ua(t);break;case 19:F(fa);break;case 10:Sn(t.type);break;case 22:case 23:ua(t),bs(),null!==e&&F($n);break;case 24:Sn(jn)}}function cl(e,t){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var n=r.next;i=n;do{if((i.tag&e)===e){r=void 0;var s=i.create,o=i.inst;r=s(),o.destroy=r}i=i.next}while(i!==n)}}catch(a){fh(t,t.return,a)}}function hl(e,t,i){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var s=n.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,n=t;var l=i,c=a;try{c()}catch(h){fh(n,l,h)}}}r=r.next}while(r!==s)}}catch(h){fh(t,t.return,h)}}function dl(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{ps(t,i)}catch(r){fh(e,e.return,r)}}}function ul(e,t,i){i.props=ba(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){fh(e,t,r)}}function fl(e,t){try{var i=e.ref;if(null!==i){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof i?e.refCleanup=i(r):i.current=r}}catch(n){fh(e,t,n)}}function pl(e,t){var i=e.ref,r=e.refCleanup;if(null!==i)if("function"==typeof r)try{r()}catch(n){fh(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof i)try{i(null)}catch(s){fh(e,t,s)}else i.current=null}function gl(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(n){fh(e,e.return,n)}}function ml(e,t,i){try{var r=e.stateNode;!function(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,o=null,a=null,l=null,c=null,h=null,d=null;for(p in i){var u=i[p];if(i.hasOwnProperty(p)&&null!=u)switch(p){case"checked":case"value":break;case"defaultValue":c=u;default:r.hasOwnProperty(p)||td(e,t,p,null,r,u)}}for(var f in r){var p=r[f];if(u=i[f],r.hasOwnProperty(f)&&(null!=p||null!=u))switch(f){case"type":o=p;break;case"name":n=p;break;case"checked":h=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==u&&td(e,t,f,p,r,u)}}return void vt(e,a,l,c,h,d,o,n);case"select":for(o in p=a=l=f=null,i)if(c=i[o],i.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(o)||td(e,t,o,null,r,c)}for(n in r)if(o=r[n],c=i[n],r.hasOwnProperty(n)&&(null!=o||null!=c))switch(n){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==c&&td(e,t,n,o,r,c)}return t=l,i=a,r=p,void(null!=f?xt(e,!!i,f,!1):!!r!=!!i&&(null!=t?xt(e,!!i,t,!0):xt(e,!!i,i?[]:"",!1)));case"textarea":for(l in p=f=null,i)if(n=i[l],i.hasOwnProperty(l)&&null!=n&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:td(e,t,l,null,r,n)}for(a in r)if(n=r[a],o=i[a],r.hasOwnProperty(a)&&(null!=n||null!=o))switch(a){case"value":f=n;break;case"defaultValue":p=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(s(91));break;default:n!==o&&td(e,t,a,n,r,o)}return void St(e,f,p);case"option":for(var g in i)if(f=i[g],i.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else td(e,t,g,null,r,f);for(c in r)if(f=r[c],p=i[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else td(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in i)f=i[m],i.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&td(e,t,m,null,r,f);for(h in r)if(f=r[h],p=i[h],r.hasOwnProperty(h)&&f!==p&&(null!=f||null!=p))switch(h){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:td(e,t,h,f,r,p)}return;default:if(Dt(t)){for(var _ in i)f=i[_],i.hasOwnProperty(_)&&void 0!==f&&!r.hasOwnProperty(_)&&id(e,t,_,void 0,r,f);for(d in r)f=r[d],p=i[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||id(e,t,d,f,r,p);return}}for(var v in i)f=i[v],i.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&td(e,t,v,null,r,f);for(u in r)f=r[u],p=i[u],!r.hasOwnProperty(u)||f===p||null==f&&null==p||td(e,t,u,f,r,p)}(r,e.type,i,t),r[Oe]=t}catch(n){fh(e,e.return,n)}}function _l(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function vl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_l(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bl(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(e,t):((t=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(e),null!=(i=i._reactRootContainer)||null!==t.onclick||(t.onclick=ed));else if(4!==r&&(27===r&&md(e.type)&&(i=e.stateNode,t=null),null!==(e=e.child)))for(bl(e,t,i),e=e.sibling;null!==e;)bl(e,t,i),e=e.sibling}function yl(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(i=e.stateNode),null!==(e=e.child)))for(yl(e,t,i),e=e.sibling;null!==e;)yl(e,t,i),e=e.sibling}function xl(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);rd(t,r,i),t[je]=e,t[Oe]=i}catch(s){fh(e,e.return,s)}}var Sl=!1,wl=!1,Cl=!1,kl="function"==typeof WeakSet?WeakSet:Set,El=null;function Ll(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:zl(e,i),4&r&&cl(5,i);break;case 1:if(zl(e,i),4&r)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(o){fh(i,i.return,o)}else{var n=ba(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){fh(i,i.return,a)}}64&r&&dl(i),512&r&&fl(i,i.return);break;case 3:if(zl(e,i),64&r&&null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:t=i.child.stateNode}try{ps(e,t)}catch(o){fh(i,i.return,o)}}break;case 27:null===t&&4&r&&xl(i);case 26:case 5:zl(e,i),null===t&&4&r&&gl(i),512&r&&fl(i,i.return);break;case 12:zl(e,i);break;case 13:zl(e,i),4&r&&Pl(e,i),64&r&&(null!==(e=i.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var i=e.ownerDocument;if("$?"!==e.data||"complete"===i.readyState)t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,i=_h.bind(null,i))));break;case 22:if(!(r=null!==i.memoizedState||Sl)){t=null!==t&&null!==t.memoizedState||wl,n=Sl;var s=wl;Sl=r,(wl=t)&&!s?Wl(e,i,!!(8772&i.subtreeFlags)):zl(e,i),Sl=n,wl=s}break;case 30:break;default:zl(e,i)}}function Dl(e){var t=e.alternate;null!==t&&(e.alternate=null,Dl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ml=null,Al=!1;function Rl(e,t,i){for(i=i.child;null!==i;)Tl(e,t,i),i=i.sibling}function Tl(e,t,i){if(he&&"function"==typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ce,i)}catch(s){}switch(i.tag){case 26:wl||pl(i,t),Rl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:wl||pl(i,t);var r=Ml,n=Al;md(i.type)&&(Ml=i.stateNode,Al=!1),Rl(e,t,i),Cd(i.stateNode),Ml=r,Al=n;break;case 5:wl||pl(i,t);case 6:if(r=Ml,n=Al,Ml=null,Rl(e,t,i),Al=n,null!==(Ml=r))if(Al)try{(9===Ml.nodeType?Ml.body:"HTML"===Ml.nodeName?Ml.ownerDocument.body:Ml).removeChild(i.stateNode)}catch(o){fh(i,t,o)}else try{Ml.removeChild(i.stateNode)}catch(o){fh(i,t,o)}break;case 18:null!==Ml&&(Al?(_d(9===(e=Ml).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,i.stateNode),Au(e)):_d(Ml,i.stateNode));break;case 4:r=Ml,n=Al,Ml=i.stateNode.containerInfo,Al=!0,Rl(e,t,i),Ml=r,Al=n;break;case 0:case 11:case 14:case 15:wl||hl(2,i,t),wl||hl(4,i,t),Rl(e,t,i);break;case 1:wl||(pl(i,t),"function"==typeof(r=i.stateNode).componentWillUnmount&&ul(i,t,r)),Rl(e,t,i);break;case 21:Rl(e,t,i);break;case 22:wl=(r=wl)||null!==i.memoizedState,Rl(e,t,i),wl=r;break;default:Rl(e,t,i)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Au(e)}catch(i){fh(t,t.return,i)}}function jl(e,t){var i=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var r=vh.bind(null,e,t);i.has(t)||(i.add(t),t.then(r,r))})}function Ol(e,t){var i=t.deletions;if(null!==i)for(var r=0;r<i.length;r++){var n=i[r],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Ml=l.stateNode,Al=!1;break e}break;case 5:Ml=l.stateNode,Al=!1;break e;case 3:case 4:Ml=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===Ml)throw Error(s(160));Tl(o,a,n),Ml=null,Al=!1,null!==(o=n.alternate)&&(o.return=null),n.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Bl=null;function Il(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ol(t,e),Nl(e),4&r&&(hl(3,e,e.return),cl(3,e),hl(5,e,e.return));break;case 1:Ol(t,e),Nl(e),512&r&&(wl||null===i||pl(i,i.return)),64&r&&Sl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?r:i.concat(r))));break;case 26:var n=Bl;if(Ol(t,e),Nl(e),512&r&&(wl||null===i||pl(i,i.return)),4&r){var o=null!==i?i.memoizedState:null;if(r=e.memoizedState,null===i)if(null===r)if(null===e.stateNode){e:{r=e.type,i=e.memoizedProps,n=n.ownerDocument||n;t:switch(r){case"title":(!(o=n.getElementsByTagName("title")[0])||o[He]||o[je]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=n.createElement(r),n.head.insertBefore(o,n.querySelector("head > title"))),rd(o,r,i),o[je]=e,Ke(o),r=o;break e;case"link":var a=Wd("link","href",n).get(r+(i.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==i.href||""===i.href?null:i.href)&&o.getAttribute("rel")===(null==i.rel?null:i.rel)&&o.getAttribute("title")===(null==i.title?null:i.title)&&o.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(l,1);break t}rd(o=n.createElement(r),r,i),n.head.appendChild(o);break;case"meta":if(a=Wd("meta","content",n).get(r+(i.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&o.getAttribute("name")===(null==i.name?null:i.name)&&o.getAttribute("property")===(null==i.property?null:i.property)&&o.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&o.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(l,1);break t}rd(o=n.createElement(r),r,i),n.head.appendChild(o);break;default:throw Error(s(468,r))}o[je]=e,Ke(o),r=o}e.stateNode=r}else $d(n,e.type,e.stateNode);else e.stateNode=Id(n,r,e.memoizedProps);else o!==r?(null===o?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):o.count--,null===r?$d(n,e.type,e.stateNode):Id(n,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ol(t,e),Nl(e),512&r&&(wl||null===i||pl(i,i.return)),null!==i&&4&r&&ml(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ol(t,e),Nl(e),512&r&&(wl||null===i||pl(i,i.return)),32&e.flags){n=e.stateNode;try{Ct(n,"")}catch(p){fh(e,e.return,p)}}4&r&&null!=e.stateNode&&ml(e,n=e.memoizedProps,null!==i?i.memoizedProps:n),1024&r&&(Cl=!0);break;case 6:if(Ol(t,e),Nl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(p){fh(e,e.return,p)}}break;case 3:if(Hd=null,n=Bl,Bl=Ld(t.containerInfo),Ol(t,e),Bl=n,Nl(e),4&r&&null!==i&&i.memoizedState.isDehydrated)try{Au(t.containerInfo)}catch(p){fh(e,e.return,p)}Cl&&(Cl=!1,Fl(e));break;case 4:r=Bl,Bl=Ld(e.stateNode.containerInfo),Ol(t,e),Nl(e),Bl=r;break;case 12:default:Ol(t,e),Nl(e);break;case 13:Ol(t,e),Nl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==i&&null!==i.memoizedState)&&(Cc=ee()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));break;case 22:n=null!==e.memoizedState;var c=null!==i&&null!==i.memoizedState,h=Sl,d=wl;if(Sl=h||n,wl=d||c,Ol(t,e),wl=d,Sl=h,Nl(e),8192&r)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===i||c||Sl||wl||Hl(e)),i=null,t=e;;){if(5===t.tag||26===t.tag){if(null===i){c=i=t;try{if(o=c.stateNode,n)"function"==typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var u=c.memoizedProps.style,f=null!=u&&u.hasOwnProperty("display")?u.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(p){fh(c,c.return,p)}}}else if(6===t.tag){if(null===i){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(p){fh(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(i=r.retryQueue)&&(r.retryQueue=null,jl(e,i))));break;case 19:Ol(t,e),Nl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));case 30:case 21:}}function Nl(e){var t=e.flags;if(2&t){try{for(var i,r=e.return;null!==r;){if(_l(r)){i=r;break}r=r.return}if(null==i)throw Error(s(160));switch(i.tag){case 27:var n=i.stateNode;yl(e,vl(e),n);break;case 5:var o=i.stateNode;32&i.flags&&(Ct(o,""),i.flags&=-33),yl(e,vl(e),o);break;case 3:case 4:var a=i.stateNode.containerInfo;bl(e,vl(e),a);break;default:throw Error(s(161))}}catch(l){fh(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function zl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function Hl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:hl(4,t,t.return),Hl(t);break;case 1:pl(t,t.return);var i=t.stateNode;"function"==typeof i.componentWillUnmount&&ul(t,t.return,i),Hl(t);break;case 27:Cd(t.stateNode);case 26:case 5:pl(t,t.return),Hl(t);break;case 22:null===t.memoizedState&&Hl(t);break;default:Hl(t)}e=e.sibling}}function Wl(e,t,i){for(i=i&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,n=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Wl(n,s,i),cl(4,s);break;case 1:if(Wl(n,s,i),"function"==typeof(n=(r=s).stateNode).componentDidMount)try{n.componentDidMount()}catch(c){fh(r,r.return,c)}if(null!==(n=(r=s).updateQueue)){var a=r.stateNode;try{var l=n.shared.hiddenCallbacks;if(null!==l)for(n.shared.hiddenCallbacks=null,n=0;n<l.length;n++)fs(l[n],a)}catch(c){fh(r,r.return,c)}}i&&64&o&&dl(s),fl(s,s.return);break;case 27:xl(s);case 26:case 5:Wl(n,s,i),i&&null===r&&4&o&&gl(s),fl(s,s.return);break;case 12:Wl(n,s,i);break;case 13:Wl(n,s,i),i&&4&o&&Pl(n,s);break;case 22:null===s.memoizedState&&Wl(n,s,i),fl(s,s.return);break;case 30:break;default:Wl(n,s,i)}t=t.sibling}}function $l(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&Bn(i))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bn(e))}function Vl(e,t,i,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,i,r),t=t.sibling}function ql(e,t,i,r){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,i,r),2048&n&&cl(9,t);break;case 1:case 13:default:Vl(e,t,i,r);break;case 3:Vl(e,t,i,r),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bn(e)));break;case 12:if(2048&n){Vl(e,t,i,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"==typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){fh(t,t.return,l)}}else Vl(e,t,i,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Vl(e,t,i,r):Gl(e,t):2&s._visibility?Vl(e,t,i,r):(s._visibility|=2,Kl(e,t,i,r,!!(10256&t.subtreeFlags))),2048&n&&$l(o,t);break;case 24:Vl(e,t,i,r),2048&n&&Ul(t.alternate,t)}}function Kl(e,t,i,r,n){for(n=n&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=i,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Kl(s,o,a,l,n),cl(8,o);break;case 23:break;case 22:var h=o.stateNode;null!==o.memoizedState?2&h._visibility?Kl(s,o,a,l,n):Gl(s,o):(h._visibility|=2,Kl(s,o,a,l,n)),n&&2048&c&&$l(o.alternate,o);break;case 24:Kl(s,o,a,l,n),n&&2048&c&&Ul(o.alternate,o);break;default:Kl(s,o,a,l,n)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,r=t,n=r.flags;switch(r.tag){case 22:Gl(i,r),2048&n&&$l(r.alternate,r);break;case 24:Gl(i,r),2048&n&&Ul(r.alternate,r);break;default:Gl(i,r)}t=t.sibling}}var Yl=8192;function Xl(e){if(e.subtreeFlags&Yl)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 26:Xl(e),e.flags&Yl&&null!==e.memoizedState&&function(e,t,i){if(null===Vd)throw Error(s(475));var r=Vd;if(!("stylesheet"!==t.type||"string"==typeof i.media&&!1===matchMedia(i.media).matches||4&t.state.loading)){if(null===t.instance){var n=Td(i.href),o=e.querySelector(Pd(n));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=Kd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ke(o);o=e.ownerDocument||e,i=jd(i),(n=kd.get(n))&&Fd(i,n),Ke(o=o.createElement("link"));var a=o;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),rd(o,"link",i),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=Kd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Bl,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Bl;Bl=Ld(e.stateNode.containerInfo),Xl(e),Bl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Yl,Yl=16777216,Xl(e),Yl=t):Xl(e))}}function Jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Zl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];El=r,ic(r,e)}Jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)ec(e),e=e.sibling}function ec(e){switch(e.tag){case 0:case 11:case 15:Zl(e),2048&e.flags&&hl(9,e,e.return);break;case 3:case 12:default:Zl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,tc(e)):Zl(e)}}function tc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];El=r,ic(r,e)}Jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:hl(8,t,t.return),tc(t);break;case 22:2&(i=t.stateNode)._visibility&&(i._visibility&=-3,tc(t));break;default:tc(t)}e=e.sibling}}function ic(e,t){for(;null!==El;){var i=El;switch(i.tag){case 0:case 11:case 15:hl(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var r=i.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Bn(i.memoizedState.cache)}if(null!==(r=i.child))r.return=i,El=r;else e:for(i=e;null!==El;){var n=(r=El).sibling,s=r.return;if(Dl(r),r===i){El=null;break e}if(null!==n){n.return=s,El=n;break e}El=s}}}var rc={getCacheForType:function(e){var t=Dn(jn),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i}},nc="function"==typeof WeakMap?WeakMap:Map,sc=0,oc=null,ac=null,lc=0,cc=0,hc=null,dc=!1,uc=!1,fc=!1,pc=0,gc=0,mc=0,_c=0,vc=0,bc=0,yc=0,xc=null,Sc=null,wc=!1,Cc=0,kc=1/0,Ec=null,Lc=null,Dc=0,Mc=null,Ac=null,Rc=0,Tc=0,Pc=null,jc=null,Oc=0,Bc=null;function Ic(){if(2&sc&&0!==lc)return lc&-lc;if(null!==P.T){return 0!==Fn?Fn:Th()}return Re()}function Nc(){0===bc&&(bc=536870912&lc&&!an?536870912:xe());var e=aa.current;return null!==e&&(e.flags|=32),bc}function Fc(e,t,i){(e!==oc||2!==cc&&9!==cc)&&null===e.cancelPendingCommit||(qc(e,0),$c(e,lc,bc,!1)),Ce(e,i),2&sc&&e===oc||(e===oc&&(!(2&sc)&&(_c|=i),4===gc&&$c(e,lc,bc,!1)),kh(e))}function zc(e,t,i){if(6&sc)throw Error(s(327));for(var r=!i&&!(124&t)&&0===(t&e.expiredLanes)||be(e,t),n=r?function(e,t){var i=sc;sc|=2;var r=Gc(),n=Yc();oc!==e||lc!==t?(Ec=null,kc=ee()+500,qc(e,t)):uc=be(e,t);e:for(;;)try{if(0!==cc&&null!==ac){t=ac;var o=hc;t:switch(cc){case 1:cc=0,hc=null,ih(e,t,o,1);break;case 2:case 9:if(Qn(o)){cc=0,hc=null,th(t);break}t=function(){2!==cc&&9!==cc||oc!==e||(cc=7),kh(e)},o.then(t,t);break e;case 3:cc=7;break e;case 4:cc=5;break e;case 7:Qn(o)?(cc=0,hc=null,th(t)):(cc=0,hc=null,ih(e,t,o,7));break;case 5:var a=null;switch(ac.tag){case 26:a=ac.memoizedState;case 5:case 27:var l=ac;if(!a||Ud(a)){cc=0,hc=null;var c=l.sibling;if(null!==c)ac=c;else{var h=l.return;null!==h?(ac=h,rh(h)):ac=null}break t}}cc=0,hc=null,ih(e,t,o,5);break;case 6:cc=0,hc=null,ih(e,t,o,6);break;case 8:Vc(),gc=6;break e;default:throw Error(s(462))}}Zc();break}catch(d){Kc(e,d)}return yn=bn=null,P.H=r,P.A=n,sc=i,null!==ac?0:(oc=null,lc=0,Mr(),gc)}(e,t):Qc(e,t,!0),o=r;;){if(0===n){uc&&!r&&$c(e,t,0,!1);break}if(i=e.current.alternate,!o||Wc(i)){if(2===n){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;n=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(qc(l,a).flags|=256),2!==(a=Qc(l,a,!1))){if(fc&&!c){l.errorRecoveryDisabledLanes|=o,_c|=o,n=4;break e}o=Sc,Sc=n,null!==o&&(null===Sc?Sc=o:Sc.push.apply(Sc,o))}n=a}if(o=!1,2!==n)continue}}if(1===n){qc(e,0),$c(e,t,0,!0);break}e:{switch(r=e,o=n){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:$c(r,t,bc,!dc);break e;case 2:Sc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(n=Cc+300-ee())){if($c(r,t,bc,!dc),0!==ve(r,0,!0))break e;r.timeoutHandle=dd(Hc.bind(null,r,i,Sc,Ec,wc,t,bc,_c,yc,dc,o,2,-0,0),n)}else Hc(r,i,Sc,Ec,wc,t,bc,_c,yc,dc,o,0,-0,0)}break}n=Qc(e,t,!1),o=!1}kh(e)}function Hc(e,t,i,r,n,o,a,l,c,h,d,u,f,p){if(e.timeoutHandle=-1,(8192&(u=t.subtreeFlags)||!(16785408&~u))&&(Vd={stylesheets:null,count:0,unsuspend:qd},Ql(t),null!==(u=function(){if(null===Vd)throw Error(s(475));var e=Vd;return e.stylesheets&&0===e.count&&Yd(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&Yd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}())))return e.cancelPendingCommit=u(sh.bind(null,e,t,o,i,r,n,a,l,c,d,1,f,p)),void $c(e,o,a,!h);sh(e,t,o,i,r,n,a,l,c)}function Wc(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!Xi(s(),n))return!1}catch(o){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,i,r){t&=~vc,t&=~_c,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var n=t;0<n;){var s=31-ue(n),o=1<<s;r[s]=-1,n&=~o}0!==i&&ke(e,i,t)}function Uc(){return!!(6&sc)||(Eh(0),!1)}function Vc(){if(null!==ac){if(0===cc)var e=ac.return;else yn=bn=null,Fs(e=ac),Jo=null,Zo=0,e=ac;for(;null!==e;)ll(e.alternate,e),e=e.return;ac=null}}function qc(e,t){var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,ud(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),Vc(),oc=e,ac=i=Fr(e.current,null),lc=t,cc=0,hc=null,dc=!1,uc=be(e,t),fc=!1,yc=bc=vc=_c=mc=gc=0,Sc=xc=null,wc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var n=31-ue(r),s=1<<n;t|=e[n],r&=~s}return pc=t,Mr(),i}function Kc(e,t){xs=null,P.H=Go,t===Kn||t===Yn?(t=ts(),cc=3):t===Gn?(t=ts(),cc=4):cc=t===Ma?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,hc=t,null===ac&&(gc=1,Ca(e,kr(t,e.current)))}function Gc(){var e=P.H;return P.H=Go,null===e?Go:e}function Yc(){var e=P.A;return P.A=rc,e}function Xc(){gc=4,dc||(4194048&lc)!==lc&&null!==aa.current||(uc=!0),!(134217727&mc)&&!(134217727&_c)||null===oc||$c(oc,lc,bc,!1)}function Qc(e,t,i){var r=sc;sc|=2;var n=Gc(),s=Yc();oc===e&&lc===t||(Ec=null,qc(e,t)),t=!1;var o=gc;e:for(;;)try{if(0!==cc&&null!==ac){var a=ac,l=hc;switch(cc){case 8:Vc(),o=6;break e;case 3:case 2:case 9:case 6:null===aa.current&&(t=!0);var c=cc;if(cc=0,hc=null,ih(e,a,l,c),i&&uc){o=0;break e}break;default:c=cc,cc=0,hc=null,ih(e,a,l,c)}}Jc(),o=gc;break}catch(h){Kc(e,h)}return t&&e.shellSuspendCounter++,yn=bn=null,sc=r,P.H=n,P.A=s,null===ac&&(oc=null,lc=0,Mr()),o}function Jc(){for(;null!==ac;)eh(ac)}function Zc(){for(;null!==ac&&!J();)eh(ac)}function eh(e){var t=el(e.alternate,e,pc);e.memoizedProps=e.pendingProps,null===t?rh(e):ac=t}function th(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Fa(i,t,t.pendingProps,t.type,void 0,lc);break;case 11:t=Fa(i,t,t.pendingProps,t.type.render,t.ref,lc);break;case 5:Fs(t);default:ll(i,t),t=el(i,t=ac=zr(t,pc),pc)}e.memoizedProps=e.pendingProps,null===t?rh(e):ac=t}function ih(e,t,i,r){yn=bn=null,Fs(t),Jo=null,Zo=0;var n=t.return;try{if(function(e,t,i,r,n){if(i.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=i.alternate)&&kn(t,i,n,!0),null!==(i=aa.current)){switch(i.tag){case 13:return null===la?Xc():null===i.alternate&&0===gc&&(gc=3),i.flags&=-257,i.flags|=65536,i.lanes=n,r===Xn?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([r]):t.add(r),ph(e,r,n)),!1;case 22:return i.flags|=65536,r===Xn?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([r]):i.add(r),ph(e,r,n)),!1}throw Error(s(435,i.tag))}return ph(e,r,n),Xc(),!1}if(an)return null!==(t=aa.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,r!==hn&&_n(kr(e=Error(s(422),{cause:r}),i))):(r!==hn&&_n(kr(t=Error(s(423),{cause:r}),i)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,r=kr(r,i),cs(e,n=Ea(e.stateNode,r,n)),4!==gc&&(gc=2)),!1;var o=Error(s(520),{cause:r});if(o=kr(o,i),null===xc?xc=[o]:xc.push(o),4!==gc&&(gc=2),null===t)return!0;r=kr(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=n&-n,i.lanes|=e,cs(i,e=Ea(i.stateNode,r,e)),!1;case 1:if(t=i.type,o=i.stateNode,!(128&i.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==Lc&&Lc.has(o))))return i.flags|=65536,n&=-n,i.lanes|=n,Da(n=La(n),e,i,r),cs(i,n),!1}i=i.return}while(null!==i);return!1}(e,n,t,i,lc))return gc=1,Ca(e,kr(i,e.current)),void(ac=null)}catch(o){if(null!==n)throw ac=n,o;return gc=1,Ca(e,kr(i,e.current)),void(ac=null)}32768&t.flags?(an||1===r?e=!0:uc||536870912&lc?e=!1:(dc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=aa.current)&&13===r.tag&&(r.flags|=16384))),nh(t,e)):rh(t)}function rh(e){var t=e;do{if(32768&t.flags)return void nh(t,dc);e=t.return;var i=ol(t.alternate,t,pc);if(null!==i)return void(ac=i);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===gc&&(gc=5)}function nh(e,t){do{var i=al(e.alternate,e);if(null!==i)return i.flags&=32767,void(ac=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=i}while(null!==e);gc=6,ac=null}function sh(e,t,i,r,n,o,a,l,c){e.cancelPendingCommit=null;do{hh()}while(0!==Dc);if(6&sc)throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(o=t.lanes|t.childLanes,function(e,t,i,r,n,s){var o=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(i=o&~i;0<i;){var h=31-ue(i),d=1<<h;a[h]=0,l[h]=-1;var u=c[h];if(null!==u)for(c[h]=null,h=0;h<u.length;h++){var f=u[h];null!==f&&(f.lane&=-536870913)}i&=~d}0!==r&&ke(e,r,0),0!==s&&0===n&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,i,o|=Dr,a,l,c),e===oc&&(ac=oc=null,lc=0),Ac=t,Mc=e,Rc=i,Tc=o,Pc=n,jc=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,X(ne,function(){return dh(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=P.T,P.T=null,n=j.p,j.p=2,a=sc,sc|=4;try{!function(e,t){if(e=e.containerInfo,nd=su,ir(e=tr(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(r&&0!==r.rangeCount){i=r.anchorNode;var n=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{i.nodeType,o.nodeType}catch(m){i=null;break e}var a=0,l=-1,c=-1,h=0,d=0,u=e,f=null;t:for(;;){for(var p;u!==i||0!==n&&3!==u.nodeType||(l=a+n),u!==o||0!==r&&3!==u.nodeType||(c=a+r),3===u.nodeType&&(a+=u.nodeValue.length),null!==(p=u.firstChild);)f=u,u=p;for(;;){if(u===e)break t;if(f===i&&++h===n&&(l=a),f===o&&++d===r&&(c=a),null!==(p=u.nextSibling))break;f=(u=f).parentNode}u=p}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(sd={focusedElem:e,selectionRange:i},su=!1,El=t;null!==El;)if(e=(t=El).child,1024&t.subtreeFlags&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(o=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,i=t,n=o.memoizedProps,o=o.memoizedState,r=i.stateNode;try{var g=ba(i.type,n,(i.elementType,i.type));e=r.getSnapshotBeforeUpdate(g,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(_){fh(i,i.return,_)}}break;case 3:if(1024&e)if(9===(i=(e=t.stateNode.containerInfo).nodeType))vd(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{sc=a,j.p=n,P.T=r}}Dc=1,oh(),ah(),lh()}}function oh(){if(1===Dc){Dc=0;var e=Mc,t=Ac,i=!!(13878&t.flags);if(13878&t.subtreeFlags||i){i=P.T,P.T=null;var r=j.p;j.p=2;var n=sc;sc|=4;try{Il(t,e);var s=sd,o=tr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&er(a.ownerDocument.documentElement,a)){if(null!==l&&ir(a)){var c=l.start,h=l.end;if(void 0===h&&(h=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(h,a.value.length);else{var d=a.ownerDocument||document,u=d&&d.defaultView||window;if(u.getSelection){var f=u.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(o=m,m=g,g=o);var _=Zi(a,g),v=Zi(a,m);if(_&&v&&(1!==f.rangeCount||f.anchorNode!==_.node||f.anchorOffset!==_.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(_.node,_.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof a.focus&&a.focus(),a=0;a<d.length;a++){var y=d[a];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}su=!!nd,sd=nd=null}finally{sc=n,j.p=r,P.T=i}}e.current=t,Dc=2}}function ah(){if(2===Dc){Dc=0;var e=Mc,t=Ac,i=!!(8772&t.flags);if(8772&t.subtreeFlags||i){i=P.T,P.T=null;var r=j.p;j.p=2;var n=sc;sc|=4;try{Ll(e,t.alternate,t)}finally{sc=n,j.p=r,P.T=i}}Dc=3}}function lh(){if(4===Dc||3===Dc){Dc=0,Z();var e=Mc,t=Ac,i=Rc,r=jc;10256&t.subtreeFlags||10256&t.flags?Dc=5:(Dc=0,Ac=Mc=null,ch(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Lc=null),Ae(i),t=t.stateNode,he&&"function"==typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=P.T,n=j.p,j.p=2,P.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{P.T=t,j.p=n}}3&Rc&&hh(),kh(e),n=e.pendingLanes,4194090&i&&42&n?e===Bc?Oc++:(Oc=0,Bc=e):Oc=0,Eh(0)}}function ch(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bn(t)))}function hh(e){return oh(),ah(),lh(),dh()}function dh(){if(5!==Dc)return!1;var e=Mc,t=Tc;Tc=0;var i=Ae(Rc),r=P.T,n=j.p;try{j.p=32>i?32:i,P.T=null,i=Pc,Pc=null;var o=Mc,a=Rc;if(Dc=0,Ac=Mc=null,Rc=0,6&sc)throw Error(s(331));var l=sc;if(sc|=4,ec(o.current),ql(o,o.current,a,i),sc=l,Eh(0,!1),he&&"function"==typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ce,o)}catch(c){}return!0}finally{j.p=n,P.T=r,ch(e,t)}}function uh(e,t,i){t=kr(i,t),null!==(e=as(e,t=Ea(e.stateNode,t,2),2))&&(Ce(e,2),kh(e))}function fh(e,t,i){if(3===e.tag)uh(e,e,i);else for(;null!==t;){if(3===t.tag){uh(t,e,i);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Lc||!Lc.has(r))){e=kr(i,e),null!==(r=as(t,i=La(2),2))&&(Da(i,r,t,e),Ce(r,2),kh(r));break}}t=t.return}}function ph(e,t,i){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var n=new Set;r.set(t,n)}else void 0===(n=r.get(t))&&(n=new Set,r.set(t,n));n.has(i)||(fc=!0,n.add(i),e=gh.bind(null,e,t,i),t.then(e,e))}function gh(e,t,i){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,oc===e&&(lc&i)===i&&(4===gc||3===gc&&(62914560&lc)===lc&&300>ee()-Cc?!(2&sc)&&qc(e,0):vc|=i,yc===lc&&(yc=0)),kh(e)}function mh(e,t){0===t&&(t=Se()),null!==(e=Tr(e,t))&&(Ce(e,t),kh(e))}function _h(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),mh(e,i)}function vh(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;null!==n&&(i=n.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),mh(e,i)}var bh=null,yh=null,xh=!1,Sh=!1,wh=!1,Ch=0;function kh(e){e!==yh&&null===e.next&&(null===yh?bh=yh=e:yh=yh.next=e),Sh=!0,xh||(xh=!0,pd(function(){6&sc?X(ie,Lh):Dh()}))}function Eh(e,t){if(!wh&&Sh){wh=!0;do{for(var i=!1,r=bh;null!==r;){if(0!==e){var n=r.pendingLanes;if(0===n)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-ue(42|e)+1)-1,s=201326741&(s&=n&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(i=!0,Rh(r,s))}else s=lc,!(3&(s=ve(r,r===oc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,s)||(i=!0,Rh(r,s));r=r.next}}while(i);wh=!1}}function Lh(){Dh()}function Dh(){Sh=xh=!1;var e=0;0!==Ch&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==hd&&(hd=e,!0);return hd=null,!1}()&&(e=Ch),Ch=0);for(var t=ee(),i=null,r=bh;null!==r;){var n=r.next,s=Mh(r,t);0===s?(r.next=null,null===i?bh=n:i.next=n,null===n&&(yh=i)):(i=r,(0!==e||3&s)&&(Sh=!0)),r=n}Eh(e)}function Mh(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-ue(s),a=1<<o,l=n[o];-1===l?0!==(a&i)&&0===(a&r)||(n[o]=ye(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(i=lc,i=ve(e,e===(t=oc)?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===i||e===t&&(2===cc||9===cc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Q(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&i)||be(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==r&&Q(r),Ae(i)){case 2:case 8:i=re;break;case 32:default:i=ne;break;case 268435456:i=oe}return r=Ah.bind(null,e),i=X(i,r),e.callbackPriority=t,e.callbackNode=i,t}return null!==r&&null!==r&&Q(r),e.callbackPriority=2,e.callbackNode=null,2}function Ah(e,t){if(0!==Dc&&5!==Dc)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(hh()&&e.callbackNode!==i)return null;var r=lc;return 0===(r=ve(e,e===oc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(zc(e,r,t),Mh(e,ee()),null!=e.callbackNode&&e.callbackNode===i?Ah.bind(null,e):null)}function Rh(e,t){if(hh())return null;zc(e,t,!0)}function Th(){return 0===Ch&&(Ch=xe()),Ch}function Ph(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Rt(""+e)}function jh(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var Oh=0;Oh<Sr.length;Oh++){var Bh=Sr[Oh];wr(Bh.toLowerCase(),"on"+(Bh[0].toUpperCase()+Bh.slice(1)))}wr(pr,"onAnimationEnd"),wr(gr,"onAnimationIteration"),wr(mr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(_r,"onTransitionRun"),wr(vr,"onTransitionStart"),wr(br,"onTransitionCancel"),wr(yr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ih));function Fh(e,t){t=!!(4&t);for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;s=a,n.currentTarget=c;try{s(n)}catch(h){ya(h)}n.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;s=a,n.currentTarget=c;try{s(n)}catch(h){ya(h)}n.currentTarget=null,s=l}}}}function zh(e,t){var i=t[Ie];void 0===i&&(i=t[Ie]=new Set);var r=e+"__bubble";i.has(r)||(Uh(t,e,2,!1),i.add(r))}function Hh(e,t,i){var r=0;t&&(r|=4),Uh(i,e,r,t)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function $h(e){if(!e[Wh]){e[Wh]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Nh.has(t)||Hh(t,!1,e),Hh(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wh]||(t[Wh]=!0,Hh("selectionchange",!1,t))}}function Uh(e,t,i,r){switch(uu(t)){case 2:var n=ou;break;case 8:n=au;break;default:n=lu}i=n.bind(null,t,i,e),n=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),r?void 0!==n?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):void 0!==n?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function Vh(e,t,i,r,n){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===n)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===n)return;o=o.return}for(;null!==l;){if(null===(o=$e(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}l=l.parentNode}}r=r.return}Nt(function(){var r=s,n=Pt(i),o=[];e:{var l=xr.get(e);if(void 0!==l){var c=ti,h=e;switch(e){case"keypress":if(0===Kt(i))break e;case"keydown":case"keyup":c=mi;break;case"focusin":h="focus",c=ai;break;case"focusout":h="blur",c=ai;break;case"beforeblur":case"afterblur":c=ai;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=oi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vi;break;case pr:case gr:case mr:c=li;break;case yr:c=bi;break;case"scroll":case"scrollend":c=ri;break;case"wheel":c=yi;break;case"copy":case"cut":case"paste":c=ci;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_i;break;case"toggle":case"beforetoggle":c=xi}var d=!!(4&t),u=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Ft(g,f))&&d.push(qh(g,m,p)),u)break;g=g.return}0<d.length&&(l=new c(l,h,null,i,n),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||i===Tt||!(h=i.relatedTarget||i.fromElement)||!$e(h)&&!h[Be])&&(c||l)&&(l=n.window===n?n:(l=n.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(h=(h=i.relatedTarget||i.toElement)?$e(h):null)&&(u=a(h),d=h.tag,h!==u||5!==d&&27!==d&&6!==d)&&(h=null)):(c=null,h=r),c!==h)){if(d=si,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=_i,m="onPointerLeave",f="onPointerEnter",g="pointer"),u=null==c?l:Ve(c),p=null==h?l:Ve(h),(l=new d(m,g+"leave",c,i,n)).target=u,l.relatedTarget=p,m=null,$e(n)===r&&((d=new d(f,g+"enter",h,i,n)).target=p,d.relatedTarget=u,m=d),u=m,c&&h)e:{for(f=h,g=0,p=d=c;p;p=Gh(p))g++;for(p=0,m=f;m;m=Gh(m))p++;for(;0<g-p;)d=Gh(d),g--;for(;0<p-g;)f=Gh(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gh(d),f=Gh(f)}d=null}else d=null;null!==c&&Yh(o,l,c,d,!1),null!==h&&null!==u&&Yh(o,u,h,d,!0)}if("select"===(c=(l=r?Ve(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var _=Fi;else if(Pi(l))if(zi)_=Yi;else{_=Ki;var v=qi}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Dt(r.elementType)&&(_=Fi):_=Gi;switch(_&&(_=_(e,r))?ji(o,_,i,n):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&yt(l,"number",l.value)),v=r?Ve(r):window,e){case"focusin":(Pi(v)||"true"===v.contentEditable)&&(nr=v,sr=r,or=null);break;case"focusout":or=sr=nr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,lr(o,i,n);break;case"selectionchange":if(rr)break;case"keydown":case"keyup":lr(o,i,n)}var b;if(wi)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ri?Mi(e,i)&&(y="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(y="onCompositionStart");y&&(Ei&&"ko"!==i.locale&&(Ri||"onCompositionStart"!==y?"onCompositionEnd"===y&&Ri&&(b=qt()):(Ut="value"in($t=n)?$t.value:$t.textContent,Ri=!0)),0<(v=Kh(r,y)).length&&(y=new hi(y,e,null,i,n),o.push({event:y,listeners:v}),b?y.data=b:null!==(b=Ai(i))&&(y.data=b))),(b=ki?function(e,t){switch(e){case"compositionend":return Ai(t);case"keypress":return 32!==t.which?null:(Di=!0,Li);case"textInput":return(e=t.data)===Li&&Di?null:e;default:return null}}(e,i):function(e,t){if(Ri)return"compositionend"===e||!wi&&Mi(e,t)?(e=qt(),Vt=Ut=$t=null,Ri=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ei&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(y=Kh(r,"onBeforeInput")).length&&(v=new hi("onBeforeInput","beforeinput",null,i,n),o.push({event:v,listeners:y}),v.data=b)),function(e,t,i,r,n){if("submit"===t&&i&&i.stateNode===n){var s=Ph((n[Oe]||null).action),o=r.submitter;o&&null!==(t=(t=o[Oe]||null)?Ph(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new ti("action","action",null,r,n);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ch){var e=o?jh(n,o):new FormData(n);jo(i,{pending:!0,data:e,method:n.method,action:s},null,e)}}else"function"==typeof s&&(a.preventDefault(),e=o?jh(n,o):new FormData(n),jo(i,{pending:!0,data:e,method:n.method,action:s},s,e))},currentTarget:n}]})}}(o,e,r,i,n)}Fh(o,t)})}function qh(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Kh(e,t){for(var i=t+"Capture",r=[];null!==e;){var n=e,s=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===s||(null!=(n=Ft(e,i))&&r.unshift(qh(e,n,s)),null!=(n=Ft(e,t))&&r.push(qh(e,n,s))),3===e.tag)return r;e=e.return}return[]}function Gh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Yh(e,t,i,r,n){for(var s=t._reactName,o=[];null!==i&&i!==r;){var a=i,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,n?null!=(c=Ft(i,s))&&o.unshift(qh(i,c,l)):n||null!=(c=Ft(i,s))&&o.push(qh(i,c,l))),i=i.return}0!==o.length&&e.push({event:t,listeners:o})}var Xh=/\r\n?/g,Qh=/\u0000|\uFFFD/g;function Jh(e){return("string"==typeof e?e:""+e).replace(Xh,"\n").replace(Qh,"")}function Zh(e,t){return t=Jh(t),Jh(e)===t}function ed(){}function td(e,t,i,r,n,o){switch(i){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||Ct(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&Ct(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,i,r);break;case"style":Lt(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(i);break}r=Rt(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===i?("input"!==t&&td(e,t,"name",n.name,n,null),td(e,t,"formEncType",n.formEncType,n,null),td(e,t,"formMethod",n.formMethod,n,null),td(e,t,"formTarget",n.formTarget,n,null)):(td(e,t,"encType",n.encType,n,null),td(e,t,"method",n.method,n,null),td(e,t,"target",n.target,n,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(i);break}r=Rt(""+r),e.setAttribute(i,r);break;case"onClick":null!=r&&(e.onclick=ed);break;case"onScroll":null!=r&&zh("scroll",e);break;case"onScrollEnd":null!=r&&zh("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(s(61));if(null!=(i=r.__html)){if(null!=n.children)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}i=Rt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===r?e.setAttribute(i,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":zh("beforetoggle",e),zh("toggle",e),rt(e,"popover",r);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":rt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&rt(e,i=Mt.get(i)||i,r)}}function id(e,t,i,r,n,o){switch(i){case"style":Lt(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(s(61));if(null!=(i=r.__html)){if(null!=n.children)throw Error(s(60));e.innerHTML=i}}break;case"children":"string"==typeof r?Ct(e,r):("number"==typeof r||"bigint"==typeof r)&&Ct(e,""+r);break;case"onScroll":null!=r&&zh("scroll",e);break;case"onScrollEnd":null!=r&&zh("scrollend",e);break;case"onClick":null!=r&&(e.onclick=ed);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(n=i.endsWith("Capture"),t=i.slice(2,n?i.length-7:void 0),"function"==typeof(o=null!=(o=e[Oe]||null)?o[i]:null)&&e.removeEventListener(t,o,n),"function"!=typeof r)?i in e?e[i]=r:!0===r?e.setAttribute(i,""):rt(e,i,r):("function"!=typeof o&&null!==o&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,n)))}}function rd(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zh("error",e),zh("load",e);var r,n=!1,o=!1;for(r in i)if(i.hasOwnProperty(r)){var a=i[r];if(null!=a)switch(r){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:td(e,t,r,a,i,null)}}return o&&td(e,t,"srcSet",i.srcSet,i,null),void(n&&td(e,t,"src",i.src,i,null));case"input":zh("invalid",e);var l=r=a=o=null,c=null,h=null;for(n in i)if(i.hasOwnProperty(n)){var d=i[n];if(null!=d)switch(n){case"name":o=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:td(e,t,n,d,i,null)}}return bt(e,r,l,c,h,a,o,!1),void ft(e);case"select":for(o in zh("invalid",e),n=a=r=null,i)if(i.hasOwnProperty(o)&&null!=(l=i[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":n=l;default:td(e,t,o,l,i,null)}return t=r,i=a,e.multiple=!!n,void(null!=t?xt(e,!!n,t,!1):null!=i&&xt(e,!!n,i,!0));case"textarea":for(a in zh("invalid",e),r=o=n=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":n=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:td(e,t,a,l,i,null)}return wt(e,n,o,r),void ft(e);case"option":for(c in i)if(i.hasOwnProperty(c)&&null!=(n=i[c]))if("selected"===c)e.selected=n&&"function"!=typeof n&&"symbol"!=typeof n;else td(e,t,c,n,i,null);return;case"dialog":zh("beforetoggle",e),zh("toggle",e),zh("cancel",e),zh("close",e);break;case"iframe":case"object":zh("load",e);break;case"video":case"audio":for(n=0;n<Ih.length;n++)zh(Ih[n],e);break;case"image":zh("error",e),zh("load",e);break;case"details":zh("toggle",e);break;case"embed":case"source":case"link":zh("error",e),zh("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in i)if(i.hasOwnProperty(h)&&null!=(n=i[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:td(e,t,h,n,i,null)}return;default:if(Dt(t)){for(d in i)i.hasOwnProperty(d)&&(void 0!==(n=i[d])&&id(e,t,d,n,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(n=i[l])&&td(e,t,l,n,i,null))}var nd=null,sd=null;function od(e){return 9===e.nodeType?e:e.ownerDocument}function ad(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ld(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function cd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var hd=null;var dd="function"==typeof setTimeout?setTimeout:void 0,ud="function"==typeof clearTimeout?clearTimeout:void 0,fd="function"==typeof Promise?Promise:void 0,pd="function"==typeof queueMicrotask?queueMicrotask:void 0!==fd?function(e){return fd.resolve(null).then(e).catch(gd)}:dd;function gd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function _d(e,t){var i=t,r=0,n=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&8===s.nodeType)if("/$"===(i=s.data)){if(0<r&&8>r){i=r;var o=e.ownerDocument;if(1&i&&Cd(o.documentElement),2&i&&Cd(o.body),4&i)for(Cd(i=o.head),o=i.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[He]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||i.removeChild(o),o=a}}if(0===n)return e.removeChild(s),void Au(t);n--}else"$"===i||"$?"===i||"$!"===i?n++:r=i.charCodeAt(0)-48;else r=0;i=s}while(i);Au(t)}function vd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":vd(i),We(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function bd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var xd=null;function Sd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}function wd(e,t,i){switch(t=od(i),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Cd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);We(e)}var kd=new Map,Ed=new Set;function Ld(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Dd=j.d;j.d={f:function(){var e=Dd.f(),t=Uc();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Bo(t):Dd.r(e)},D:function(e){Dd.D(e),Ad("dns-prefetch",e,null)},C:function(e,t){Dd.C(e,t),Ad("preconnect",e,t)},L:function(e,t,i){Dd.L(e,t,i);var r=Md;if(r&&e&&t){var n='link[rel="preload"][as="'+_t(t)+'"]';"image"===t&&i&&i.imageSrcSet?(n+='[imagesrcset="'+_t(i.imageSrcSet)+'"]',"string"==typeof i.imageSizes&&(n+='[imagesizes="'+_t(i.imageSizes)+'"]')):n+='[href="'+_t(e)+'"]';var s=n;switch(t){case"style":s=Td(e);break;case"script":s=Od(e)}kd.has(s)||(e=d({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),kd.set(s,e),null!==r.querySelector(n)||"style"===t&&r.querySelector(Pd(s))||"script"===t&&r.querySelector(Bd(s))||(rd(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}},m:function(e,t){Dd.m(e,t);var i=Md;if(i&&e){var r=t&&"string"==typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+_t(r)+'"][href="'+_t(e)+'"]',s=n;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Od(e)}if(!kd.has(s)&&(e=d({rel:"modulepreload",href:e},t),kd.set(s,e),null===i.querySelector(n))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Bd(s)))return}rd(r=i.createElement("link"),"link",e),Ke(r),i.head.appendChild(r)}}},X:function(e,t){Dd.X(e,t);var i=Md;if(i&&e){var r=qe(i).hoistableScripts,n=Od(e),s=r.get(n);s||((s=i.querySelector(Bd(n)))||(e=d({src:e,async:!0},t),(t=kd.get(n))&&zd(e,t),Ke(s=i.createElement("script")),rd(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(n,s))}},S:function(e,t,i){Dd.S(e,t,i);var r=Md;if(r&&e){var n=qe(r).hoistableStyles,s=Td(e);t=t||"default";var o=n.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Pd(s)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},i),(i=kd.get(s))&&Fd(e,i);var l=o=r.createElement("link");Ke(l),rd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Nd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},n.set(s,o)}}},M:function(e,t){Dd.M(e,t);var i=Md;if(i&&e){var r=qe(i).hoistableScripts,n=Od(e),s=r.get(n);s||((s=i.querySelector(Bd(n)))||(e=d({src:e,async:!0,type:"module"},t),(t=kd.get(n))&&zd(e,t),Ke(s=i.createElement("script")),rd(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(n,s))}}};var Md="undefined"==typeof document?null:document;function Ad(e,t,i){var r=Md;if(r&&"string"==typeof t&&t){var n=_t(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"==typeof i&&(n+='[crossorigin="'+i+'"]'),Ed.has(n)||(Ed.add(n),e={rel:e,crossOrigin:i,href:t},null===r.querySelector(n)&&(rd(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}}function Rd(e,t,i,r){var n,o,a,l,c=(c=$.current)?Ld(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof i.precedence&&"string"==typeof i.href?(t=Td(i.href),(r=(i=qe(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"==typeof i.href&&"string"==typeof i.precedence){e=Td(i.href);var h=qe(c).hoistableStyles,d=h.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,d),(h=c.querySelector(Pd(e)))&&!h._p&&(d.instance=h,d.state.loading=5),kd.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},kd.set(e,i),h||(n=c,o=e,a=i,l=d.state,n.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=n.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),rd(o,"link",a),Ke(o),n.head.appendChild(o))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=i.async,"string"==typeof(i=i.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Od(i),(r=(i=qe(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Td(e){return'href="'+_t(e)+'"'}function Pd(e){return'link[rel="stylesheet"]['+e+"]"}function jd(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Od(e){return'[src="'+_t(e)+'"]'}function Bd(e){return"script[async]"+e}function Id(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+_t(i.href)+'"]');if(r)return t.instance=r,Ke(r),r;var n=d({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return Ke(r=(e.ownerDocument||e).createElement("style")),rd(r,"style",n),Nd(r,i.precedence,e),t.instance=r;case"stylesheet":n=Td(i.href);var o=e.querySelector(Pd(n));if(o)return t.state.loading|=4,t.instance=o,Ke(o),o;r=jd(i),(n=kd.get(n))&&Fd(r,n),Ke(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),rd(o,"link",r),t.state.loading|=4,Nd(o,i.precedence,e),t.instance=o;case"script":return o=Od(i.src),(n=e.querySelector(Bd(o)))?(t.instance=n,Ke(n),n):(r=i,(n=kd.get(o))&&zd(r=d({},i),n),Ke(n=(e=e.ownerDocument||e).createElement("script")),rd(n,"link",r),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Nd(r,i.precedence,e));return t.instance}function Nd(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=r.length?r[r.length-1]:null,s=n,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==n)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Hd=null;function Wd(e,t,i){if(null===Hd){var r=new Map,n=Hd=new Map;n.set(i,r)}else(r=(n=Hd).get(i))||(r=new Map,n.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),n=0;n<i.length;n++){var s=i[n];if(!(s[He]||s[je]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function $d(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function Ud(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Vd=null;function qd(){}function Kd(){if(this.count--,0===this.count)if(this.stylesheets)Yd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Yd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Xd,e),Gd=null,Kd.call(e))}function Xd(e,t){if(!(4&t.state.loading)){var i=Gd.get(e);if(i)var r=i.get(null);else{i=new Map,Gd.set(e,i);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<n.length;s++){var o=n[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(i.set(o.dataset.precedence,o),r=o)}r&&i.set(null,r)}o=(n=t.instance).getAttribute("data-precedence"),(s=i.get(o)||r)===r&&i.set(null,n),i.set(o,n),this.count++,r=Kd.bind(this),n.addEventListener("load",r),n.addEventListener("error",r),s?s.parentNode.insertBefore(n,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}var Qd={$$typeof:y,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Jd(e,t,i,r,n,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=we(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=we(0),this.hiddenUpdates=we(null),this.identifierPrefix=r,this.onUncaughtError=n,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Zd(e,t,i,r,n,s,o,a,l,c,h,d){return e=new Jd(e,t,i,o,a,l,c,d),t=1,!0===s&&(t|=24),s=Ir(3,null,null,t),e.current=s,s.stateNode=e,(t=On()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:i,cache:t},ns(s),e}function eu(e){return e?e=Or:Or}function tu(e,t,i,r,n,s){n=eu(n),null===r.context?r.context=n:r.pendingContext=n,(r=os(t)).payload={element:i},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(i=as(e,r,t))&&(Fc(i,0,t),ls(i,e,t))}function iu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function ru(e,t){iu(e,t),(e=e.alternate)&&iu(e,t)}function nu(e){if(13===e.tag){var t=Tr(e,67108864);null!==t&&Fc(t,0,67108864),ru(e,67108864)}}var su=!0;function ou(e,t,i,r){var n=P.T;P.T=null;var s=j.p;try{j.p=2,lu(e,t,i,r)}finally{j.p=s,P.T=n}}function au(e,t,i,r){var n=P.T;P.T=null;var s=j.p;try{j.p=8,lu(e,t,i,r)}finally{j.p=s,P.T=n}}function lu(e,t,i,r){if(su){var n=cu(r);if(null===n)Vh(e,t,r,hu,i),xu(e,r);else if(function(e,t,i,r,n){switch(t){case"focusin":return pu=Su(pu,e,t,i,r,n),!0;case"dragenter":return gu=Su(gu,e,t,i,r,n),!0;case"mouseover":return mu=Su(mu,e,t,i,r,n),!0;case"pointerover":var s=n.pointerId;return _u.set(s,Su(_u.get(s)||null,e,t,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,vu.set(s,Su(vu.get(s)||null,e,t,i,r,n)),!0}return!1}(n,e,t,i,r))r.stopPropagation();else if(xu(e,r),4&t&&-1<yu.indexOf(e)){for(;null!==n;){var s=Ue(n);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=_e(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-ue(o);a.entanglements[1]|=l,o&=~l}kh(s),!(6&sc)&&(kc=ee()+500,Eh(0))}}break;case 13:null!==(a=Tr(s,2))&&Fc(a,0,2),Uc(),ru(s,2)}if(null===(s=cu(r))&&Vh(e,t,r,hu,i),s===n)break;n=s}null!==n&&r.stopPropagation()}else Vh(e,t,r,null,i)}}function cu(e){return du(e=Pt(e))}var hu=null;function du(e){if(hu=null,null!==(e=$e(e))){var t=a(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=l(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hu=e,null}function uu(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case ie:return 2;case re:return 8;case ne:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var fu=!1,pu=null,gu=null,mu=null,_u=new Map,vu=new Map,bu=[],yu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xu(e,t){switch(e){case"focusin":case"focusout":pu=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":mu=null;break;case"pointerover":case"pointerout":_u.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(t.pointerId)}}function Su(e,t,i,r,n,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},null!==t&&(null!==(t=Ue(t))&&nu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function wu(e){var t=$e(e.target);if(null!==t){var i=a(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=l(i)))return e.blockedOn=t,void function(e,t){var i=j.p;try{return j.p=e,t()}finally{j.p=i}}(e.priority,function(){if(13===i.tag){var e=Ic();e=De(e);var t=Tr(i,e);null!==t&&Fc(t,0,e),ru(i,e)}})}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Cu(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=cu(e.nativeEvent);if(null!==i)return null!==(t=Ue(i))&&nu(t),e.blockedOn=i,!1;var r=new(i=e.nativeEvent).constructor(i.type,i);Tt=r,i.target.dispatchEvent(r),Tt=null,t.shift()}return!0}function ku(e,t,i){Cu(e)&&i.delete(t)}function Eu(){fu=!1,null!==pu&&Cu(pu)&&(pu=null),null!==gu&&Cu(gu)&&(gu=null),null!==mu&&Cu(mu)&&(mu=null),_u.forEach(ku),vu.forEach(ku)}function Lu(e,t){e.blockedOn===t&&(e.blockedOn=null,fu||(fu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Eu)))}var Du=null;function Mu(e){Du!==e&&(Du=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Du===e&&(Du=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],n=e[t+2];if("function"!=typeof r){if(null===du(r||i))continue;break}var s=Ue(i);null!==s&&(e.splice(t,3),t-=3,jo(s,{pending:!0,data:n,method:i.method,action:r},r,n))}}))}function Au(e){function t(t){return Lu(t,e)}null!==pu&&Lu(pu,e),null!==gu&&Lu(gu,e),null!==mu&&Lu(mu,e),_u.forEach(t),vu.forEach(t);for(var i=0;i<bu.length;i++){var r=bu[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<bu.length&&null===(i=bu[0]).blockedOn;)wu(i),null===i.blockedOn&&bu.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<i.length;r+=3){var n=i[r],s=i[r+1],o=n[Oe]||null;if("function"==typeof s)o||Mu(i);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(n=s,o=s[Oe]||null)a=o.formAction;else if(null!==du(n))continue}else a=o.action;"function"==typeof a?i[r+1]=a:(i.splice(r,3),r-=3),Mu(i)}}}function Ru(e){this._internalRoot=e}function Tu(e){this._internalRoot=e}Tu.prototype.render=Ru.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));tu(t.current,Ic(),e,t,null,null)},Tu.prototype.unmount=Ru.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;tu(e.current,2,null,e,null,null),Uc(),t[Be]=null}},Tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var i=0;i<bu.length&&0!==t&&t<bu[i].priority;i++);bu.splice(i,0,e),0===i&&wu(e)}};var Pu=r.version;if("19.1.1"!==Pu)throw Error(s(527,Pu,"19.1.1"));j.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error(s(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(null===n)break;var o=n.alternate;if(null===o){if(null!==(r=n.return)){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return c(n),e;if(o===r)return c(n),t;o=o.sibling}throw Error(s(188))}if(i.return!==r.return)i=n,r=o;else{for(var l=!1,h=n.child;h;){if(h===i){l=!0,i=n,r=o;break}if(h===r){l=!0,r=n,i=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===i){l=!0,i=o,r=n;break}if(h===r){l=!0,r=o,i=n;break}h=h.sibling}if(!l)throw Error(s(189))}}if(i.alternate!==r)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var ju={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{ce=Ou.inject(ju),he=Ou}catch(Bu){}}return Me.createRoot=function(e,t){if(!o(e))throw Error(s(299));var i=!1,r="",n=xa,a=Sa,l=wa;return null!=t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(n=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Zd(e,1,!1,null,0,i,r,n,a,l,0,null),e[Be]=t.current,$h(e),new Ru(t)},Me.hydrateRoot=function(e,t,i){if(!o(e))throw Error(s(299));var r=!1,n="",a=xa,l=Sa,c=wa,h=null;return null!=i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(n=i.identifierPrefix),void 0!==i.onUncaughtError&&(a=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(c=i.onRecoverableError),void 0!==i.unstable_transitionCallbacks&&i.unstable_transitionCallbacks,void 0!==i.formState&&(h=i.formState)),(t=Zd(e,1,!0,t,0,r,n,a,l,c,0,h)).context=eu(null),i=t.current,(n=os(r=De(r=Ic()))).callback=null,as(i,n,r),i=r,t.current.lanes=i,Ce(t,i),kh(t),e[Be]=t.current,$h(e),new Tu(t)},Me.version="19.1.1",Me}var je=(Le||(Le=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),De.exports=Pe()),De.exports);const Oe=i.createContext(),Be=()=>{const e=i.useContext(Oe);if(!e)throw new Error("useTerminal must be used within TerminalProvider");return e},Ie=({children:e})=>{const[t,n]=i.useState({isOpen:!1,serverId:null,nodeId:null,name:null});return r.jsx(Oe.Provider,{value:{...t,openTerminal:({serverId:e,nodeId:t,name:i})=>{n({isOpen:!0,serverId:e||null,nodeId:t||null,name:i||null})},closeTerminal:()=>{n({isOpen:!1,serverId:null,nodeId:null,name:null})},toggleTerminal:()=>{n(e=>({...e,isOpen:!e.isOpen}))}},children:e})};function Ne(e){const t=function(e){if(!e)return!1;const t="solid"===e.accentType&&"#636363"===e.accentColor1,i="gradient"===e.backgroundType&&"#404040"===e.backgroundColor1&&"#16191d"===e.backgroundColor2;return t&&i}(e),i=t?function(e){return e?"#111111"===ae(e,"accent")?"static/logo.svg-2":"static/logo.svg":null}(e):null;return{isActive:t,logoSrc:i}}const Fe=({show:e,onClose:t})=>{const{customSettings:p,setCustomSettings:g}=i.useContext(le),[m,_]=i.useState("theme"),[v,b]=i.useState(!1),[y,x]=i.useState([]),S=i.useRef(null),w=ce(p.backgroundColor1),C=(e,t)=>{g(i=>{const r={...i,[e]:t};return v||g(r),r})};return e?r.jsx("div",{className:"theme-popup-overlay",onClick:t,children:r.jsxs("div",{className:"theme-popup advanced-popup",onClick:e=>e.stopPropagation(),style:{borderRadius:`${p.borderRadius}px`,backdropFilter:`blur(${p.backdropBlur}px)`,background:"solid"===p.backgroundType?`${p.backgroundColor1}ee`:`linear-gradient(135deg, ${p.backgroundColor1}ee, ${p.backgroundColor2}ee)`},children:[r.jsxs("div",{className:"popup-header",style:{color:w},children:[r.jsxs("h3",{style:{color:w},children:[r.jsx(n,{size:20,style:{color:w}}),"Theme Customizer"]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("button",{onClick:()=>b(!v),className:v?"active":"",style:{color:w},children:[r.jsx(s,{size:16,style:{color:w}})," ",v?"Live":"Preview"]}),r.jsx("button",{onClick:()=>{g({accentType:"gradient",accentColor1:"#6366f1",accentColor2:"#8b5cf6",fontFamily:"Inter",fontSize:"14",fontWeight:"400",letterSpacing:"0",lineHeight:"1.5",cpuColor:"#4fc3f7",gpuColor:"#26c6da",ramColor:"#81c784",storageColor:"#ffb74d",networkColor:"#f06292",borderRadius:"12",glassEffect:!0,shadowIntensity:"3",animationSpeed:"0.3",backdropBlur:"12",backgroundType:"gradient",backgroundColor1:"#0f0f23",backgroundColor2:"#1a1a2e",textColor:"#ffffff",secondaryTextColor:"#a0a0a0",particleEffect:!1,gradientAnimation:!0,hoverEffects:!0,customCursor:!1})},title:"Reset to defaults",style:{color:w},children:r.jsx(o,{size:16,style:{color:w}})})]})]}),r.jsx("div",{className:"tabs-container",children:r.jsxs("div",{className:"tabs",children:[r.jsxs("button",{className:"theme"===m?"active":"",onClick:()=>_("theme"),style:{color:w},children:[r.jsx(a,{size:16,style:{color:w}})," Theme Mode"]}),r.jsxs("button",{className:"colors"===m?"active":"",onClick:()=>_("colors"),style:{color:w},children:[r.jsx(l,{size:16,style:{color:w}})," Colors & Effects"]}),r.jsxs("button",{className:"typography"===m?"active":"",onClick:()=>_("typography"),style:{color:w},children:[r.jsx(c,{size:16,style:{color:w}})," Typography"]}),r.jsxs("button",{className:"graphs"===m?"active":"",onClick:()=>_("graphs"),style:{color:w},children:[r.jsx(h,{}),"Graph Colors"]}),r.jsxs("button",{className:"advanced"===m?"active":"",onClick:()=>_("advanced"),style:{color:w},children:[r.jsx(d,{size:16,style:{color:w}})," Advanced"]}),r.jsxs("button",{className:"presets"===m?"active":"",onClick:()=>_("presets"),style:{color:w},children:[r.jsx(u,{size:16,style:{color:w}})," Presets"]})]})}),r.jsxs("div",{className:"tab-content",style:{color:w},children:["theme"===m&&r.jsxs("div",{className:"settings-section",children:[r.jsx("h4",{style:{color:w},children:"Background Style"}),r.jsxs("div",{className:"radio-group",children:[r.jsxs("label",{className:"radio-label",style:{color:w},children:[r.jsx("input",{type:"radio",value:"solid",checked:"solid"===p.backgroundType,onChange:e=>C("backgroundType",e.target.value)}),r.jsx("span",{className:"radio-custom"}),"Solid Background"]}),r.jsxs("label",{className:"radio-label",style:{color:w},children:[r.jsx("input",{type:"radio",value:"gradient",checked:"gradient"===p.backgroundType,onChange:e=>C("backgroundType",e.target.value)}),r.jsx("span",{className:"radio-custom"}),"Gradient Background"]})]}),r.jsxs("div",{className:"color-grid",children:[r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Background Color 1"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.backgroundColor1,onChange:e=>C("backgroundColor1",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.backgroundColor1}})]})]}),"gradient"===p.backgroundType&&r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Background Color 2"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.backgroundColor2,onChange:e=>C("backgroundColor2",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.backgroundColor2}})]})]})]})]}),"colors"===m&&r.jsxs("div",{className:"settings-section",children:[r.jsx("h4",{style:{color:w},children:"Accent Colors"}),r.jsxs("div",{className:"radio-group",children:[r.jsxs("label",{className:"radio-label",style:{color:w},children:[r.jsx("input",{type:"radio",value:"solid",checked:"solid"===p.accentType,onChange:e=>C("accentType",e.target.value)}),r.jsx("span",{className:"radio-custom"}),"Solid Accent"]}),r.jsxs("label",{className:"radio-label",style:{color:w},children:[r.jsx("input",{type:"radio",value:"gradient",checked:"gradient"===p.accentType,onChange:e=>C("accentType",e.target.value)}),r.jsx("span",{className:"radio-custom"}),"Gradient Accent"]})]}),r.jsxs("div",{className:"color-grid",children:[r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Primary Accent"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.accentColor1,onChange:e=>C("accentColor1",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.accentColor1}})]})]}),"gradient"===p.accentType&&r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Secondary Accent"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.accentColor2,onChange:e=>C("accentColor2",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.accentColor2}})]})]})]}),"gradient"===p.accentType&&r.jsx("div",{className:"gradient-preview-large",style:{background:`linear-gradient(45deg, ${p.accentColor1}, ${p.accentColor2})`,color:w},children:"Gradient Preview"}),r.jsx("h4",{style:{color:w},children:"Text Colors"}),r.jsxs("div",{className:"color-grid",children:[r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Primary Text"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.textColor,onChange:e=>C("textColor",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.textColor},onClick:e=>e.target.previousElementSibling.click()})]})]}),r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Secondary Text"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.secondaryTextColor,onChange:e=>C("secondaryTextColor",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.secondaryTextColor},onClick:e=>e.target.previousElementSibling.click()})]})]})]})]}),"typography"===m&&r.jsxs("div",{className:"settings-section",children:[r.jsx("h4",{style:{color:w},children:"Font Family"}),r.jsx("select",{value:p.fontFamily,onChange:e=>C("fontFamily",e.target.value),className:"font-select",style:{color:w},children:["Inter","Roboto","Open Sans","Poppins","Montserrat","Source Sans Pro","Lato","Nunito","Raleway","Ubuntu","Playfair Display","Merriweather","Fira Sans","IBM Plex Sans","Work Sans"].map(e=>r.jsx("option",{value:e,style:{fontFamily:e},children:e},e))}),r.jsxs("div",{className:"typography-controls",children:[r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:[r.jsx(l,{size:16,style:{color:w}})," Font Size"]}),r.jsxs("div",{className:"input-with-slider",children:[r.jsx("input",{type:"number",min:"10",max:"24",value:p.fontSize,onChange:e=>C("fontSize",e.target.value),className:"number-input",style:{color:w}}),r.jsx("input",{type:"range",min:"10",max:"24",value:p.fontSize,onChange:e=>C("fontSize",e.target.value),className:"slider"})]})]}),r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:[r.jsx(l,{size:16,style:{color:w}})," Font Weight"]}),r.jsxs("div",{className:"input-with-slider",children:[r.jsx("input",{type:"number",min:"100",max:"900",step:"100",value:p.fontWeight,onChange:e=>C("fontWeight",e.target.value),className:"number-input",style:{color:w}}),r.jsx("input",{type:"range",min:"100",max:"900",step:"100",value:p.fontWeight,onChange:e=>C("fontWeight",e.target.value),className:"slider"})]})]}),r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:[r.jsx(l,{size:16,style:{color:w}})," Letter Spacing"]}),r.jsxs("div",{className:"input-with-slider",children:[r.jsx("input",{type:"number",min:"-2",max:"4",step:"0.1",value:p.letterSpacing,onChange:e=>C("letterSpacing",e.target.value),className:"number-input",style:{color:w}}),r.jsx("input",{type:"range",min:"-2",max:"4",step:"0.1",value:p.letterSpacing,onChange:e=>C("letterSpacing",e.target.value),className:"slider"})]})]}),r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:[r.jsx(l,{size:16,style:{color:w}})," Line Height"]}),r.jsxs("div",{className:"input-with-slider",children:[r.jsx("input",{type:"number",min:"1",max:"2",step:"0.1",value:p.lineHeight,onChange:e=>C("lineHeight",e.target.value),className:"number-input",style:{color:w}}),r.jsx("input",{type:"range",min:"1",max:"2",step:"0.1",value:p.lineHeight,onChange:e=>C("lineHeight",e.target.value),className:"slider"})]})]})]}),r.jsxs("div",{className:"typography-preview",style:{fontFamily:p.fontFamily,fontSize:`${p.fontSize}px`,fontWeight:p.fontWeight,letterSpacing:`${p.letterSpacing}px`,lineHeight:p.lineHeight,color:w},children:[r.jsx("h3",{style:{color:w},children:"Typography Preview"}),r.jsx("p",{style:{color:w},children:"This is how your text will look with the current settings. You can adjust the font family, size, weight, letter spacing, and line height above."})]})]}),"graphs"===m&&r.jsxs("div",{className:"settings-section",children:[r.jsx("h4",{style:{color:w},children:"Graph & Metric Colors"}),r.jsxs("div",{className:"color-grid",children:[r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"CPU Graph"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.cpuColor,onChange:e=>C("cpuColor",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.cpuColor}})]})]}),r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"GPU Graph"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.gpuColor,onChange:e=>C("gpuColor",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.gpuColor}})]})]}),r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"RAM Graph"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.ramColor,onChange:e=>C("ramColor",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.ramColor}})]})]}),r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Storage Graph"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.storageColor,onChange:e=>C("storageColor",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.storageColor}})]})]}),r.jsxs("div",{className:"color-input-group",children:[r.jsx("label",{style:{color:w},children:"Network Graph"}),r.jsxs("div",{className:"color-picker-wrapper",children:[r.jsx("input",{type:"color",value:p.networkColor,onChange:e=>C("networkColor",e.target.value)}),r.jsx("div",{className:"color-preview",style:{background:p.networkColor}})]})]})]}),r.jsxs("div",{className:"graph-controls",children:[r.jsxs("button",{className:"action-btn small-btn",style:{color:w},onClick:()=>{const e=p.cpuColor;C("gpuColor",e),C("ramColor",e),C("storageColor",e),C("networkColor",e)},children:[r.jsx(l,{size:14,style:{color:w}})," Same Color"]}),r.jsx("div",{className:"preset-buttons",children:r.jsxs("div",{className:"preset-grid",children:[r.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#E1FDFE"),C("gpuColor","#B8FDFF"),C("ramColor","#BDFFF4"),C("storageColor","#91B0B1"),C("networkColor","#008C8F")},children:[r.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #E1FDFE, #B8FDFF, #BDFFF4, #91B0B1, #008C8F)"}}),r.jsx("span",{style:{color:w},children:"Alterion"})]}),r.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#4fc3f7"),C("gpuColor","#26c6da"),C("ramColor","#81c784"),C("storageColor","#ffb74d"),C("networkColor","#f06292")},children:[r.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #4fc3f7, #26c6da, #81c784, #ffb74d, #f06292)"}}),r.jsx("span",{style:{color:w},children:"Default"})]}),r.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#3b82f6"),C("gpuColor","#1d4ed8"),C("ramColor","#06b6d4"),C("storageColor","#0ea5e9"),C("networkColor","#0284c7")},children:[r.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #3b82f6, #1d4ed8, #06b6d4, #0ea5e9, #0284c7)"}}),r.jsx("span",{style:{color:w},children:"Cool Blues"})]}),r.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#f97316"),C("gpuColor","#dc2626"),C("ramColor","#ef4444"),C("storageColor","#ec4899"),C("networkColor","#f59e0b")},children:[r.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #f97316, #dc2626, #ef4444, #ec4899, #f59e0b)"}}),r.jsx("span",{style:{color:w},children:"Warm Reds"})]}),r.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#22c55e"),C("gpuColor","#059669"),C("ramColor","#16a34a"),C("storageColor","#15803d"),C("networkColor","#166534")},children:[r.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #22c55e, #059669, #16a34a, #15803d, #166534)"}}),r.jsx("span",{style:{color:w},children:"Forest"})]}),r.jsxs("div",{className:"preset-item",onClick:()=>{C("cpuColor","#8b5cf6"),C("gpuColor","#7c3aed"),C("ramColor","#a855f7"),C("storageColor","#c084fc"),C("networkColor","#d946ef")},children:[r.jsx("div",{className:"preset-circle",style:{background:"linear-gradient(45deg, #8b5cf6, #7c3aed, #a855f7, #c084fc, #d946ef)"}}),r.jsx("span",{style:{color:w},children:"Purple"})]})]})})]})]}),"advanced"===m&&r.jsxs("div",{className:"settings-section",children:[r.jsx("h4",{style:{color:w},children:"Visual Effects"}),r.jsxs("div",{className:"effects-controls",children:[r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:["Border Radius: ",p.borderRadius,"px"]}),r.jsx("input",{type:"range",min:"0",max:"30",value:p.borderRadius,onChange:e=>C("borderRadius",e.target.value),className:"slider"})]}),r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:["Shadow Intensity: ",p.shadowIntensity]}),r.jsx("input",{type:"range",min:"0",max:"9",value:p.shadowIntensity,onChange:e=>C("shadowIntensity",e.target.value),className:"slider"})]}),r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:["Animation Speed: ",p.animationSpeed,"s"]}),r.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:p.animationSpeed,onChange:e=>C("animationSpeed",e.target.value),className:"slider"})]}),r.jsxs("div",{className:"control-group",children:[r.jsxs("label",{style:{color:w},children:["Backdrop Blur: ",p.backdropBlur,"px"]}),r.jsx("input",{type:"range",min:"0",max:"30",value:p.backdropBlur,onChange:e=>C("backdropBlur",e.target.value),className:"slider"})]})]}),r.jsx("h4",{style:{color:w},children:"Special Effects"}),r.jsxs("div",{className:"toggle-group",children:[r.jsxs("label",{className:"toggle-label",style:{color:w},children:[r.jsx("input",{type:"checkbox",checked:p.glassEffect,onChange:e=>C("glassEffect",e.target.checked)}),r.jsx("span",{className:"toggle-switch"}),"Glass Effect"]}),r.jsxs("label",{className:"toggle-label",style:{color:w},children:[r.jsx("input",{type:"checkbox",checked:p.gradientAnimation,onChange:e=>C("gradientAnimation",e.target.checked)}),r.jsx("span",{className:"toggle-switch"}),"Gradient Animation"]}),r.jsxs("label",{className:"toggle-label",style:{color:w},children:[r.jsx("input",{type:"checkbox",checked:p.hoverEffects,onChange:e=>C("hoverEffects",e.target.checked)}),r.jsx("span",{className:"toggle-switch"}),"Enhanced Hover Effects"]}),r.jsxs("label",{className:"toggle-label",style:{color:w},children:[r.jsx("input",{type:"checkbox",checked:p.particleEffect,onChange:e=>C("particleEffect",e.target.checked)}),r.jsx("span",{className:"toggle-switch"}),"Particle Background"]})]})]}),"presets"===m&&r.jsxs("div",{className:"settings-section",children:[r.jsx("h4",{style:{color:w},children:"Theme Presets"}),r.jsx("div",{className:"preset-grid",children:[{name:"Alterion",settings:{accentType:"solid",accentColor1:"#636363",backgroundColor1:"#404040",backgroundColor2:"#16191d",backgroundType:"gradient"}},{name:"Ocean Breeze",settings:{accentColor1:"#0ea5e9",accentColor2:"#06b6d4",backgroundColor1:"#0c4a6e",backgroundColor2:"#164e63"}},{name:"Sunset Glow",settings:{accentColor1:"#f97316",accentColor2:"#ef4444",backgroundColor1:"#7c2d12",backgroundColor2:"#991b1b"}},{name:"Forest Night",settings:{accentColor1:"#22c55e",accentColor2:"#16a34a",backgroundColor1:"#14532d",backgroundColor2:"#166534"}},{name:"Purple Haze",settings:{accentColor1:"#8b5cf6",accentColor2:"#a855f7",backgroundColor1:"#581c87",backgroundColor2:"#6b21a8"}},{name:"Rose Gold",settings:{accentColor1:"#f59e0b",accentColor2:"#ec4899",backgroundColor1:"#92400e",backgroundColor2:"#be185d"}}].map((e,t)=>r.jsx("div",{className:"preset-card",onClick:()=>{Object.keys(e.settings).forEach(t=>{C(t,e.settings[t])})},style:{background:`linear-gradient(45deg, ${e.settings.accentColor1}, ${e.settings.accentColor2})`},children:r.jsx("span",{style:{color:w},children:e.name})},t))}),r.jsx("h4",{style:{color:w},children:"Saved Themes"}),r.jsx("div",{className:"saved-themes",children:0===y.length?r.jsx("p",{className:"no-saved-themes",style:{color:w},children:"No saved themes yet"}):r.jsx("div",{className:"saved-themes-list",children:y.map((e,t)=>r.jsxs("div",{className:"saved-theme-item",children:[r.jsx("span",{style:{color:w},children:e.name}),r.jsx("button",{onClick:()=>{return t=e.settings,void g(t);var t},style:{color:w},children:"Load"})]},t))})})]})]}),v&&r.jsxs("div",{className:"preview-section",children:[r.jsx("h4",{style:{color:w},children:"Live Preview"}),r.jsxs("div",{className:"preview-container",ref:S,children:[r.jsx("div",{className:"preview-header",style:{background:he(p,"header"),borderRadius:`${p.borderRadius}px`,backdropFilter:p.glassEffect?`blur(${p.backdropBlur}px)`:"none",boxShadow:`0 ${2*p.shadowIntensity}px ${8*p.shadowIntensity}px rgba(0,0,0,0.${p.shadowIntensity})`},children:r.jsx("span",{style:{fontFamily:p.fontFamily,fontSize:`${p.fontSize}px`,fontWeight:p.fontWeight,letterSpacing:`${p.letterSpacing}px`,lineHeight:p.lineHeight,color:ae(p,"background")},children:"Alterion Panel Preview"})}),r.jsxs("div",{className:"preview-main",style:{background:"gradient"===p.backgroundType?`linear-gradient(135deg, ${p.backgroundColor1}, ${p.backgroundColor2})`:p.backgroundColor1,color:w,fontFamily:p.fontFamily,fontSize:`${p.fontSize}px`,borderRadius:`${p.borderRadius}px`},children:[r.jsx("p",{style:{color:w},children:"This is how your app background and text will look with the current settings."}),r.jsx("div",{className:"preview-sidebar",style:{background:he(p,"sidebar"),borderRadius:`${p.borderRadius}px`},children:r.jsxs("ul",{children:[r.jsx("li",{style:{color:ae(p,"background")},children:"Dashboard"}),r.jsx("li",{style:{color:ae(p,"background")},children:"File Manager"}),r.jsx("li",{style:{color:ae(p,"background")},children:"Databases"})]})})]})]})]}),r.jsxs("div",{className:"popup-actions",children:[r.jsxs("button",{className:"action-btn save-btn",onClick:()=>{const e=prompt("Enter theme name:");if(e){const t={name:e,settings:{...p}};x(e=>[...e,t])}},children:[r.jsx(f,{size:16})," Save Theme"]}),r.jsxs("button",{className:"action-btn apply-btn",onClick:t,children:[r.jsx(n,{size:16})," Apply & Close"]}),r.jsx("button",{className:"action-btn cancel-btn",onClick:t,children:"Cancel"})]})]})}):null},ze=({onMetricsToggle:e,title:t="Alterion Panel",logo:s})=>{const[o,a]=i.useState(!1),{theme:l,setTheme:c,customSettings:h,setCustomSettings:d}=i.useContext(le),{openTerminal:u,toggleTerminal:f,isOpen:m}=Be(),{selectedNode:_}=de(),v=ae(h),{isActive:b,logoSrc:y}=Ne(h);return r.jsxs("header",{className:"floating-header",style:{background:he(h,"header"),backdropFilter:h.glassEffect?`blur(${h.backdropBlur}px)`:"none",boxShadow:`0 ${2*h.shadowIntensity}px ${8*h.shadowIntensity}px rgba(0,0,0,0.${h.shadowIntensity})`,color:v},children:[r.jsx("div",{className:"header-left",children:b?r.jsx("img",{src:y,alt:"Alterion",className:"header-logo alterion-easter-egg",style:{height:"32px",width:"auto",objectFit:"contain"}}):r.jsxs(r.Fragment,{children:[s&&r.jsx("img",{src:s,alt:"Logo",className:"header-logo"}),r.jsx("span",{className:"header-title",style:{fontFamily:h.fontFamily,fontSize:`${h.fontSize}px`,fontWeight:h.fontWeight,letterSpacing:`${h.letterSpacing}px`,lineHeight:h.lineHeight,color:v},children:t})]})}),r.jsxs("div",{className:"header-right",children:[r.jsx("button",{className:"header-btn",title:"Terminal",style:{color:v},onClick:()=>{m?f():u(_?{nodeId:_.id,name:_.name}:{serverId:1,name:"Local Server"})},children:r.jsx(p,{size:24,color:v})}),r.jsx("button",{className:"header-btn",onClick:e,title:"Toggle Metrics Sidebar",style:{color:v},children:r.jsx(g,{size:24,color:v})}),r.jsx("button",{className:"header-btn",onClick:()=>a(!0),title:"Theme Customizer",style:{color:v},children:r.jsx(n,{size:24,color:v})})]}),r.jsx(Fe,{show:o,onClose:()=>a(!1)}),r.jsx("style",{jsx:"true",children:`\n        .floating-header {\n          transition: all ${h.animationSpeed}s ease;\n        }\n\n        .theme-popup-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.8);\n          backdrop-filter: blur(10px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 10000;\n          animation: fadeIn 0.3s ease;\n        }\n\n        .advanced-popup {\n          width: 90vw;\n          max-width: 1200px;\n          max-height: 90vh;\n          background: rgba(15, 15, 35, 0.95);\n          border-radius: 24px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n          overflow: hidden;\n          display: flex;\n          flex-direction: column;\n          animation: slideUp 0.4s ease;\n        }\n\n        .popup-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 24px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));\n        }\n\n        .popup-header h3 {\n          margin: 0;\n          font-size: 20px;\n          font-weight: 600;\n          color: #ffffff;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .header-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .header-actions button {\n          padding: 8px 12px;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          background: rgba(255, 255, 255, 0.1);\n          color: #ffffff;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 12px;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          gap: 4px;\n        }\n\n        .header-actions button:hover {\n          background: rgba(255, 255, 255, 0.2);\n          transform: translateY(-1px);\n        }\n\n        .header-actions button.active {\n          background: rgba(99, 102, 241, 0.5);\n          border-color: rgba(99, 102, 241, 0.8);\n        }\n\n        .tabs-container {\n          padding: 0 24px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .tabs {\n          display: flex;\n          gap: 4px;\n          overflow-x: auto;\n        }\n\n        .tabs button {\n          padding: 12px 20px;\n          border: none;\n          background: transparent;\n          color: #a0a0a0;\n          border-radius: 12px 12px 0 0;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.2s ease;\n          white-space: nowrap;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          position: relative;\n        }\n\n        .tabs button:hover {\n          color: #ffffff;\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .tabs button.active {\n          color: #ffffff;\n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));\n          border-bottom: 2px solid #6366f1;\n        }\n\n        .tab-content {\n          flex: 1;\n          padding: 24px;\n          overflow-y: auto;\n          max-height: 60vh;\n        }\n\n        .settings-section {\n          margin-bottom: 32px;\n        }\n\n        .settings-section h4 {\n          color: #ffffff;\n          margin: 0 0 16px 0;\n          font-size: 16px;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .theme-options {\n          display: flex;\n          gap: 12px;\n          margin-bottom: 24px;\n        }\n\n        .theme-btn {\n          padding: 12px 24px;\n          border: 2px solid rgba(255, 255, 255, 0.2);\n          background: rgba(255, 255, 255, 0.05);\n          color: #ffffff;\n          border-radius: 12px;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.3s ease;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .theme-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);\n        }\n\n        .theme-btn.active {\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          border-color: #6366f1;\n          box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);\n        }\n\n        .radio-group {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n          margin-bottom: 20px;\n        }\n\n        .radio-label {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          color: #ffffff;\n          cursor: pointer;\n          padding: 12px;\n          border-radius: 8px;\n          transition: background 0.2s ease;\n        }\n\n        .radio-label:hover {\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .radio-label input[type="radio"] {\n          display: none;\n        }\n\n        .radio-custom {\n          width: 20px;\n          height: 20px;\n          border: 2px solid rgba(255, 255, 255, 0.3);\n          border-radius: 50%;\n          position: relative;\n          transition: all 0.2s ease;\n        }\n\n        .radio-label input[type="radio"]:checked + .radio-custom {\n          border-color: #6366f1;\n          background: #6366f1;\n        }\n\n        .radio-label input[type="radio"]:checked + .radio-custom::after {\n          content: '';\n          width: 8px;\n          height: 8px;\n          background: white;\n          border-radius: 50%;\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n\n        .color-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 20px;\n          margin-bottom: 24px;\n        }\n\n        .color-input-group {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 16px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .color-input-group label {\n          display: block;\n          color: #ffffff;\n          font-weight: 500;\n          margin-bottom: 8px;\n          font-size: 14px;\n        }\n\n        .color-picker-wrapper {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .color-picker-wrapper input[type="color"] {\n          width: 40px;\n          height: 40px;\n          border: none;\n          border-radius: 8px;\n          cursor: pointer;\n          background: none;\n        }\n\n        .color-preview {\n          width: 40px;\n          height: 40px;\n          border-radius: 8px;\n          border: 2px solid rgba(255, 255, 255, 0.2);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n        }\n\n        .color-value {\n          color: #a0a0a0;\n          font-family: monospace;\n          font-size: 12px;\n          font-weight: 500;\n          background: rgba(0, 0, 0, 0.2);\n          padding: 4px 8px;\n          border-radius: 4px;\n          flex: 1;\n        }\n\n        .gradient-preview-large {\n          height: 60px;\n          border-radius: 12px;\n          margin: 16px 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: 600;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .font-select {\n          width: 100%;\n          padding: 12px;\n          background: rgba(255, 255, 255, 0.1);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 8px;\n          color: #ffffff;\n          font-size: 14px;\n          margin-bottom: 24px;\n        }\n\n        .font-select option {\n          background: #1a1a2e;\n          color: #ffffff;\n        }\n\n        .typography-controls, .effects-controls {\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n        }\n\n        .control-group {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 16px;\n        }\n\n        .control-group label {\n          display: block;\n          color: #ffffff;\n          font-weight: 500;\n          margin-bottom: 8px;\n          font-size: 14px;\n        }\n\n        .slider {\n          width: 100%;\n          height: 6px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 3px;\n          outline: none;\n          -webkit-appearance: none;\n        }\n\n        .slider::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          width: 18px;\n          height: 18px;\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          border-radius: 50%;\n          cursor: pointer;\n          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n        }\n\n        .slider::-moz-range-thumb {\n          width: 18px;\n          height: 18px;\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          border-radius: 50%;\n          cursor: pointer;\n          border: none;\n          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n        }\n\n        .typography-preview {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          margin-top: 20px;\n        }\n\n        .typography-preview h3 {\n          margin: 0 0 12px 0;\n        }\n\n        .typography-preview p {\n          margin: 0;\n          opacity: 0.8;\n        }\n\n        .toggle-group {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n\n        .toggle-label {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          color: #ffffff;\n          cursor: pointer;\n          padding: 12px;\n          border-radius: 8px;\n          transition: background 0.2s ease;\n        }\n\n        .toggle-label:hover {\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .toggle-label input[type="checkbox"] {\n          display: none;\n        }\n\n        .toggle-switch {\n          width: 44px;\n          height: 24px;\n          background: rgba(255, 255, 255, 0.2);\n          border-radius: 12px;\n          position: relative;\n          transition: all 0.3s ease;\n        }\n\n        .toggle-switch::after {\n          content: '';\n          width: 20px;\n          height: 20px;\n          background: white;\n          border-radius: 50%;\n          position: absolute;\n          top: 2px;\n          left: 2px;\n          transition: all 0.3s ease;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        }\n\n        .toggle-label input[type="checkbox"]:checked + .toggle-switch {\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n        }\n\n        .toggle-label input[type="checkbox"]:checked + .toggle-switch::after {\n          left: 22px;\n        }\n\n        .preset-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n          gap: 16px;\n          margin-bottom: 32px;\n        }\n\n        .preset-card {\n          height: 80px;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          border: 2px solid rgba(255, 255, 255, 0.1);\n          color: white;\n          font-weight: 600;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);\n        }\n\n        .preset-card:hover {\n          transform: translateY(-4px) scale(1.02);\n          box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);\n        }\n\n        .saved-themes {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .no-saved-themes {\n          color: #a0a0a0;\n          text-align: center;\n          font-style: italic;\n          margin: 0;\n        }\n\n        .saved-themes-list {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n\n        .saved-theme-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 12px;\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 8px;\n          color: #ffffff;\n        }\n\n        .saved-theme-item button {\n          padding: 6px 12px;\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          color: white;\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n          transition: all 0.2s ease;\n        }\n\n        .saved-theme-item button:hover {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);\n        }\n\n        .popup-actions {\n          display: flex;\n          justify-content: flex-end;\n          gap: 12px;\n          padding: 24px;\n          border-top: 1px solid rgba(255, 255, 255, 0.1);\n          background: rgba(0, 0, 0, 0.2);\n        }\n\n        .action-btn {\n          padding: 12px 24px;\n          border: none;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.3s ease;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .save-btn {\n          background: linear-gradient(135deg, #22c55e, #16a34a);\n          color: white;\n        }\n\n        .apply-btn {\n          background: linear-gradient(135deg, #6366f1, #8b5cf6);\n          color: white;\n        }\n\n        .cancel-btn {\n          background: rgba(255, 255, 255, 0.1);\n          color: #ffffff;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .action-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);\n        }\n\n        .preview-section {\n          padding: 24px;\n          border-top: 1px solid rgba(255, 255, 255, 0.1);\n          background: rgba(0, 0, 0, 0.1);\n        }\n\n        .preview-section h4 {\n          color: #ffffff;\n          margin: 0 0 16px 0;\n          font-size: 16px;\n          font-weight: 600;\n        }\n\n        .preview-container {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n          max-height: 300px;\n          overflow: hidden;\n          border-radius: 12px;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .preview-header {\n          padding: 16px;\n          color: white;\n          font-weight: 600;\n          transition: all var(--animation-speed, 0.3s) ease;\n        }\n\n        .preview-main {\n          padding: 16px;\n          min-height: 120px;\n          transition: all var(--animation-speed, 0.3s) ease;\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n        }\n\n        .preview-main p {\n          margin: 0;\n          flex: 1;\n        }\n\n        .preview-sidebar {\n          width: 150px;\n          padding: 12px;\n          color: white;\n          transition: all var(--animation-speed, 0.3s) ease;\n        }\n\n        .preview-sidebar ul {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n\n        .preview-sidebar li {\n          padding: 8px 0;\n          font-size: 14px;\n        }\n\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        @keyframes slideUp {\n          from { \n            opacity: 0;\n            transform: translateY(40px) scale(0.95);\n          }\n          to { \n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n\n        @media (max-width: 768px) {\n          .advanced-popup {\n            width: 95vw;\n            max-height: 95vh;\n          }\n          \n          .color-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .preset-grid {\n            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n          }\n          \n          .tabs {\n            flex-wrap: wrap;\n          }\n          \n          .popup-actions {\n            flex-direction: column;\n          }\n        }\n\n        .graph-controls {\n          margin-top: 20px;\n        }\n\n        .graph-controls .action-btn {\n          margin-bottom: 15px;\n        }\n\n        .preset-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));\n          gap: 15px;\n          margin-top: 10px;\n        }\n\n        .preset-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          cursor: pointer;\n          transition: transform 0.2s ease;\n        }\n\n        .preset-item:hover {\n          transform: scale(1.05);\n        }\n\n        .preset-circle {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          border: 2px solid rgba(255, 255, 255, 0.2);\n          margin-bottom: 5px;\n          transition: border-color 0.2s ease;\n        }\n\n        .preset-item:hover .preset-circle {\n          border-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .preset-item span {\n          font-size: 11px;\n          color: #ccc;\n          text-align: center;\n          font-weight: 500;\n        }\n      `})]})},He=({isOpen:e,onClose:t,onAuthenticate:n,actionType:o="view"})=>{const[a,l]=i.useState([]),[c,h]=i.useState(null),[d,u]=i.useState(""),[f,p]=i.useState(!1),[g,v]=i.useState(""),[b,y]=i.useState(!1);i.useEffect(()=>{e&&(x(),u(""),v(""),p(!1))},[e]);const x=async()=>{try{const e=await ue.get("/api/alterion/panel/auth/users/recent/",{withCredentials:!0});if(e.data.users&&e.data.users.length>0)l(e.data.users);else{const e=await ue.get("/api/alterion/panel/auth/users/",{withCredentials:!0});l(e.data.users||[])}}catch(e){v("Failed to load user list")}};return e?r.jsx("div",{className:"account-selector-overlay",onClick:t,children:r.jsxs("div",{className:"account-selector-modal",onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{className:"account-selector-header",children:[r.jsxs("div",{children:[r.jsxs("h3",{children:[r.jsx(m,{size:20})," Verify Identity"]}),r.jsxs("p",{children:["Authenticate to ",o," this secret"]})]}),r.jsx("button",{className:"close-btn",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c)if(d){y(!0),v("");try{const e=new URLSearchParams;e.append("identifier",c.username),e.append("password",d),e.append("grant_type","password"),e.append("client_id","XpjXSgFQQ30AQ9RWpm8NsMULl3pcwIt5i9QfdksJ");(await ue.post("/api/alterion/panel/auth/login/",e,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.access_token?(n(!0),t()):v("Authentication failed")}catch(i){401===i.response?.status||400===i.response?.status?v("Invalid password"):v("Authentication failed. Please try again.")}finally{y(!1)}}else v("Please enter your password");else v("Please select a user")},className:"account-selector-body",children:[r.jsxs("div",{className:"form-section",children:[r.jsx("label",{children:"Select Account"}),r.jsx("div",{className:"users-grid",children:a.map(e=>r.jsxs("div",{className:"user-card "+(c?.id===e.id?"selected":""),onClick:()=>(e=>{h(e),v("")})(e),children:[r.jsx("div",{className:"user-avatar",children:e.username.charAt(0).toUpperCase()}),r.jsxs("div",{className:"user-details",children:[r.jsx("div",{className:"user-name",children:e.username}),e.email&&r.jsx("div",{className:"user-email",children:e.email}),e.last_login&&r.jsxs("div",{className:"user-last-login",children:["Last login: ",new Date(e.last_login).toLocaleDateString()]})]}),c?.id===e.id&&r.jsx("div",{className:"check-icon",children:""})]},e.id))})]}),c&&r.jsxs("div",{className:"form-section",children:[r.jsxs("label",{children:["Password for ",c.username]}),r.jsxs("div",{className:"password-input-container",children:[r.jsx("input",{type:f?"text":"password",value:d,onChange:e=>u(e.target.value),placeholder:"Enter your password",autoFocus:!0,className:"password-input"}),r.jsx("button",{type:"button",className:"toggle-password",onClick:()=>p(!f),tabIndex:-1,children:f?r.jsx(_,{size:18}):r.jsx(s,{size:18})})]})]}),g&&r.jsx("div",{className:"error-message",children:g}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:t,disabled:b,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:!c||!d||b,children:b?"Verifying...":"Authenticate"})]})]})]})}):null},We=()=>{const{handleProjectContextMenu:e}=fe(),[t,n]=i.useState([]),[o,a]=i.useState(null),[l,c]=i.useState(null),[h,d]=i.useState([]),[u,p]=i.useState(!1),[g,L]=i.useState(""),[D,M]=i.useState(!1),[A,R]=i.useState(!1),[T,P]=i.useState(!1),[j,O]=i.useState(!1),[B,I]=i.useState(!1),[N,F]=i.useState({name:"",description:""}),[z,H]=i.useState({key:"",value:"",description:""}),[W,$]=i.useState(null),[U,V]=i.useState([]),[q,K]=i.useState(new Set),[G,Y]=i.useState(""),[X,Q]=i.useState(null);i.useEffect(()=>{J()},[]),i.useEffect(()=>{o&&l&&Z()},[o,l]);const J=async()=>{try{p(!0);const e=await ue.get("/api/alterion/panel/secret-projects/",{withCredentials:!0});if(n(e.data),e.data.length>0&&!o){const t=e.data[0];a(t),t.environments&&t.environments.length>0&&c(t.environments[0])}}catch(e){L("Failed to load projects")}finally{p(!1)}},Z=async()=>{if(l)try{p(!0);const e=await ue.get(`/api/alterion/panel/secret-environments/${l.id}/secrets/`,{withCredentials:!0});d(e.data)}catch(e){L("Failed to load secrets")}finally{p(!1)}},ee=h.filter(e=>e.key.toLowerCase().includes(G.toLowerCase())||e.description&&e.description.toLowerCase().includes(G.toLowerCase()));return r.jsxs("div",{className:"secret-manager",children:[r.jsxs("div",{className:"secret-manager-header",children:[r.jsxs("div",{children:[r.jsxs("h2",{children:[r.jsx(m,{size:24})," Secret Manager"]}),r.jsx("p",{children:"Manage your application secrets and environment variables securely"})]}),r.jsxs("button",{className:"btn btn-secondary",onClick:()=>M(!0),children:[r.jsx(v,{size:18})," New Project"]})]}),g&&r.jsxs("div",{className:"error-banner",children:[g,r.jsx("button",{onClick:()=>L(""),children:""})]}),r.jsxs("div",{className:"secret-manager-content",children:[r.jsxs("div",{className:"projects-sidebar",children:[r.jsx("h3",{children:"Projects"}),r.jsx("div",{className:"projects-list",children:t.map(t=>r.jsxs("div",{className:"project-item "+(o?.id===t.id?"active":""),onClick:()=>{a(t),t.environments&&t.environments.length>0&&c(t.environments[0])},onContextMenu:i=>e(i,t,{onEdit:e=>{},onDelete:async e=>{if(confirm(`Are you sure you want to delete project "${e.name}"? This will delete all secrets in this project.`))try{await ue.delete(`/api/alterion/panel/secret-projects/${e.id}/`,{withCredentials:!0}),J(),o?.id===e.id&&(a(null),c(null))}catch(t){L("Failed to delete project")}}}),children:[r.jsx(b,{size:16}),r.jsxs("div",{className:"project-info",children:[r.jsx("div",{className:"project-name",children:t.name}),r.jsxs("div",{className:"project-meta",children:[t.secret_count," secrets"]})]})]},t.id))})]}),r.jsx("div",{className:"secrets-main",children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"environment-tabs",children:o.environments?.map(e=>r.jsxs("button",{className:"env-tab "+(l?.id===e.id?"active":""),onClick:()=>c(e),children:[e.name,r.jsx("span",{className:"env-count",children:e.secret_count})]},e.id))}),r.jsxs("div",{className:"secrets-toolbar",children:[r.jsxs("div",{className:"search-box",children:[r.jsx(y,{size:16}),r.jsx("input",{type:"text",placeholder:"Search secrets...",value:G,onChange:e=>Y(e.target.value)})]}),r.jsxs("div",{className:"toolbar-actions",children:[r.jsx("button",{className:"btn-icon",onClick:Z,title:"Refresh",children:r.jsx(x,{size:16})}),r.jsx("button",{className:"btn-icon",onClick:()=>{const e=h.map(e=>({key:e.key,value:e.value,description:e.description})),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=`${o.name}-${l.name}-secrets.json`,r.click()},title:"Export",children:r.jsx(f,{size:16})}),r.jsxs("button",{className:"btn btn-secondary",onClick:()=>R(!0),children:[r.jsx(v,{size:18})," Add Secret"]})]})]}),r.jsx("div",{className:"secrets-table-container",children:u?r.jsx("div",{className:"loading",children:"Loading secrets..."}):0===ee.length?r.jsxs("div",{className:"empty-state",children:[r.jsx(S,{size:48}),r.jsx("h3",{children:"No secrets yet"}),r.jsx("p",{children:"Add your first secret to get started"})]}):r.jsxs("table",{className:"secrets-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Key"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Last Updated"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:ee.map(e=>r.jsxs("tr",{children:[r.jsxs("td",{className:"secret-key",children:[r.jsx(S,{size:14}),r.jsx("span",{children:e.key})]}),r.jsx("td",{className:"secret-value",children:r.jsxs("div",{className:"value-container",children:[r.jsx("code",{children:q.has(e.id)?e.value:"".repeat(Math.min(e.value.length,20))}),r.jsxs("div",{className:"value-actions",children:[r.jsx("button",{className:"btn-icon-small",onClick:()=>((e,t)=>{if(q.has(e)){const t=new Set(q);t.delete(e),K(t)}else Q({type:"view",secretId:e,value:t}),I(!0)})(e.id,e.value),title:q.has(e.id)?"Hide":"Show",children:q.has(e.id)?r.jsx(_,{size:14}):r.jsx(s,{size:14})}),r.jsx("button",{className:"btn-icon-small",onClick:()=>{return t=e.value,Q({type:"copy",value:t}),void I(!0);var t},title:"Copy",children:r.jsx(w,{size:14})})]})]})}),r.jsx("td",{className:"secret-description",children:e.description||"-"}),r.jsx("td",{className:"secret-updated",children:new Date(e.updated_at).toLocaleString()}),r.jsxs("td",{className:"secret-actions",children:[r.jsx("button",{className:"btn-icon",onClick:()=>(async e=>{try{const t=await ue.get(`/api/alterion/panel/secrets/${e.id}/history/`,{withCredentials:!0});V(t.data),O(!0)}catch(t){L("Failed to load history")}})(e),title:"History",children:r.jsx(C,{size:14})}),r.jsx("button",{className:"btn-icon",onClick:()=>{$(e),P(!0)},title:"Edit",children:r.jsx(k,{size:14})}),r.jsx("button",{className:"btn-icon btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this secret?"))try{await ue.delete(`/api/alterion/panel/secrets/${e}/`,{withCredentials:!0}),Z()}catch(t){L("Failed to delete secret")}})(e.id),title:"Delete",children:r.jsx(E,{size:14})})]})]},e.id))})]})})]}):r.jsxs("div",{className:"empty-state",children:[r.jsx(b,{size:48}),r.jsx("h3",{children:"No project selected"}),r.jsx("p",{children:"Create or select a project to manage secrets"})]})})]}),D&&r.jsx("div",{className:"modal-overlay",onClick:()=>M(!1),children:r.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Create New Project"}),r.jsx("button",{onClick:()=>M(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Project Name"}),r.jsx("input",{type:"text",value:N.name,onChange:e=>F({...N,name:e.target.value}),placeholder:"my-app"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:N.description,onChange:e=>F({...N,description:e.target.value}),placeholder:"Project description...",rows:"3"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>M(!1),children:"Cancel"}),r.jsx("button",{className:"btn-primary",onClick:async()=>{try{await ue.post("/api/alterion/panel/secret-projects/",N,{withCredentials:!0}),M(!1),F({name:"",description:""}),J()}catch(e){L(e.response?.data?.error||"Failed to create project")}},children:"Create Project"})]})]})}),A&&r.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:r.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add New Secret"}),r.jsx("button",{onClick:()=>R(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Key"}),r.jsx("input",{type:"text",value:z.key,onChange:e=>H({...z,key:e.target.value}),placeholder:"DATABASE_URL"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Value"}),r.jsx("textarea",{value:z.value,onChange:e=>H({...z,value:e.target.value}),placeholder:"postgresql://user:pass@host:5432/db",rows:"3"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description (Optional)"}),r.jsx("input",{type:"text",value:z.description,onChange:e=>H({...z,description:e.target.value}),placeholder:"Database connection string"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>R(!1),children:"Cancel"}),r.jsx("button",{className:"btn-primary",onClick:async()=>{try{await ue.post(`/api/alterion/panel/secret-environments/${l.id}/add_secret/`,z,{withCredentials:!0}),R(!1),H({key:"",value:"",description:""}),Z()}catch(e){L(e.response?.data?.error||"Failed to create secret")}},children:"Add Secret"})]})]})}),T&&W&&r.jsx("div",{className:"modal-overlay",onClick:()=>P(!1),children:r.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Edit Secret"}),r.jsx("button",{onClick:()=>P(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Key"}),r.jsx("input",{type:"text",value:W.key,onChange:e=>$({...W,key:e.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Value"}),r.jsx("textarea",{value:W.value,onChange:e=>$({...W,value:e.target.value}),rows:"3"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:W.description||"",onChange:e=>$({...W,description:e.target.value})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>P(!1),children:"Cancel"}),r.jsx("button",{className:"btn-primary",onClick:async()=>{try{await ue.put(`/api/alterion/panel/secrets/${W.id}/`,{key:W.key,value:W.value,description:W.description},{withCredentials:!0}),P(!1),$(null),Z()}catch(e){L(e.response?.data?.error||"Failed to update secret")}},children:"Save Changes"})]})]})}),j&&r.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:r.jsxs("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Secret History"}),r.jsx("button",{onClick:()=>O(!1),children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsx("div",{className:"history-list",children:U.map(e=>r.jsxs("div",{className:"history-item",children:[r.jsxs("div",{className:"history-meta",children:[r.jsx("span",{className:`change-type ${e.change_type}`,children:e.change_type}),r.jsx("span",{className:"history-time",children:new Date(e.changed_at).toLocaleString()}),r.jsxs("span",{className:"history-user",children:["by ",e.changed_by_name]})]}),r.jsx("div",{className:"history-value",children:r.jsx("code",{children:e.value})})]},e.id))})}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn-secondary",onClick:()=>O(!1),children:"Close"})})]})}),r.jsx(He,{isOpen:B,onClose:()=>{I(!1),Q(null)},onAuthenticate:e=>{if(e&&X){if("view"===X.type){const e=new Set(q);e.add(X.secretId),K(e)}else"copy"===X.type&&navigator.clipboard.writeText(X.value);Q(null)}},actionType:X?.type||"view"})]})},$e=()=>{const{serverId:e}=L(),t=D(),{openTerminal:n}=Be(),[s,o]=i.useState(null),[a,l]=i.useState(!0),[c,h]=i.useState(null);i.useEffect(()=>{d()},[e]);const d=async()=>{try{const i=await ue.get(`/api/servers/${e}/`);o(i.data),n({serverId:e,name:i.data.name}),l(!1),setTimeout(()=>{t("/dashboard")},100)}catch(i){h("Failed to load server details"),l(!1)}};return a?r.jsx("div",{className:"terminal-page",children:r.jsx("div",{className:"loading-container",children:r.jsx("p",{children:"Opening terminal..."})})}):c?r.jsx("div",{className:"terminal-page",children:r.jsxs("div",{className:"error-container",children:[r.jsx("h2",{children:"Error"}),r.jsx("p",{children:c}),r.jsx("button",{onClick:()=>t(-1),children:"Go Back"})]})}):null},Ue=()=>{const{customSettings:e}=i.useContext(le),t=he(e,"sidebar"),n=ae(e);return r.jsx("aside",{className:"sidebar-content",style:{background:t,color:n},children:r.jsx("nav",{children:r.jsxs("ul",{children:[r.jsx("li",{children:r.jsxs(M,{to:"/dashboard",style:{color:n},children:[r.jsx(A,{size:18,color:n})," Dashboard"]})}),r.jsx("li",{children:r.jsxs(M,{to:"/file-manager",style:{color:n},children:[r.jsx(R,{size:18,color:n})," File Manager"]})}),r.jsx("li",{children:r.jsxs(M,{to:"/databases",style:{color:n},children:[r.jsx(T,{size:18,color:n})," Databases"]})}),r.jsx("li",{children:r.jsxs(M,{to:"/load-balancer",style:{color:n},children:[r.jsx(P,{size:18,color:n})," Load Balancer"]})}),r.jsx("li",{children:r.jsxs(M,{to:"/security",style:{color:n},children:[r.jsx(j,{size:18,color:n})," Security"]})}),r.jsx("li",{children:r.jsxs(M,{to:"/backups",style:{color:n},children:[r.jsx(O,{size:18,color:n})," Backups"]})}),r.jsx("li",{children:r.jsxs(M,{to:"/domains",style:{color:n},children:[r.jsx(B,{size:18,color:n})," Domains"]})}),r.jsx("li",{children:r.jsxs(M,{to:"/services",style:{color:n},children:[r.jsx(I,{size:18,color:n})," Services"]})})]})})})};
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function Ve(e){return e+.5|0}const qe=(e,t,i)=>Math.max(Math.min(e,i),t);function Ke(e){return qe(Ve(2.55*e),0,255)}function Ge(e){return qe(Ve(255*e),0,255)}function Ye(e){return qe(Ve(e/2.55)/100,0,1)}function Xe(e){return qe(Ve(100*e),0,100)}const Qe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Je=[..."0123456789ABCDEF"],Ze=e=>Je[15&e],et=e=>Je[(240&e)>>4]+Je[15&e],tt=e=>(240&e)>>4==(15&e);function it(e){var t=(e=>tt(e.r)&&tt(e.g)&&tt(e.b)&&tt(e.a))(e)?Ze:et;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const rt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function nt(e,t,i){const r=t*Math.min(i,1-i),n=(t,n=(t+e/30)%12)=>i-r*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function st(e,t,i){const r=(r,n=(r+e/60)%6)=>i-i*t*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function ot(e,t,i){const r=nt(e,1,.5);let n;for(t+i>1&&(n=1/(t+i),t*=n,i*=n),n=0;n<3;n++)r[n]*=1-t-i,r[n]+=t;return r}function at(e){const t=e.r/255,i=e.g/255,r=e.b/255,n=Math.max(t,i,r),s=Math.min(t,i,r),o=(n+s)/2;let a,l,c;return n!==s&&(c=n-s,l=o>.5?c/(2-n-s):c/(n+s),a=function(e,t,i,r,n){return e===n?(t-i)/r+(t<i?6:0):t===n?(i-e)/r+2:(e-t)/r+4}(t,i,r,c,n),a=60*a+.5),[0|a,l||0,o]}function lt(e,t,i,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,r)).map(Ge)}function ct(e,t,i){return lt(nt,e,t,i)}function ht(e){return(e%360+360)%360}function dt(e){const t=rt.exec(e);let i,r=255;if(!t)return;t[5]!==i&&(r=t[6]?Ke(+t[5]):Ge(+t[5]));const n=ht(+t[2]),s=+t[3]/100,o=+t[4]/100;return i="hwb"===t[1]?function(e,t,i){return lt(ot,e,t,i)}(n,s,o):"hsv"===t[1]?function(e,t,i){return lt(st,e,t,i)}(n,s,o):ct(n,s,o),{r:i[0],g:i[1],b:i[2],a:r}}const ut={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ft={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let pt;function gt(e){pt||(pt=function(){const e={},t=Object.keys(ft),i=Object.keys(ut);let r,n,s,o,a;for(r=0;r<t.length;r++){for(o=a=t[r],n=0;n<i.length;n++)s=i[n],a=a.replace(s,ut[s]);s=parseInt(ft[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),pt.transparent=[0,0,0,0]);const t=pt[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const mt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const _t=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,vt=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function bt(e,t,i){if(e){let r=at(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*i,0===t?360:1)),r=ct(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function yt(e,t){return e?Object.assign(t||{},e):e}function xt(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ge(e[3]))):(t=yt(e,{r:0,g:0,b:0,a:1})).a=Ge(t.a),t}function St(e){return"r"===e.charAt(0)?function(e){const t=mt.exec(e);let i,r,n,s=255;if(t){if(t[7]!==i){const e=+t[7];s=t[8]?Ke(e):qe(255*e,0,255)}return i=+t[1],r=+t[3],n=+t[5],i=255&(t[2]?Ke(i):qe(i,0,255)),r=255&(t[4]?Ke(r):qe(r,0,255)),n=255&(t[6]?Ke(n):qe(n,0,255)),{r:i,g:r,b:n,a:s}}}(e):dt(e)}class wt{constructor(e){if(e instanceof wt)return e;const t=typeof e;let i;var r,n,s;"object"===t?i=xt(e):"string"===t&&(s=(r=e).length,"#"===r[0]&&(4===s||5===s?n={r:255&17*Qe[r[1]],g:255&17*Qe[r[2]],b:255&17*Qe[r[3]],a:5===s?17*Qe[r[4]]:255}:7!==s&&9!==s||(n={r:Qe[r[1]]<<4|Qe[r[2]],g:Qe[r[3]]<<4|Qe[r[4]],b:Qe[r[5]]<<4|Qe[r[6]],a:9===s?Qe[r[7]]<<4|Qe[r[8]]:255})),i=n||gt(e)||St(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=yt(this._rgb);return e&&(e.a=Ye(e.a)),e}set rgb(e){this._rgb=xt(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ye(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?it(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=at(e),i=t[0],r=Xe(t[1]),n=Xe(t[2]);return e.a<255?`hsla(${i}, ${r}%, ${n}%, ${Ye(e.a)})`:`hsl(${i}, ${r}%, ${n}%)`}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let n;const s=t===n?.5:t,o=2*s-1,a=i.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;n=1-l,i.r=255&l*i.r+n*r.r+.5,i.g=255&l*i.g+n*r.g+.5,i.b=255&l*i.b+n*r.b+.5,i.a=s*i.a+(1-s)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,i){const r=vt(Ye(e.r)),n=vt(Ye(e.g)),s=vt(Ye(e.b));return{r:Ge(_t(r+i*(vt(Ye(t.r))-r))),g:Ge(_t(n+i*(vt(Ye(t.g))-n))),b:Ge(_t(s+i*(vt(Ye(t.b))-s))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new wt(this.rgb)}alpha(e){return this._rgb.a=Ge(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Ve(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return bt(this._rgb,2,e),this}darken(e){return bt(this._rgb,2,-e),this}saturate(e){return bt(this._rgb,1,e),this}desaturate(e){return bt(this._rgb,1,-e),this}rotate(e){return function(e,t){var i=at(e);i[0]=ht(i[0]+t),i=ct(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ct(){}const kt=(()=>{let e=0;return()=>e++})();function Et(e){return null==e}function Lt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Dt(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Mt(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function At(e,t){return Mt(e)?e:t}function Rt(e,t){return void 0===e?t:e}const Tt=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Pt(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function jt(e,t,i,r){let n,s,o;if(Lt(e))for(s=e.length,n=0;n<s;n++)t.call(i,e[n],n);else if(Dt(e))for(o=Object.keys(e),s=o.length,n=0;n<s;n++)t.call(i,e[o[n]],o[n])}function Ot(e,t){let i,r,n,s;if(!e||!t||e.length!==t.length)return!1;for(i=0,r=e.length;i<r;++i)if(n=e[i],s=t[i],n.datasetIndex!==s.datasetIndex||n.index!==s.index)return!1;return!0}function Bt(e){if(Lt(e))return e.map(Bt);if(Dt(e)){const t=Object.create(null),i=Object.keys(e),r=i.length;let n=0;for(;n<r;++n)t[i[n]]=Bt(e[i[n]]);return t}return e}function It(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Nt(e,t,i,r){if(!It(e))return;const n=t[e],s=i[e];Dt(n)&&Dt(s)?Ft(n,s,r):t[e]=Bt(s)}function Ft(e,t,i){const r=Lt(t)?t:[t],n=r.length;if(!Dt(e))return e;const s=(i=i||{}).merger||Nt;let o;for(let a=0;a<n;++a){if(o=r[a],!Dt(o))continue;const t=Object.keys(o);for(let r=0,n=t.length;r<n;++r)s(t[r],e,o,i)}return e}function zt(e,t){return Ft(e,t,{merger:Ht})}function Ht(e,t,i){if(!It(e))return;const r=t[e],n=i[e];Dt(r)&&Dt(n)?zt(r,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Bt(n))}const Wt={"":e=>e,x:e=>e.x,y:e=>e.y};function $t(e,t){const i=Wt[t]||(Wt[t]=function(e){const t=function(e){const t=e.split("."),i=[];let r="";for(const n of t)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(i.push(r),r="");return i}(e);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t));return i(e)}function Ut(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Vt=e=>void 0!==e,qt=e=>"function"==typeof e,Kt=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};const Gt=Math.PI,Yt=2*Gt,Xt=Number.POSITIVE_INFINITY,Qt=Gt/180,Jt=Gt/2,Zt=Gt/4,ei=2*Gt/3,ti=Math.sign;function ii(e){return!function(e){return"symbol"==typeof e||"object"==typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function ri(e){return e*(Gt/180)}function ni(e,t){const i=t.x-e.x,r=t.y-e.y,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s<-.5*Gt&&(s+=Yt),{angle:s,distance:n}}function si(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function oi(e){return(e%Yt+Yt)%Yt}function ai(e,t,i,r){const n=oi(e),s=oi(t),o=oi(i),a=oi(s-n),l=oi(o-n),c=oi(n-s),h=oi(n-o);return n===s||n===o||r&&s===o||a>l&&c<h}function li(e,t,i){return Math.max(t,Math.min(i,e))}function ci(e,t,i,r=1e-6){return e>=Math.min(t,i)-r&&e<=Math.max(t,i)+r}function hi(e,t,i){i=i||(i=>e[i]<t);let r,n=e.length-1,s=0;for(;n-s>1;)r=s+n>>1,i(r)?s=r:n=r;return{lo:s,hi:n}}const di=(e,t,i,r)=>hi(e,i,r?r=>{const n=e[r][t];return n<i||n===i&&e[r+1][t]===i}:r=>e[r][t]<i),ui=(e,t,i)=>hi(e,i,r=>e[r][t]>=i);const fi=["push","pop","shift","splice","unshift"];function pi(e,t){const i=e._chartjs;if(!i)return;const r=i.listeners,n=r.indexOf(t);-1!==n&&r.splice(n,1),r.length>0||(fi.forEach(t=>{delete e[t]}),delete e._chartjs)}const gi="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function mi(e,t){let i=[],r=!1;return function(...n){i=n,r||(r=!0,gi.call(window,()=>{r=!1,e.apply(t,i)}))}}const _i=e=>"start"===e?"left":"end"===e?"right":"center",vi=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2,bi=e=>0===e||1===e,yi=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Yt/i),xi=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Yt/i)+1,Si={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Jt),easeOutSine:e=>Math.sin(e*Jt),easeInOutSine:e=>-.5*(Math.cos(Gt*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>bi(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>bi(e)?e:yi(e,.075,.3),easeOutElastic:e=>bi(e)?e:xi(e,.075,.3),easeInOutElastic(e){const t=.1125;return bi(e)?e:e<.5?.5*yi(2*e,t,.45):.5+.5*xi(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Si.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*Si.easeInBounce(2*e):.5*Si.easeOutBounce(2*e-1)+.5};function wi(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Ci(e){return wi(e)?e:new wt(e)}function ki(e){return wi(e)?e:new wt(e).saturate(.5).darken(.1).hexString()}const Ei=["x","y","borderWidth","radius","tension"],Li=["color","borderColor","backgroundColor"];const Di=new Map;function Mi(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let r=Di.get(i);return r||(r=new Intl.NumberFormat(e,t),Di.set(i,r)),r}(t,i).format(e)}var Ai={formatters:{values:e=>Lt(e)?e:""+e}};const Ri=Object.create(null),Ti=Object.create(null);function Pi(e,t){if(!t)return e;const i=t.split(".");for(let r=0,n=i.length;r<n;++r){const t=i[r];e=e[t]||(e[t]=Object.create(null))}return e}function ji(e,t,i){return"string"==typeof t?Ft(Pi(e,t),i):Ft(Pi(e,""),t)}class Oi{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>ki(t.backgroundColor),this.hoverBorderColor=(e,t)=>ki(t.borderColor),this.hoverColor=(e,t)=>ki(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ji(this,e,t)}get(e){return Pi(this,e)}describe(e,t){return ji(Ti,e,t)}override(e,t){return ji(Ri,e,t)}route(e,t,i,r){const n=Pi(this,e),s=Pi(this,i),o="_"+t;Object.defineProperties(n,{[o]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[r];return Dt(e)?Object.assign({},t,e):Rt(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}var Bi=new Oi({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Li},numbers:{type:"number",properties:Ei}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ai.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Ii(e,t,i,r,n){let s=t[n];return s||(s=t[n]=e.measureText(n).width,i.push(n)),s>r&&(r=s),r}function Ni(e,t,i){const r=e.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((t-n)*r)/r+n}function Fi(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function zi(e,t,i,r){Hi(e,t,i,r,null)}function Hi(e,t,i,r,n){let s,o,a,l,c,h,d,u;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*Qt;if(f&&"object"==typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(i,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:n?e.ellipse(i,r,n/2,g,0,0,Yt):e.arc(i,r,g,0,Yt),e.closePath();break;case"triangle":h=n?n/2:g,e.moveTo(i+Math.sin(m)*h,r-Math.cos(m)*g),m+=ei,e.lineTo(i+Math.sin(m)*h,r-Math.cos(m)*g),m+=ei,e.lineTo(i+Math.sin(m)*h,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+Zt)*l,d=Math.cos(m+Zt)*(n?n/2-c:l),a=Math.sin(m+Zt)*l,u=Math.sin(m+Zt)*(n?n/2-c:l),e.arc(i-d,r-a,c,m-Gt,m-Jt),e.arc(i+u,r-o,c,m-Jt,m),e.arc(i+d,r+a,c,m,m+Jt),e.arc(i-u,r+o,c,m+Jt,m+Gt),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=n?n/2:l,e.rect(i-h,r-l,2*h,2*l);break}m+=Zt;case"rectRot":d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),e.moveTo(i-d,r-a),e.lineTo(i+u,r-o),e.lineTo(i+d,r+a),e.lineTo(i-u,r+o),e.closePath();break;case"crossRot":m+=Zt;case"cross":d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),e.moveTo(i-d,r-a),e.lineTo(i+d,r+a),e.moveTo(i+u,r-o),e.lineTo(i-u,r+o);break;case"star":d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),e.moveTo(i-d,r-a),e.lineTo(i+d,r+a),e.moveTo(i+u,r-o),e.lineTo(i-u,r+o),m+=Zt,d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),e.moveTo(i-d,r-a),e.lineTo(i+d,r+a),e.moveTo(i+u,r-o),e.lineTo(i-u,r+o);break;case"line":o=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(i-o,r-a),e.lineTo(i+o,r+a);break;case"dash":e.moveTo(i,r),e.lineTo(i+Math.cos(m)*(n?n/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Wi(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function $i(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Ui(e){e.restore()}function Vi(e,t,i,r,n){if(n.strikethrough||n.underline){const s=e.measureText(r),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=i-s.actualBoundingBoxAscent,c=i+s.actualBoundingBoxDescent,h=n.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function qi(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Ki(e,t,i,r,n,s={}){const o=Lt(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=n.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Et(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&qi(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Et(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,i,r,s.maxWidth)),e.fillText(c,i,r,s.maxWidth),Vi(e,i,r,c,s),r+=Number(n.lineHeight);e.restore()}function Gi(e,t){const{x:i,y:r,w:n,h:s,radius:o}=t;e.arc(i+o.topLeft,r+o.topLeft,o.topLeft,1.5*Gt,Gt,!0),e.lineTo(i,r+s-o.bottomLeft),e.arc(i+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Gt,Jt,!0),e.lineTo(i+n-o.bottomRight,r+s),e.arc(i+n-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Jt,0,!0),e.lineTo(i+n,r+o.topRight),e.arc(i+n-o.topRight,r+o.topRight,o.topRight,0,-Jt,!0),e.lineTo(i+o.topLeft,r)}const Yi=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xi=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Qi(e,t){const i=(""+e).match(Yi);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}const Ji=e=>+e||0;function Zi(e,t){const i={},r=Dt(t),n=r?Object.keys(t):t,s=Dt(e)?r?i=>Rt(e[i],e[t[i]]):t=>e[t]:()=>e;for(const o of n)i[o]=Ji(s(o));return i}function er(e){return Zi(e,["topLeft","topRight","bottomLeft","bottomRight"])}function tr(e){const t=function(e){return Zi(e,{top:"y",right:"x",bottom:"y",left:"x"})}(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ir(e,t){e=e||{},t=t||Bi.font;let i=Rt(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let r=Rt(e.style,t.style);r&&!(""+r).match(Xi)&&(r=void 0);const n={family:Rt(e.family,t.family),lineHeight:Qi(Rt(e.lineHeight,t.lineHeight),i),size:i,style:r,weight:Rt(e.weight,t.weight),string:""};return n.string=function(e){return!e||Et(e.size)||Et(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n}function rr(e,t,i,r){let n,s,o;for(n=0,s=e.length;n<s;++n)if(o=e[n],void 0!==o&&void 0!==o)return o}function nr(e,t){return Object.assign(Object.create(e),t)}function sr(e,t=[""],i,r,n=()=>e[0]){const s=i||e;void 0===r&&(r=mr("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:r,_getTarget:n,override:i=>sr([i,...e],t,s,r)};return new Proxy(o,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,r)=>hr(i,r,()=>function(e,t,i,r){let n;for(const s of t)if(n=mr(lr(s,e),i),void 0!==n)return cr(e,n)?pr(i,r,e,n):n}(r,t,e,i)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>_r(e).includes(t),ownKeys:e=>_r(e),set(e,t,i){const r=e._storage||(e._storage=n());return e[t]=r[t]=i,delete e._keys,!0}})}function or(e,t,i,r){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:ar(e,r),setContext:t=>or(e,t,i,r),override:n=>or(e.override(n),t,i,r)};return new Proxy(n,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>hr(e,t,()=>function(e,t,i){const{_proxy:r,_context:n,_subProxy:s,_descriptors:o}=e;let a=r[t];qt(a)&&o.isScriptable(t)&&(a=function(e,t,i,r){const{_proxy:n,_context:s,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||r);a.delete(e),cr(e,l)&&(l=pr(n._scopes,n,e,l));return l}(t,a,e,i));Lt(a)&&a.length&&(a=function(e,t,i,r){const{_proxy:n,_context:s,_subProxy:o,_descriptors:a}=i;if(void 0!==s.index&&r(e))return t[s.index%t.length];if(Dt(t[0])){const i=t,r=n._scopes.filter(e=>e!==i);t=[];for(const l of i){const i=pr(r,n,e,l);t.push(or(i,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));cr(t,a)&&(a=or(a,n,s&&s[t],o));return a}(e,t,i)),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,r)=>(e[i]=r,delete t[i],!0)})}function ar(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:r=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:i,indexable:r,isScriptable:qt(i)?i:()=>i,isIndexable:qt(r)?r:()=>r}}const lr=(e,t)=>e?e+Ut(t):t,cr=(e,t)=>Dt(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function hr(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=i();return e[t]=r,r}function dr(e,t,i){return qt(e)?e(t,i):e}const ur=(e,t)=>!0===e?t:"string"==typeof e?$t(t,e):void 0;function fr(e,t,i,r,n){for(const s of t){const t=ur(i,s);if(t){e.add(t);const s=dr(t._fallback,i,n);if(void 0!==s&&s!==i&&s!==r)return s}else if(!1===t&&void 0!==r&&i!==r)return null}return!1}function pr(e,t,i,r){const n=t._rootScopes,s=dr(t._fallback,i,r),o=[...e,...n],a=new Set;a.add(r);let l=gr(a,o,i,s||i,r);return null!==l&&((void 0===s||s===i||(l=gr(a,o,s,l,r),null!==l))&&sr(Array.from(a),[""],n,s,()=>function(e,t,i){const r=e._getTarget();t in r||(r[t]={});const n=r[t];if(Lt(n)&&Dt(i))return i;return n||{}}(t,i,r)))}function gr(e,t,i,r,n){for(;i;)i=fr(e,t,i,r,n);return i}function mr(e,t){for(const i of t){if(!i)continue;const t=i[e];if(void 0!==t)return t}}function _r(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function vr(){return"undefined"!=typeof window&&"undefined"!=typeof document}function br(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function yr(e,t,i){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[i])):r=e,r}const xr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Sr=["top","right","bottom","left"];function wr(e,t,i){const r={};i=i?"-"+i:"";for(let n=0;n<4;n++){const s=Sr[n];r[s]=parseFloat(e[t+"-"+s+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Cr(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:r}=t,n=xr(i),s="border-box"===n.boxSizing,o=wr(n,"padding"),a=wr(n,"border","width"),{x:l,y:c,box:h}=function(e,t){const i=e.touches,r=i&&i.length?i[0]:e,{offsetX:n,offsetY:s}=r;let o,a,l=!1;if(((e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot))(n,s,e.target))o=n,a=s;else{const e=t.getBoundingClientRect();o=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,i),d=o.left+(h&&a.left),u=o.top+(h&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*i.width/r),y:Math.round((c-u)/p*i.height/r)}}const kr=e=>Math.round(10*e)/10;function Er(e,t,i,r){const n=xr(e),s=wr(n,"margin"),o=yr(n.maxWidth,e,"clientWidth")||Xt,a=yr(n.maxHeight,e,"clientHeight")||Xt,l=function(e,t,i){let r,n;if(void 0===t||void 0===i){const s=e&&br(e);if(s){const e=s.getBoundingClientRect(),o=xr(s),a=wr(o,"border","width"),l=wr(o,"padding");t=e.width-l.width-a.width,i=e.height-l.height-a.height,r=yr(o.maxWidth,s,"clientWidth"),n=yr(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:r||Xt,maxHeight:n||Xt}}(e,t,i);let{width:c,height:h}=l;if("content-box"===n.boxSizing){const e=wr(n,"border","width"),t=wr(n,"padding");c-=t.width+e.width,h-=t.height+e.height}c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=kr(Math.min(c,o,l.maxWidth)),h=kr(Math.min(h,a,l.maxHeight)),c&&!h&&(h=kr(c/2));return(void 0!==t||void 0!==i)&&r&&l.height&&h>l.height&&(h=l.height,c=kr(Math.floor(h*r))),{width:c,height:h}}function Lr(e,t,i){const r=t||1,n=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||o.height!==n||o.width!==s)&&(e.currentDevicePixelRatio=r,o.height=n,o.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Dr=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};vr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(go){}return e}();function Mr(e,t){const i=function(e,t){return xr(e).getPropertyValue(t)}(e,t),r=i&&i.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ar(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Rr(e,t){let i,r;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,r=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Tr(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Pr(e,t,i){return e.options.clip?e[i]:t[i]}function jr(e,t){const i=t._clip;if(i.disabled)return!1;const r=function(e,t){const{xScale:i,yScale:r}=e;return i&&r?{left:Pr(i,t,"left"),right:Pr(i,t,"right"),top:Pr(r,t,"top"),bottom:Pr(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===i.left?0:r.left-(!0===i.left?0:i.left),right:!1===i.right?e.width:r.right+(!0===i.right?0:i.right),top:!1===i.top?0:r.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?e.height:r.bottom+(!0===i.bottom?0:i.bottom)}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Or{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const n=t.listeners[r],s=t.duration;n.forEach(r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(i-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=gi.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const n=i.items;let s,o=n.length-1,a=!1;for(;o>=0;--o)s=n[o],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(e),a=!0):(n[o]=n[n.length-1],n.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),n.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=n.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Br=new Or;const Ir="transparent",Nr={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const r=Ci(e||Ir),n=r.valid&&Ci(t||Ir);return n&&n.valid?n.mix(r,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class Fr{constructor(e,t,i,r){const n=t[i];r=rr([e.to,r,n,e.from]);const s=rr([e.from,n,r]);this._active=!0,this._fn=e.fn||Nr[e.type||typeof s],this._easing=Si[e.easing]||Si.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],n=i-this._start,s=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=rr([e.to,t,r,e.from]),this._from=rr([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,n=this._from,s=this._loop,o=this._to;let a;if(this._active=n!==o&&(s||t<i),!this._active)return this._target[r]=o,void this._notify(!0);t<0?this._target[r]=n:(a=t/i%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(n,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class zr{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Dt(e))return;const t=Object.keys(Bi.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const n=e[r];if(!Dt(n))return;const s={};for(const e of t)s[e]=n[e];(Lt(n.properties)&&n.properties||[r]).forEach(e=>{e!==r&&i.has(e)||i.set(e,s)})})}_animateOptions(e,t){const i=t.options,r=function(e,t){if(!t)return;let i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!r)return[];const n=this._createAnimations(r,i);return i.$shared&&function(e,t){const i=[],r=Object.keys(t);for(let n=0;n<r.length;n++){const t=e[r[n]];t&&t.active()&&i.push(t.wait())}return Promise.all(i)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),n}_createAnimations(e,t){const i=this._properties,r=[],n=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let h=n[l];const d=i.get(l);if(h){if(d&&h.active()){h.update(d,c,o);continue}h.cancel()}d&&d.duration?(n[l]=h=new Fr(d,e,l,c),r.push(h)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(Br.add(this._chart,i),!0):void 0}}function Hr(e,t){const i=e&&e.options||{},r=i.reverse,n=void 0===i.min?t:0,s=void 0===i.max?t:0;return{start:r?s:n,end:r?n:s}}function Wr(e,t){const i=[],r=e._getSortedDatasetMetas(t);let n,s;for(n=0,s=r.length;n<s;++n)i.push(r[n].index);return i}function $r(e,t,i,r={}){const n=e.keys,s="single"===r.mode;let o,a,l,c;if(null===t)return;let h=!1;for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===i){if(h=!0,r.all)continue;break}c=e.values[l],Mt(c)&&(s||0===t||ti(t)===ti(c))&&(t+=c)}return h||r.all?t:0}function Ur(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function Vr(e,t,i){const r=e[t]||(e[t]={});return r[i]||(r[i]={})}function qr(e,t,i,r){for(const n of t.getMatchingVisibleMetas(r).reverse()){const t=e[n.index];if(i&&t>0||!i&&t<0)return n.index}return null}function Kr(e,t){const{chart:i,_cachedMeta:r}=e,n=i._stacks||(i._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=function(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}(s,o,r),d=t.length;let u;for(let f=0;f<d;++f){const e=t[f],{[l]:i,[c]:s}=e;u=(e._stacks||(e._stacks={}))[c]=Vr(n,h,i),u[a]=s,u._top=qr(u,o,!0,r.type),u._bottom=qr(u,o,!1,r.type);(u._visualValues||(u._visualValues={}))[a]=s}}function Gr(e,t){const i=e.scales;return Object.keys(i).filter(e=>i[e].axis===t).shift()}function Yr(e,t){const i=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][i])return;delete t[r][i],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[i]&&delete t[r]._visualValues[i]}}}const Xr=e=>"reset"===e||"none"===e,Qr=(e,t)=>t?e:Object.assign({},e);class Jr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ur(e.vScale,e),this.addElements(),this.options.fill&&this.chart.isPluginEnabled("filler")}updateIndex(e){this.index!==e&&Yr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(e,t,i,r)=>"x"===e?t:"r"===e?r:i,n=t.xAxisID=Rt(i.xAxisID,Gr(e,"x")),s=t.yAxisID=Rt(i.yAxisID,Gr(e,"y")),o=t.rAxisID=Rt(i.rAxisID,Gr(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,n,s,o),c=t.vAxisID=r(a,s,n,o);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pi(this._data,this),e._stacked&&Yr(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Dt(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:i,vScale:r}=t,n="x"===i.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[n]:h,[s]:e[h]};return a}(t,e)}else if(i!==t){if(i){pi(i,this);const e=this._cachedMeta;Yr(e),e._parsed=[]}t&&Object.isExtensible(t)&&(n=this,(r=t)._chartjs?r._chartjs.listeners.push(n):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),fi.forEach(e=>{const t="_onData"+Ut(e),i=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(...e){const n=i.apply(this,e);return r._chartjs.listeners.forEach(i=>{"function"==typeof i[t]&&i[t](...e)}),n}})}))),this._syncList=[],this._data=t}var r,n}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const n=t._stacked;t._stacked=Ur(t.vScale,t),t.stack!==i.stack&&(r=!0,Yr(t),t.stack=i.stack),this._resyncElements(e),(r||n!==t._stacked)&&(Kr(this,t._parsed),t._stacked=Ur(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:n,_stacked:s}=i,o=n.axis;let a,l,c,h=0===e&&t===r.length||i._sorted,d=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=r,i._sorted=!0,c=r;else{c=Lt(r[e])?this.parseArrayData(i,r,e,t):Dt(r[e])?this.parseObjectData(i,r,e,t):this.parsePrimitiveData(i,r,e,t);const n=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<t;++a)i._parsed[a+e]=l=c[a],h&&(n()&&(h=!1),d=l);i._sorted=h}s&&Kr(this,c)}parsePrimitiveData(e,t,i,r){const{iScale:n,vScale:s}=e,o=n.axis,a=s.axis,l=n.getLabels(),c=n===s,h=new Array(r);let d,u,f;for(d=0,u=r;d<u;++d)f=d+i,h[d]={[o]:c||n.parse(l[f],f),[a]:s.parse(t[f],f)};return h}parseArrayData(e,t,i,r){const{xScale:n,yScale:s}=e,o=new Array(r);let a,l,c,h;for(a=0,l=r;a<l;++a)c=a+i,h=t[c],o[a]={x:n.parse(h[0],c),y:s.parse(h[1],c)};return o}parseObjectData(e,t,i,r){const{xScale:n,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,h,d,u;for(c=0,h=r;c<h;++c)d=c+i,u=t[d],l[c]={x:n.parse($t(u,o),d),y:s.parse($t(u,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,n=this._cachedMeta,s=t[e.axis];return $r({keys:Wr(r,!0),values:t._stacks[e.axis]._visualValues},s,n.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const n=i[t.axis];let s=null===n?NaN:n;const o=r&&i._stacks[t.axis];r&&o&&(r.values=o,s=$r(r,n,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,n=i._sorted&&e===i.iScale,s=r.length,o=this._getOtherScale(e),a=((e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:Wr(i,!0),values:null})(t,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=function(e){const{min:t,max:i,minDefined:r,maxDefined:n}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}(o);let d,u;function f(){u=r[d];const t=u[o.axis];return!Mt(u[e.axis])||c>t||h<t}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,e,u,a),!n));++d);if(n)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,u,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,n,s;for(r=0,n=t.length;r<n;++r)s=t[r][e.axis],Mt(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,n=this.getParsed(e);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:r?""+r.getLabelForValue(n[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,i,r,n;return Dt(e)?(t=e.top,i=e.right,r=e.bottom,n=e.left):t=i=r=n=e,{top:t,right:i,bottom:r,left:n,disabled:!1===e}}(Rt(this.options.clip,function(e,t,i){if(!1===i)return!1;const r=Hr(e,i),n=Hr(t,i);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],n=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(e,n,o,a),c=o;c<o+a;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,n))}for(c=0;c<s.length;++c)s[c].draw(e,n)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];n=t.$context||(t.$context=function(e,t,i){return nr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),n.parsed=this.getParsed(e),n.raw=r.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=function(e,t){return nr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=r,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=i,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r="active"===t,n=this._cachedDataOpts,s=e+"-"+t,o=n[s],a=this.enableOptionSharing&&Vt(i);if(o)return Qr(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),u=Object.keys(Bi.elements[e]),f=l.resolveNamedOptions(d,u,()=>this.getContext(i,r,t),h);return f.$shared&&(f.$shared=a,n[s]=Object.freeze(Qr(f,a))),f}_resolveAnimations(e,t,i){const r=this.chart,n=this._cachedDataOpts,s=`animation-${t}`,o=n[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,n=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),n);a=r.createResolver(s,this.getContext(e,i,t))}const l=new zr(r,a&&a.animations);return a&&a._cacheable&&(n[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Xr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,n=this.getSharedOptions(i),s=this.includeOptions(t,n)||n!==r;return this.updateSharedOptions(n,t,i),{sharedOptions:n,includeOptions:s}}updateElement(e,t,i,r){Xr(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!Xr(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const n=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const r=i.length,n=t.length,s=Math.min(n,r);s&&this.parse(0,s),n>r?this._insertElements(r,n-r,e):n<r&&this._removeElements(n,r-n)}_insertElements(e,t,i=!0){const r=this._cachedMeta,n=r.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(n),o=e;o<s;++o)n[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),i&&this.updateElements(n,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&Yr(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Zr extends Jr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return t.labels.map((t,n)=>{const s=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(n),index:n}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=i;else{let n,s,o=e=>+i[e];if(Dt(i[e])){const{key:e="value"}=this._parsing;o=t=>+$t(i[t],e)}for(n=e,s=e+t;n<s;++n)r._parsed[n]=o(n)}}_getRotation(){return ri(this.options.rotation-90)}_getCircumference(){return ri(this.options.circumference)}_getRotationExtents(){let e=Yt,t=-Yt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,n=r._getRotation(),s=r._getCircumference();e=Math.min(e,n),t=Math.max(t,n+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,n=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const h=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,i){let r=1,n=1,s=0,o=0;if(t<Yt){const a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),u=Math.sin(l),f=(e,t,r)=>ai(e,a,l,!0)?1:Math.max(t,t*i,r,r*i),p=(e,t,r)=>ai(e,a,l,!0)?-1:Math.min(t,t*i,r,r*i),g=f(0,c,d),m=f(Jt,h,u),_=p(Gt,c,d),v=p(Gt+Jt,h,u);r=(g-_)/2,n=(m-v)/2,s=-(g+_)/2,o=-(m+v)/2}return{ratioX:r,ratioY:n,offsetX:s,offsetY:o}}(u,d,a),_=(i.width-s)/f,v=(i.height-s)/p,b=Math.max(Math.min(_,v)/2,0),y=Tt(this.options.radius,b),x=(y-Math.max(y*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*y,this.offsetY=m*y,r.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,n=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*n/Yt)}updateElements(e,t,i,r){const n="reset"===r,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,h=n&&a.animateScale,d=h?0:this.innerRadius,u=h?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,n);for(g=t;g<t+i;++g){const t=this._circumference(g,n),i=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:u,innerRadius:d};p&&(s.options=f||this.resolveDataElementOptions(g,i.active?"active":r)),m+=t,this.updateElement(i,g,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,r=0;for(i=0;i<t.length;i++){const n=e._parsed[i];null===n||isNaN(n)||!this.chart.getDataVisibility(i)||t[i].hidden||(r+=Math.abs(n))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Yt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],n=Mi(t._parsed[e],i.options.locale);return{label:r[e]||"",value:n}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,n,s,o,a;if(!e)for(r=0,n=i.data.datasets.length;r<n;++r)if(i.isDatasetVisible(r)){s=i.getDatasetMeta(r),e=s.data,o=s.controller;break}if(!e)return 0;for(r=0,n=e.length;r<n;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Rt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function en(e,t,i,r){const{controller:n,data:s,_sorted:o}=e,a=n._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const o=a._reversePixels?ui:di;if(!r){const r=o(s,t,i);if(l){const{vScale:t}=n._cachedMeta,{_parsed:i}=e,s=i.slice(0,r.lo+1).reverse().findIndex(e=>!Et(e[t.axis]));r.lo-=Math.max(0,s);const o=i.slice(r.hi).findIndex(e=>!Et(e[t.axis]));r.hi+=Math.max(0,o)}return r}if(n._sharedOptions){const e=s[0],r="function"==typeof e.getRange&&e.getRange(t);if(r){const e=o(s,t,i-r),n=o(s,t,i+r);return{lo:e.lo,hi:n.hi}}}}return{lo:0,hi:s.length-1}}function tn(e,t,i,r,n){const s=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:i}=s[a],{lo:l,hi:c}=en(s[a],t,o,n);for(let t=l;t<=c;++t){const n=i[t];n.skip||r(n,e,t)}}}function rn(e,t,i,r,n){const s=[];if(!n&&!e.isPointInArea(t))return s;return tn(e,i,t,function(i,o,a){(n||Wi(i,e.chartArea,0))&&i.inRange(t.x,t.y,r)&&s.push({element:i,datasetIndex:o,index:a})},!0),s}function nn(e,t,i,r,n,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,r){const n=t?Math.abs(e.x-r.x):0,s=i?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(s,2))}}(i);let l=Number.POSITIVE_INFINITY;return tn(e,i,t,function(i,c,h){const d=i.inRange(t.x,t.y,n);if(r&&!d)return;const u=i.getCenterPoint(n);if(!(!!s||e.isPointInArea(u))&&!d)return;const f=a(t,u);f<l?(o=[{element:i,datasetIndex:c,index:h}],l=f):f===l&&o.push({element:i,datasetIndex:c,index:h})}),o}function sn(e,t,i,r,n,s){return s||e.isPointInArea(t)?"r"!==i||r?nn(e,t,i,r,n,s):function(e,t,i,r){let n=[];return tn(e,i,t,function(e,i,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=ni(e,{x:t.x,y:t.y});ai(l,o,a)&&n.push({element:e,datasetIndex:i,index:s})}),n}(e,t,i,n):[]}function on(e,t,i,r,n){const s=[],o="x"===i?"inXRange":"inYRange";let a=!1;return tn(e,i,t,(e,r,l)=>{e[o]&&e[o](t[i],n)&&(s.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,n))}),r&&!a?[]:s}var an={modes:{index(e,t,i,r){const n=Cr(t,e),s=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?rn(e,n,s,r,o):sn(e,n,s,!1,r,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=a[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,i,r){const n=Cr(t,e),s=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?rn(e,n,s,r,o):sn(e,n,s,!1,r,o);if(a.length>0){const t=a[0].datasetIndex,i=e.getDatasetMeta(t).data;a=[];for(let e=0;e<i.length;++e)a.push({element:i[e],datasetIndex:t,index:e})}return a},point:(e,t,i,r)=>rn(e,Cr(t,e),i.axis||"xy",r,i.includeInvisible||!1),nearest(e,t,i,r){const n=Cr(t,e),s=i.axis||"xy",o=i.includeInvisible||!1;return sn(e,n,s,i.intersect,r,o)},x:(e,t,i,r)=>on(e,Cr(t,e),"x",i.intersect,r),y:(e,t,i,r)=>on(e,Cr(t,e),"y",i.intersect,r)}};const ln=["left","top","right","bottom"];function cn(e,t){return e.filter(e=>e.pos===t)}function hn(e,t){return e.filter(e=>-1===ln.indexOf(e.pos)&&e.box.axis===t)}function dn(e,t){return e.sort((e,i)=>{const r=t?i:e,n=t?e:i;return r.weight===n.weight?r.index-n.index:r.weight-n.weight})}function un(e,t){const i=function(e){const t={};for(const i of e){const{stack:e,pos:r,stackWeight:n}=i;if(!e||!ln.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=n}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:n}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=i[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&t.availableWidth,a.height=n):(a.width=r,a.height=c?c*n:o&&t.availableHeight)}return i}function fn(e,t,i,r){return Math.max(e[i],t[i])+Math.max(e[r],t[r])}function pn(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function gn(e,t,i,r){const{pos:n,box:s}=i,o=e.maxPadding;if(!Dt(n)){i.size&&(e[n]-=i.size);const t=r[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?s.height:s.width),i.size=t.size/t.count,e[n]+=i.size}s.getPadding&&pn(o,s.getPadding());const a=Math.max(0,t.outerWidth-fn(o,e,"left","right")),l=Math.max(0,t.outerHeight-fn(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function mn(e,t){const i=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],i[e])}),r}return r(e?["left","right"]:["top","bottom"])}function _n(e,t,i,r){const n=[];let s,o,a,l,c,h;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,mn(a.horizontal,t));const{same:o,other:d}=gn(t,i,a,r);c|=o&&n.length,h=h||d,l.fullSize||n.push(a)}return c&&_n(n,t,i,r)||h}function vn(e,t,i,r,n){e.top=i,e.left=t,e.right=t+r,e.bottom=i+n,e.width=r,e.height=n}function bn(e,t,i,r){const n=i.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=r[a.stack]||{placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,s=l.size||e.height;Vt(l.start)&&(o=l.start),e.fullSize?vn(e,n.left,o,i.outerWidth-n.right-n.left,s):vn(e,t.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=e.bottom}else{const r=t.h*c,o=l.size||e.width;Vt(l.start)&&(s=l.start),e.fullSize?vn(e,s,n.top,o,i.outerHeight-n.bottom-n.top):vn(e,s,t.top+l.placed,o,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=o}var yn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,r){if(!e)return;const n=tr(e.options.layout.padding),s=Math.max(t-n.width,0),o=Math.max(i-n.height,0),a=function(e){const t=function(e){const t=[];let i,r,n,s,o,a;for(i=0,r=(e||[]).length;i<r;++i)n=e[i],({position:s,options:{stack:o,stackWeight:a=1}}=n),t.push({index:i,box:n,pos:s,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&s+o,stackWeight:a});return t}(e),i=dn(t.filter(e=>e.box.fullSize),!0),r=dn(cn(t,"left"),!0),n=dn(cn(t,"right")),s=dn(cn(t,"top"),!0),o=dn(cn(t,"bottom")),a=hn(t,"x"),l=hn(t,"y");return{fullSize:i,leftAndTop:r.concat(s),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:cn(t,"chartArea"),vertical:r.concat(n).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;jt(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});const h=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:i,padding:n,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),u=Object.assign({},n);pn(u,tr(r));const f=Object.assign({maxPadding:u,w:s,h:o,x:n.left,y:n.top},n),p=un(l.concat(c),d);_n(a.fullSize,f,d,p),_n(l,f,d,p),_n(c,f,d,p)&&_n(l,f,d,p),function(e){const t=e.maxPadding;function i(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(f),bn(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,bn(a.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},jt(a.chartArea,t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class xn{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Sn extends xn{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const wn="$chartjs",Cn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kn=e=>null===e||""===e;const En=!!Dr&&{passive:!0};function Ln(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,En)}function Dn(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function Mn(e,t,i){const r=e.canvas,n=new MutationObserver(e=>{let t=!1;for(const i of e)t=t||Dn(i.addedNodes,r),t=t&&!Dn(i.removedNodes,r);t&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function An(e,t,i){const r=e.canvas,n=new MutationObserver(e=>{let t=!1;for(const i of e)t=t||Dn(i.removedNodes,r),t=t&&!Dn(i.addedNodes,r);t&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}const Rn=new Map;let Tn=0;function Pn(){const e=window.devicePixelRatio;e!==Tn&&(Tn=e,Rn.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function jn(e,t,i){const r=e.canvas,n=r&&br(r);if(!n)return;const s=mi((e,t)=>{const r=n.clientWidth;i(e,t),r<n.clientWidth&&i()},window),o=new ResizeObserver(e=>{const t=e[0],i=t.contentRect.width,r=t.contentRect.height;0===i&&0===r||s(i,r)});return o.observe(n),function(e,t){Rn.size||window.addEventListener("resize",Pn),Rn.set(e,t)}(e,s),o}function On(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){Rn.delete(e),Rn.size||window.removeEventListener("resize",Pn)}(e)}function Bn(e,t,i){const r=e.canvas,n=mi(t=>{null!==e.ctx&&i(function(e,t){const i=Cn[e.type]||e.type,{x:r,y:n}=Cr(e,t);return{type:i,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==n?n:null}}(t,e))},e);return function(e,t,i){e&&e.addEventListener(t,i,En)}(r,t,n),n}class In extends xn{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,r=e.getAttribute("height"),n=e.getAttribute("width");if(e[wn]={initial:{height:r,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",kn(n)){const t=Mr(e,"width");void 0!==t&&(e.width=t)}if(kn(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Mr(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[wn])return!1;const i=t[wn].initial;["height","width"].forEach(e=>{const r=i[e];Et(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=i.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[wn],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),n={attach:Mn,detach:An,resize:jn}[t]||Bn;r[t]=n(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:On,detach:On,resize:On}[t]||Ln)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return Er(e,t,i,r)}isAttached(e){const t=e&&br(e);return!(!t||!t.isConnected)}}class Nn{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return ii(this.x)&&ii(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(e=>{r[e]=i[e]&&i[e].active()?i[e]._to:this[e]}),r}}function Fn(e,t){const i=e.options.ticks,r=function(e){const t=e.options.offset,i=e._tickSize(),r=e._length/i+(t?0:1),n=e._maxLength/i;return Math.floor(Math.min(r,n))}(e),n=Math.min(i.maxTicksLimit||r,r),s=i.major.enabled?function(e){const t=[];let i,r;for(i=0,r=e.length;i<r;i++)e[i].major&&t.push(i);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>n)return function(e,t,i,r){let n,s=0,o=i[0];for(r=Math.ceil(r),n=0;n<e.length;n++)n===o&&(t.push(e[n]),s++,o=i[s*r])}(t,c,s,o/n),c;const h=function(e,t,i){const r=function(e){const t=e.length;let i,r;if(t<2)return!1;for(r=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==r)return!1;return r}(e),n=t.length/i;if(!r)return Math.max(n,1);const s=function(e){const t=[],i=Math.sqrt(e);let r;for(r=1;r<i;r++)e%r===0&&(t.push(r),t.push(e/r));return i===(0|i)&&t.push(i),t.sort((e,t)=>e-t).pop(),t}(r);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>n)return e}return Math.max(n,1)}(s,t,n);if(o>0){let e,i;const r=o>1?Math.round((l-a)/(o-1)):null;for(zn(t,c,h,Et(r)?0:a-r,a),e=0,i=o-1;e<i;e++)zn(t,c,h,s[e],s[e+1]);return zn(t,c,h,l,Et(r)?t.length:l+r),c}return zn(t,c,h),c}function zn(e,t,i,r,n){const s=Rt(r,0),o=Math.min(Rt(n,e.length),e.length);let a,l,c,h=0;for(i=Math.ceil(i),n&&(a=n-r,i=a/Math.floor(a/i)),c=s;c<0;)h++,c=Math.round(s+h*i);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),h++,c=Math.round(s+h*i))}const Hn=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,Wn=(e,t)=>Math.min(t||e,e);function $n(e,t){const i=[],r=e.length/t,n=e.length;let s=0;for(;s<n;s+=r)i.push(e[Math.floor(s)]);return i}function Un(e,t,i){const r=e.ticks.length,n=Math.min(t,r-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(n);if(!(i&&(l=1===r?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(n-1))/2,c+=n<t?l:-l,c<s-a||c>o+a)))return c}function Vn(e){return e.drawTicks?e.tickLength:0}function qn(e,t){if(!e.display)return 0;const i=ir(e.font,t),r=tr(e.padding);return(Lt(e.text)?e.text.length:1)*i.lineHeight+r.height}function Kn(e,t,i){let r=_i(e);return(i&&"right"!==t||!i&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Gn extends Nn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=At(e,Number.POSITIVE_INFINITY),t=At(t,Number.NEGATIVE_INFINITY),i=At(i,Number.POSITIVE_INFINITY),r=At(r,Number.NEGATIVE_INFINITY),{min:At(e,i),max:At(t,r),minDefined:Mt(e),maxDefined:Mt(t)}}getMinMax(e){let t,{min:i,max:r,minDefined:n,maxDefined:s}=this.getUserBounds();if(n&&s)return{min:i,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),n||(i=Math.min(i,t.min)),s||(r=Math.max(r,t.max));return i=s&&i>r?r:i,r=n&&i>r?i:r,{min:At(i,At(r,i)),max:At(r,At(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pt(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:n,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){const{min:r,max:n}=e,s=Tt(t,(n-r)/2),o=(e,t)=>i&&0===e?0:e+t;return{min:o(r,-Math.abs(s)),max:o(n,s)}}(this,n,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?$n(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Fn(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pt(this.options.afterUpdate,[this])}beforeSetDimensions(){Pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,n;for(i=0,r=e.length;i<r;i++)n=e[i],n.label=Pt(t.callback,[n.value,i,e],this)}afterTickToLabelConversion(){Pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Wn(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,n=t.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!t.display||r>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),h=c.widest.width,d=c.highest.height,u=li(this.chart.width-h,0,this.maxWidth);s=e.offset?this.maxWidth/i:u/(i-1),h+6>s&&(s=u/(i-(e.offset?.5:1)),o=this.maxHeight-Vn(e.grid)-t.padding-qn(e.title,this.chart.options.font),a=Math.sqrt(h*h+d*d),l=Math.min(Math.asin(li((c.highest.height+6)/s,-1,1)),Math.asin(li(o/a,-1,1))-Math.asin(li(d/a,-1,1)))*(180/Gt),l=Math.max(r,Math.min(n,l))),this.labelRotation=l}afterCalculateLabelRotation(){Pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:n}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=qn(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=Vn(n)+s):(e.height=this.maxHeight,e.width=Vn(n)+s),i.display&&this.ticks.length){const{first:t,last:r,widest:n,highest:s}=this._getLabelSizes(),a=2*i.padding,l=ri(this.labelRotation),c=Math.cos(l),h=Math.sin(l);if(o){const t=i.mirror?0:h*n.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=i.mirror?0:c*n.width+h*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,h,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:n,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;a?l?(h=r*e.width,d=i*t.height):(h=i*e.height,d=r*t.width):"start"===n?d=t.width:"end"===n?h=e.width:"inner"!==n&&(h=e.width/2,d=t.width/2),this.paddingLeft=Math.max((h-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let i=t.height/2,r=e.height/2;"start"===n?(i=0,r=e.height):"end"===n&&(i=t.height,r=0),this.paddingTop=i+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)Et(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=$n(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:n}=this,s=[],o=[],a=Math.floor(t/Wn(t,i));let l,c,h,d,u,f,p,g,m,_,v,b=0,y=0;for(l=0;l<t;l+=a){if(d=e[l].label,u=this._resolveTickFontOptions(l),r.font=f=u.string,p=n[f]=n[f]||{data:{},gc:[]},g=u.lineHeight,m=_=0,Et(d)||Lt(d)){if(Lt(d))for(c=0,h=d.length;c<h;++c)v=d[c],Et(v)||Lt(v)||(m=Ii(r,p.data,p.gc,m,v),_+=g)}else m=Ii(r,p.data,p.gc,m,d),_=g;s.push(m),o.push(_),b=Math.max(m,b),y=Math.max(_,y)}!function(e,t){jt(e,e=>{const i=e.gc,r=i.length/2;let n;if(r>t){for(n=0;n<r;++n)delete e.data[i[n]];i.splice(0,r)}})}(n,t);const x=s.indexOf(b),S=o.indexOf(y),w=e=>({width:s[e]||0,height:o[e]||0});return{first:w(0),last:w(t-1),widest:w(x),highest:w(S),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return li(this._alignToPixels?Ni(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function(e,t,i){return nr(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=nr(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=ri(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),n=this._getLabelSizes(),s=e.autoSkipPadding||0,o=n?n.widest.width+s:0,a=n?n.highest.height+s:0;return this.isHorizontal()?a*i>o*r?o/i:a/r:a*r<o*i?a/i:o/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:n,position:s,border:o}=r,a=n.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),h=Vn(n),d=[],u=o.setContext(this.getContext()),f=u.display?u.width:0,p=f/2,g=function(e){return Ni(i,e,f)};let m,_,v,b,y,x,S,w,C,k,E,L;if("top"===s)m=g(this.bottom),x=this.bottom-h,w=m-p,k=g(e.top)+p,L=e.bottom;else if("bottom"===s)m=g(this.top),k=e.top,L=g(e.bottom)-p,x=m+p,w=this.top+h;else if("left"===s)m=g(this.right),y=this.right-h,S=m-p,C=g(e.left)+p,E=e.right;else if("right"===s)m=g(this.left),C=e.left,E=g(e.right)-p,y=m+p,S=this.left+h;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(Dt(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}k=e.top,L=e.bottom,x=m+p,w=x+h}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(Dt(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}y=m-p,S=y-h,C=e.left,E=e.right}const D=Rt(r.ticks.maxTicksLimit,c),M=Math.max(1,Math.ceil(c/D));for(_=0;_<c;_+=M){const e=this.getContext(_),t=n.setContext(e),r=o.setContext(e),s=t.lineWidth,c=t.color,h=r.dash||[],u=r.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=Un(this,_,a),void 0!==v&&(b=Ni(i,v,s),l?y=S=C=E=b:x=w=k=L=b,d.push({tx1:y,ty1:x,tx2:S,ty2:w,x1:C,y1:k,x2:E,y2:L,width:s,color:c,borderDash:h,borderDashOffset:u,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:n}=i,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:h}=n,d=Vn(i.grid),u=d+c,f=h?-c:u,p=-ri(this.labelRotation),g=[];let m,_,v,b,y,x,S,w,C,k,E,L,D="middle";if("top"===r)x=this.bottom-f,S=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+f,S=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,y=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,y=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+u;else if(Dt(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+u}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)y=(e.left+e.right)/2-u;else if(Dt(r)){const e=Object.keys(r)[0],t=r[e];y=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?D="top":"end"===a&&(D="bottom"));const M=this._getLabelSizes();for(m=0,_=o.length;m<_;++m){v=o[m],b=v.label;const e=n.setContext(this.getContext(m));w=this.getPixelForTick(m)+n.labelOffset,C=this._resolveTickFontOptions(m),k=C.lineHeight,E=Lt(b)?b.length:1;const t=E/2,i=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,u=S;if(s?(y=w,"inner"===S&&(u=m===_-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),L="top"===r?"near"===l||0!==p?-E*k+k/2:"center"===l?-M.highest.height/2-t*k+k:-M.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?M.highest.height/2-t*k:M.highest.height-E*k,h&&(L*=-1),0===p||e.showLabelBackdrop||(y+=k/2*Math.sin(p))):(x=w,L=(1-E)*k/2),e.showLabelBackdrop){const t=tr(e.backdropPadding),i=M.heights[m],r=M.widths[m];let n=L-t.top,s=0-t.left;switch(D){case"middle":n-=i/2;break;case"bottom":n-=i}switch(S){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===_-1?s-=r:m>0&&(s-=r/2)}d={left:s,top:n,width:r+t.width,height:i+t.height,color:e.backdropColor}}g.push({label:b,font:C,textOffset:L,options:{rotation:p,color:i,strokeColor:a,strokeWidth:c,textAlign:u,textBaseline:D,translation:[y,x],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ri(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:n}}=this.options,s=e+n,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+n,"near"===i?a="left":"center"===i?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===i?a="right":"center"===i?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+n,"near"===i?a="right":"center"===i?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===i?a="left":"center"===i?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:n,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,n,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(t=>t.value===e);if(i>=0){return t.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,s;const o=(e,t,r)=>{r.width&&r.color&&(i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.setLineDash(r.borderDash||[]),i.lineDashOffset=r.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(t.display)for(n=0,s=r.length;n<s;++n){const e=r[n];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,n=i.setContext(this.getContext()),s=i.display?n.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,h,d;this.isHorizontal()?(l=Ni(e,this.left,s)-s/2,c=Ni(e,this.right,o)+o/2,h=d=a):(h=Ni(e,this.top,s)-s/2,d=Ni(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=n.width,t.strokeStyle=n.color,t.beginPath(),t.moveTo(l,h),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,i=this._computeLabelArea();i&&$i(t,i);const r=this.getLabelItems(e);for(const n of r){const e=n.options,i=n.font;Ki(t,n.label,0,n.textOffset,i,e)}i&&Ui(t)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const n=ir(i.font),s=tr(i.padding),o=i.align;let a=n.lineHeight/2;"bottom"===t||"center"===t||Dt(t)?(a+=s.bottom,Lt(i.text)&&(a+=n.lineHeight*(i.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:h,rotation:d}=function(e,t,i,r){const{top:n,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let d,u,f,p=0;const g=o-n,m=a-s;if(e.isHorizontal()){if(u=vi(r,s,a),Dt(i)){const e=Object.keys(i)[0],r=i[e];f=h[e].getPixelForValue(r)+g-t}else f="center"===i?(c.bottom+c.top)/2+g-t:Hn(e,i,t);d=a-s}else{if(Dt(i)){const e=Object.keys(i)[0],r=i[e];u=h[e].getPixelForValue(r)-m+t}else u="center"===i?(c.left+c.right)/2-m+t:Hn(e,i,t);f=vi(r,o,n),p="left"===i?-Jt:Jt}return{titleX:u,titleY:f,maxWidth:d,rotation:p}}(this,a,t,o);Ki(e,i.text,0,0,n,{color:i.color,maxWidth:h,rotation:d,textAlign:Kn(o,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Rt(e.grid&&e.grid.z,-1),r=Rt(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Gn.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let n,s;for(n=0,s=t.length;n<s;++n){const s=t[n];s[i]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return ir(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yn{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function(e){return"id"in e&&"defaults"in e})(t)&&(i=this.register(t));const r=this.items,n=e.id,s=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in r||(r[n]=e,function(e,t,i){const r=Ft(Object.create(null),[i?Bi.get(i):{},Bi.get(t),e.defaults]);Bi.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(i=>{const r=i.split("."),n=r.pop(),s=[e].concat(r).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");Bi.route(s,n,l,a)})}(t,e.defaultRoutes);e.descriptors&&Bi.describe(t,e.descriptors)}(e,s,i),this.override&&Bi.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Bi[r]&&(delete Bi[r][i],this.override&&delete Ri[i])}}class Xn{constructor(){this.controllers=new Yn(Jr,"datasets",!0),this.elements=new Yn(Nn,"elements"),this.plugins=new Yn(Object,"plugins"),this.scales=new Yn(Gn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(t=>{const r=i||this._getRegistryForType(t);i||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):jt(t,t=>{const r=i||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,i){const r=Ut(e);Pt(i["before"+r],[],i),t[e](i),Pt(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Qn=new Xn;class Jn{constructor(){this._init=[]}notify(e,t,i,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(n,e,t,i);return"afterDestroy"===t&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,i,r){r=r||{};for(const n of e){const e=n.plugin;if(!1===Pt(e[i],[t,r,n.options],e)&&r.cancelable)return!1}return!0}invalidate(){Et(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=Rt(i.options&&i.options.plugins,{}),n=function(e){const t={},i=[],r=Object.keys(Qn.plugins.items);for(let s=0;s<r.length;s++)i.push(Qn.getPlugin(r[s]));const n=e.plugins||[];for(let s=0;s<n.length;s++){const e=n[s];-1===i.indexOf(e)&&(i.push(e),t[e.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==r||t?function(e,{plugins:t,localIds:i},r,n){const s=[],o=e.getContext();for(const a of t){const t=a.id,l=Zn(r[t],n);null!==l&&s.push({plugin:a,options:es(e.config,{plugin:a,local:i[t]},l,o)})}return s}(e,n,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function Zn(e,t){return t||!1!==e?!0===e?{}:e:null}function es(e,{plugin:t,local:i},r,n){const s=e.pluginScopeKeys(t),o=e.getOptionScopes(r,s);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ts(e,t){const i=Bi.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function is(e){if("x"===e||"y"===e||"r"===e)return e}function rs(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function ns(e,...t){if(is(e))return e;for(const i of t){const t=i.axis||rs(i.position)||e.length>1&&is(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function ss(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function os(e,t){const i=Ri[e.type]||{scales:{}},r=t.scales||{},n=ts(e.type,t),s=Object.create(null);return Object.keys(r).forEach(t=>{const o=r[t];if(!Dt(o))return;if(o._proxy)return;const a=ns(t,o,function(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(i.length)return ss(e,"x",i[0])||ss(e,"y",i[0])}return{}}(t,e),Bi.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,n),c=i.scales||{};s[t]=zt(Object.create(null),[{axis:a},o,c[a],c[l]])}),e.data.datasets.forEach(i=>{const n=i.type||e.type,o=i.indexAxis||ts(n,t),a=(Ri[n]||{}).scales||{};Object.keys(a).forEach(e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,o),n=i[t+"AxisID"]||t;s[n]=s[n]||Object.create(null),zt(s[n],[{axis:t},r[n],a[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];zt(t,[Bi.scales[t.type],Bi.scale])}),s}function as(e){const t=e.options||(e.options={});t.plugins=Rt(t.plugins,{}),t.scales=os(e,t)}function ls(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const cs=new Map,hs=new Set;function ds(e,t){let i=cs.get(e);return i||(i=t(),cs.set(e,i),hs.add(i)),i}const us=(e,t,i)=>{const r=$t(t,i);void 0!==r&&e.add(r)};class fs{constructor(e){this._config=function(e){return(e=e||{}).data=ls(e.data),as(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ls(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),as(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ds(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ds(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ds(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return ds(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return r&&!t||(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:n}=this,s=this._cachedScopes(e,i),o=s.get(t);if(o)return o;const a=new Set;t.forEach(t=>{e&&(a.add(e),t.forEach(t=>us(a,e,t))),t.forEach(e=>us(a,r,e)),t.forEach(e=>us(a,Ri[n]||{},e)),t.forEach(e=>us(a,Bi,e)),t.forEach(e=>us(a,Ti,e))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),hs.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ri[t]||{},Bi.datasets[t]||{},{type:t},Bi,Ti]}resolveNamedOptions(e,t,i,r=[""]){const n={$shared:!0},{resolver:s,subPrefixes:o}=ps(this._resolverCache,e,r);let a=s;if(function(e,t){const{isScriptable:i,isIndexable:r}=ar(e);for(const n of t){const t=i(n),s=r(n),o=(s||t)&&e[n];if(t&&(qt(o)||gs(o))||s&&Lt(o))return!0}return!1}(s,t)){n.$shared=!1;a=or(s,i=qt(i)?i():i,this.createResolver(e,i,o))}for(const l of t)n[l]=a[l];return n}createResolver(e,t,i=[""],r){const{resolver:n}=ps(this._resolverCache,e,i);return Dt(t)?or(n,t,void 0,r):n}}function ps(e,t,i){let r=e.get(t);r||(r=new Map,e.set(t,r));const n=i.join();let s=r.get(n);if(!s){s={resolver:sr(t,i),subPrefixes:i.filter(e=>!e.toLowerCase().includes("hover"))},r.set(n,s)}return s}const gs=e=>Dt(e)&&Object.getOwnPropertyNames(e).some(t=>qt(e[t]));const ms=["top","bottom","left","right","chartArea"];function _s(e,t){return"top"===e||"bottom"===e||-1===ms.indexOf(e)&&"x"===t}function vs(e,t){return function(i,r){return i[e]===r[e]?i[t]-r[t]:i[e]-r[e]}}function bs(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Pt(i&&i.onComplete,[e],t)}function ys(e){const t=e.chart,i=t.options.animation;Pt(i&&i.onProgress,[e],t)}function xs(e){return vr()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ss={},ws=e=>{const t=xs(e);return Object.values(Ss).filter(e=>e.canvas===t).pop()};function Cs(e,t,i){const r=Object.keys(e);for(const n of r){const r=+n;if(r>=t){const s=e[n];delete e[n],(i>0||r>t)&&(e[r+i]=s)}}}let ks=class{static defaults=Bi;static instances=Ss;static overrides=Ri;static registry=Qn;static version="4.5.0";static getChart=ws;static register(...e){Qn.add(...e),Es()}static unregister(...e){Qn.remove(...e),Es()}constructor(e,t){const i=this.config=new fs(t),r=xs(e),n=ws(r);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(e){return!vr()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Sn:In}(r)),this.platform.updateConfig(i);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=kt(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Jn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let i;return function(...r){return t?(clearTimeout(i),i=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],Ss[this.id]=this,o&&a&&(Br.listen(this,"complete",bs),Br.listen(this,"progress",ys),this._initialize(),this.attached&&this.update())}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:n}=this;return Et(e)?t&&n?n:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Lr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fi(this.canvas,this.ctx),this}stop(){return Br.stop(this),this}resize(e,t){Br.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,n),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Lr(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Pt(i.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){jt(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((e,t)=>(e[t]=!1,e),{});let n=[];t&&(n=n.concat(Object.keys(t).map(e=>{const i=t[e],r=ns(e,i),n="r"===r,s="x"===r;return{options:i,dposition:n?"chartArea":s?"bottom":"left",dtype:n?"radialLinear":s?"category":"linear"}}))),jt(n,t=>{const n=t.options,s=n.id,o=ns(s,n),a=Rt(n.type,t.dtype);void 0!==n.position&&_s(n.position,o)===_s(t.dposition)||(n.position=t.dposition),r[s]=!0;let l=null;if(s in i&&i[s].type===a)l=i[s];else{l=new(Qn.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(n,e)}),jt(r,(e,t)=>{e||delete i[t]}),jt(i,e=>{yn.configure(this,e,e.options),yn.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((e,t)=>e.index-t.index),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(vs("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,i)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const r=t[i];let n=this.getDatasetMeta(i);const s=r.type||this.config.type;if(n.type&&n.type!==s&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=s,n.indexAxis=r.indexAxis||ts(s,this.options),n.order=r.order||0,n.index=i,n.label=""+r.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const t=Qn.getController(s),{datasetElementType:r,dataElementType:o}=Bi.datasets[s];Object.assign(t,{dataElementType:Qn.getElement(o),datasetElementType:r&&Qn.getElement(r)}),n.controller=new t(this,i),e.push(n.controller)}}return this._updateMetasets(),e}_resetElements(){jt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===n.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),r||jt(n,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vs("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){jt(this.scales,e=>{yn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);Kt(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:n}of t){Cs(e,r,"_removeElements"===i?-n:n)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=i(0);for(let n=1;n<t;n++)if(!Kt(r,i(n)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;yn.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],jt(this.boxes,e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,qt(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Br.has(this)?this.attached&&!Br.running(this)&&Br.start(this):(this.draw(),bs({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,n;for(r=0,n=t.length;r<n;++r){const n=t[r];e&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=jr(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&$i(t,r),e.controller.draw(),r&&Ui(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Wi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const n=an.modes[t];return"function"==typeof n?n(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=nr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",n=this.getDatasetMeta(e),s=n.controller._resolveAnimations(void 0,r);Vt(t)?(n.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),s.update(n,{visible:i}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Br.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Fi(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ss[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(i,r)=>{t.addEventListener(this,i,r),e[i]=r},r=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};jt(this.options.events,e=>i(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(i,r)=>{t.addEventListener(this,i,r),e[i]=r},r=(i,r)=>{e[i]&&(t.removeEventListener(this,i,r),delete e[i])},n=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),i("resize",n),i("detach",s)};s=()=>{this.attached=!1,r("resize",n),this._stop(),this._resize(0,0),i("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){jt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},jt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let n,s,o,a;for("dataset"===t&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:e,index:t})=>{const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}});!Ot(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,i){const r=this.options.hover,n=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=n(t,e),o=i?e:n(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;const n=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(n||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:n}=this,s=t,o=this._getActiveElements(e,r,i,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,i,r){return i&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,i,a);i&&(this._lastEvent=null,Pt(n.onHover,[e,o,this],this),a&&Pt(n.onClick,[e,o,this],this));const c=!Ot(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,i,r){if("mouseout"===e.type)return[];if(!i)return t;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,r)}};function Es(){return jt(ks.instances,e=>e._plugins.invalidate())}function Ls(e,t,i,r){const n=Zi(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(i-t)/2,o=Math.min(s,r*t/2),a=e=>{const t=(i-Math.min(s,e))*r/2;return li(e,0,Math.min(s,t))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:li(n.innerStart,0,o),innerEnd:li(n.innerEnd,0,o)}}function Ds(e,t,i,r){return{x:i+e*Math.cos(t),y:r+e*Math.sin(t)}}function Ms(e,t,i,r,n,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,d=Math.max(t.outerRadius+r+i-c,0),u=h>0?h+r+i+c:0;let f=0;const p=n-l;if(r){const e=((h>0?h-r:0)+(d>0?d-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const g=(p-Math.max(.001,p*d-i/Gt)/d)/2,m=l+g+f,_=n-g-f,{outerStart:v,outerEnd:b,innerStart:y,innerEnd:x}=Ls(t,u,d,_-m),S=d-v,w=d-b,C=m+v/S,k=_-b/w,E=u+y,L=u+x,D=m+y/E,M=_-x/L;if(e.beginPath(),s){const t=(C+k)/2;if(e.arc(o,a,d,C,t),e.arc(o,a,d,t,k),b>0){const t=Ds(w,k,o,a);e.arc(t.x,t.y,b,k,_+Jt)}const i=Ds(L,_,o,a);if(e.lineTo(i.x,i.y),x>0){const t=Ds(L,M,o,a);e.arc(t.x,t.y,x,_+Jt,M+Math.PI)}const r=(_-x/u+(m+y/u))/2;if(e.arc(o,a,u,_-x/u,r,!0),e.arc(o,a,u,r,m+y/u,!0),y>0){const t=Ds(E,D,o,a);e.arc(t.x,t.y,y,D+Math.PI,m-Jt)}const n=Ds(S,m,o,a);if(e.lineTo(n.x,n.y),v>0){const t=Ds(S,C,o,a);e.arc(t.x,t.y,v,m-Jt,C)}}else{e.moveTo(o,a);const t=Math.cos(C)*d+o,i=Math.sin(C)*d+a;e.lineTo(t,i);const r=Math.cos(k)*d+o,n=Math.sin(k)*d+a;e.lineTo(r,n)}e.closePath()}function As(e,t,i,r,n){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:u,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=u,p?(e.lineWidth=2*c,e.lineJoin=h||"round"):(e.lineWidth=c,e.lineJoin=h||"bevel");let g=t.endAngle;if(s){Ms(e,t,i,r,g,n);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(g=o+(a%Yt||Yt))}p&&function(e,t,i){const{startAngle:r,pixelMargin:n,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=n/a;e.beginPath(),e.arc(s,o,a,r-c,i+c),l>n?(c=n/l,e.arc(s,o,l,i+c,r-c,!0)):e.arc(s,o,n,i+Jt,r-Jt),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-o>=Gt&&0===f&&"miter"!==h&&function(e,t,i){const{startAngle:r,x:n,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/o,oi(r-i));if(e.beginPath(),e.arc(n,s,o-c/2,r+d/2,i-d/2),a>0){const t=Math.min(c/a,oi(r-i));e.arc(n,s,a+c/2,i-t/2,r+t/2,!0)}else{const t=Math.min(c/2,o*oi(r-i));if("round"===h)e.arc(n,s,t,i-Gt/2,r+Gt/2,!0);else if("bevel"===h){const o=2*t*t,a=-o*Math.cos(i+Gt/2)+n,l=-o*Math.sin(i+Gt/2)+s,c=o*Math.cos(r+Gt/2)+n,h=o*Math.sin(r+Gt/2)+s;e.lineTo(a,l),e.lineTo(c,h)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),s||(Ms(e,t,i,r,g,n),e.stroke())}const Rs=(e,t)=>{let{boxHeight:i=t,boxWidth:r=t}=e;return e.usePointStyle&&(i=Math.min(i,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:i,itemHeight:Math.max(t,i)}};class Ts extends Nn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Pt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,i)=>e.sort(t,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,r=ir(i.font),n=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Rs(i,n);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,n,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:n,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let h=e;n.textAlign="left",n.textBaseline="middle";let d=-1,u=-c;return this.legendItems.forEach((e,f)=>{const p=i+t/2+n.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(h+=c,l[l.length-(f>0?0:1)]=0,u+=c,d++),a[f]={left:0,top:u,row:d,width:p,height:r},l[l.length-1]+=p+o}),h}_fitCols(e,t,i,r){const{ctx:n,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let h=o,d=0,u=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,i,r,n){const s=function(e,t,i,r){let n=e.text;n&&"string"!=typeof n&&(n=n.reduce((e,t)=>e.length>t.length?e:t));return t+i.size/2+r.measureText(n).width}(r,e,t,i),o=function(e,t,i){let r=e;"string"!=typeof t.text&&(r=Ps(t,i));return r}(n,r,t.lineHeight);return{itemWidth:s,itemHeight:o}}(i,t,n,e,r);s>0&&u+m+2*o>c&&(h+=d+o,l.push({width:d,height:u}),f+=d+o,p++,d=u=0),a[s]={left:f,top:u,col:p,width:g,height:m},d=Math.max(d,g),u+=m+o}),h+=d,l.push({width:d,height:u}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:n}}=this,s=Ar(n,this.left,this.width);if(this.isHorizontal()){let n=0,o=vi(i,this.left+r,this.right-this.lineWidths[n]);for(const a of t)n!==a.row&&(n=a.row,o=vi(i,this.left+r,this.right-this.lineWidths[n])),a.top+=this.top+e+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let n=0,o=vi(i,this.top+e+r,this.bottom-this.columnSizes[n].height);for(const a of t)a.col!==n&&(n=a.col,o=vi(i,this.top+e+r,this.bottom-this.columnSizes[n].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;$i(e,this),this._draw(),Ui(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:n,labels:s}=e,o=Bi.color,a=Ar(e.rtl,this.left,this.width),l=ir(s.font),{padding:c}=s,h=l.size,d=h/2;let u;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Rs(s,h),m=this.isHorizontal(),_=this._computeTitleHeight();u=m?{x:vi(n,this.left+c,this.right-i[0]),y:this.top+c+_,line:0}:{x:this.left+c,y:vi(n,this.top+_+c,this.bottom-t[0].height),line:0},Rr(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach((b,y)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const x=r.measureText(b.text).width,S=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),w=f+d+x;let C=u.x,k=u.y;a.setWidth(this.width),m?y>0&&C+w+c>this.right&&(k=u.y+=v,u.line++,C=u.x=vi(n,this.left+c,this.right-i[u.line])):y>0&&k+v>this.bottom&&(C=u.x=C+t[u.line].width+c,u.line++,k=u.y=vi(n,this.top+_+c,this.bottom-t[u.line].height));if(function(e,t,i){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const n=Rt(i.lineWidth,1);if(r.fillStyle=Rt(i.fillStyle,o),r.lineCap=Rt(i.lineCap,"butt"),r.lineDashOffset=Rt(i.lineDashOffset,0),r.lineJoin=Rt(i.lineJoin,"miter"),r.lineWidth=n,r.strokeStyle=Rt(i.strokeStyle,o),r.setLineDash(Rt(i.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},l=a.xPlus(e,f/2);Hi(r,o,l,t+d,s.pointStyleWidth&&f)}else{const s=t+Math.max((h-p)/2,0),o=a.leftForLtr(e,f),l=er(i.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?Gi(r,{x:o,y:s,w:f,h:p,radius:l}):r.rect(o,s,f,p),r.fill(),0!==n&&r.stroke()}r.restore()}(a.x(C),k,b),C=((e,t,i,r)=>e===(r?"left":"right")?i:"center"===e?(t+i)/2:t)(S,C+f+d,m?C+w:this.right,e.rtl),function(e,t,i){Ki(r,i.text,e,t+g/2,l,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(C),k,b),m)u.x+=w+c;else if("string"!=typeof b.text){const e=l.lineHeight;u.y+=Ps(b,e)+c}else u.y+=v}),Tr(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=ir(t.font),r=tr(t.padding);if(!t.display)return;const n=Ar(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=i.size/2,l=r.top+a;let c,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,h=vi(e.align,h,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+vi(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const u=vi(o,h,h+d);s.textAlign=n.textAlign(_i(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=i.string,Ki(s,t.text,u,c,i)}_computeTitleHeight(){const e=this.options.title,t=ir(e.font),i=tr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,n;if(ci(e,this.left,this.right)&&ci(t,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(r=n[i],ci(e,r.left,r.left+r.width)&&ci(t,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,o=(n=i,null!==(r=s)&&null!==n&&r.datasetIndex===n.datasetIndex&&r.index===n.index);s&&!o&&Pt(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!o&&Pt(t.onHover,[e,i,this],this)}else i&&Pt(t.onClick,[e,i,this],this);var r,n}}function Ps(e,t){return t*(e.text?e.text.length:0)}var js={id:"legend",_element:Ts,start(e,t,i){const r=e.legend=new Ts({ctx:e.ctx,options:i,chart:e});yn.configure(e,r,i),yn.addBox(e,r)},stop(e){yn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const r=e.legend;yn.configure(e,r,i),r.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const r=t.datasetIndex,n=i.chart;n.isDatasetVisible(r)?(n.hide(r),t.hidden=!0):(n.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:n,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(i?0:void 0),c=tr(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Os={average(e){if(!e.length)return!1;let t,i,r=new Set,n=0,s=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();r.add(e.x),n+=e.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:n/s}},nearest(e,t){if(!e.length)return!1;let i,r,n,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(i=0,r=e.length;i<r;++i){const r=e[i].element;if(r&&r.hasValue()){const e=si(t,r.getCenterPoint());e<a&&(a=e,n=r)}}if(n){const e=n.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function Bs(e,t){return t&&(Lt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Is(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ns(e,t){const{element:i,datasetIndex:r,index:n}=t,s=e.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(n);return{chart:e,label:o,parsed:s.getParsed(n),raw:e.data.datasets[r].data[n],formattedValue:a,dataset:s.getDataset(),dataIndex:n,datasetIndex:r,element:i}}function Fs(e,t){const i=e.chart.ctx,{body:r,footer:n,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=ir(t.bodyFont),c=ir(t.titleFont),h=ir(t.footerFont),d=s.length,u=n.length,f=r.length,p=tr(t.padding);let g=p.height,m=0,_=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),_){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}u&&(g+=t.footerMarginTop+u*h.lineHeight+(u-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,i.measureText(e).width+v)};return i.save(),i.font=c.string,jt(e.title,b),i.font=l.string,jt(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?o+2+t.boxPadding:0,jt(r,e=>{jt(e.before,b),jt(e.lines,b),jt(e.after,b)}),v=0,i.font=h.string,jt(e.footer,b),i.restore(),m+=p.width,{width:m,height:g}}function zs(e,t,i,r){const{x:n,width:s}=i,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=n<=(a+l)/2?"left":"right":n<=s/2?c="left":n>=o-s/2&&(c="right"),function(e,t,i,r){const{x:n,width:s}=r,o=i.caretSize+i.caretPadding;return"left"===e&&n+s+o>t.width||"right"===e&&n-s-o<0||void 0}(c,e,t,i)&&(c="center"),c}function Hs(e,t,i){const r=i.yAlign||t.yAlign||function(e,t){const{y:i,height:r}=t;return i<r/2?"top":i>e.height-r/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||zs(e,t,i,r),yAlign:r}}function Ws(e,t,i,r){const{caretSize:n,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,c=n+s,{topLeft:h,topRight:d,bottomLeft:u,bottomRight:f}=er(o);let p=function(e,t){let{x:i,width:r}=e;return"right"===t?i-=r:"center"===t&&(i-=r/2),i}(t,a);const g=function(e,t,i){let{y:r,height:n}=e;return"top"===t?r+=i:r-="bottom"===t?n+i:n/2,r}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(h,u)+n:"right"===a&&(p+=Math.max(d,f)+n),{x:li(p,0,r.width-t.width),y:li(g,0,r.height-t.height)}}function $s(e,t,i){const r=tr(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Us(e){return Bs([],Is(e))}function Vs(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const qs={beforeTitle:Ct,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,r=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return i[t.dataIndex]}return""},afterTitle:Ct,beforeBody:Ct,beforeLabel:Ct,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return Et(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ct,afterBody:Ct,beforeFooter:Ct,footer:Ct,afterFooter:Ct};function Ks(e,t,i,r){const n=e[t].call(i,r);return void 0===n?qs[t].call(i,r):n}class Gs extends Nn{static positioners=Os;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,n=new zr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,i=this._tooltipItems,nr(e,{tooltip:t,tooltipItems:i,type:"tooltip"})));var e,t,i}getTitle(e,t){const{callbacks:i}=t,r=Ks(i,"beforeTitle",this,e),n=Ks(i,"title",this,e),s=Ks(i,"afterTitle",this,e);let o=[];return o=Bs(o,Is(r)),o=Bs(o,Is(n)),o=Bs(o,Is(s)),o}getBeforeBody(e,t){return Us(Ks(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return jt(e,e=>{const t={before:[],lines:[],after:[]},n=Vs(i,e);Bs(t.before,Is(Ks(n,"beforeLabel",this,e))),Bs(t.lines,Ks(n,"label",this,e)),Bs(t.after,Is(Ks(n,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return Us(Ks(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=Ks(i,"beforeFooter",this,e),n=Ks(i,"footer",this,e),s=Ks(i,"afterFooter",this,e);let o=[];return o=Bs(o,Is(r)),o=Bs(o,Is(n)),o=Bs(o,Is(s)),o}_createItems(e){const t=this._active,i=this.chart.data,r=[],n=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(Ns(this.chart,t[o]));return e.filter&&(l=l.filter((t,r,n)=>e.filter(t,r,n,i))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,i))),jt(l,t=>{const i=Vs(e.callbacks,t);r.push(Ks(i,"labelColor",this,t)),n.push(Ks(i,"labelPointStyle",this,t)),s.push(Ks(i,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=n,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let n,s=[];if(r.length){const e=Os[i.position].call(this,r,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);const t=this._size=Fs(this,i),o=Object.assign({},e,t),a=Hs(this.chart,i,o),l=Ws(i,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,n={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=s,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const n=this.getCaretPosition(e,i,r);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:n}=this,{caretSize:s,cornerRadius:o}=i,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:h}=er(o),{x:d,y:u}=e,{width:f,height:p}=t;let g,m,_,v,b,y;return"center"===n?(b=u+p/2,"left"===r?(g=d,m=g-s,v=b+s,y=b-s):(g=d+f,m=g+s,v=b-s,y=b+s),_=g):(m="left"===r?d+Math.max(a,c)+s:"right"===r?d+f-Math.max(l,h)-s:this.caretX,"top"===n?(v=u,b=v-s,g=m-s,_=m+s):(v=u+p,b=v+s,g=m+s,_=m-s),y=v),{x1:g,x2:m,x3:_,y1:v,y2:b,y3:y}}drawTitle(e,t,i){const r=this.title,n=r.length;let s,o,a;if(n){const l=Ar(i.rtl,this.x,this.width);for(e.x=$s(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",s=ir(i.titleFont),o=i.titleSpacing,t.fillStyle=i.titleColor,t.font=s.string,a=0;a<n;++a)t.fillText(r[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===n&&(e.y+=i.titleMarginBottom-o)}}_drawColorBox(e,t,i,r,n){const s=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=n,c=ir(n.bodyFont),h=$s(this,"left",n),d=r.x(h),u=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+u;if(n.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},i=r.leftForLtr(d,l)+l/2,c=f+a/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,zi(e,t,i,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,zi(e,t,i,c)}else{e.lineWidth=Dt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(d,l),i=r.leftForLtr(r.xPlus(d,1),l-2),o=er(s.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,Gi(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Gi(e,{x:i,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(i,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:n,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=i,h=ir(i.bodyFont);let d=h.lineHeight,u=0;const f=Ar(i.rtl,this.x,this.width),p=function(i){t.fillText(i,f.x(e.x+u),e.y+d/2),e.y+=d+n},g=f.textAlign(s);let m,_,v,b,y,x,S;for(t.textAlign=s,t.textBaseline="middle",t.font=h.string,e.x=$s(this,g,i),t.fillStyle=i.bodyColor,jt(this.beforeBody,p),u=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,x=r.length;b<x;++b){for(m=r[b],_=this.labelTextColors[b],t.fillStyle=_,jt(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(t,e,b,f,i),d=Math.max(h.lineHeight,a)),y=0,S=v.length;y<S;++y)p(v[y]),d=h.lineHeight;jt(m.after,p)}u=0,d=h.lineHeight,jt(this.afterBody,p),e.y-=n}drawFooter(e,t,i){const r=this.footer,n=r.length;let s,o;if(n){const a=Ar(i.rtl,this.x,this.width);for(e.x=$s(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",s=ir(i.footerFont),t.fillStyle=i.footerColor,t.font=s.string,o=0;o<n;++o)t.fillText(r[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:n,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=i,{topLeft:h,topRight:d,bottomLeft:u,bottomRight:f}=er(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+h,a),"top"===s&&this.drawCaret(e,t,i,r),t.lineTo(o+l-d,a),t.quadraticCurveTo(o+l,a,o+l,a+d),"center"===s&&"right"===n&&this.drawCaret(e,t,i,r),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,i,r),t.lineTo(o+u,a+c),t.quadraticCurveTo(o,a+c,o,a+c-u),"center"===s&&"left"===n&&this.drawCaret(e,t,i,r),t.lineTo(o,a+h),t.quadraticCurveTo(o,a,o+h,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,n=i&&i.y;if(r||n){const i=Os[e.position].call(this,this._active,this._eventPosition);if(!i)return;const s=this._size=Fs(this,e),o=Object.assign({},i,this._size),a=Hs(t,e,o),l=Ws(e,o,a,t);r._to===l.x&&n._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const s=tr(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(n,e,r,t),Rr(e,t.textDirection),n.y+=s.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),Tr(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:e,index:t})=>{const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}),n=!Ot(i,r),s=this._positionChanged(r,t);(n||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,n=this._active||[],s=this._getActiveElements(e,n,t,i),o=this._positionChanged(s,e),a=t||!Ot(s,n)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,r){const n=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,n.mode,n,i);return n.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:i,caretY:r,options:n}=this,s=Os[n.position].call(this,e,t);return!1!==s&&(i!==s.x||r!==s.y)}}var Ys={id:"tooltip",_element:Gs,positioners:Os,afterInit(e,t,i){i&&(e.tooltip=new Gs({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qs},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Xs="label";function Qs(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Js(e,t){e.labels=t}function Zs(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xs;const r=[];e.datasets=t.map(t=>{const n=e.datasets.find(e=>e[i]===t[i]);return n&&t.data&&!r.includes(n)?(r.push(n),Object.assign(n,t),n):{...t}})}function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xs;const i={labels:[],datasets:[]};return Js(i,e.labels),Zs(i,e.datasets,t),i}function to(e,t){const{height:r=150,width:n=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:h=[],fallbackContent:d,updateMode:u,...f}=e,p=i.useRef(null),g=i.useRef(null),m=()=>{p.current&&(g.current=new ks(p.current,{type:a,data:eo(l,o),options:c&&{...c},plugins:h}),Qs(t,g.current))},_=()=>{Qs(t,null),g.current&&(g.current.destroy(),g.current=null)};return i.useEffect(()=>{!s&&g.current&&c&&function(e,t){const i=e.options;i&&t&&Object.assign(i,t)}(g.current,c)},[s,c]),i.useEffect(()=>{!s&&g.current&&Js(g.current.config.data,l.labels)},[s,l.labels]),i.useEffect(()=>{!s&&g.current&&l.datasets&&Zs(g.current.config.data,l.datasets,o)},[s,l.datasets]),i.useEffect(()=>{g.current&&(s?(_(),setTimeout(m)):g.current.update(u))},[s,c,l.labels,l.datasets,u]),i.useEffect(()=>{g.current&&(_(),setTimeout(m))},[a]),i.useEffect(()=>(m(),()=>_()),[]),N.createElement("canvas",{ref:p,role:"img",height:r,width:n,...f},d)}const io=i.forwardRef(to);function ro(e,t){return ks.register(t),i.forwardRef((t,i)=>N.createElement(io,{...t,ref:i,type:e}))}const no=ro("doughnut",Zr);ks.register(class extends Nn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.getProps(["x","y"],i),{angle:n,distance:s}=ni(r,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,u=Rt(h,a-o),f=ai(n,o,a)&&o!==a,p=u>=Yt||f,g=ci(s,l+d,c+d);return p&&g}getCenterPoint(e){const{x:t,y:i,startAngle:r,endAngle:n,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(r+n)/2,h=(s+o+l+a)/2;return{x:t+Math.cos(c)*h,y:i+Math.sin(c)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,r=(t.offset||0)/4,n=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>Yt?Math.floor(i/Yt):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(Gt,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,r,n){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){Ms(e,t,i,r,l,n);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%Yt||Yt))}Ms(e,t,i,r,l,n),e.fill()}(e,this,a,n,s),As(e,this,a,n,s),e.restore()}},Ys,js);const so=({label:e,data:t,unit:n,total:s,detailed:o,metrics:a})=>{if(!a)return r.jsx("div",{children:"No data available"});const{customSettings:l}=i.useContext(le),c=ae(l,"background"),h=a.cpu_model,d=a.cpu_physical_cores,u=a.cpu_total_cores,f=a.cpu_freq_max,p=a.cpu_freq_current,g=a.cpu_temp,m=a.ram_type,_=a.memory_total_gb,v=a.memory_available_gb,b=a.disk_total_gb,y=a.disk_model,x=a.disk_type;a.network,a.network,a.network;const S=a.os_name,w=a.os_release,C=a.os_version,k=a.gpu,E=a.system_uptime,L=a.process_count,D=a.response_time_ms;let M=t;if(e.toLowerCase().includes("cpu"))M=a&&void 0!==a.cpu_percent?Array(12).fill(a.cpu_percent):Array(12).fill(0);else if(e.toLowerCase().includes("ram"))M=a&&void 0!==a.memory_gb?Array(12).fill(a.memory_gb):Array(12).fill(0);else if(e.toLowerCase().includes("storage"))M=a&&void 0!==a.disk_gb?Array(12).fill(a.disk_gb):Array(12).fill(0);else if(e.toLowerCase().includes("network")){let e=0;if(a?.internet_speed){const t=a.internet_speed.data||a.internet_speed;if(t&&"string"==typeof t.download){const i=t.download.split(":");if(i.length>1){const t=i[1].trim().split(" ")[0];e=parseFloat(t)||0}}}else a?.network?.download_speed_mbps&&(e=a.network.download_speed_mbps);M=Array(12).fill(e)}else e.toLowerCase().includes("gpu")&&(M=a&&a.gpu&&a.gpu.length>0?Array(12).fill(a.gpu[0].load):Array(12).fill(0));const A=M[M.length-1];let R=A,T=n||"",P=e,j="",O=A,B=s||Math.max(...t);if(e.toLowerCase().includes("cpu"))R=Math.round(A/B*100),T="%",P="CPU",O=A,B=s||B;else if(e.toLowerCase().includes("ram"))P="RAM",j=` / ${B} GB`,T="GB";else if(e.toLowerCase().includes("storage"))P="Storage",j=` / ${B} GB`,T="GB";else if(e.toLowerCase().includes("network")){P="Download Speed",T="Mbps";let e=0,t=0,i=null,r=!1,n="",s=a?._prevSpeed||{},o=null;if(a?.internet_speed?o=a.internet_speed.data||a.internet_speed:a?.download&&a?.upload&&a?.ping&&(o=a),o){if("string"==typeof o.download){const t=o.download.split(":");if(t.length>1){const i=t[1].trim().split(" ")[0];e=parseFloat(i)||0}}else"number"==typeof o.download&&(e=o.download);if("string"==typeof o.upload){const e=o.upload.split(":");if(e.length>1){const i=e[1].trim().split(" ")[0];t=parseFloat(i)||0}}else"number"==typeof o.upload&&(t=o.upload);if("string"==typeof o.ping){const e=o.ping.split(":");if(e.length>1){const t=e[1].trim().split(" ")[0];i=parseFloat(t)||null}}else"number"==typeof o.ping&&(i=o.ping);0!==e||0!==t||null!==i||o.error||(r=!0,n="Testing..."),o.error&&(R="Error",T="",O=0,B=100,a._parsedSpeed={downloadMbps:0,uploadMbps:0,pingMs:null,isTesting:!1,error:o.error})}!e&&a.network?.download_speed_mbps&&(e=a.network.download_speed_mbps),!t&&a.network?.upload_speed_mbps&&(t=a.network.upload_speed_mbps),e>0?(O=e,R=e.toFixed(1),T="Mbps",B=Math.max(100,1.2*e)):r&&s.downloadMbps?(O=s.downloadMbps,R=n||"Testing...",T="",B=Math.max(100,1.2*s.downloadMbps)):(O=0,R="0",T="Mbps",B=100),a._parsedSpeed={downloadMbps:e,uploadMbps:t,pingMs:i,isTesting:r},!r&&e>0&&(a._prevSpeed={downloadMbps:e,uploadMbps:t,pingMs:i}),e>0||s.downloadMbps,t>0||s.uploadMbps,"number"==typeof i||s.pingMs}else e.toLowerCase().includes("gpu")&&(R=Math.round(A),T="%",P="GPU Load",O=A,B=100);let I="#4fc3f7";e.toLowerCase().includes("cpu")?I=l.cpuColor:e.toLowerCase().includes("ram")?I=l.ramColor:e.toLowerCase().includes("storage")?I=l.storageColor:e.toLowerCase().includes("network")?I=l.networkColor:e.toLowerCase().includes("gpu")&&(I=l.gpuColor||"#ff9800");const N={labels:["Used","Available"],datasets:[{label:"",data:[O,Math.max(0,B-O)],backgroundColor:[I,"#333"],borderWidth:0}]};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{width:220,height:220,position:"relative",marginBottom:12},children:[r.jsx(no,{data:N,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!1}},cutout:"90%",borderRadius:12,maintainAspectRatio:!1,rotation:225,circumference:270}}),r.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"none",fontWeight:"bold",fontSize:32,color:c,textShadow:"0 1px 4px rgba(0,0,0,0.3)"},children:[r.jsxs("span",{children:[R,r.jsx("span",{style:{fontSize:16,fontWeight:"normal",marginLeft:2},children:T})]}),r.jsxs("span",{style:{fontSize:15,color:c,fontWeight:"normal",marginTop:2},children:[P,j]})]})]}),o&&r.jsxs("div",{style:{width:"100%",padding:"8px 0",textAlign:"left",color:c},children:[e.toLowerCase().includes("cpu")&&r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"CPU:"}),r.jsxs("div",{children:["Model: ",h||"Unknown"]}),r.jsxs("div",{children:["Physical Cores: ",d||"N/A"]}),r.jsxs("div",{children:["Total Cores: ",u||"N/A"]}),r.jsxs("div",{children:["Max Frequency: ",f?f+" MHz":"N/A"]}),r.jsxs("div",{children:["Current Frequency: ",p?p+" MHz":"N/A"]}),r.jsxs("div",{children:["Temperature: ",null!==g?g+"C":"N/A"]})]}),e.toLowerCase().includes("gpu")&&Array.isArray(k)&&k.length>0&&r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"GPU:"}),k.map((e,t)=>r.jsxs("div",{style:{marginBottom:6},children:[r.jsxs("div",{children:["Name: ",e.name]}),r.jsxs("div",{children:["Load: ",e.load,"%"]}),r.jsxs("div",{children:["Memory: ",e.memory_used,"MB / ",e.memory_total,"MB"]}),r.jsxs("div",{children:["Temperature: ",e.temperature,"C"]})]},t))]}),e.toLowerCase().includes("ram")&&r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"RAM:"}),r.jsxs("div",{children:["Used: ",A," GB (",(A/B*100).toFixed(1),"%)"]}),r.jsxs("div",{children:["Free: ",(B-A).toFixed(2)," GB"]}),r.jsxs("div",{children:["Total: ",_||"N/A"," GB"]}),r.jsxs("div",{children:["Available: ",v||"N/A"," GB"]}),r.jsxs("div",{children:["Type: ",m]})]}),e.toLowerCase().includes("storage")&&r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"Storage:"}),r.jsxs("div",{children:["Used: ",A," GB (",(A/B*100).toFixed(1),"%)"]}),r.jsxs("div",{children:["Free: ",(B-A).toFixed(2)," GB"]}),r.jsxs("div",{children:["Total: ",b||"N/A"," GB"]}),r.jsxs("div",{children:["Model: ",y]}),r.jsxs("div",{children:["Type: ",x]})]}),e.toLowerCase().includes("network")&&r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:c},children:"Internet Speed Test:"}),r.jsxs("div",{children:["Status: ",a._parsedSpeed?.error?"Error":a._parsedSpeed?.isTesting?"Testing":a?.internet_speed?"Complete":"Pending"]}),a._parsedSpeed?.error&&r.jsxs("div",{style:{marginTop:6,color:"#ff6b6b"},children:["Error: ",a._parsedSpeed.error]}),a._parsedSpeed&&!a._parsedSpeed.error&&(a._parsedSpeed.downloadMbps>0||a._parsedSpeed.isTesting&&a._prevSpeed)&&r.jsx("div",{style:{marginTop:6},children:a._parsedSpeed.isTesting&&a._prevSpeed?r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{fontWeight:"bold",color:"#ffa726"},children:"Previous Results:"}),r.jsxs("div",{children:["Download: ",a._prevSpeed.downloadMbps?.toFixed(2)||"0.00"," Mbps"]}),r.jsxs("div",{children:["Upload: ",a._prevSpeed.uploadMbps?.toFixed(2)||"0.00"," Mbps"]}),"number"==typeof a._prevSpeed.pingMs&&r.jsxs("div",{children:["Ping: ",a._prevSpeed.pingMs.toFixed(1)," ms"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:["Download: ",a._parsedSpeed.downloadMbps?.toFixed(2)||"0.00"," Mbps"]}),r.jsxs("div",{children:["Upload: ",a._parsedSpeed.uploadMbps?.toFixed(2)||"0.00"," Mbps"]}),"number"==typeof a._parsedSpeed.pingMs&&r.jsxs("div",{children:["Ping: ",a._parsedSpeed.pingMs.toFixed(1)," ms"]})]})}),(!a._parsedSpeed||0===a._parsedSpeed.downloadMbps&&!a._parsedSpeed.isTesting&&!a._parsedSpeed.error)&&r.jsx("div",{style:{marginTop:6,color:"#888"},children:"No speed test data available"})]}),"OS Info"===e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{fontWeight:"bold",color:c},children:" OS INFO:"}),r.jsxs("div",{children:["OS Name: ",S||"Unknown"]}),r.jsxs("div",{children:["OS Release: ",w||"Unknown"]}),r.jsxs("div",{children:["OS Version: ",C||"Unknown"]}),r.jsxs("div",{children:["System Uptime: ",E?`${Math.floor(E/3600)}h ${Math.floor(E%3600/60)}m`:"N/A"]}),r.jsxs("div",{children:["Process Count: ",L||"N/A"]}),r.jsxs("div",{children:["Response Time: ",D?D+" ms":"N/A"]})]})]})]})},oo=[{name:"Server 1"}],ao=({collapsed:e})=>{const{customSettings:t}=N.useContext(le),n=ae(t,"background"),[s,o]=i.useState(null),[a,l]=i.useState(null),[c,h]=i.useState(!1),[d,u]=i.useState("pending"),f=i.useRef(null);if(i.useEffect(()=>{if(e)return;const t=()=>{fetch("/api/alterion/panel/system-metrics/").then(e=>e.json()).then(e=>{o(e)}).catch(()=>o(null))};t();const i=setInterval(t,2e3);return()=>clearInterval(i)},[e]),i.useEffect(()=>{if(e)return;const t=()=>{fetch("/api/alterion/panel/internet-speed-test/").then(e=>e.json()).then(e=>{"cached"===e.status||e.data&&!e.progress?(l(e.data||e),u("complete"),f.current&&clearInterval(f.current),f.current=setInterval(t,36e5)):"testing"===e.status||e.progress?(l(e),u("testing"),f.current&&clearInterval(f.current),f.current=setInterval(t,2e3)):e.error?(l({error:e.error}),u("error"),f.current&&clearInterval(f.current),f.current=setInterval(t,3e5)):e.download&&e.upload&&e.ping?(l(e),u("complete"),f.current&&clearInterval(f.current),f.current=setInterval(t,36e5)):(u("pending"),f.current&&clearInterval(f.current),f.current=setInterval(t,5e3))}).catch(e=>{l(null),u("pending")})};return t(),()=>{f.current&&clearInterval(f.current)}},[e]),e)return null;const p=s?Array(12).fill(s.cpu_percent):Array(12).fill(0),g=s?Array(12).fill(s.memory_gb):Array(12).fill(0),m=s?Array(12).fill(s.disk_gb):Array(12).fill(0),_=s?s.memory_total_gb:0,v=s?s.disk_total_gb:0,b=s&&s.network&&void 0!==s.network.download_speed_mbps?Array(12).fill(s.network.download_speed_mbps):Array(12).fill(0),y=s&&s.gpu&&s.gpu.length>0?Array(12).fill(s.gpu[0].load):Array(12).fill(0),x=s?{...s,internet_speed:a}:null,S={background:"gradient"===t.backgroundType?`linear-gradient(135deg, ${t.backgroundColor1}ee, ${t.backgroundColor2}ee)`:`${t.backgroundColor1}ee`,borderRadius:18,boxShadow:"0 4px 24px rgba(0,0,0,0.18)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",padding:24,marginBottom:24,color:n,maxWidth:400,minWidth:260,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"background 0.3s"},w={position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:c?t.cpuColor:"#888",borderRadius:16,transition:".2s"},C={position:"absolute",left:c?16:2,top:2,width:12,height:12,background:"#fff",borderRadius:"50%",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:".2s"};return r.jsxs("aside",{className:"metrics-content",style:{overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{color:n},children:"Metrics"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[r.jsxs("label",{style:{position:"relative",display:"inline-block",width:32,height:16},children:[r.jsx("input",{type:"checkbox",checked:c,onChange:()=>h(e=>!e),style:{display:"none"}}),r.jsx("span",{style:w}),r.jsx("span",{style:C})]}),r.jsx("span",{style:{fontWeight:"bold",color:n},children:c?"Detailed Mode":"Default Mode"})]}),oo.length>1&&r.jsx("select",{disabled:!0,children:oo.map(e=>r.jsx("option",{value:e.name,children:e.name},e.name))}),r.jsx("div",{style:S,children:r.jsx(so,{label:"CPU Usage",data:p,unit:"%",total:100,detailed:c,metrics:x})}),c&&r.jsx("div",{style:S,children:r.jsx(so,{label:"GPU Usage",data:y,unit:"%",total:100,detailed:c,metrics:x})}),r.jsx("div",{style:S,children:r.jsx(so,{label:"RAM Usage",data:g,unit:"GB",total:_,detailed:c,metrics:x})}),r.jsx("div",{style:S,children:r.jsx(so,{label:"Storage Usage",data:m,unit:"GB",total:v,detailed:c,metrics:x})}),r.jsx("div",{style:S,children:r.jsx(so,{label:"Network Usage",data:b,unit:"Mbps",total:1e3,detailed:c,metrics:x})})]}),c&&s&&r.jsx("div",{style:{...S},children:r.jsxs("div",{style:{textAlign:"left"},children:[r.jsx("div",{style:{fontWeight:"bold",fontSize:18,marginBottom:8},children:"OS Info"}),r.jsxs("div",{children:["OS Name: ",s.os_name]}),r.jsxs("div",{children:["OS Release: ",s.os_release]}),r.jsxs("div",{children:["OS Version: ",s.os_version]}),r.jsxs("div",{children:["System Uptime: ",s.system_uptime?`${Math.floor(s.system_uptime/3600)}h ${Math.floor(s.system_uptime%3600/60)}m`:"N/A"]}),r.jsxs("div",{children:["Process Count: ",s.process_count||"N/A"]}),r.jsxs("div",{children:["Response Time: ",s.response_time_ms?s.response_time_ms+" ms":"N/A"]})]})}),r.jsx("style",{children:"\n        .metrics-content::-webkit-scrollbar {\n          display: none;\n        }\n      "})]})};var lo,co={exports:{}};var ho,uo=lo?co.exports:(lo=1,self,co.exports=(()=>{var e={4567:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;const s=i(9042),o=i(6114),a=i(9924),l=i(844),c=i(5596),h=i(4725),d=i(3656);let u=t.AccessibilityManager=class extends l.Disposable{constructor(e,t){super(),this._terminal=e,this._renderService=t,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let i=0;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new a.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(e=>this._handleResize(e.rows))),this.register(this._terminal.onRender(e=>this._refreshRows(e.start,e.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(e=>this._handleChar(e))),this.register(this._terminal.onLineFeed(()=>this._handleChar("\n"))),this.register(this._terminal.onA11yTab(e=>this._handleTab(e))),this.register(this._terminal.onKey(e=>this._handleKey(e.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new c.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,l.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=s.tooMuchOutput)),o.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,o.isMac&&this._liveRegion.remove()}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const i=this._terminal.buffer,r=i.lines.length.toString();for(let n=e;n<=t;n++){const e=i.translateBufferLineToString(i.ydisp+n,!0),t=(i.ydisp+n+1).toString(),s=this._rowElements[n];s&&(0===e.length?s.innerText="":s.textContent=e,s.setAttribute("aria-posinset",t),s.setAttribute("aria-setsize",r))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){const i=e.target,r=this._rowElements[0===t?1:this._rowElements.length-2];if(i.getAttribute("aria-posinset")===(0===t?"1":`${this._terminal.buffer.lines.length}`))return;if(e.relatedTarget!==r)return;let n,s;if(0===t?(n=i,s=this._rowElements.pop(),this._rowContainer.removeChild(s)):(n=this._rowElements.shift(),s=i,this._rowContainer.removeChild(n)),n.removeEventListener("focus",this._topBoundaryFocusListener),s.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};t.AccessibilityManager=u=r([n(1,h.IRenderService)],u)},3614:(e,t)=>{function i(e){return e.replace(/\r?\n/g,"\r")}function r(e,t){return t?"[200~"+e+"[201~":e}function n(e,t,n,s){e=r(e=i(e),n.decPrivateModes.bracketedPasteMode&&!0!==s.rawOptions.ignoreBracketedPasteMode),n.triggerDataEvent(e,!0),t.value=""}function s(e,t,i){const r=i.getBoundingClientRect(),n=e.clientX-r.left-10,s=e.clientY-r.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${n}px`,t.style.top=`${s}px`,t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=r,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,i,r){e.stopPropagation(),e.clipboardData&&n(e.clipboardData.getData("text/plain"),t,i,r)},t.paste=n,t.moveTextAreaUnderMouseCursor=s,t.rightClickHandler=function(e,t,i,r,n){s(e,t,i),n&&r.rightClickSelect(e),t.value=r.selectionText,t.select()}},7239:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;const r=i(1505);t.ColorContrastCache=class{constructor(){this._color=new r.TwoKeyMap,this._css=new r.TwoKeyMap}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,r){e.addEventListener(t,i,r);let n=!1;return{dispose:()=>{n||(n=!0,e.removeEventListener(t,i,r))}}}},6465:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;const s=i(3656),o=i(8460),a=i(844),l=i(2585);let c=t.Linkifier2=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const t=this._linkProviders.indexOf(e);-1!==t&&this._linkProviders.splice(t,1)}}}attachToDom(e,t,i){this._element=e,this._mouseService=t,this._renderService=i,this.register((0,s.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,s.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,s.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,s.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const i=e.composedPath();for(let r=0;r<i.length;r++){const e=i[r];if(e.classList.contains("xterm"))break;if(e.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var i,r;this._activeProviderReplies&&t||(null===(i=this._activeProviderReplies)||void 0===i||i.forEach(e=>{null==e||e.forEach(e=>{e.link.dispose&&e.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let n=!1;for(const[s,o]of this._linkProviders.entries())t?(null===(r=this._activeProviderReplies)||void 0===r?void 0:r.get(s))&&(n=this._checkLinkProviderResult(s,e,n)):o.provideLinks(e.y,t=>{var i,r;if(this._isMouseOut)return;const o=null==t?void 0:t.map(e=>({link:e}));null===(i=this._activeProviderReplies)||void 0===i||i.set(s,o),n=this._checkLinkProviderResult(s,e,n),(null===(r=this._activeProviderReplies)||void 0===r?void 0:r.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){const i=new Set;for(let r=0;r<t.size;r++){const n=t.get(r);if(n)for(let t=0;t<n.length;t++){const r=n[t],s=r.link.range.start.y<e?0:r.link.range.start.x,o=r.link.range.end.y>e?this._bufferService.cols:r.link.range.end.x;for(let e=s;e<=o;e++){if(i.has(e)){n.splice(t--,1);break}i.add(e)}}}}_checkLinkProviderResult(e,t,i){var r;if(!this._activeProviderReplies)return i;const n=this._activeProviderReplies.get(e);let s=!1;for(let o=0;o<e;o++)this._activeProviderReplies.has(o)&&!this._activeProviderReplies.get(o)||(s=!0);if(!s&&n){const e=n.find(e=>this._linkAtPosition(e.link,t));e&&(i=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviders.length&&!i)for(let o=0;o<this._activeProviderReplies.size;o++){const e=null===(r=this._activeProviderReplies.get(o))||void 0===r?void 0:r.find(e=>this._linkAtPosition(e.link,t));if(e){i=!0,this._handleNewLink(e);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.pointerCursor},set:e=>{var t,i;(null===(t=this._currentLink)||void 0===t?void 0:t.state)&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&(null===(i=this._element)||void 0===i||i.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.underline},set:t=>{var i,r,n;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(null===(n=null===(r=this._currentLink)||void 0===r?void 0:r.state)||void 0===n?void 0:n.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,i=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i&&(this._clearCurrentLink(t,i),this._lastMouseEvent&&this._element)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}})))}_linkHover(e,t,i){var r;(null===(r=this._currentLink)||void 0===r?void 0:r.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){const i=e.range,r=this._bufferService.buffer.ydisp,n=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-r-1,i.end.x,i.end.y-r-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(n)}_linkLeave(e,t,i){var r;(null===(r=this._currentLink)||void 0===r?void 0:r.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){const i=e.range.start.y*this._bufferService.cols+e.range.start.x,r=e.range.end.y*this._bufferService.cols+e.range.end.x,n=t.y*this._bufferService.cols+t.x;return i<=n&&n<=r}_positionFromMouseEvent(e,t,i){const r=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(r)return{x:r[0],y:r[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,r,n){return{x1:e,y1:t,x2:i,y2:r,cols:this._bufferService.cols,fg:n}}};t.Linkifier2=c=r([n(0,l.IBufferService)],c)},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkProvider=void 0;const s=i(511),o=i(2585);let a=t.OscLinkProvider=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){var i;const r=this._bufferService.buffer.lines.get(e-1);if(!r)return void t(void 0);const n=[],o=this._optionsService.rawOptions.linkHandler,a=new s.CellData,c=r.getTrimmedLength();let h=-1,d=-1,u=!1;for(let s=0;s<c;s++)if(-1!==d||r.hasContent(s)){if(r.loadCell(s,a),a.hasExtendedAttrs()&&a.extended.urlId){if(-1===d){d=s,h=a.extended.urlId;continue}u=a.extended.urlId!==h}else-1!==d&&(u=!0);if(u||-1!==d&&s===c-1){const t=null===(i=this._oscLinkService.getLinkData(h))||void 0===i?void 0:i.uri;if(t){const i={start:{x:d+1,y:e},end:{x:s+(u||s!==c-1?0:1),y:e}};let r=!1;if(!(null==o?void 0:o.allowNonHttpProtocols))try{const e=new URL(t);["http:","https:"].includes(e.protocol)||(r=!0)}catch(f){r=!0}r||n.push({text:t,range:i,activate:(e,t)=>o?o.activate(e,t,i):l(0,t),hover:(e,t)=>{var r;return null===(r=null==o?void 0:o.hover)||void 0===r?void 0:r.call(o,e,t,i)},leave:(e,t)=>{var r;return null===(r=null==o?void 0:o.leave)||void 0===r?void 0:r.call(o,e,t,i)}})}u=!1,a.hasExtendedAttrs()&&a.extended.urlId?(d=s,h=a.extended.urlId):(d=-1,h=-1)}}t(n)}};function l(e,t){if(confirm(`Do you want to navigate to ${t}?\n\nWARNING: This link could potentially be dangerous`)){const e=window.open();if(e){try{e.opener=null}catch(i){}e.location.href=t}}}t.OscLinkProvider=a=r([n(0,o.IBufferService),n(1,o.IOptionsService),n(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._parentWindow=e,this._renderCallback=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},5596:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;const r=i(844);class n extends r.Disposable{constructor(e){super(),this._parentWindow=e,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,r.toDisposable)(()=>{this.clearListener()}))}setListener(e){this._listener&&this.clearListener(),this._listener=e,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}t.ScreenDprMonitor=n},3236:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;const r=i(3614),n=i(3656),s=i(6465),o=i(9042),a=i(3730),l=i(1680),c=i(3107),h=i(5744),d=i(2950),u=i(1296),f=i(428),p=i(4269),g=i(5114),m=i(8934),_=i(3230),v=i(9312),b=i(4725),y=i(6731),x=i(8055),S=i(8969),w=i(8460),C=i(844),k=i(6114),E=i(8437),L=i(2584),D=i(7399),M=i(5941),A=i(9074),R=i(2585),T=i(5435),P=i(4567),j="undefined"!=typeof window?window.document:null;class O extends S.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(e={}){super(e),this.browser=k,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new C.MutableDisposable),this._onCursorMove=this.register(new w.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new w.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new w.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new w.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new w.EventEmitter),this._onBlur=this.register(new w.EventEmitter),this._onA11yCharEmitter=this.register(new w.EventEmitter),this._onA11yTabEmitter=this.register(new w.EventEmitter),this._onWillOpen=this.register(new w.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(s.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(R.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((e,t)=>this.refresh(e,t))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this.register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this.register((0,w.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,w.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,w.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,w.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this.register((0,C.toDisposable)(()=>{var e,t;this._customKeyEventHandler=void 0,null===(t=null===(e=this.element)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.element)}))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,i="";switch(t.index){case 256:e="foreground",i="10";break;case 257:e="background",i="11";break;case 258:e="cursor",i="12";break;default:e="ansi",i="4;"+t.index}switch(t.type){case 0:const r=x.color.toColorRGB("ansi"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent(`${L.C0.ESC}]${i};${(0,M.toRgbString)(r)}${L.C1_ESCAPED.ST}`);break;case 1:if("ansi"===e)this._themeService.modifyColors(e=>e.ansi[t.index]=x.rgba.toColor(...t.color));else{const i=e;this._themeService.modifyColors(e=>e[i]=x.rgba.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(P.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(L.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(L.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const i=Math.min(this.buffer.x,this.cols-1),r=this._renderService.dimensions.css.cell.height,n=t.getWidth(i),s=this._renderService.dimensions.css.cell.width*n,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+"px",this.textarea.style.top=o+"px",this.textarea.style.width=s+"px",this.textarea.style.height=r+"px",this.textarea.style.lineHeight=r+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,n.addDisposableDomListener)(this.element,"copy",e=>{this.hasSelection()&&(0,r.copyHandler)(e,this._selectionService)}));const e=e=>(0,r.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,n.addDisposableDomListener)(this.textarea,"paste",e)),this.register((0,n.addDisposableDomListener)(this.element,"paste",e)),k.isFirefox?this.register((0,n.addDisposableDomListener)(this.element,"mousedown",e=>{2===e.button&&(0,r.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,n.addDisposableDomListener)(this.element,"contextmenu",e=>{(0,r.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),k.isLinux&&this.register((0,n.addDisposableDomListener)(this.element,"auxclick",e=>{1===e.button&&(0,r.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,n.addDisposableDomListener)(this.textarea,"keyup",e=>this._keyUp(e),!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keydown",e=>this._keyDown(e),!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keypress",e=>this._keyPress(e),!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,n.addDisposableDomListener)(this.textarea,"input",e=>this._inputEvent(e),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var t;if(!e)throw new Error("Terminal requires a parent element.");e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);const i=j.createDocumentFragment();this._viewportElement=j.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),i.appendChild(this._viewportElement),this._viewportScrollArea=j.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=j.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=j.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),i.appendChild(this.screenElement),this.textarea=j.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",o.promptLabel),k.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(g.CoreBrowserService,this.textarea,null!==(t=this._document.defaultView)&&void 0!==t?t:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,n.addDisposableDomListener)(this.textarea,"focus",e=>this._handleTextAreaFocus(e))),this.register((0,n.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(y.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(_.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(e=>this._onRender.fire(e))),this.onResize(e=>this._renderService.resize(e.cols,e.rows)),this._compositionView=j.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(i);try{this._onWillOpen.fire(this.element)}catch(r){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(m.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(l.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,n.addDisposableDomListener)(this.element,"mousedown",e=>this._selectionService.handleMouseDown(e))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(P.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",e=>this._handleScreenReaderModeOptionChange(e))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(u.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const e=this,t=this.element;function i(t){const i=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!i)return!1;let r,n;switch(t.overrideType||t.type){case"mousemove":n=32,void 0===t.buttons?(r=3,void 0!==t.button&&(r=t.button<3?t.button:3)):r=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":n=0,r=t.button<3?t.button:3;break;case"mousedown":n=1,r=t.button<3?t.button:3;break;case"wheel":if(0===e.viewport.getLinesScrolled(t))return!1;n=t.deltaY<0?0:1,r=4;break;default:return!1}return!(void 0===n||void 0===r||r>4)&&e.coreMouseService.triggerMouseEvent({col:i.col,row:i.row,x:i.x,y:i.y,button:r,action:n,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const r={mouseup:null,wheel:null,mousedrag:null,mousemove:null},s={mouseup:e=>(i(e),e.buttons||(this._document.removeEventListener("mouseup",r.mouseup),r.mousedrag&&this._document.removeEventListener("mousemove",r.mousedrag)),this.cancel(e)),wheel:e=>(i(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&i(e)},mousemove:e=>{e.buttons||i(e)}};this.register(this.coreMouseService.onProtocolChange(e=>{e?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(e)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&e?r.mousemove||(t.addEventListener("mousemove",s.mousemove),r.mousemove=s.mousemove):(t.removeEventListener("mousemove",r.mousemove),r.mousemove=null),16&e?r.wheel||(t.addEventListener("wheel",s.wheel,{passive:!1}),r.wheel=s.wheel):(t.removeEventListener("wheel",r.wheel),r.wheel=null),2&e?r.mouseup||(t.addEventListener("mouseup",s.mouseup),r.mouseup=s.mouseup):(this._document.removeEventListener("mouseup",r.mouseup),t.removeEventListener("mouseup",r.mouseup),r.mouseup=null),4&e?r.mousedrag||(r.mousedrag=s.mousedrag):(this._document.removeEventListener("mousemove",r.mousedrag),r.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,n.addDisposableDomListener)(t,"mousedown",e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return i(e),r.mouseup&&this._document.addEventListener("mouseup",r.mouseup),r.mousedrag&&this._document.addEventListener("mousemove",r.mousedrag),this.cancel(e)})),this.register((0,n.addDisposableDomListener)(t,"wheel",e=>{if(!r.wheel){if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const i=L.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(e.deltaY<0?"A":"B");let r="";for(let e=0;e<Math.abs(t);e++)r+=i;return this.coreService.triggerDataEvent(r,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}},{passive:!1})),this.register((0,n.addDisposableDomListener)(t,"touchstart",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)},{passive:!0})),this.register((0,n.addDisposableDomListener)(t,"touchmove",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)},{passive:!1}))}refresh(e,t){var i;null===(i=this._renderService)||void 0===i||i.refreshRows(e,t)}updateCursorStyle(e){var t;(null===(t=this._selectionService)||void 0===t?void 0:t.shouldColumnSelect(e))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t,i=0){var r;1===i?(super.scrollLines(e,t,i),this.refresh(0,this.rows-1)):null===(r=this.viewport)||void 0===r||r.scrollLines(e)}paste(e){(0,r.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}registerLinkProvider(e){return this.linkifier2.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()}selectAll(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()}selectLines(e,t){var i;null===(i=this._selectionService)||void 0===i||i.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);const i=(0,D.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===i.type||2===i.type){const t=this.rows-1;return this.scrollLines(2===i.type?-t:t),this.cancel(e,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(i.key!==L.C0.ETX&&i.key!==L.C0.CR||(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){var t;this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(16===(t=e).keyCode||17===t.keyCode||18===t.keyCode||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){var i,r;null===(i=this._charSizeService)||void 0===i||i.measure(),null===(r=this.viewport)||void 0===r||r.syncScrollArea(!0)}clear(){var e;if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(E.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),null===(e=this.viewport)||void 0===e||e.reset(),this.refresh(0,this.rows-1)}}reset(){var e,t;this.options.rows=this.rows,this.options.cols=this.cols;const i=this._customKeyEventHandler;this._setup(),super.reset(),null===(e=this._selectionService)||void 0===e||e.reset(),this._decorationService.reset(),null===(t=this.viewport)||void 0===t||t.reset(),this._customKeyEventHandler=i,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()}_reportFocus(){var e;(null===(e=this.element)||void 0===e?void 0:e.classList.contains("focus"))?this.coreService.triggerDataEvent(L.C0.ESC+"[I"):this.coreService.triggerDataEvent(L.C0.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${L.C0.ESC}[4;${t};${e}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const i=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${L.C0.ESC}[6;${r};${i}t`)}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=O},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e,t=1e3){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const r=Date.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=r-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const s=i(3656),o=i(4725),a=i(8460),l=i(844),c=i(2585);let h=t.Viewport=class extends l.Disposable{constructor(e,t,i,r,n,o,l,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=i,this._optionsService=r,this._charSizeService=n,this._renderService=o,this._coreBrowserService=l,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,s.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(e=>this._renderDimensions=e)),this._handleThemeChange(c.colors),this.register(c.onChangeColors(e=>this._handleThemeChange(e))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){var i;let r,n="";const s=[],o=null!=t?t:this._bufferService.buffer.lines.length,a=this._bufferService.buffer.lines;for(let l=e;l<o;l++){const e=a.get(l);if(!e)continue;const t=null===(i=a.get(l+1))||void 0===i?void 0:i.isWrapped;if(n+=e.translateToString(!t),!t||l===a.length-1){const e=document.createElement("div");e.textContent=n,s.push(e),n.length>0&&(r=e),n=""}}return{bufferElements:s,cursorElement:r}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const i=this._optionsService.rawOptions.fastScrollModifier;return"alt"===i&&t.altKey||"ctrl"===i&&t.ctrlKey||"shift"===i&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=h=r([n(2,c.IBufferService),n(3,c.IOptionsService),n(4,o.ICharSizeService),n(5,o.IRenderService),n(6,o.ICoreBrowserService),n(7,o.IThemeService)],h)},3107:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;const s=i(3656),o=i(4725),a=i(844),l=i(2585);let c=t.BufferDecorationRenderer=class extends a.Disposable{constructor(e,t,i,r){super(),this._screenElement=e,this._bufferService=t,this._decorationService=i,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,s.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(e=>this._removeDecoration(e))),this.register((0,a.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var t,i;const r=document.createElement("div");r.classList.add("xterm-decoration"),r.classList.toggle("xterm-decoration-top-layer","top"===(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.layer)),r.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",r.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const n=null!==(i=e.options.x)&&void 0!==i?i:0;return n&&n>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(e,r),r}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose(()=>{this._decorationElements.delete(e),i.remove()})),i.style.top=t*this._renderService.dimensions.css.cell.height+"px",i.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){var i;if(!t)return;const r=null!==(i=e.options.x)&&void 0!==i?i:0;"right"===(e.options.anchor||"left")?t.style.right=r?r*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=r?r*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var t;null===(t=this._decorationElements.get(e))||void 0===t||t.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=c=r([n(1,l.IBufferService),n(2,l.IDecorationService),n(3,o.IRenderService)],c)},5871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;const s=i(5871),o=i(3656),a=i(4725),l=i(844),c=i(2585),h={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0};let f=t.OverviewRulerRenderer=class extends l.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,i,r,n,o,a){var c;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=r,this._renderService=n,this._optionsService=o,this._coreBrowseService=a,this._colorZoneStore=new s.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),null===(c=this._viewportElement.parentElement)||void 0===c||c.insertBefore(this._canvas,this._viewportElement);const h=this._canvas.getContext("2d");if(!h)throw new Error("Ctx cannot be null");this._ctx=h,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,l.toDisposable)(()=>{var e;null===(e=this._canvas)||void 0===e||e.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,o.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=e,d.center=t,d.right=e,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=d.left,u.right=d.left+d.center}_refreshDrawHeightConstants(){h.full=Math.round(2*this._coreBrowseService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowseService.dpr);h.left=t,h.center=t,h.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)"full"!==t.position&&this._renderColorZone(t);for(const t of e)"full"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(u[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-h[e.position||"full"]/2),d[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+h[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};t.OverviewRulerRenderer=f=r([n(2,c.IBufferService),n(3,c.IDecorationService),n(4,a.IRenderService),n(5,c.IOptionsService),n(6,a.ICoreBrowserService)],f)},2950:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;const s=i(4725),o=i(2585),a=i(2584);let l=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,i,r,n,s){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=r,this._coreService=n,this._renderService=s,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${a.C0.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const n=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(n.width,1)+"px",this._textarea.style.height=Math.max(n.height,1)+"px",this._textarea.style.lineHeight=n.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};t.CompositionHelper=l=r([n(2,o.IBufferService),n(3,o.IOptionsService),n(4,o.ICoreService),n(5,s.IRenderService)],l)},9806:(e,t)=>{function i(e,t,i){const r=i.getBoundingClientRect(),n=e.getComputedStyle(i),s=parseInt(n.getPropertyValue("padding-left")),o=parseInt(n.getPropertyValue("padding-top"));return[t.clientX-r.left-s,t.clientY-r.top-o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,r,n,s,o,a,l,c){if(!o)return;const h=i(e,t,r);return h?(h[0]=Math.ceil((h[0]+(c?a/2:0))/a),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),n+(c?1:0)),h[1]=Math.min(Math.max(h[1],1),s),h):void 0}},9504:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;const r=i(2584);function n(e,t,i,r){const n=e-s(e,i),a=t-s(t,i);return c(Math.abs(n-a)-function(e,t,i){let r=0;const n=e-s(e,i),a=t-s(t,i);for(let s=0;s<Math.abs(n-a);s++){const a="A"===o(e,t)?-1:1,l=i.buffer.lines.get(n+a*s);(null==l?void 0:l.isWrapped)&&r++}return r}(e,t,i),l(o(e,t),r))}function s(e,t){let i=0,r=t.buffer.lines.get(e),n=null==r?void 0:r.isWrapped;for(;n&&e>=0&&e<t.rows;)i++,r=t.buffer.lines.get(--e),n=null==r?void 0:r.isWrapped;return i}function o(e,t){return e>t?"A":"B"}function a(e,t,i,r,n,s){let o=e,a=t,l="";for(;o!==i||a!==r;)o+=n?1:-1,n&&o>s.cols-1?(l+=s.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!n&&o<0&&(l+=s.buffer.translateBufferLineToString(a,!1,0,e+1),o=s.cols-1,e=o,a--);return l+s.buffer.translateBufferLineToString(a,!1,e,o)}function l(e,t){const i=t?"O":"[";return r.C0.ESC+i+e}function c(e,t){e=Math.floor(e);let i="";for(let r=0;r<e;r++)i+=t;return i}t.moveToCellSequence=function(e,t,i,r){const o=i.buffer.x,h=i.buffer.y;if(!i.buffer.hasScrollback)return d=o,(0===n(u=h,t,f=i,p=r).length?"":c(a(d,u,d,u-s(u,f),!1,f).length,l("D",p)))+n(h,t,i,r)+function(e,t,i,r,o,h){let d;d=n(t,r,o,h).length>0?r-s(r,o):t;const u=r,f=function(e,t,i,r,o,a){let l;return l=n(i,r,o,a).length>0?r-s(r,o):t,e<i&&l<=r||e>=i&&l<r?"C":"D"}(e,t,i,r,o,h);return c(a(e,d,i,u,"C"===f,o).length,l(f,h))}(o,h,e,t,i,r);var d,u,f,p;let g;if(h===t)return g=o>e?"D":"C",c(Math.abs(o-e),l(g,r));g=h>t?"D":"C";const m=Math.abs(h-t);return c(function(e,t){return t.cols-e}(h>t?e:o,i)+(m-1)*i.cols+1+((h>t?o:e)-1),l(g,r))}},1296:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;const s=i(3787),o=i(2550),a=i(2223),l=i(6171),c=i(4725),h=i(8055),d=i(8460),u=i(844),f=i(2585),p="xterm-dom-renderer-owner-",g="xterm-rows",m="xterm-fg-",_="xterm-bg-",v="xterm-focus",b="xterm-selection";let y=1,x=t.DomRenderer=class extends u.Disposable{constructor(e,t,i,r,n,a,c,h,f,m){super(),this._element=e,this._screenElement=t,this._viewportElement=i,this._linkifier2=r,this._charSizeService=a,this._optionsService=c,this._bufferService=h,this._coreBrowserService=f,this._themeService=m,this._terminalClass=y++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,l.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(e=>this._injectCss(e))),this._injectCss(this._themeService.colors),this._rowFactory=n.createInstance(s.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(e=>this._handleLinkHover(e))),this.register(this._linkifier2.onHideLinkUnderline(e=>this._handleLinkLeave(e))),this.register((0,u.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new o.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const i of this._rowElements)i.style.width=`${this.dimensions.css.canvas.width}px`,i.style.height=`${this.dimensions.css.cell.height}px`,i.style.lineHeight=`${this.dimensions.css.cell.height}px`,i.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const t=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${g} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${g} .xterm-dim { color: ${h.color.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",t+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${g}.${v} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g}.${v} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(const[i,r]of e.ansi.entries())t+=`${this._terminalSelector} .${m}${i} { color: ${r.css}; }${this._terminalSelector} .${m}${i}.xterm-dim { color: ${h.color.multiplyOpacity(r,.5).css}; }${this._terminalSelector} .${_}${i} { background-color: ${r.css}; }`;t+=`${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(e.background).css}; }${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(e.background),.5).css}; }${this._terminalSelector} .${_}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let i=this._rowElements.length;i<=t;i++){const e=document.createElement("div");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(v)}handleFocus(){this._rowContainer.classList.add(v),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;const r=e[1]-this._bufferService.buffer.ydisp,n=t[1]-this._bufferService.buffer.ydisp,s=Math.max(r,0),o=Math.min(n,this._bufferService.rows-1);if(s>=this._bufferService.rows||o<0)return;const a=document.createDocumentFragment();if(i){const i=e[0]>t[0];a.appendChild(this._createSelectionElement(s,i?t[0]:e[0],i?e[0]:t[0],o-s+1))}else{const i=r===s?e[0]:0,l=s===n?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(s,i,l));const c=o-s-1;if(a.appendChild(this._createSelectionElement(s+1,0,this._bufferService.cols,c)),s!==o){const e=n===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,i,r=1){const n=document.createElement("div");return n.style.height=r*this.dimensions.css.cell.height+"px",n.style.top=e*this.dimensions.css.cell.height+"px",n.style.left=t*this.dimensions.css.cell.width+"px",n.style.width=this.dimensions.css.cell.width*(i-t)+"px",n}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const i=this._bufferService.buffer,r=i.ybase+i.y,n=Math.min(i.x,this._bufferService.cols-1),s=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let l=e;l<=t;l++){const e=l+i.ydisp,t=this._rowElements[l],c=i.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===r,o,a,n,s,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,r,n,s){i<0&&(e=0),r<0&&(t=0);const o=this._bufferService.rows-1;i=Math.max(Math.min(i,o),0),r=Math.max(Math.min(r,o),0),n=Math.min(n,this._bufferService.cols);const a=this._bufferService.buffer,l=a.ybase+a.y,c=Math.min(a.x,n-1),h=this._optionsService.rawOptions.cursorBlink,d=this._optionsService.rawOptions.cursorStyle,u=this._optionsService.rawOptions.cursorInactiveStyle;for(let f=i;f<=r;++f){const o=f+a.ydisp,p=this._rowElements[f],g=a.lines.get(o);if(!p||!g)break;p.replaceChildren(...this._rowFactory.createRow(g,o,o===l,d,u,c,h,this.dimensions.css.cell.width,this._widthCache,s?f===i?e:0:-1,s?(f===r?t:n)-1:-1))}}};t.DomRenderer=x=r([n(4,f.IInstantiationService),n(5,c.ICharSizeService),n(6,f.IOptionsService),n(7,f.IBufferService),n(8,c.ICoreBrowserService),n(9,c.IThemeService)],x)},3787:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=void 0;const s=i(2223),o=i(643),a=i(511),l=i(2585),c=i(8055),h=i(4725),d=i(4269),u=i(6171),f=i(3734);let p=t.DomRendererRowFactory=class{constructor(e,t,i,r,n,s,o){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=r,this._coreService=n,this._decorationService=s,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,r,n,a,l,h,u,p,m){const _=[],v=this._characterJoinerService.getJoinedCharacters(t),b=this._themeService.colors;let y,x=e.getNoBgTrimmedLength();i&&x<a+1&&(x=a+1);let S=0,w="",C=0,k=0,E=0,L=!1,D=0,M=!1,A=0;const R=[],T=-1!==p&&-1!==m;for(let P=0;P<x;P++){e.loadCell(P,this._workCell);let x=this._workCell.getWidth();if(0===x)continue;let j=!1,O=P,B=this._workCell;if(v.length>0&&P===v[0][0]){j=!0;const t=v.shift();B=new d.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),O=t[1]-1,x=B.getWidth()}const I=this._isCellInSelection(P,t),N=i&&P===a,F=T&&P>=p&&P<=m;let z=!1;this._decorationService.forEachDecorationAtCell(P,t,void 0,e=>{z=!0});let H=B.getChars()||o.WHITESPACE_CELL_CHAR;if(" "===H&&(B.isUnderline()||B.isOverline())&&(H=""),A=x*h-u.get(H,B.isBold(),B.isItalic()),y){if(S&&(I&&M||!I&&!M&&B.bg===C)&&(I&&M&&b.selectionForeground||B.fg===k)&&B.extended.ext===E&&F===L&&A===D&&!N&&!j&&!z){w+=H,S++;continue}S&&(y.textContent=w),y=this._document.createElement("span"),S=0,w=""}else y=this._document.createElement("span");if(C=B.bg,k=B.fg,E=B.extended.ext,L=F,D=A,M=I,j&&a>=P&&a<=O&&(a=P),!this._coreService.isCursorHidden&&N)if(R.push("xterm-cursor"),this._coreBrowserService.isFocused)l&&R.push("xterm-cursor-blink"),R.push("bar"===r?"xterm-cursor-bar":"underline"===r?"xterm-cursor-underline":"xterm-cursor-block");else if(n)switch(n){case"outline":R.push("xterm-cursor-outline");break;case"block":R.push("xterm-cursor-block");break;case"bar":R.push("xterm-cursor-bar");break;case"underline":R.push("xterm-cursor-underline")}if(B.isBold()&&R.push("xterm-bold"),B.isItalic()&&R.push("xterm-italic"),B.isDim()&&R.push("xterm-dim"),w=B.isInvisible()?o.WHITESPACE_CELL_CHAR:B.getChars()||o.WHITESPACE_CELL_CHAR,B.isUnderline()&&(R.push(`xterm-underline-${B.extended.underlineStyle}`)," "===w&&(w=""),!B.isUnderlineColorDefault()))if(B.isUnderlineColorRGB())y.style.textDecorationColor=`rgb(${f.AttributeData.toColorRGB(B.getUnderlineColor()).join(",")})`;else{let e=B.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&B.isBold()&&e<8&&(e+=8),y.style.textDecorationColor=b.ansi[e].css}B.isOverline()&&(R.push("xterm-overline")," "===w&&(w="")),B.isStrikethrough()&&R.push("xterm-strikethrough"),F&&(y.style.textDecoration="underline");let W=B.getFgColor(),$=B.getFgColorMode(),U=B.getBgColor(),V=B.getBgColorMode();const q=!!B.isInverse();if(q){const e=W;W=U,U=e;const t=$;$=V,V=t}let K,G,Y,X=!1;switch(this._decorationService.forEachDecorationAtCell(P,t,void 0,e=>{"top"!==e.options.layer&&X||(e.backgroundColorRGB&&(V=50331648,U=e.backgroundColorRGB.rgba>>8&16777215,K=e.backgroundColorRGB),e.foregroundColorRGB&&($=50331648,W=e.foregroundColorRGB.rgba>>8&16777215,G=e.foregroundColorRGB),X="top"===e.options.layer)}),!X&&I&&(K=this._coreBrowserService.isFocused?b.selectionBackgroundOpaque:b.selectionInactiveBackgroundOpaque,U=K.rgba>>8&16777215,V=50331648,X=!0,b.selectionForeground&&($=50331648,W=b.selectionForeground.rgba>>8&16777215,G=b.selectionForeground)),X&&R.push("xterm-decoration-top"),V){case 16777216:case 33554432:Y=b.ansi[U],R.push(`xterm-bg-${U}`);break;case 50331648:Y=c.rgba.toColor(U>>16,U>>8&255,255&U),this._addStyle(y,`background-color:#${g((U>>>0).toString(16),"0",6)}`);break;default:q?(Y=b.foreground,R.push(`xterm-bg-${s.INVERTED_DEFAULT_COLOR}`)):Y=b.background}switch(K||B.isDim()&&(K=c.color.multiplyOpacity(Y,.5)),$){case 16777216:case 33554432:B.isBold()&&W<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(W+=8),this._applyMinimumContrast(y,Y,b.ansi[W],B,K,void 0)||R.push(`xterm-fg-${W}`);break;case 50331648:const e=c.rgba.toColor(W>>16&255,W>>8&255,255&W);this._applyMinimumContrast(y,Y,e,B,K,G)||this._addStyle(y,`color:#${g(W.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(y,Y,b.foreground,B,K,void 0)||q&&R.push(`xterm-fg-${s.INVERTED_DEFAULT_COLOR}`)}R.length&&(y.className=R.join(" "),R.length=0),N||j||z?y.textContent=w:S++,A!==this.defaultSpacing&&(y.style.letterSpacing=`${A}px`),_.push(y),P=O}return y&&S&&(y.textContent=w),_}_applyMinimumContrast(e,t,i,r,n,s){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,u.excludeFromContrastRatioDemands)(r.getCode()))return!1;const o=this._getContrastCache(r);let a;if(n||s||(a=o.getColor(t.rgba,i.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(r.isDim()?2:1);a=c.color.ensureContrastRatio(n||t,s||i,e),o.setColor((n||t).rgba,(s||i).rgba,null!=a?a:null)}return!!a&&(this._addStyle(e,`color:${a.css}`),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){const i=this._selectionStart,r=this._selectionEnd;return!(!i||!r)&&(this._columnSelectMode?i[0]<=r[0]?e>=i[0]&&t>=i[1]&&e<r[0]&&t<=r[1]:e<i[0]&&t>=i[1]&&e>=r[0]&&t<=r[1]:t>i[1]&&t<r[1]||i[1]===r[1]&&t===i[1]&&e>=i[0]&&e<r[0]||i[1]<r[1]&&t===r[1]&&e<r[0]||i[1]<r[1]&&t===i[1]&&e>=i[0])}};function g(e,t,i){for(;e.length<i;)e=t+e;return e}t.DomRendererRowFactory=p=r([n(1,h.ICharacterJoinerService),n(2,l.IOptionsService),n(3,h.ICoreBrowserService),n(4,l.ICoreService),n(5,l.IDecorationService),n(6,h.IThemeService)],p)},2550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const t=e.createElement("span"),i=e.createElement("span");i.style.fontWeight="bold";const r=e.createElement("span");r.style.fontStyle="italic";const n=e.createElement("span");n.style.fontWeight="bold",n.style.fontStyle="italic",this._measureElements=[t,i,r,n],this._container.appendChild(t),this._container.appendChild(i),this._container.appendChild(r),this._container.appendChild(n),e.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,r){e===this._font&&t===this._fontSize&&i===this._weight&&r===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=r,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${r}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${r}`,this.clear())}get(e,t,i){let r=0;if(!t&&!i&&1===e.length&&(r=e.charCodeAt(0))<256)return-9999!==this._flat[r]?this._flat[r]:this._flat[r]=this._measure(e,0);let n=e;t&&(n+="B"),i&&(n+="I");let s=this._holey.get(n);if(void 0===s){let r=0;t&&(r|=1),i&&(r|=2),s=this._measure(e,r),this._holey.set(n,s)}return s}_measure(e,t){const i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}}},2223:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const r=i(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},6171:(e,t)=>{function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return i(e)||9472<=(t=e)&&t<=9631;var t},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;const s=i(2585),o=i(8460),a=i(844);let l=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new c(e,t,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=l=r([n(2,s.IOptionsService)],l);class c{constructor(e,t,i){this._document=e,this._parentElement=t,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const e={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return 0!==e.width&&0!==e.height&&(this._result.width=e.width/32,this._result.height=Math.ceil(e.height)),this._result}}},4269:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const s=i(3734),o=i(643),a=i(511),l=i(2585);class c extends s.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let h=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const i=[],r=t.translateToString(!0);let n=0,s=0,a=0,l=t.getFg(0),c=t.getBg(0);for(let h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==l||this._workCell.bg!==c){if(h-n>1){const e=this._getJoinedRanges(r,a,s,t,n);for(let t=0;t<e.length;t++)i.push(e[t])}n=h,a=s,l=this._workCell.fg,c=this._workCell.bg}s+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-n>1){const e=this._getJoinedRanges(r,a,s,t,n);for(let t=0;t<e.length;t++)i.push(e[t])}return i}_getJoinedRanges(t,i,r,n,s){const o=t.substring(i,r);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(l){}for(let c=1;c<this._characterJoiners.length;c++)try{const t=this._characterJoiners[c].handler(o);for(let i=0;i<t.length;i++)e._mergeRanges(a,t[i])}catch(l){}return this._stringRangesToCellRanges(a,n,s),a}_stringRangesToCellRanges(e,t,i){let r=0,n=!1,s=0,a=e[r];if(a){for(let l=i;l<this._bufferService.cols;l++){const i=t.getWidth(l),c=t.getString(l).length||o.WHITESPACE_CELL_CHAR.length;if(0!==i){if(!n&&a[0]<=s&&(a[0]=l,n=!0),a[1]<=s){if(a[1]=l,a=e[++r],!a)break;a[0]<=s?(a[0]=l,n=!0):n=!1}s+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let r=0;r<e.length;r++){const n=e[r];if(i){if(t[1]<=n[0])return e[r-1][1]=t[1],e;if(t[1]<=n[1])return e[r-1][1]=Math.max(t[1],n[1]),e.splice(r,1),e;e.splice(r,1),r--}else{if(t[1]<=n[0])return e.splice(r,0,t),e;if(t[1]<=n[1])return n[0]=Math.min(t[0],n[0]),e;t[0]<n[1]&&(n[0]=Math.min(t[0],n[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=h=r([n(0,l.IBufferService)],h)},5114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0,t.CoreBrowserService=class{constructor(e,t){this._textarea=e,this.window=t,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;const s=i(4725),o=i(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,r,n){return(0,o.getCoords)(window,e,t,i,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(e,t){const i=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};t.MouseService=a=r([n(0,s.IRenderService),n(1,s.ICharSizeService)],a)},3230:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;const s=i(3656),o=i(6193),a=i(5596),l=i(4725),c=i(8460),h=i(844),d=i(7226),u=i(2585);let f=t.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,i,r,n,l,u,f){if(super(),this._rowCount=e,this._charSizeService=r,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new c.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new c.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new c.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new c.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new o.RenderDebouncer(u.window,(e,t)=>this._renderRows(e,t)),this.register(this._renderDebouncer),this._screenDprMonitor=new a.ScreenDprMonitor(u.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(l.onResize(()=>this._fullRefresh())),this.register(l.buffers.onBufferActivate(()=>{var e;return null===(e=this._renderer.value)||void 0===e?void 0:e.clear()})),this.register(i.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(n.onDecorationRegistered(()=>this._fullRefresh())),this.register(n.onDecorationRemoved(()=>this._fullRefresh())),this.register(i.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(l.cols,l.rows),this._fullRefresh()})),this.register(i.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(l.buffer.y,l.buffer.y,!0))),this.register((0,s.addDisposableDomListener)(u.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(f.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in u.window){const e=new u.window.IntersectionObserver(e=>this._handleIntersectionChange(e[e.length-1]),{threshold:0});e.observe(t),this.register({dispose:()=>e.disconnect()})}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){this._isPaused?this._needsFullRefresh=!0:(i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&(null===(t=(e=this._renderer.value).clearTextureAtlas)||void 0===t||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(e,t)):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCharSizeChanged()}handleBlur(){var e;null===(e=this._renderer.value)||void 0===e||e.handleBlur()}handleFocus(){var e;null===(e=this._renderer.value)||void 0===e||e.handleFocus()}handleSelectionChanged(e,t,i){var r;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,null===(r=this._renderer.value)||void 0===r||r.handleSelectionChanged(e,t,i)}handleCursorMove(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCursorMove()}clear(){var e;null===(e=this._renderer.value)||void 0===e||e.clear()}};t.RenderService=f=r([n(2,u.IOptionsService),n(3,l.ICharSizeService),n(4,u.IDecorationService),n(5,u.IBufferService),n(6,l.ICoreBrowserService),n(7,l.IThemeService)],f)},9312:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const s=i(9806),o=i(9504),a=i(456),l=i(4725),c=i(8460),h=i(844),d=i(6114),u=i(4841),f=i(511),p=i(2585),g=String.fromCharCode(160),m=new RegExp(g,"g");let _=t.SelectionService=class extends h.Disposable{constructor(e,t,i,r,n,s,o,l,d){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=r,this._coreService=n,this._mouseService=s,this._optionsService=o,this._renderService=l,this._coreBrowserService=d,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(e=>this._handleTrim(e)),this.register(this._bufferService.buffers.onBufferActivate(e=>this._handleBufferActivate(e))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";const i=this._bufferService.buffer,r=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";const n=e[0]<t[0]?e[0]:t[0],s=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=i.translateBufferLineToString(o,!0,n,s);r.push(e)}}else{const n=e[1]===t[1]?t[0]:void 0;r.push(i.translateBufferLineToString(e[1],!0,e[0],n));for(let s=e[1]+1;s<=t[1]-1;s++){const e=i.lines.get(s),t=i.translateBufferLineToString(s,!0);(null==e?void 0:e.isWrapped)?r[r.length-1]+=t:r.push(t)}if(e[1]!==t[1]){const e=i.lines.get(t[1]),n=i.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?r[r.length-1]+=n:r.push(n)}}return r.map(e=>e.replace(m," ")).join(d.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,r=this._model.finalSelectionEnd;return!!(i&&r&&t)&&this._areCoordsInSelection(t,i,r)}isCellInSelection(e,t){const i=this._model.finalSelectionStart,r=this._model.finalSelectionEnd;return!(!i||!r)&&this._areCoordsInSelection([e,t],i,r)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var i,r;const n=null===(r=null===(i=this._linkifier.currentLink)||void 0===i?void 0:i.link)||void 0===r?void 0:r.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=(0,u.getRangeLength)(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const s=this._getMouseBufferCoords(e);return!!s&&(this._selectWordAt(s,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,s.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return d.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){const e=i.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);i?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,i)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let r=0;t>=r;r++){const n=e.loadCell(r,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:n>1&&t!==r&&(i+=n-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,r=!0){if(e[0]>=this._bufferService.cols)return;const n=this._bufferService.buffer,s=n.lines.get(e[1]);if(!s)return;const o=n.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(s,e[0]),l=a;const c=e[0]-a;let h=0,d=0,u=0,f=0;if(" "===o.charAt(a)){for(;a>0&&" "===o.charAt(a-1);)a--;for(;l<o.length&&" "===o.charAt(l+1);)l++}else{let t=e[0],i=e[0];0===s.getWidth(t)&&(h++,t--),2===s.getWidth(i)&&(d++,i++);const r=s.getString(i).length;for(r>1&&(f+=r-1,l+=r-1);t>0&&a>0&&!this._isCharWordSeparator(s.loadCell(t-1,this._workCell));){s.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(h++,t--):e>1&&(u+=e-1,a-=e-1),a--,t--}for(;i<s.length&&l+1<o.length&&!this._isCharWordSeparator(s.loadCell(i+1,this._workCell));){s.loadCell(i+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(d++,i++):e>1&&(f+=e-1,l+=e-1),l++,i++}}l++;let p=a+c-h+u,g=Math.min(this._bufferService.cols,l-a+h+d-u-f);if(t||""!==o.slice(a,l).trim()){if(i&&0===p&&32!==s.getCodePoint(0)){const t=n.lines.get(e[1]-1);if(t&&s.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;p-=e,g+=e}}}if(r&&p+g===this._bufferService.cols&&32!==s.getCodePoint(this._bufferService.cols-1)){const t=n.lines.get(e[1]+1);if((null==t?void 0:t.isWrapped)&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(g+=t.length)}}return{start:p,length:g}}}_selectWordAt(e,t){const i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,u.getRangeLength)(i,this._bufferService.cols)}};t.SelectionService=_=r([n(3,p.IBufferService),n(4,p.ICoreService),n(5,l.IMouseService),n(6,p.IOptionsService),n(7,l.IRenderService),n(8,l.ICoreBrowserService)],_)},4725:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const r=i(8343);t.ICharSizeService=(0,r.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,r.createDecorator)("CoreBrowserService"),t.IMouseService=(0,r.createDecorator)("MouseService"),t.IRenderService=(0,r.createDecorator)("RenderService"),t.ISelectionService=(0,r.createDecorator)("SelectionService"),t.ICharacterJoinerService=(0,r.createDecorator)("CharacterJoinerService"),t.IThemeService=(0,r.createDecorator)("ThemeService")},6731:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const s=i(7239),o=i(8055),a=i(8460),l=i(844),c=i(2585),h=o.css.toColor("#ffffff"),d=o.css.toColor("#000000"),u=o.css.toColor("#ffffff"),f=o.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){const r=t[i/36%6|0],n=t[i/6%6|0],s=t[i%6];e.push({css:o.channels.toCss(r,n,s),rgba:o.channels.toRgba(r,n,s)})}for(let i=0;i<24;i++){const t=8+10*i;e.push({css:o.channels.toCss(t,t,t),rgba:o.channels.toRgba(t,t,t)})}return e})());let g=t.ThemeService=class extends l.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new s.ColorContrastCache,this._halfContrastCache=new s.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:d,cursor:u,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:o.color.blend(d,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:o.color.blend(d,p),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(e={}){const i=this._colors;if(i.foreground=m(e.foreground,h),i.background=m(e.background,d),i.cursor=m(e.cursor,u),i.cursorAccent=m(e.cursorAccent,f),i.selectionBackgroundTransparent=m(e.selectionBackground,p),i.selectionBackgroundOpaque=o.color.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=m(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=o.color.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?m(e.selectionForeground,o.NULL_COLOR):void 0,i.selectionForeground===o.NULL_COLOR&&(i.selectionForeground=void 0),o.color.isOpaque(i.selectionBackgroundTransparent)){const e=.3;i.selectionBackgroundTransparent=o.color.opacity(i.selectionBackgroundTransparent,e)}if(o.color.isOpaque(i.selectionInactiveBackgroundTransparent)){const e=.3;i.selectionInactiveBackgroundTransparent=o.color.opacity(i.selectionInactiveBackgroundTransparent,e)}if(i.ansi=t.DEFAULT_ANSI_COLORS.slice(),i.ansi[0]=m(e.black,t.DEFAULT_ANSI_COLORS[0]),i.ansi[1]=m(e.red,t.DEFAULT_ANSI_COLORS[1]),i.ansi[2]=m(e.green,t.DEFAULT_ANSI_COLORS[2]),i.ansi[3]=m(e.yellow,t.DEFAULT_ANSI_COLORS[3]),i.ansi[4]=m(e.blue,t.DEFAULT_ANSI_COLORS[4]),i.ansi[5]=m(e.magenta,t.DEFAULT_ANSI_COLORS[5]),i.ansi[6]=m(e.cyan,t.DEFAULT_ANSI_COLORS[6]),i.ansi[7]=m(e.white,t.DEFAULT_ANSI_COLORS[7]),i.ansi[8]=m(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),i.ansi[9]=m(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),i.ansi[10]=m(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),i.ansi[11]=m(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),i.ansi[12]=m(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),i.ansi[13]=m(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),i.ansi[14]=m(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),i.ansi[15]=m(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const r=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let n=0;n<r;n++)i.ansi[n+16]=m(e.extendedAnsi[n],t.DEFAULT_ANSI_COLORS[n+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function m(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch(i){}return t}t.ThemeService=g=r([n(0,c.IOptionsService)],g)},6349:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;const r=i(8460),n=i(844);class s extends n.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new r.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new r.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new r.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let i=e;i<this._length-t;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let r=this._length-1;r>=e;r--)this._array[this._getCyclicIndex(r+i.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<i.length;r++)this._array[this._getCyclicIndex(e+r)]=i[r];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){const e=this._length+i.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let n=t-1;n>=0;n--)this.set(e+n+i,this.get(e+n));const r=e+t+i-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<t;r++)this.set(e+r+i,this.get(e+r))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=s},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,i=5){if("object"!=typeof t)return t;const r=Array.isArray(t)?[]:{};for(const n in t)r[n]=i<=1?t[n]:t[n]&&e(t[n],i-1);return r}},8055:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;const r=i(6114);let n=0,s=0,o=0,a=0;var l,c,h,d,u,f;function p(e){const t=e.toString(16);return t.length<2?"0"+t:t}function g(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},(f=l||(t.channels=l={})).toCss=function(e,t,i,r){return void 0!==r?`#${p(e)}${p(t)}${p(i)}${p(r)}`:`#${p(e)}${p(t)}${p(i)}`},f.toRgba=function(e,t,i,r=255){return(e<<24|t<<16|i<<8|r)>>>0},function(e){function t(e,t){return a=Math.round(255*t),[n,s,o]=u.toChannels(e.rgba),{css:l.toCss(n,s,o,a),rgba:l.toRgba(n,s,o,a)}}e.blend=function(e,t){if(a=(255&t.rgba)/255,1===a)return{css:t.css,rgba:t.rgba};const i=t.rgba>>24&255,r=t.rgba>>16&255,c=t.rgba>>8&255,h=e.rgba>>24&255,d=e.rgba>>16&255,u=e.rgba>>8&255;return n=h+Math.round((i-h)*a),s=d+Math.round((r-d)*a),o=u+Math.round((c-u)*a),{css:l.toCss(n,s,o),rgba:l.toRgba(n,s,o)}},e.isOpaque=function(e){return!(255&~e.rgba)},e.ensureContrastRatio=function(e,t,i){const r=u.ensureContrastRatio(e.rgba,t.rgba,i);if(r)return u.toColor(r>>24&255,r>>16&255,r>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[n,s,o]=u.toChannels(t),{css:l.toCss(n,s,o),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return a=255&e.rgba,t(e,a*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(c||(t.color=c={})),function(e){let t,i;if(!r.isNode){const e=document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d",{willReadFrequently:!0});r&&(t=r,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return n=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),u.toColor(n,s,o);case 5:return n=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),a=parseInt(e.slice(4,5).repeat(2),16),u.toColor(n,s,o,a);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const r=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(r)return n=parseInt(r[1]),s=parseInt(r[2]),o=parseInt(r[3]),a=Math.round(255*(void 0===r[5]?1:parseFloat(r[5]))),u.toColor(n,s,o,a);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[n,s,o,a]=t.getImageData(0,0,1,1).data,255!==a)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(n,s,o,a),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const r=e/255,n=t/255,s=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(d||(t.rgb=d={})),function(e){function t(e,t,i){const r=e>>24&255,n=e>>16&255,s=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,n,s));for(;c<i&&(o>0||a>0||l>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,n,s));return(o<<24|a<<16|l<<8|255)>>>0}function i(e,t,i){const r=e>>24&255,n=e>>16&255,s=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,n,s));for(;c<i&&(o<255||a<255||l<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),c=g(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,n,s));return(o<<24|a<<16|l<<8|255)>>>0}e.ensureContrastRatio=function(e,r,n){const s=d.relativeLuminance(e>>8),o=d.relativeLuminance(r>>8);if(g(s,o)<n){if(o<s){const o=t(e,r,n),a=g(s,d.relativeLuminance(o>>8));if(a<n){const t=i(e,r,n);return a>g(s,d.relativeLuminance(t>>8))?o:t}return o}const a=i(e,r,n),l=g(s,d.relativeLuminance(a>>8));if(l<n){const i=t(e,r,n);return l>g(s,d.relativeLuminance(i>>8))?a:i}return a}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,r){return{css:l.toCss(e,t,i,r),rgba:l.toRgba(e,t,i,r)}}}(u||(t.rgba=u={})),t.toPaddedHex=p,t.contrastRatio=g},8969:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;const r=i(844),n=i(2585),s=i(4348),o=i(7866),a=i(744),l=i(7302),c=i(6975),h=i(8460),d=i(1753),u=i(1480),f=i(7994),p=i(9282),g=i(5435),m=i(5981),_=i(2660);let v=!1;class b extends r.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event(e=>{var t;null===(t=this._onScrollApi)||void 0===t||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new r.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new s.InstantiationService,this.optionsService=this.register(new l.OptionsService(e)),this._instantiationService.setService(n.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(n.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(n.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(n.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(n.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(u.UnicodeService)),this._instantiationService.setService(n.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(n.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(_.OscLinkService),this._instantiationService.setService(n.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new m.WriteBuffer((e,t)=>this._inputHandler.parse(e,t))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=n.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t,i){this._bufferService.scrollLines(e,t,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!("conpty"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,r.toDisposable)(()=>{for(const t of e)t.dispose()})}}}t.CoreTerminal=b},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e(e=>t.fire(e))}},5435:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const s=i(2584),o=i(7116),a=i(2015),l=i(844),c=i(482),h=i(8437),d=i(8460),u=i(643),f=i(511),p=i(3734),g=i(2585),m=i(6242),_=i(6351),v=i(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function x(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var S,w;(w=S||(t.WindowsOptionsReportType=S={}))[w.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",w[w.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";let C=0;class k extends l.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,i,r,n,l,u,p,g=new a.EscapeSequenceParser){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=r,this._optionsService=n,this._oscLinkService=l,this._coreMouseService=u,this._unicodeService=p,this._parser=g,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new E(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._parser.setCsiHandlerFallback((e,t)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(e),params:t.toArray()})}),this._parser.setEscHandlerFallback(e=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(e)})}),this._parser.setExecuteHandlerFallback(e=>{this._logService.debug("Unknown EXECUTE code: ",{code:e})}),this._parser.setOscHandlerFallback((e,t,i)=>{this._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:i})}),this._parser.setDcsHandlerFallback((e,t,i)=>{"HOOK"===t&&(i=i.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(e),action:t,payload:i})}),this._parser.setPrintHandler((e,t,i)=>this.print(e,t,i)),this._parser.registerCsiHandler({final:"@"},e=>this.insertChars(e)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},e=>this.scrollLeft(e)),this._parser.registerCsiHandler({final:"A"},e=>this.cursorUp(e)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},e=>this.scrollRight(e)),this._parser.registerCsiHandler({final:"B"},e=>this.cursorDown(e)),this._parser.registerCsiHandler({final:"C"},e=>this.cursorForward(e)),this._parser.registerCsiHandler({final:"D"},e=>this.cursorBackward(e)),this._parser.registerCsiHandler({final:"E"},e=>this.cursorNextLine(e)),this._parser.registerCsiHandler({final:"F"},e=>this.cursorPrecedingLine(e)),this._parser.registerCsiHandler({final:"G"},e=>this.cursorCharAbsolute(e)),this._parser.registerCsiHandler({final:"H"},e=>this.cursorPosition(e)),this._parser.registerCsiHandler({final:"I"},e=>this.cursorForwardTab(e)),this._parser.registerCsiHandler({final:"J"},e=>this.eraseInDisplay(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},e=>this.eraseInDisplay(e,!0)),this._parser.registerCsiHandler({final:"K"},e=>this.eraseInLine(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},e=>this.eraseInLine(e,!0)),this._parser.registerCsiHandler({final:"L"},e=>this.insertLines(e)),this._parser.registerCsiHandler({final:"M"},e=>this.deleteLines(e)),this._parser.registerCsiHandler({final:"P"},e=>this.deleteChars(e)),this._parser.registerCsiHandler({final:"S"},e=>this.scrollUp(e)),this._parser.registerCsiHandler({final:"T"},e=>this.scrollDown(e)),this._parser.registerCsiHandler({final:"X"},e=>this.eraseChars(e)),this._parser.registerCsiHandler({final:"Z"},e=>this.cursorBackwardTab(e)),this._parser.registerCsiHandler({final:"`"},e=>this.charPosAbsolute(e)),this._parser.registerCsiHandler({final:"a"},e=>this.hPositionRelative(e)),this._parser.registerCsiHandler({final:"b"},e=>this.repeatPrecedingCharacter(e)),this._parser.registerCsiHandler({final:"c"},e=>this.sendDeviceAttributesPrimary(e)),this._parser.registerCsiHandler({prefix:">",final:"c"},e=>this.sendDeviceAttributesSecondary(e)),this._parser.registerCsiHandler({final:"d"},e=>this.linePosAbsolute(e)),this._parser.registerCsiHandler({final:"e"},e=>this.vPositionRelative(e)),this._parser.registerCsiHandler({final:"f"},e=>this.hVPosition(e)),this._parser.registerCsiHandler({final:"g"},e=>this.tabClear(e)),this._parser.registerCsiHandler({final:"h"},e=>this.setMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"h"},e=>this.setModePrivate(e)),this._parser.registerCsiHandler({final:"l"},e=>this.resetMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"l"},e=>this.resetModePrivate(e)),this._parser.registerCsiHandler({final:"m"},e=>this.charAttributes(e)),this._parser.registerCsiHandler({final:"n"},e=>this.deviceStatus(e)),this._parser.registerCsiHandler({prefix:"?",final:"n"},e=>this.deviceStatusPrivate(e)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},e=>this.softReset(e)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},e=>this.setCursorStyle(e)),this._parser.registerCsiHandler({final:"r"},e=>this.setScrollRegion(e)),this._parser.registerCsiHandler({final:"s"},e=>this.saveCursor(e)),this._parser.registerCsiHandler({final:"t"},e=>this.windowOptions(e)),this._parser.registerCsiHandler({final:"u"},e=>this.restoreCursor(e)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},e=>this.insertColumns(e)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},e=>this.deleteColumns(e)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},e=>this.selectProtected(e)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},e=>this.requestMode(e,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},e=>this.requestMode(e,!1)),this._parser.setExecuteHandler(s.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(s.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(s.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(s.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(s.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(s.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(s.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(s.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(s.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(s.C1.IND,()=>this.index()),this._parser.setExecuteHandler(s.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(s.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new m.OscHandler(e=>(this.setTitle(e),this.setIconName(e),!0))),this._parser.registerOscHandler(1,new m.OscHandler(e=>this.setIconName(e))),this._parser.registerOscHandler(2,new m.OscHandler(e=>this.setTitle(e))),this._parser.registerOscHandler(4,new m.OscHandler(e=>this.setOrReportIndexedColor(e))),this._parser.registerOscHandler(8,new m.OscHandler(e=>this.setHyperlink(e))),this._parser.registerOscHandler(10,new m.OscHandler(e=>this.setOrReportFgColor(e))),this._parser.registerOscHandler(11,new m.OscHandler(e=>this.setOrReportBgColor(e))),this._parser.registerOscHandler(12,new m.OscHandler(e=>this.setOrReportCursorColor(e))),this._parser.registerOscHandler(104,new m.OscHandler(e=>this.restoreIndexedColor(e))),this._parser.registerOscHandler(110,new m.OscHandler(e=>this.restoreFgColor(e))),this._parser.registerOscHandler(111,new m.OscHandler(e=>this.restoreBgColor(e))),this._parser.registerOscHandler(112,new m.OscHandler(e=>this.restoreCursorColor(e))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const s in o.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:s},()=>this.selectCharset("("+s)),this._parser.registerEscHandler({intermediates:")",final:s},()=>this.selectCharset(")"+s)),this._parser.registerEscHandler({intermediates:"*",final:s},()=>this.selectCharset("*"+s)),this._parser.registerEscHandler({intermediates:"+",final:s},()=>this.selectCharset("+"+s)),this._parser.registerEscHandler({intermediates:"-",final:s},()=>this.selectCharset("-"+s)),this._parser.registerEscHandler({intermediates:".",final:s},()=>this.selectCharset("."+s)),this._parser.registerEscHandler({intermediates:"/",final:s},()=>this.selectCharset("/"+s));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(e=>(this._logService.error("Parsing error: ",e),e)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler((e,t)=>this.requestStatusString(e,t)))}_preserveStack(e,t,i,r){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=r}_logSlowResolvingAsync(e){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([e,new Promise((e,t)=>setTimeout(()=>t("#SLOW_TIMEOUT"),5e3))]).catch(e=>{if("#SLOW_TIMEOUT"!==e)throw e})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,r=this._activeBuffer.x,n=this._activeBuffer.y,s=0;const o=this._parseStack.paused;if(o){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;r=this._parseStack.cursorStartX,n=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>y&&(s=this._parseStack.position+y)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?` "${e}"`:` "${Array.prototype.map.call(e,e=>String.fromCharCode(e)).join("")}"`),"string"==typeof e?e.split("").map(e=>e.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(e.length,y))),o||this._dirtyRowTracker.clearRange(),e.length>y)for(let a=s;a<e.length;a+=y){const t=a+y<e.length?a+y:e.length,s="string"==typeof e?this._stringDecoder.decode(e.substring(a,t),this._parseBuffer):this._utf8Decoder.decode(e.subarray(a,t),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,s))return this._preserveStack(r,n,s,a),this._logSlowResolvingAsync(i),i}else if(!o){const t="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,t))return this._preserveStack(r,n,t,0),this._logSlowResolvingAsync(i),i}this._activeBuffer.x===r&&this._activeBuffer.y===n||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(e,t,i){let r,n;const s=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,d=this._curAttrData;let f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&2===f.getWidth(this._activeBuffer.x-1)&&f.setCellFromCodePoint(this._activeBuffer.x-1,0,1,d.fg,d.bg,d.extended);for(let p=t;p<i;++p){if(r=e[p],n=this._unicodeService.wcwidth(r),r<127&&s){const e=s[String.fromCharCode(r)];e&&(r=e.charCodeAt(0))}if(o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(r)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),n||!this._activeBuffer.x){if(this._activeBuffer.x+n-1>=a)if(l){for(;this._activeBuffer.x<a;)f.setCellFromCodePoint(this._activeBuffer.x++,0,1,d.fg,d.bg,d.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=a-1,2===n)continue;if(h&&(f.insertCells(this._activeBuffer.x,n,this._activeBuffer.getNullCell(d),d),2===f.getWidth(a-1)&&f.setCellFromCodePoint(a-1,u.NULL_CELL_CODE,u.NULL_CELL_WIDTH,d.fg,d.bg,d.extended)),f.setCellFromCodePoint(this._activeBuffer.x++,r,n,d.fg,d.bg,d.extended),n>0)for(;--n;)f.setCellFromCodePoint(this._activeBuffer.x++,0,0,d.fg,d.bg,d.extended)}else f.getWidth(this._activeBuffer.x-1)?f.addCodepointToCell(this._activeBuffer.x-1,r):f.addCodepointToCell(this._activeBuffer.x-2,r)}i-t>0&&(f.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<a&&i-t>0&&0===f.getWidth(this._activeBuffer.x)&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodePoint(this._activeBuffer.x,0,1,d.fg,d.bg,d.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,e=>!x(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new _.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new m.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===e?void 0:e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,r=!1,n=!1){const s=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);s.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),n),r&&(s.isWrapped=!1)}_resetBufferLine(e,t=!1){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){let i;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y,r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-r+1;for(;t--;)this._activeBuffer.lines.splice(n-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y;let r;for(r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-r;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);e.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){if(!this._parser.precedingCodepoint)return!0;const t=e.params[0]||1,i=new Uint32Array(t);for(let r=0;r<t;++r)i[r]=this._parser.precedingCodepoint;return this.print(i,0,i.length),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(s.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(s.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(s.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(s.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(s.C0.ESC+"[>83;40003;0c")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const i=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:n}=this._coreMouseService,o=this._coreService,{buffers:a,cols:l}=this._bufferService,{active:c,alt:h}=a,d=this._optionsService.rawOptions,u=e=>e?1:2,f=e.params[0];return p=f,g=t?2===f?4:4===f?u(o.modes.insertMode):12===f?3:20===f?u(d.convertEol):0:1===f?u(i.applicationCursorKeys):3===f?d.windowOptions.setWinLines?80===l?2:132===l?1:0:0:6===f?u(i.origin):7===f?u(i.wraparound):8===f?3:9===f?u("X10"===r):12===f?u(d.cursorBlink):25===f?u(!o.isCursorHidden):45===f?u(i.reverseWraparound):66===f?u(i.applicationKeypad):67===f?4:1e3===f?u("VT200"===r):1002===f?u("DRAG"===r):1003===f?u("ANY"===r):1004===f?u(i.sendFocus):1005===f?4:1006===f?u("SGR"===n):1015===f?4:1016===f?u("SGR_PIXELS"===n):1048===f?1:47===f||1047===f||1049===f?u(c===h):2004===f?u(i.bracketedPasteMode):0,o.triggerDataEvent(`${s.C0.ESC}[${t?"":"?"}${p};${g}$y`),!0;var p,g}_updateAttrColor(e,t,i,r,n){return 2===t?(e|=50331648,e&=-16777216,e|=p.AttributeData.fromColorRGB([i,r,n])):5===t&&(e&=-50331904,e|=33554432|255&i),e}_extractColor(e,t,i){const r=[0,0,-1,0,0,0];let n=0,s=0;do{if(r[s+n]=e.params[t+s],e.hasSubParams(t+s)){const i=e.getSubParams(t+s);let o=0;do{5===r[1]&&(n=1),r[s+o+1+n]=i[o]}while(++o<i.length&&o+s+1+n<r.length);break}if(5===r[1]&&s+n>=2||2===r[1]&&s+n>=5)break;r[1]&&(n=1)}while(++s+t<e.length&&s+n<r.length);for(let o=2;o<r.length;++o)-1===r[o]&&(r[o]=0);switch(r[0]){case 38:i.fg=this._updateAttrColor(i.fg,r[1],r[3],r[4],r[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,r[1],r[3],r[4],r[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,r[1],r[3],r[4],r[5])}return s}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=h.DEFAULT_ATTR_DATA.fg,e.bg=h.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let i;const r=this._curAttrData;for(let n=0;n<t;n++)i=e.params[n],i>=30&&i<=37?(r.fg&=-50331904,r.fg|=16777216|i-30):i>=40&&i<=47?(r.bg&=-50331904,r.bg|=16777216|i-40):i>=90&&i<=97?(r.fg&=-50331904,r.fg|=16777224|i-90):i>=100&&i<=107?(r.bg&=-50331904,r.bg|=16777224|i-100):0===i?this._processSGR0(r):1===i?r.fg|=134217728:3===i?r.bg|=67108864:4===i?(r.fg|=268435456,this._processUnderline(e.hasSubParams(n)?e.getSubParams(n)[0]:1,r)):5===i?r.fg|=536870912:7===i?r.fg|=67108864:8===i?r.fg|=1073741824:9===i?r.fg|=2147483648:2===i?r.bg|=134217728:21===i?this._processUnderline(2,r):22===i?(r.fg&=-134217729,r.bg&=-134217729):23===i?r.bg&=-67108865:24===i?(r.fg&=-268435457,this._processUnderline(0,r)):25===i?r.fg&=-536870913:27===i?r.fg&=-67108865:28===i?r.fg&=-1073741825:29===i?r.fg&=2147483647:39===i?(r.fg&=-67108864,r.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):49===i?(r.bg&=-67108864,r.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?n+=this._extractColor(e,n,r):53===i?r.bg|=1073741824:55===i?r.bg&=-1073741825:59===i?(r.extended=r.extended.clone(),r.extended.underlineColor=-1,r.updateExtended()):100===i?(r.fg&=-67108864,r.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,r.bg&=-67108864,r.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${s.C0.ESC}[0n`);break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${s.C0.ESC}[${e};${t}R`)}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${s.C0.ESC}[?${e};${t}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const i=t%2==1;return this._optionsService.options.cursorBlink=i,!0}setScrollRegion(e){const t=e.params[0]||1;let i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||0===i)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!x(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(S.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(S.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${s.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],i=e.split(";");for(;i.length>1;){const e=i.shift(),r=i.shift();if(/^\d+$/.exec(e)){const i=parseInt(e);if(L(i))if("?"===r)t.push({type:0,index:i});else{const e=(0,v.parseColor)(r);e&&t.push({type:1,index:i,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(";");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const i=e.split(":");let r;const n=i.findIndex(e=>e.startsWith("id="));return-1!==n&&(r=i[n].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:r,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const i=e.split(";");for(let r=0;r<i.length&&!(t>=this._specialColors.length);++r,++t)if("?"===i[r])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const e=(0,v.parseColor)(i[r]);e&&this._onColor.fire([{type:1,index:this._specialColors[t],color:e}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],i=e.split(";");for(let r=0;r<i.length;++r)if(/^\d+$/.exec(i[r])){const e=parseInt(i[r]);L(e)&&t.push({type:2,index:e})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(b[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new f.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const i=this._activeBuffer.ybase+this._activeBuffer.y+t,r=this._activeBuffer.lines.get(i);r&&(r.fill(e),r.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const i=this._bufferService.buffer,r=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent(`${s.C0.ESC}${e}${s.C0.ESC}\\`),!0))('"q'===e?`P1$r${this._curAttrData.isProtected()?1:0}"q`:'"p'===e?'P1$r61;1"p':"r"===e?`P1$r${i.scrollTop+1};${i.scrollBottom+1}r`:"m"===e?"P1$r0m":" q"===e?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=k;let E=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(C=e,e=t,t=C),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(e){return 0<=e&&e<256}E=r([n(0,g.IBufferService)],E)},844:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},1505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,r,n,s){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(r,n,s)}get(e,t,i,r){var n;return null===(n=this._data.get(e,t))||void 0===n?void 0:n.get(i,r)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;const i=t.isNode?"node":navigator.userAgent,r=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},6106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;let i=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(i=this._search(this._getKey(e)),this._array.splice(i,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(i=this._search(t),-1===i)return!1;if(this._getKey(this._array[i])!==t)return!1;do{if(this._array[i]===e)return this._array.splice(i,1),!0}while(++i<this._array.length&&this._getKey(this._array[i])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{yield this._array[i]}while(++i<this._array.length&&this._getKey(this._array[i])===e)}forEachByKey(e,t){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{t(this._array[i])}while(++i<this._array.length&&this._getKey(this._array[i])===e)}values(){return[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let r=t+i>>1;const n=this._getKey(this._array[r]);if(n>e)i=r-1;else{if(!(n<e)){for(;r>0&&this._getKey(this._array[r-1])===e;)r--;return r}t=r+1}}return t}}},7226:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const r=i(6114);class n{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,r=e.timeRemaining(),n=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),n=e.timeRemaining(),1.5*i>n)return void this._start();r=n}this.clear()}}class s extends n{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=s,t.IdleTaskQueue=!r.isNode&&"requestIdleCallback"in window?class extends n{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:s,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;const r=i(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),i=null==t?void 0:t.get(e.cols-1),n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);n&&i&&(n.isWrapped=i[r.CHAR_DATA_CODE_INDEX]!==r.NULL_CELL_CODE&&i[r.CHAR_DATA_CODE_INDEX]!==r.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new r}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return!(50331648&~this.fg)}isBgRGB(){return!(50331648&~this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return!(50331648&this.fg)}isBgDefault(){return!(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&~this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=i;class r{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new r(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=r},9092:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const r=i(6349),n=i(7226),s=i(3734),o=i(8437),a=i(4634),l=i(511),c=i(643),h=i(4863),d=i(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=l.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new n.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new r.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new s.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new s.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const i=e+this._optionsService.rawOptions.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new r.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let r=0;const n=this._getCorrectBufferLength(t);if(n>this.lines.maxLength&&(this.lines.maxLength=n),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)r+=+this.lines.get(t).resize(e,i);let s=0;if(this._rows<t)for(let r=this._rows;r<t;r++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+s+1?(this.ybase--,s++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,i)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(n<this.lines.maxLength){const e=this.lines.length-n;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=n}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),s&&(this.y+=s),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let s=0;s<this.lines.length;s++)r+=+this.lines.get(s).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),r>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&"conpty"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const i=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(i.length>0){const r=(0,a.reflowLargerCreateNewLayout)(this.lines,i);(0,a.reflowLargerApplyNewLayout)(this.lines,r.layout),this._reflowLargerAdjustViewport(e,t,r.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){const r=this.getNullCell(o.DEFAULT_ATTR_DATA);let n=i;for(;n-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,r))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA),r=[];let n=0;for(let s=this.lines.length-1;s>=0;s--){let l=this.lines.get(s);if(!l||!l.isWrapped&&l.getTrimmedLength()<=e)continue;const c=[l];for(;l.isWrapped&&s>0;)l=this.lines.get(--s),c.unshift(l);const h=this.ybase+this.y;if(h>=s&&h<s+c.length)continue;const d=c[c.length-1].getTrimmedLength(),u=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),f=u.length-c.length;let p;p=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+f):Math.max(0,this.lines.length-this.lines.maxLength+f);const g=[];for(let e=0;e<f;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);g.push(e)}g.length>0&&(r.push({start:s+c.length+n,newLines:g}),n+=g.length),c.push(...g);let m=u.length-1,_=u[m];0===_&&(m--,_=u[m]);let v=c.length-f-1,b=d;for(;v>=0;){const e=Math.min(b,_);if(void 0===c[m])break;if(c[m].copyCellsFrom(c[v],b-e,_-e,e,!0),_-=e,0===_&&(m--,_=u[m]),b-=e,0===b){v--;const e=Math.max(v,0);b=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)u[t]<e&&c[t].setCell(u[t],i);let y=f-p;for(;y-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+n)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+f,this.ybase+t-1)}if(r.length>0){const e=[],t=[];for(let r=0;r<this.lines.length;r++)t.push(this.lines.get(r));const i=this.lines.length;let s=i-1,o=0,a=r[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+n);let l=0;for(let d=Math.min(this.lines.maxLength-1,i+n-1);d>=0;d--)if(a&&a.start>s+l){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(d--,a.newLines[e]);d++,e.push({index:s+1,amount:a.newLines.length}),l+=a.newLines.length,a=r[++o]}else this.lines.set(d,t[s--]);let c=0;for(let r=e.length-1;r>=0;r--)e[r].index+=c,this.lines.onInsertEmitter.fire(e[r]),c+=e[r].amount;const h=Math.max(0,i+n-this.lines.maxLength);h>0&&this.lines.onTrimEmitter.fire(h)}}translateBufferLineToString(e,t,i=0,r){const n=this.lines.get(e);return n?n.translateToString(t,i,r):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new h.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim(e=>{t.line-=e,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(e=>{t.line>=e.index&&(t.line+=e.amount)})),t.register(this.lines.onDelete(e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const r=i(3734),n=i(511),s=i(643),o=i(482);t.DEFAULT_ATTR_DATA=Object.freeze(new r.AttributeData);let a=0;class l{constructor(e,t,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const r=t||n.CellData.fromCharData([0,s.NULL_CELL_CHAR,s.NULL_CELL_WIDTH,s.NULL_CELL_CODE]);for(let n=0;n<e;++n)this.setCell(n,r);this.length=e}get(e){const t=this._data[3*e+0],i=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:i?(0,o.stringFromCodePoint)(i):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):i]}set(e,t){this._data[3*e+1]=t[s.CHAR_DATA_ATTR_INDEX],t[s.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[s.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[s.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodePoint(e,t,i,r,n,s){268435456&n&&(this._extendedAttrs[e]=s),this._data[3*e+0]=t|i<<22,this._data[3*e+1]=r,this._data[3*e+2]=n}addCodepointToCell(e,t){let i=this._data[3*e+0];2097152&i?this._combined[e]+=(0,o.stringFromCodePoint)(t):(2097151&i?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&i)+(0,o.stringFromCodePoint)(t),i&=-2097152,i|=2097152):i=t|1<<22,this._data[3*e+0]=i)}insertCells(e,t,i,s){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs),t<this.length-e){const r=new n.CellData;for(let i=this.length-e-t-1;i>=0;--i)this.setCell(e+t+i,this.loadCell(e+i,r));for(let n=0;n<t;++n)this.setCell(e+n,i)}else for(let r=e;r<this.length;++r)this.setCell(r,i);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs)}deleteCells(e,t,i,s){if(e%=this.length,t<this.length-e){const r=new n.CellData;for(let i=0;i<this.length-e-t;++i)this.setCell(e+i,this.loadCell(e+t+i,r));for(let e=this.length-t;e<this.length;++e)this.setCell(e,i)}else for(let r=e;r<this.length;++r)this.setCell(r,i);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs)}replaceCells(e,t,i,n,s=!1){if(s)for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodePoint(t,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,i),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,i)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const e=new Uint32Array(i);e.set(this._data),this._data=e}for(let i=this.length;i<e;++i)this.setCell(i,t)}else{this._data=this._data.subarray(0,i);const t=Object.keys(this._combined);for(let i=0;i<t.length;i++){const r=parseInt(t[i],10);r>=e&&delete this._combined[r]}const r=Object.keys(this._extendedAttrs);for(let i=0;i<r.length;i++){const t=parseInt(r[i],10);t>=e&&delete this._extendedAttrs[t]}}return this.length=e,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,t=!1){if(t)for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new l(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,i,r,n){const s=e._data;if(n)for(let a=r-1;a>=0;a--){for(let e=0;e<3;e++)this._data[3*(i+a)+e]=s[3*(t+a)+e];268435456&s[3*(t+a)+2]&&(this._extendedAttrs[i+a]=e._extendedAttrs[t+a])}else for(let a=0;a<r;a++){for(let e=0;e<3;e++)this._data[3*(i+a)+e]=s[3*(t+a)+e];268435456&s[3*(t+a)+2]&&(this._extendedAttrs[i+a]=e._extendedAttrs[t+a])}const o=Object.keys(e._combined);for(let a=0;a<o.length;a++){const r=parseInt(o[a],10);r>=t&&(this._combined[r-t+i]=e._combined[r])}}translateToString(e=!1,t=0,i=this.length){e&&(i=Math.min(i,this.getTrimmedLength()));let r="";for(;t<i;){const e=this._data[3*t+0],i=2097151&e;r+=2097152&e?this._combined[t]:i?(0,o.stringFromCodePoint)(i):s.WHITESPACE_CELL_CHAR,t+=e>>22||1}return r}}t.BufferLine=l},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function i(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();const r=!e[t].hasContent(i-1)&&1===e[t].getWidth(i-1),n=2===e[t+1].getWidth(0);return r&&n?i-1:i}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,r,n,s){const o=[];for(let a=0;a<e.length-1;a++){let l=a,c=e.get(++l);if(!c.isWrapped)continue;const h=[e.get(a)];for(;l<e.length&&c.isWrapped;)h.push(c),c=e.get(++l);if(n>=a&&n<l){a+=h.length-1;continue}let d=0,u=i(h,d,t),f=1,p=0;for(;f<h.length;){const e=i(h,f,t),n=e-p,o=r-u,a=Math.min(n,o);h[d].copyCellsFrom(h[f],p,u,a,!1),u+=a,u===r&&(d++,u=0),p+=a,p===e&&(f++,p=0),0===u&&0!==d&&2===h[d-1].getWidth(r-1)&&(h[d].copyCellsFrom(h[d-1],r-1,u++,1,!1),h[d-1].setCell(r-1,s))}h[d].replaceCells(u,r,s);let g=0;for(let e=h.length-1;e>0&&(e>d||0===h[e].getTrimmedLength());e--)g++;g>0&&(o.push(a+h.length-g),o.push(g)),a+=h.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const i=[];let r=0,n=t[r],s=0;for(let o=0;o<e.length;o++)if(n===o){const i=t[++r];e.onDeleteEmitter.fire({index:o-s,amount:i}),o+=i-1,s+=i,n=t[++r]}else i.push(o);return{layout:i,countRemoved:s}},t.reflowLargerApplyNewLayout=function(e,t){const i=[];for(let r=0;r<t.length;r++)i.push(e.get(t[r]));for(let r=0;r<i.length;r++)e.set(r,i[r]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,r){const n=[],s=e.map((r,n)=>i(e,n,t)).reduce((e,t)=>e+t);let o=0,a=0,l=0;for(;l<s;){if(s-l<r){n.push(s-l);break}o+=r;const c=i(e,a,t);o>c&&(o-=c,a++);const h=2===e[a].getWidth(o-1);h&&o--;const d=h?r-1:r;n.push(d),l+=d}return n},t.getWrappedLineTrimmedLength=i},5295:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;const r=i(8460),n=i(844),s=i(9092);class o extends n.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new r.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new s.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new s.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const r=i(482),n=i(643),s=i(3734);class o extends s.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new s.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,r.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[n.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[n.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[n.CHAR_DATA_CHAR_INDEX].length){const i=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const r=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|e[n.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[n.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[n.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[n.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;const r=i(8460),n=i(844);class s{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=s._nextId++,this._onDispose=this.register(new r.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,n.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=s,s._nextId=1},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},t.CHARSETS.A={"#":""},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},t.CHARSETS.C=t.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.E=t.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},t.CHARSETS.H=t.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(e,t)=>{var i,r,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,(s=i||(t.C0=i={})).NUL="\0",s.SOH="",s.STX="",s.ETX="",s.EOT="",s.ENQ="",s.ACK="",s.BEL="",s.BS="\b",s.HT="\t",s.LF="\n",s.VT="\v",s.FF="\f",s.CR="\r",s.SO="",s.SI="",s.DLE="",s.DC1="",s.DC2="",s.DC3="",s.DC4="",s.NAK="",s.SYN="",s.ETB="",s.CAN="",s.EM="",s.SUB="",s.ESC="",s.FS="",s.GS="",s.RS="",s.US="",s.SP=" ",s.DEL="",function(e){e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""}(r||(t.C1=r={})),function(e){e.ST=`${i.ESC}\\`}(n||(t.C1_ESCAPED=n={}))},7399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;const r=i(2584),n={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,i,s){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?o.key=t?r.C0.ESC+"OA":r.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?o.key=t?r.C0.ESC+"OD":r.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?o.key=t?r.C0.ESC+"OC":r.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(o.key=t?r.C0.ESC+"OB":r.C0.ESC+"[B");break;case 8:if(e.altKey){o.key=r.C0.ESC+r.C0.DEL;break}o.key=r.C0.DEL;break;case 9:if(e.shiftKey){o.key=r.C0.ESC+"[Z";break}o.key=r.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?r.C0.ESC+r.C0.CR:r.C0.CR,o.cancel=!0;break;case 27:o.key=r.C0.ESC,e.altKey&&(o.key=r.C0.ESC+r.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"D",o.key===r.C0.ESC+"[1;3D"&&(o.key=r.C0.ESC+(i?"b":"[1;5D"))):o.key=t?r.C0.ESC+"OD":r.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"C",o.key===r.C0.ESC+"[1;3C"&&(o.key=r.C0.ESC+(i?"f":"[1;5C"))):o.key=t?r.C0.ESC+"OC":r.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"A",i||o.key!==r.C0.ESC+"[1;3A"||(o.key=r.C0.ESC+"[1;5A")):o.key=t?r.C0.ESC+"OA":r.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"B",i||o.key!==r.C0.ESC+"[1;3B"||(o.key=r.C0.ESC+"[1;5B")):o.key=t?r.C0.ESC+"OB":r.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(o.key=r.C0.ESC+"[2~");break;case 46:o.key=a?r.C0.ESC+"[3;"+(a+1)+"~":r.C0.ESC+"[3~";break;case 36:o.key=a?r.C0.ESC+"[1;"+(a+1)+"H":t?r.C0.ESC+"OH":r.C0.ESC+"[H";break;case 35:o.key=a?r.C0.ESC+"[1;"+(a+1)+"F":t?r.C0.ESC+"OF":r.C0.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=r.C0.ESC+"[5;"+(a+1)+"~":o.key=r.C0.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=r.C0.ESC+"[6;"+(a+1)+"~":o.key=r.C0.ESC+"[6~";break;case 112:o.key=a?r.C0.ESC+"[1;"+(a+1)+"P":r.C0.ESC+"OP";break;case 113:o.key=a?r.C0.ESC+"[1;"+(a+1)+"Q":r.C0.ESC+"OQ";break;case 114:o.key=a?r.C0.ESC+"[1;"+(a+1)+"R":r.C0.ESC+"OR";break;case 115:o.key=a?r.C0.ESC+"[1;"+(a+1)+"S":r.C0.ESC+"OS";break;case 116:o.key=a?r.C0.ESC+"[15;"+(a+1)+"~":r.C0.ESC+"[15~";break;case 117:o.key=a?r.C0.ESC+"[17;"+(a+1)+"~":r.C0.ESC+"[17~";break;case 118:o.key=a?r.C0.ESC+"[18;"+(a+1)+"~":r.C0.ESC+"[18~";break;case 119:o.key=a?r.C0.ESC+"[19;"+(a+1)+"~":r.C0.ESC+"[19~";break;case 120:o.key=a?r.C0.ESC+"[20;"+(a+1)+"~":r.C0.ESC+"[20~";break;case 121:o.key=a?r.C0.ESC+"[21;"+(a+1)+"~":r.C0.ESC+"[21~";break;case 122:o.key=a?r.C0.ESC+"[23;"+(a+1)+"~":r.C0.ESC+"[23~";break;case 123:o.key=a?r.C0.ESC+"[24;"+(a+1)+"~":r.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!s||!e.altKey||e.metaKey)!i||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(o.key=r.C0.US),"@"===e.key&&(o.key=r.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=n[e.keyCode],i=null==t?void 0:t[e.shiftKey?1:0];if(i)o.key=r.C0.ESC+i;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let i=String.fromCharCode(t);e.shiftKey&&(i=i.toUpperCase()),o.key=r.C0.ESC+i}else if(32===e.keyCode)o.key=r.C0.ESC+(e.ctrlKey?r.C0.NUL:" ");else if("Dead"===e.key&&e.code.startsWith("Key")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=r.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=r.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=r.C0.DEL:219===e.keyCode?o.key=r.C0.ESC:220===e.keyCode?o.key=r.C0.FS:221===e.keyCode&&(o.key=r.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let r="";for(let n=t;n<i;++n){let t=e[n];t>65535?(t-=65536,r+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):r+=String.fromCharCode(t)}return r},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let r=0,n=0;if(this._interim){const i=e.charCodeAt(n++);56320<=i&&i<=57343?t[r++]=1024*(this._interim-55296)+i-56320+65536:(t[r++]=this._interim,t[r++]=i),this._interim=0}for(let s=n;s<i;++s){const n=e.charCodeAt(s);if(55296<=n&&n<=56319){if(++s>=i)return this._interim=n,r;const o=e.charCodeAt(s);56320<=o&&o<=57343?t[r++]=1024*(n-55296)+o-56320+65536:(t[r++]=n,t[r++]=o)}else 65279!==n&&(t[r++]=n)}return r}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let r,n,s,o,a=0,l=0,c=0;if(this.interim[0]){let r=!1,n=this.interim[0];n&=192==(224&n)?31:224==(240&n)?15:7;let s,o=0;for(;(s=63&this.interim[++o])&&o<4;)n<<=6,n|=s;const l=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=l-o;for(;c<h;){if(c>=i)return 0;if(s=e[c++],128!=(192&s)){c--,r=!0;break}this.interim[o++]=s,n<<=6,n|=63&s}r||(2===l?n<128?c--:t[a++]=n:3===l?n<2048||n>=55296&&n<=57343||65279===n||(t[a++]=n):n<65536||n>1114111||(t[a++]=n)),this.interim.fill(0)}const h=i-4;let d=c;for(;d<i;){for(;!(!(d<h)||128&(r=e[d])||128&(n=e[d+1])||128&(s=e[d+2])||128&(o=e[d+3]));)t[a++]=r,t[a++]=n,t[a++]=s,t[a++]=o,d+=4;if(r=e[d++],r<128)t[a++]=r;else if(192==(224&r)){if(d>=i)return this.interim[0]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(l=(31&r)<<6|63&n,l<128){d--;continue}t[a++]=l}else if(224==(240&r)){if(d>=i)return this.interim[0]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=n,a;if(s=e[d++],128!=(192&s)){d--;continue}if(l=(15&r)<<12|(63&n)<<6|63&s,l<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&r)){if(d>=i)return this.interim[0]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=n,a;if(s=e[d++],128!=(192&s)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=n,this.interim[2]=s,a;if(o=e[d++],128!=(192&o)){d--;continue}if(l=(7&r)<<18|(63&n)<<12|(63&s)<<6|63&o,l<65536||l>1114111)continue;t[a++]=l}}return a}}},225:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;const i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],r=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let n;t.UnicodeV6=class{constructor(){if(this.version="6",!n){n=new Uint8Array(65536),n.fill(1),n[0]=0,n.fill(0,1,32),n.fill(0,127,160),n.fill(2,4352,4448),n[9001]=2,n[9002]=2,n.fill(2,11904,42192),n[12351]=1,n.fill(2,44032,55204),n.fill(2,63744,64256),n.fill(2,65040,65050),n.fill(2,65072,65136),n.fill(2,65280,65377),n.fill(2,65504,65511);for(let e=0;e<i.length;++e)n.fill(0,i[e][0],i[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?n[e]:function(e,t){let i,r=0,n=t.length-1;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=r;)if(i=r+n>>1,e>t[i][1])r=i+1;else{if(!(e<t[i][0]))return!0;n=i-1}return!1}(e,r)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}}},5981:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;const r=i(8460),n=i(844);class s extends n.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){const i=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],r=this._action(e,t);if(r){const e=e=>Date.now()-i>=12?setTimeout(()=>this._innerWrite(0,e)):this._innerWrite(i,e);return void r.catch(e=>(queueMicrotask(()=>{throw e}),Promise.resolve(!1))).then(e)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=s},5941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;const i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,r=/^[\da-f]+$/;function n(e,t){const i=e.toString(16),r=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return r;case 12:return(r+r).slice(0,3);default:return r+r}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);const e=i.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),r.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,i=[0,0,0];for(let r=0;r<3;++r){const n=parseInt(t.slice(e*r,e*r+e),16);i[r]=1===e?n<<4:2===e?n:3===e?n>>4:n>>8}return i}},t.toRgbString=function(e,t=16){const[i,r,s]=e;return`rgb:${n(i,t)}/${n(r,t)}/${n(s,t)}`}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const r=i(482),n=i(8742),s=i(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].hook(t);else this._handlerFb(this._ident,"HOOK",t)}put(e,t,i){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(e,t,i);else this._handlerFb(this._ident,"PUT",(0,r.utf32ToString)(e,t,i))}unhook(e,t=!0){if(this._active.length){let i=!1,r=this._active.length-1,n=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,i=t,n=this._stack.fallThrough,this._stack.paused=!1),!n&&!1===i){for(;r>=0&&(i=this._active[r].unhook(e),!0!==i);r--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,i;r--}for(;r>=0;r--)if(i=this._active[r].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",e);this._active=o,this._ident=0}};const a=new n.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data="",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,r.utf32ToString)(e,t,i),this._data.length>s.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(e=>(this._params=a,this._data="",this._hitLimit=!1,e));return this._params=a,this._data="",this._hitLimit=!1,t}}},2015:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const r=i(844),n=i(8742),s=i(6242),o=i(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,r){this.table[t<<8|e]=i<<4|r}addMany(e,t,i,r){for(let n=0;n<e.length;n++)this.table[t<<8|e[n]]=i<<4|r}}t.TransitionTable=a;const l=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map((e,t)=>t),i=(e,i)=>t.slice(e,i),r=i(32,127),n=i(0,24);n.push(25),n.push.apply(n,i(28,32));const s=i(0,14);let o;for(o in e.setDefault(1,0),e.addMany(r,0,2,0),s)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(n,0,3,0),e.addMany(n,1,3,1),e.add(127,1,0,1),e.addMany(n,8,0,8),e.addMany(n,3,3,3),e.add(127,3,0,3),e.addMany(n,4,3,4),e.add(127,4,0,4),e.addMany(n,6,3,6),e.addMany(n,5,3,5),e.add(127,5,0,5),e.addMany(n,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(r,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(r,7,0,7),e.addMany(n,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(n,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(n,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(n,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(n,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(n,13,13,13),e.addMany(r,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(l,0,2,0),e.add(l,8,5,8),e.add(l,6,0,6),e.add(l,11,0,11),e.add(l,13,13,13),e}();class c extends r.Disposable{constructor(e=t.VT500_TRANSITION_TABLE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new n.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(e,t,i)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,r.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new s.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let t=0;t<e.intermediates.length;++t){const r=e.intermediates.charCodeAt(t);if(32>r||r>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=r}}if(1!==e.final.length)throw new Error("final must be a single byte");const r=e.final.charCodeAt(0);if(t[0]>r||r>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=r,i}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const i=this._identifier(e,[48,126]);void 0===this._escHandlers[i]&&(this._escHandlers[i]=[]);const r=this._escHandlers[i];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const i=this._identifier(e);void 0===this._csiHandlers[i]&&(this._csiHandlers[i]=[]);const r=this._csiHandlers[i];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,r,n){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=r,this._parseStack.chunkPos=n}parse(e,t,i){let r,n=0,s=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===i||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const t=this._parseStack.handlers;let s=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===i&&s>-1)for(;s>=0&&(r=t[s](this._params),!0!==r);s--)if(r instanceof Promise)return this._parseStack.handlerPos=s,r;this._parseStack.handlers=[];break;case 4:if(!1===i&&s>-1)for(;s>=0&&(r=t[s](),!0!==r);s--)if(r instanceof Promise)return this._parseStack.handlerPos=s,r;this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],r=this._dcsParser.unhook(24!==n&&26!==n,i),r)return r;27===n&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],r=this._oscParser.end(24!==n&&26!==n,i),r)return r;27===n&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let a=o;a<t;++a){switch(n=e[a],s=this._transitions.table[this.currentState<<8|(n<160?n:l)],s>>4){case 2:for(let r=a+1;;++r){if(r>=t||(n=e[r])<32||n>126&&n<l){this._printHandler(e,a,r),a=r-1;break}if(++r>=t||(n=e[r])<32||n>126&&n<l){this._printHandler(e,a,r),a=r-1;break}if(++r>=t||(n=e[r])<32||n>126&&n<l){this._printHandler(e,a,r),a=r-1;break}if(++r>=t||(n=e[r])<32||n>126&&n<l){this._printHandler(e,a,r),a=r-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:a,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const i=this._csiHandlers[this._collect<<8|n];let o=i?i.length-1:-1;for(;o>=0&&(r=i[o](this._params),!0!==r);o--)if(r instanceof Promise)return this._preserveStack(3,i,o,s,a),r;o<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingCodepoint=0;break;case 8:do{switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}}while(++a<t&&(n=e[a])>47&&n<60);a--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:const c=this._escHandlers[this._collect<<8|n];let h=c?c.length-1:-1;for(;h>=0&&(r=c[h](),!0!==r);h--)if(r instanceof Promise)return this._preserveStack(4,c,h,s,a),r;h<0&&this._escHandlerFb(this._collect<<8|n),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(let r=a+1;;++r)if(r>=t||24===(n=e[r])||26===n||27===n||n>127&&n<l){this._dcsParser.put(e,a,r),a=r-1;break}break;case 14:if(r=this._dcsParser.unhook(24!==n&&26!==n),r)return this._preserveStack(6,[],0,s,a),r;27===n&&(s|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let r=a+1;;r++)if(r>=t||(n=e[r])<32||n>127&&n<l){this._oscParser.put(e,a,r),a=r-1;break}break;case 6:if(r=this._oscParser.end(24!==n&&26!==n),r)return this._preserveStack(5,[],0,s,a),r;27===n&&(s|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&s}}}t.EscapeSequenceParser=c},6242:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;const r=i(5770),n=i(482),s=[];t.OscParser=class{constructor(){this._state=0,this._active=s,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=s}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=s,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||s,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")}_put(e,t,i){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(e,t,i);else this._handlerFb(this._id,"PUT",(0,n.utf32ToString)(e,t,i))}start(){this.reset(),this._state=1}put(e,t,i){if(3!==this._state){if(1===this._state)for(;t<i;){const i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let i=!1,r=this._active.length-1,n=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,i=t,n=this._stack.fallThrough,this._stack.paused=!1),!n&&!1===i){for(;r>=0&&(i=this._active[r].end(e),!0!==i);r--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,i;r--}for(;r>=0;r--)if(i=this._active[r].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,i}else this._handlerFb(this._id,"END",e);this._active=s,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,n.utf32ToString)(e,t,i),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(e=>(this._data="",this._hitLimit=!1,e));return this._data="",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;const i=2147483647;class r{static fromArray(e){const t=new r;if(!e.length)return t;for(let i=Array.isArray(e[0])?1:0;i<e.length;++i){const r=e[i];if(Array.isArray(r))for(let e=0;e<r.length;++e)t.addSubParam(r[e]);else t.addParam(r)}return t}constructor(e=32,t=32){if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new r(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const i=this._subParamsIdx[t]>>8,r=255&this._subParamsIdx[t];r-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>i?i:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>i?i:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,i=255&this._subParamsIdx[e];return i-t>0?this._subParams.subarray(t,i):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const i=this._subParamsIdx[t]>>8,r=255&this._subParamsIdx[t];r-i>0&&(e[t]=this._subParams.slice(i,r))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const r=this._digitIsSub?this._subParams:this.params,n=r[t-1];r[t-1]=~n?Math.min(10*n+e,i):e}}t.Params=r},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;const r=i(3785),n=i(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new r.BufferLineApiView(t)}getNullCell(){return new n.CellData}}},3785:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;const r=i(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new r.CellData)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}}},8285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;const r=i(8771),n=i(8460),s=i(844);class o extends s.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new n.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new r.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new r.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,e=>t(e.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(e,i)=>t(e,i.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const s=i(8460),o=i(844),a=i(5295),l=i(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new s.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){const i=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=i.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;const n=i.ybase+i.scrollTop,s=i.ybase+i.scrollBottom;if(0===i.scrollTop){const e=i.lines.isFull;s===i.lines.length-1?e?i.lines.recycle().copyFrom(r):i.lines.push(r.clone()):i.lines.splice(s+1,0,r.clone()),e?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const e=s-n+1;i.lines.shiftElements(n+1,e-1,-1),i.lines.set(s,r.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t,i){const r=this.buffer;if(e<0){if(0===r.ydisp)return;this.isUserScrolling=!0}else e+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const n=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+e,r.ybase),0),n!==r.ydisp&&(t||this._onScroll.fire(r.ydisp))}};t.BufferService=c=r([n(0,l.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;const s=i(2585),o=i(8460),a=i(844),l={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(i|=64,i|=e.action):(i|=3&e.button,4&e.button&&(i|=64),8&e.button&&(i|=128),32===e.action?i|=32:0!==e.action||t||(i|=3)),i}const h=String.fromCharCode,d={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`[M${h(t[0])}${h(t[1])}${h(t[2])}`},SGR:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.x};${e.y}${t}`}};let u=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const i of Object.keys(l))this.addProtocol(i,l[i]);for(const i of Object.keys(d))this.addEncoding(i,d[i]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,"SGR_PIXELS"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=u=r([n(0,s.IBufferService),n(1,s.ICoreService)],u)},6975:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;const s=i(1439),o=i(8460),a=i(844),l=i(2585),c=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=t.CoreService=class extends a.Disposable{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,s.clone)(c),this.decPrivateModes=(0,s.clone)(h)}reset(){this.modes=(0,s.clone)(c),this.decPrivateModes=(0,s.clone)(h)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(e=>e.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(e))}};t.CoreService=d=r([n(0,l.IBufferService),n(1,l.ILogService),n(2,l.IOptionsService)],d)},9074:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;const r=i(8055),n=i(8460),s=i(844),o=i(6106);let a=0,l=0;class c extends s.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList(e=>null==e?void 0:e.marker.line),this._onDecorationRegistered=this.register(new n.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new n.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,s.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new h(e);if(t){const e=t.marker.onDispose(()=>t.dispose());t.onDispose(()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())}),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){var r,n,s;let o=0,a=0;for(const l of this._decorations.getKeyIterator(t))o=null!==(r=l.options.x)&&void 0!==r?r:0,a=o+(null!==(n=l.options.width)&&void 0!==n?n:1),e>=o&&e<a&&(!i||(null!==(s=l.options.layer)&&void 0!==s?s:"bottom")===i)&&(yield l)}forEachDecorationAtCell(e,t,i,r){this._decorations.forEachByKey(t,t=>{var n,s,o;a=null!==(n=t.options.x)&&void 0!==n?n:0,l=a+(null!==(s=t.options.width)&&void 0!==s?s:1),e>=a&&e<l&&(!i||(null!==(o=t.options.layer)&&void 0!==o?o:"bottom")===i)&&r(t)})}}t.DecorationService=c;class h extends s.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=r.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=r.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new n.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new n.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const r=i(2585),n=i(8343);class s{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(const[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=s,t.InstantiationService=class{constructor(){this._services=new s,this._services.set(r.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){const i=(0,n.getServiceDependencies)(e).sort((e,t)=>e.index-t.index),r=[];for(const n of i){const t=this._services.get(n.id);if(!t)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${n.id}.`);r.push(t)}const s=i.length>0?i[0].index:t.length;if(t.length!==s)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);return new e(...[...t,...r])}}},7866:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const s=i(844),o=i(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let l,c=t.LogService=class extends s.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),l=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...i)}trace(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.TRACE&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.trace.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}debug(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.debug.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}info(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.INFO&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.info.bind(this._optionsService.options.logger))&&void 0!==r?r:console.info,e,t)}warn(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.WARN&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.warn.bind(this._optionsService.options.logger))&&void 0!==r?r:console.warn,e,t)}error(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.ERROR&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.error.bind(this._optionsService.options.logger))&&void 0!==r?r:console.error,e,t)}};t.LogService=c=r([n(0,o.IOptionsService)],c),t.setTraceLogger=function(e){l=e},t.traceCall=function(e,t,i){if("function"!=typeof i.value)throw new Error("not supported");const r=i.value;i.value=function(...e){if(l.logLevel!==o.LogLevelEnum.TRACE)return r.apply(this,e);l.trace(`GlyphRenderer#${r.name}(${e.map(e=>JSON.stringify(e)).join(", ")})`);const t=r.apply(this,e);return l.trace(`GlyphRenderer#${r.name} return`,t),t}}},7302:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const r=i(8460),n=i(844),s=i(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:s.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const o=["normal","bold","100","200","300","400","500","600","700","800","900"];class a extends n.Disposable{constructor(e){super(),this._onOptionChange=this.register(new r.EventEmitter),this.onOptionChange=this._onOptionChange.event;const i=Object.assign({},t.DEFAULT_OPTIONS);for(const t in e)if(t in i)try{const r=e[t];i[t]=this._sanitizeAndValidateOption(t,r)}catch(n){}this.rawOptions=i,this.options=Object.assign({},i),this._setupOptions()}onSpecificOptionChange(e,t){return this.onOptionChange(i=>{i===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(i=>{-1!==e.indexOf(i)&&t()})}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);return this.rawOptions[e]},i=(e,i)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);i=this._sanitizeAndValidateOption(e,i),this.rawOptions[e]!==i&&(this.rawOptions[e]=i,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const r={get:e.bind(this,t),set:i.bind(this,t)};Object.defineProperty(this.options,t,r)}}_sanitizeAndValidateOption(e,i){switch(e){case"cursorStyle":if(i||(i=t.DEFAULT_OPTIONS[e]),!function(e){return"block"===e||"underline"===e||"bar"===e}(i))throw new Error(`"${i}" is not a valid value for ${e}`);break;case"wordSeparator":i||(i=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof i&&1<=i&&i<=1e3)break;i=o.includes(i)?i:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case"scrollback":if((i=Math.min(i,4294967295))<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&0!==i)throw new Error(`${e} must be numeric, value: ${i}`);break;case"windowsPty":i=null!=i?i:{}}return i}}t.OptionsService=a},2660:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkService=void 0;const s=i(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const i=t.addMarker(t.ybase+t.y),r={data:e,id:this._nextId++,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(r,i)),this._dataByLinkId.set(r.id,r),r.id}const i=e,r=this._getEntryIdKey(i),n=this._entriesWithId.get(r);if(n)return this.addLineToLink(n.id,t.ybase+t.y),n.id;const s=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[s]};return s.onDispose(()=>this._removeMarkerFromLink(o,s)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const i=this._dataByLinkId.get(e);if(i&&i.lines.every(e=>e.line!==t)){const e=this._bufferService.buffer.addMarker(t);i.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(i,e))}}getLinkData(e){var t;return null===(t=this._dataByLinkId.get(e))||void 0===t?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){const i=e.lines.indexOf(t);-1!==i&&(e.lines.splice(i,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=r([n(0,s.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i="di$target",r="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[r]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const n=function(e,t,s){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");var o,a,l;o=n,l=s,(a=e)[i]===a?a[r].push({id:o,index:l}):(a[r]=[{id:o,index:l}],a[i]=a)};return n.toString=()=>e,t.serviceRegistry.set(e,n),n}},2585:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const r=i(8343);var n,s;t.IBufferService=(0,r.createDecorator)("BufferService"),t.ICoreMouseService=(0,r.createDecorator)("CoreMouseService"),t.ICoreService=(0,r.createDecorator)("CoreService"),t.ICharsetService=(0,r.createDecorator)("CharsetService"),t.IInstantiationService=(0,r.createDecorator)("InstantiationService"),(s=n||(t.LogLevelEnum=n={}))[s.TRACE=0]="TRACE",s[s.DEBUG=1]="DEBUG",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.OFF=5]="OFF",t.ILogService=(0,r.createDecorator)("LogService"),t.IOptionsService=(0,r.createDecorator)("OptionsService"),t.IOscLinkService=(0,r.createDecorator)("OscLinkService"),t.IUnicodeService=(0,r.createDecorator)("UnicodeService"),t.IDecorationService=(0,r.createDecorator)("DecorationService")},1480:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;const r=i(8460),n=i(225);t.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new r.EventEmitter,this.onChange=this._onChange.event;const e=new n.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0;const i=e.length;for(let r=0;r<i;++r){let n=e.charCodeAt(r);if(55296<=n&&n<=56319){if(++r>=i)return t+this.wcwidth(n);const s=e.charCodeAt(r);56320<=s&&s<=57343?n=1024*(n-55296)+s-56320+65536:t+=this.wcwidth(s)}t+=this.wcwidth(n)}return t}}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,i),s.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;const t=i(9042),n=i(3236),s=i(844),o=i(5741),a=i(8285),l=i(7975),c=i(7090),h=["cols","rows"];class d extends s.Disposable{constructor(e){super(),this._core=this.register(new n.Terminal(e)),this._addonManager=this.register(new o.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=e=>this._core.options[e],i=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const r in this._core.options){const e={get:t.bind(this,r),set:i.bind(this,r)};Object.defineProperty(this._publicOptions,r,e)}}_checkReadonlyOptions(e){if(h.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){var t,i,r;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(i=e.width)&&void 0!==i?i:0,null!==(r=e.height)&&void 0!==r?r:0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write("\r\n",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(...e){for(const t of e)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(const t of e)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}e.Terminal=d})(),r})()),fo={exports:{}};var po,go,mo,_o=ho?fo.exports:(ho=1,self,fo.exports=(po=go={},Object.defineProperty(po,"__esModule",{value:!0}),po.FitAddon=void 0,po.FitAddon=class{activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const i=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(r.getPropertyValue("height")),s=Math.max(0,parseInt(r.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),a=n-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),l=s-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-i;return{cols:Math.max(2,Math.floor(l/t.css.cell.width)),rows:Math.max(1,Math.floor(a/t.css.cell.height))}}},go)),vo={exports:{}};var bo,yo=(mo||(mo=1,bo=vo,function(e,t){bo.exports=t()}(self,()=>(()=>{var e={6:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkComputer=t.WebLinkProvider=void 0,t.WebLinkProvider=class{constructor(e,t,i,r={}){this._terminal=e,this._regex=t,this._handler=i,this._options=r}provideLinks(e,t){const r=i.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map(e=>(e.leave=this._options.leave,e.hover=(t,i)=>{if(this._options.hover){const{range:r}=e;this._options.hover(t,i,r)}},e))}};class i{static computeLink(e,t,r,n){const s=new RegExp(t.source,(t.flags||"")+"g"),[o,a]=i._getWindowedLineStrings(e-1,r),l=o.join("");let c;const h=[];for(;c=s.exec(l);){const e=c[0];try{const t=new URL(e),i=decodeURI(t.toString());if(e!==i&&e+"/"!==i)continue}catch(d){continue}const[t,s]=i._mapStrIdx(r,a,0,c.index),[o,l]=i._mapStrIdx(r,t,s,e.length);if(-1===t||-1===s||-1===o||-1===l)continue;const u={start:{x:s+1,y:t+1},end:{x:l,y:o+1}};h.push({range:u,text:e,activate:n})}return h}static _getWindowedLineStrings(e,t){let i,r=e,n=e,s=0,o="";const a=[];if(i=t.buffer.active.getLine(e)){const e=i.translateToString(!0);if(i.isWrapped&&" "!==e[0]){for(s=0;(i=t.buffer.active.getLine(--r))&&s<2048&&(o=i.translateToString(!0),s+=o.length,a.push(o),i.isWrapped&&-1===o.indexOf(" ")););a.reverse()}for(a.push(e),s=0;(i=t.buffer.active.getLine(++n))&&i.isWrapped&&s<2048&&(o=i.translateToString(!0),s+=o.length,a.push(o),-1===o.indexOf(" ")););}return[a,r]}static _mapStrIdx(e,t,i,r){const n=e.buffer.active,s=n.getNullCell();let o=i;for(;r;){const e=n.getLine(t);if(!e)return[-1,-1];for(let i=o;i<e.length;++i){e.getCell(i,s);const o=s.getChars();if(s.getWidth()&&(r-=o.length||1,i===e.length-1&&""===o)){const e=n.getLine(t+1);e&&e.isWrapped&&(e.getCell(0,s),2===s.getWidth()&&(r+=1))}if(r<0)return[t,i]}t++,o=0}return[t,o]}}t.LinkComputer=i}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.WebLinksAddon=void 0;const t=i(6),n=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function s(e,t){const i=window.open();if(i){try{i.opener=null}catch(r){}i.location.href=t}}e.WebLinksAddon=class{constructor(e=s,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;const i=this._options,r=i.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new t.WebLinkProvider(this._terminal,r,this._handler,i))}dispose(){var e;null===(e=this._linkProvider)||void 0===e||e.dispose()}}})(),r})())),vo.exports);const xo=({serverId:e,nodeId:t,name:n,isOpen:s,onClose:o,onToggle:a,onMaximizeChange:l})=>{const c=i.useRef(null),[h,u]=i.useState(null),[g,_]=i.useState(null),[v,b]=i.useState(null),[y,S]=i.useState(!1),[w,C]=i.useState(null),[k,E]=i.useState(!1),[L,D]=i.useState(!1),[M,A]=i.useState(!1),[R,P]=i.useState(!1),[j,O]=i.useState("all"),[N,Q]=i.useState(null),[J,Z]=i.useState("bottom"),ee=i.useRef(null),te=i.useRef(null),ie=i.useRef(null),re=i.useRef(null),ne=i.useRef(null),se=i.useRef(""),oe=i.useRef(0),ae=i.useRef(""),le=i.useRef({}),ce={system:[{name:"System Info",icon:I,command:"systeminfo\r",platform:"windows"},{name:"System Info",icon:I,command:"uname -a && lsb_release -a\r",platform:"unix"},{name:"Disk Usage",icon:F,command:"Get-Volume | Format-Table -AutoSize\r",platform:"windows"},{name:"Disk Usage",icon:F,command:"df -h\r",platform:"unix"},{name:"Memory Usage",icon:z,command:"Get-ComputerInfo | Select-Object CsTotalPhysicalMemory,CsFreePhysicalMemory\r",platform:"windows"},{name:"Memory Usage",icon:z,command:"free -h\r",platform:"unix"}],network:[{name:"Network Config",icon:H,command:"ipconfig /all\r",platform:"windows"},{name:"Network Config",icon:H,command:"ip addr show\r",platform:"unix"},{name:"Test Connectivity",icon:B,command:"Test-NetConnection google.com\r",platform:"windows"},{name:"Test Connectivity",icon:B,command:"ping -c 4 google.com\r",platform:"unix"},{name:"Open Ports",icon:m,command:"netstat -ano | findstr LISTENING\r",platform:"windows"},{name:"Open Ports",icon:m,command:"ss -tulpn\r",platform:"unix"}],processes:[{name:"Top Processes",icon:W,command:"Get-Process | Sort-Object CPU -Descending | Select-Object -First 10\r",platform:"windows"},{name:"Top Processes",icon:W,command:"ps aux --sort=-%cpu | head -11\r",platform:"unix"},{name:"Services Status",icon:d,command:'Get-Service | Where-Object {$_.Status -eq "Running"} | Select-Object -First 10\r',platform:"windows"},{name:"Services Status",icon:d,command:"systemctl list-units --type=service --state=running | head -10\r",platform:"unix"}],databases:{mysql:[{name:"Install MySQL",icon:T,command:'Write-Host "Downloading MySQL installer..." ; Invoke-WebRequest -Uri "https://dev.mysql.com/get/Downloads/MySQLInstaller/mysql-installer-community-8.0.39.0.msi" -OutFile "$env:TEMP\\mysql-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\mysql-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install MySQL",icon:T,command:"sudo apt-get update && sudo apt-get install mysql-server -y\r",platform:"unix"},{name:"MySQL Status",icon:z,command:"Get-Service MySQL*\r",platform:"windows"},{name:"MySQL Status",icon:z,command:"sudo systemctl status mysql\r",platform:"unix"}],postgresql:[{name:"Install PostgreSQL",icon:T,command:'Write-Host "Downloading PostgreSQL installer..." ; Invoke-WebRequest -Uri "https://get.enterprisedb.com/postgresql/postgresql-16.1-1-windows-x64.exe" -OutFile "$env:TEMP\\postgresql-installer.exe" ; Start-Process "$env:TEMP\\postgresql-installer.exe" -ArgumentList "--mode unattended" -Wait\r',platform:"windows"},{name:"Install PostgreSQL",icon:T,command:"sudo apt-get update && sudo apt-get install postgresql postgresql-contrib -y\r",platform:"unix"},{name:"PostgreSQL Status",icon:z,command:"Get-Service PostgreSQL*\r",platform:"windows"},{name:"PostgreSQL Status",icon:z,command:"sudo systemctl status postgresql\r",platform:"unix"}],mongodb:[{name:"Install MongoDB",icon:T,command:'Write-Host "Downloading MongoDB installer..." ; Invoke-WebRequest -Uri "https://fastdl.mongodb.org/windows/mongodb-windows-x86_64-7.0.4-signed.msi" -OutFile "$env:TEMP\\mongodb-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\mongodb-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install MongoDB",icon:T,command:"sudo apt-get update && sudo apt-get install mongodb -y\r",platform:"unix"},{name:"MongoDB Status",icon:z,command:"Get-Service MongoDB*\r",platform:"windows"},{name:"MongoDB Status",icon:z,command:"sudo systemctl status mongodb\r",platform:"unix"}],redis:[{name:"Install Redis",icon:T,command:'Write-Host "Downloading Redis for Windows..." ; Invoke-WebRequest -Uri "https://github.com/microsoftarchive/redis/releases/download/win-3.2.100/Redis-x64-3.2.100.msi" -OutFile "$env:TEMP\\redis-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\redis-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install Redis",icon:T,command:"sudo apt-get update && sudo apt-get install redis-server -y\r",platform:"unix"},{name:"Redis Status",icon:z,command:"Get-Service Redis*\r",platform:"windows"},{name:"Redis Status",icon:z,command:"sudo systemctl status redis\r",platform:"unix"}]},webservers:{apache:[{name:"Install Apache",icon:B,command:"sudo apt-get update && sudo apt-get install apache2 -y\r",platform:"unix"},{name:"Apache Status",icon:z,command:"sudo systemctl status apache2\r",platform:"unix"},{name:"Restart Apache",icon:x,command:"sudo systemctl restart apache2\r",platform:"unix"}],nginx:[{name:"Install Nginx",icon:B,command:'Write-Host "Downloading Nginx..." ; Invoke-WebRequest -Uri "http://nginx.org/download/nginx-1.24.0.zip" -OutFile "$env:TEMP\\nginx.zip" ; Expand-Archive -Path "$env:TEMP\\nginx.zip" -DestinationPath "C:\\nginx" -Force ; Write-Host "Nginx installed to C:\\nginx"\r',platform:"windows"},{name:"Install Nginx",icon:B,command:"sudo apt-get update && sudo apt-get install nginx -y\r",platform:"unix"},{name:"Nginx Status",icon:z,command:"Get-Process nginx -ErrorAction SilentlyContinue\r",platform:"windows"},{name:"Nginx Status",icon:z,command:"sudo systemctl status nginx\r",platform:"unix"},{name:"Restart Nginx",icon:x,command:"sudo systemctl restart nginx\r",platform:"unix"}],iis:[{name:"Install IIS",icon:B,command:"Install-WindowsFeature -name Web-Server -IncludeManagementTools\r",platform:"windows"},{name:"IIS Status",icon:z,command:"Get-Service W3SVC\r",platform:"windows"},{name:"Restart IIS",icon:x,command:"iisreset\r",platform:"windows"}]},devtools:{nodejs:[{name:"Install Node.js",icon:$,command:'Write-Host "Downloading Node.js installer..." ; Invoke-WebRequest -Uri "https://nodejs.org/dist/v20.10.0/node-v20.10.0-x64.msi" -OutFile "$env:TEMP\\nodejs-installer.msi" ; Start-Process msiexec.exe -ArgumentList "/i", "$env:TEMP\\nodejs-installer.msi", "/quiet" -Wait\r',platform:"windows"},{name:"Install Node.js",icon:$,command:"curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash - && sudo apt-get install -y nodejs\r",platform:"unix"},{name:"Node Version",icon:$,command:"node --version ; npm --version\r",platform:"windows"},{name:"Node Version",icon:$,command:"node --version && npm --version\r",platform:"unix"}],python:[{name:"Install Python",icon:$,command:'Write-Host "Downloading Python installer..." ; Invoke-WebRequest -Uri "https://www.python.org/ftp/python/3.12.0/python-3.12.0-amd64.exe" -OutFile "$env:TEMP\\python-installer.exe" ; Start-Process "$env:TEMP\\python-installer.exe" -ArgumentList "/quiet", "InstallAllUsers=1", "PrependPath=1" -Wait\r',platform:"windows"},{name:"Install Python",icon:$,command:"sudo apt-get update && sudo apt-get install python3 python3-pip -y\r",platform:"unix"},{name:"Python Version",icon:$,command:"python --version\r",platform:"windows"},{name:"Python Version",icon:$,command:"python3 --version\r",platform:"unix"}],git:[{name:"Install Git",icon:f,command:'Write-Host "Downloading Git installer..." ; Invoke-WebRequest -Uri "https://github.com/git-for-windows/git/releases/download/v2.43.0.windows.1/Git-2.43.0-64-bit.exe" -OutFile "$env:TEMP\\git-installer.exe" ; Start-Process "$env:TEMP\\git-installer.exe" -ArgumentList "/VERYSILENT", "/NORESTART" -Wait\r',platform:"windows"},{name:"Install Git",icon:f,command:"sudo apt-get update && sudo apt-get install git -y\r",platform:"unix"},{name:"Git Version",icon:$,command:"git --version\r",platform:"windows"},{name:"Git Version",icon:$,command:"git --version\r",platform:"unix"}],docker:[{name:"Install Docker",icon:W,command:'Write-Host "Downloading Docker Desktop..." ; Invoke-WebRequest -Uri "https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe" -OutFile "$env:TEMP\\docker-installer.exe" ; Start-Process "$env:TEMP\\docker-installer.exe" -ArgumentList "install", "--quiet" -Wait\r',platform:"windows"},{name:"Install Docker",icon:W,command:"curl -fsSL https://get.docker.com | sudo sh\r",platform:"unix"},{name:"Docker Version",icon:$,command:"docker --version\r",platform:"windows"},{name:"Docker Version",icon:$,command:"docker --version\r",platform:"unix"}]},security:[{name:"Windows Update",icon:f,command:"Get-WindowsUpdate\r",platform:"windows"},{name:"System Update",icon:f,command:"sudo apt-get update && sudo apt-get upgrade -y\r",platform:"unix"},{name:"Check Firewall",icon:m,command:"Get-NetFirewallProfile\r",platform:"windows"},{name:"Check Firewall",icon:m,command:"sudo ufw status\r",platform:"unix"}]};ce.system,ce.network,ce.processes,Object.values(ce.databases).flat(),Object.values(ce.webservers).flat(),Object.values(ce.devtools).flat(),ce.security;const he=[{value:"all",label:"All Scripts",icon:X},{value:"system",label:"System Info",icon:I},{value:"network",label:"Network",icon:H},{value:"processes",label:"Processes",icon:W},{value:"databases",label:"Install Database",icon:T,hasNested:!0},{value:"webservers",label:"Install Web Server",icon:B,hasNested:!0},{value:"devtools",label:"Install Dev Tools",icon:$,hasNested:!0},{value:"security",label:"Security",icon:m}],[de,ue]=i.useState("windows");i.useEffect(()=>{const e=e=>{ee.current&&!ee.current.contains(e.target)&&re.current&&!re.current.contains(e.target)&&A(!1),te.current&&!te.current.contains(e.target)&&ie.current&&!ie.current.contains(e.target)&&P(!1),ne.current&&!ne.current.contains(e.target)&&Q(null)};return document.addEventListener("mousedown",e),()=>{if(document.removeEventListener("mousedown",e),window&&window.chrome&&window.chrome.runtime&&window.chrome.runtime.onMessage)try{window.chrome.runtime.onMessage.removeListener(e)}catch(go){}}},[]),i.useEffect(()=>{if(N&&ne.current){const e=ne.current,t=e.querySelector(".nested-trigger"),i=e.querySelector(".nested-dropdown");if(t&&i){const e=t.getBoundingClientRect();i.style.top=`${e.bottom+4}px`,i.style.left=`${e.left}px`,i.style.minWidth=`${e.width}px`}}},[N]),i.useEffect(()=>{if(R&&ie.current&&te.current){const e=te.current.getBoundingClientRect(),t=ie.current;t.style.top=`${e.bottom+4}px`,t.style.left=`${e.left}px`,t.style.minWidth=`${e.width}px`}},[R]),i.useEffect(()=>{if(M&&re.current&&ee.current){const e=ee.current.getBoundingClientRect(),t=re.current;t.style.top=`${e.bottom+4}px`,t.style.left=`${e.left}px`,t.style.minWidth=`${e.width}px`}},[M]);const fe=(e,t)=>{e&&t&&requestAnimationFrame(()=>{const i=t.getBoundingClientRect();e.style.top=`${i.bottom+4}px`,e.style.left=`${i.left}px`,e.style.minWidth=`${i.width}px`})};i.useEffect(()=>{if(!s||!c.current)return;const e=new uo.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Consolas, "Courier New", monospace',fastScrollModifier:"shift",scrollback:1e3,rendererType:"canvas",convertEol:!0,theme:{background:"#1a1a1a",foreground:"#ffffff",cursor:"#ffffff",cursorAccent:"#000000",selection:"rgba(255, 255, 255, 0.3)",black:"#000000",red:"#ef4444",green:"#10b981",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#ffffff",brightBlack:"#6b7280",brightRed:"#f87171",brightGreen:"#34d399",brightYellow:"#fbbf24",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#f9fafb"}}),t=new _o.FitAddon,i=new yo.WebLinksAddon;let r;e.loadAddon(t),e.loadAddon(i),e.open(c.current),requestAnimationFrame(()=>{t.fit()}),u(e),_(t);const n=()=>{clearTimeout(r),r=setTimeout(()=>{t&&t.fit()},150)};return window.addEventListener("resize",n),pe(e),()=>{window.removeEventListener("resize",n),clearTimeout(r),v&&v.close(),e.dispose()}},[s,e,t]),i.useEffect(()=>{g&&s&&requestAnimationFrame(()=>{g.fit(),h&&h.scrollToBottom()})},[k,L,g,s,h]);const pe=(i,r)=>{const n="https:"===window.location.protocol?"wss:":"ws:";let s;if(t)s=`${n}//${window.location.host}/alterion/panel/terminal/node/${t}/`;else{if(!e)return void i.writeln("[31mError: No server or node ID provided[0m");s=`${n}//${window.location.host}/alterion/panel/terminal/server/${e}/`}const o=new WebSocket(s);let a;o.onopen=()=>{S(!0),C(null),i.writeln("[32mConnected to server...[0m"),o.send(JSON.stringify({type:"resize",cols:i.cols,rows:i.rows}))},o.onmessage=e=>{const t=JSON.parse(e.data);if("output"===t.type){let e=t.data;if(ae.current){const t=ae.current.trim();if(e.includes(t)){const i=e.indexOf(t);-1!==i&&(e=e.substring(i+t.length))}e.trim().length>0&&(ae.current="")}e.length>0&&(i.write(e),i.scrollToBottom())}else"error"===t.type?(i.writeln(`\r\n[31mError: ${t.message}[0m\r\n`),i.scrollToBottom(),C(t.message)):"connected"===t.type&&(i.writeln(`\r\n${t.message}\r\n`),i.scrollToBottom())},o.onerror=e=>{C("Connection error"),i.writeln("\r\n[31mConnection error[0m\r\n")},o.onclose=()=>{S(!1),i.writeln("\r\n[33mConnection closed[0m\r\n"),c.current&&c.current.classList.add("terminal-disconnected")},i.onData(e=>{if(o.readyState===WebSocket.OPEN)if("\r"===e||"\n"===e)i.write("\r\n"),se.current.trim()&&o.send(JSON.stringify({type:"input",data:se.current+"\n"})),se.current="",oe.current=0;else if(""===e||"\b"===e||"\b"===e){if(se.current.length>0&&oe.current>0){const e=se.current,t=oe.current;se.current=e.slice(0,t-1)+e.slice(t),oe.current=t-1,i.write("\b \b")}}else if("[D"===e)oe.current>0&&(oe.current--,i.write(e));else if("[C"===e)oe.current<se.current.length&&(oe.current++,i.write(e));else if(""===e)i.write("^C\r\n"),o.send(JSON.stringify({type:"input",data:""})),se.current="",oe.current=0;else if(1===e.length&&e>=" "&&e<="~"){const t=se.current,r=oe.current;se.current=t.slice(0,r)+e+t.slice(r),oe.current=r+1,i.write(e),i.scrollToBottom()}}),i.onResize(({cols:e,rows:t})=>{clearTimeout(a),a=setTimeout(()=>{o.readyState===WebSocket.OPEN&&o.send(JSON.stringify({type:"resize",cols:e,rows:t}))},100)}),b(o)},ge=()=>{h&&(c.current&&c.current.classList.remove("terminal-disconnected"),v&&v.close(),h.clear(),pe(h))},me=e=>{h&&y&&(h.writeln(`> ${e.replace(/\r$/,"")}`),v&&v.readyState===WebSocket.OPEN&&v.send(JSON.stringify({type:"input",data:e})),ae.current=e)};return s?r.jsxs("div",{className:"terminal-panel",children:[r.jsxs("div",{className:"terminal-header",children:[r.jsxs("div",{className:"terminal-title",children:[r.jsx(p,{size:18}),r.jsx("span",{children:n||(t?`Node ${t}`:`Server ${e}`)}),r.jsx("span",{className:"status-indicator "+(y?"connected":"disconnected")})]}),r.jsxs("div",{className:"terminal-actions",children:[!y&&r.jsx("button",{className:"terminal-action-btn reconnect-btn-header",onClick:ge,title:"Reconnect",children:r.jsx(x,{size:16})}),r.jsx("button",{className:"terminal-action-btn "+(L?"active":""),onClick:()=>D(!L),title:"Quick Scripts",children:r.jsx($,{size:16})}),r.jsx("button",{className:"terminal-action-btn",onClick:()=>{const e=!k;E(e),l&&l(e)},title:k?"Restore":"Maximize",children:k?r.jsx(U,{size:16}):r.jsx(V,{size:16})}),r.jsx("button",{className:"terminal-action-btn",onClick:o,title:"Close",children:r.jsx(q,{size:16})})]})]}),L&&r.jsxs("div",{className:"terminal-toolbar",children:[r.jsxs("div",{className:"toolbar-controls",children:[r.jsxs("div",{className:"platform-selector-container",ref:te,children:[r.jsxs("button",{className:"platform-selector-button",onClick:()=>P(e=>!e),children:[r.jsx(I,{size:16}),r.jsx("span",{children:"windows"===de?"Windows":"Unix/Linux"}),r.jsx(G,{size:16,className:"chevron-icon "+(R?"open":"")})]}),R&&K.createPortal(r.jsxs("div",{className:"platform-dropdown",ref:ie,children:[r.jsxs("button",{className:"platform-option "+("windows"===de?"active":""),onClick:()=>{ue("windows"),P(!1)},children:[r.jsx(I,{size:16}),r.jsx("span",{children:"Windows"})]}),r.jsxs("button",{className:"platform-option "+("unix"===de?"active":""),onClick:()=>{ue("unix"),P(!1)},children:[r.jsx(I,{size:16}),r.jsx("span",{children:"Unix/Linux"})]})]}),document.body)]}),r.jsxs("div",{className:"category-filter-container",ref:ee,children:[r.jsxs("button",{className:"category-filter-button",onClick:()=>A(e=>!e),children:[r.jsx(Y,{size:16}),r.jsx("span",{children:he.find(e=>e.value===j)?.label||"All Scripts"}),r.jsx(G,{size:16,className:"chevron-icon "+(M?"open":"")})]}),M&&K.createPortal(r.jsx("div",{className:"category-dropdown",ref:re,children:he.map(e=>{const t=e.icon;return r.jsxs("div",{className:"category-option "+(j===e.value?"active":""),onClick:()=>{O(e.value),A(!1)},children:[r.jsx(t,{size:16}),r.jsx("span",{children:e.label})]},e.value)})}),document.body)]})]}),r.jsxs("div",{className:"toolbar-scripts",children:[("all"===j||"system"===j)&&r.jsx("div",{className:"script-group",children:ce.system.filter(e=>e.platform===de).map((e,t)=>{const i=e.icon;return r.jsxs("button",{className:"script-btn",onClick:()=>me(e.command),disabled:!y,title:e.name,children:[r.jsx(i,{size:16}),r.jsx("span",{children:e.name})]},`system-${t}`)})}),("all"===j||"network"===j)&&r.jsx("div",{className:"script-group",children:ce.network.filter(e=>e.platform===de).map((e,t)=>{const i=e.icon;return r.jsxs("button",{className:"script-btn",onClick:()=>me(e.command),disabled:!y,title:e.name,children:[r.jsx(i,{size:16}),r.jsx("span",{children:e.name})]},`network-${t}`)})}),("all"===j||"processes"===j)&&r.jsx("div",{className:"script-group",children:ce.processes.filter(e=>e.platform===de).map((e,t)=>{const i=e.icon;return r.jsxs("button",{className:"script-btn",onClick:()=>me(e.command),disabled:!y,title:e.name,children:[r.jsx(i,{size:16}),r.jsx("span",{children:e.name})]},`processes-${t}`)})}),("all"===j||"security"===j)&&r.jsx("div",{className:"script-group",children:ce.security.filter(e=>e.platform===de).map((e,t)=>{const i=e.icon;return r.jsxs("button",{className:"script-btn",onClick:()=>me(e.command),disabled:!y,title:e.name,children:[r.jsx(i,{size:16}),r.jsx("span",{children:e.name})]},`security-${t}`)})}),("all"===j||"databases"===j)&&r.jsx("div",{className:"script-group",children:Object.entries(ce.databases).map(([e,t])=>r.jsxs("div",{className:"nested-dropdown-container",children:[r.jsxs("button",{ref:t=>le.current[`db-${e}`]=t,className:"script-btn nested-trigger",onClick:()=>Q(N===`db-${e}`?null:`db-${e}`),disabled:!y,children:[r.jsx(T,{size:16}),r.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),r.jsx(G,{size:14,className:"nested-chevron "+(N===`db-${e}`?"open":"")})]}),N===`db-${e}`&&K.createPortal(r.jsx("div",{className:"nested-dropdown",ref:t=>fe(t,le.current[`db-${e}`]),style:{position:"fixed",zIndex:10001},children:t.filter(e=>e.platform===de).map((t,i)=>{const n=t.icon;return r.jsxs("button",{className:"nested-option",onClick:()=>{me(t.command),Q(null)},disabled:!y,children:[r.jsx(n,{size:14}),r.jsx("span",{children:t.name})]},`${e}-${i}`)})}),document.body)]},`db-${e}`))}),("all"===j||"webservers"===j)&&r.jsx("div",{className:"script-group",children:Object.entries(ce.webservers).map(([e,t])=>{const i=t.filter(e=>e.platform===de);return 0===i.length?null:r.jsxs("div",{className:"nested-dropdown-container",children:[r.jsxs("button",{ref:t=>le.current[`web-${e}`]=t,className:"script-btn nested-trigger",onClick:()=>Q(N===`web-${e}`?null:`web-${e}`),disabled:!y,children:[r.jsx(B,{size:16}),r.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),r.jsx(G,{size:14,className:"nested-chevron "+(N===`web-${e}`?"open":"")})]}),N===`web-${e}`&&K.createPortal(r.jsx("div",{className:"nested-dropdown",ref:t=>fe(t,le.current[`web-${e}`]),style:{position:"fixed",zIndex:10001},children:i.map((t,i)=>{const n=t.icon;return r.jsxs("button",{className:"nested-option",onClick:()=>{me(t.command),Q(null)},disabled:!y,children:[r.jsx(n,{size:14}),r.jsx("span",{children:t.name})]},`${e}-${i}`)})}),document.body)]},`web-${e}`)})}),("all"===j||"devtools"===j)&&r.jsx("div",{className:"script-group",children:Object.entries(ce.devtools).map(([e,t])=>r.jsxs("div",{className:"nested-dropdown-container",children:[r.jsxs("button",{ref:t=>le.current[`tool-${e}`]=t,className:"script-btn nested-trigger",onClick:()=>Q(N===`tool-${e}`?null:`tool-${e}`),disabled:!y,children:[r.jsx($,{size:16}),r.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),r.jsx(G,{size:14,className:"nested-chevron "+(N===`tool-${e}`?"open":"")})]}),N===`tool-${e}`&&K.createPortal(r.jsx("div",{className:"nested-dropdown",ref:t=>fe(t,le.current[`tool-${e}`]),style:{position:"fixed",zIndex:10001},children:t.filter(e=>e.platform===de).map((t,i)=>{const n=t.icon;return r.jsxs("button",{className:"nested-option",onClick:()=>{me(t.command),Q(null)},disabled:!y,children:[r.jsx(n,{size:14}),r.jsx("span",{children:t.name})]},`${e}-${i}`)})}),document.body)]},`tool-${e}`))})]})]}),r.jsx("div",{ref:c,className:"terminal-body"}),!y&&r.jsx("div",{className:"terminal-reconnect-overlay",children:r.jsxs("button",{className:"reconnect-overlay-btn",onClick:ge,children:[r.jsx(x,{size:24}),r.jsx("span",{children:"Reconnect"})]})}),w&&r.jsx("div",{className:"terminal-error",children:r.jsx("span",{children:w})})]}):null},So=["/"];function wo({children:e}){const{auth:t,sessionChecked:n}=i.useContext(Q),s=J();return So.some(e=>s.pathname.startsWith(e))||n&&t&&t.token?e:r.jsx("div",{style:{textAlign:"center",marginTop:"5rem"},children:r.jsx("h1",{children:"404 Not Found"})})}const Co=({onClose:e,onSuccess:t})=>{const{customSettings:n}=i.useContext(le),s=ae(n,"background"),[o,a]=i.useState(1),[l,c]=i.useState(null),[h,d]=i.useState(null),[u,f]=i.useState([]),[p,g]=i.useState(null),[m,_]=i.useState(""),[v,b]=i.useState(""),[y,x]=i.useState(!1),[S,w]=i.useState(""),[C,k]=i.useState(!1),[E,L]=i.useState({host:"",port:"22",username:"",password:"",privateKey:""}),[D,M]=i.useState(""),[A,R]=i.useState(null),[T,P]=i.useState(null),[j,O]=i.useState(""),[B,F]=i.useState(0),[z,H]=i.useState(0),[W,$]=i.useState(""),[U,V]=i.useState("pending"),[K,G]=i.useState(!1),[Y,X]=i.useState(0),[Q,J]=i.useState(""),ie=i.useRef(0),re=i.useRef(null),ne=i.useRef(null),se=e=>{c(e),w(""),e?(a(2),x(!0),fetch("/api/alterion/panel/nodes/?status=pending").then(e=>e.json()).then(e=>{f(Array.isArray(e)?e:e.results||[]),x(!1)}).catch(()=>{f([]),x(!1)})):a(10)},oe=()=>{ne.current&&ne.current.close(),re.current&&re.current.close(),a(1),c(null),d(null),_(""),b(""),w(""),k(!1),e()},ce=(e=>{const t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16),n=Math.max(0,Math.floor(.7*t)),s=Math.max(0,Math.floor(.7*i)),o=Math.max(0,Math.floor(.7*r));return`#${n.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`})(n.backgroundColor1),he=!1===l?[{id:10,number:1,label:"SSH Details"},{id:12,number:2,label:"Install & Log"},{id:13,number:3,label:"Verification",loading:K},{id:14,number:4,label:"Complete"}]:[{id:1,number:1,label:"Node Agent"},{id:2,number:2,label:"Pending Node"},{id:3,number:3,label:"Registration"},{id:4,number:4,label:"Complete"}];return i.useEffect(()=>()=>{ne.current&&ne.current.close(),re.current&&re.current.close()},[]),r.jsxs("div",{className:"modal-overlay",onClick:oe,children:[r.jsxs("div",{className:"modal-content wizard-modal",onClick:e=>e.stopPropagation(),style:{background:"gradient"===n.backgroundType?`linear-gradient(135deg, ${n.backgroundColor1}ee, ${n.backgroundColor2}ee)`:`${n.backgroundColor1}ee`,color:s,maxWidth:"700px",borderRadius:`${n.borderRadius}px`,backdropFilter:`blur(${n.backdropBlur}px)`},children:[r.jsxs("div",{className:"modal-header",style:{marginBottom:"24px"},children:[r.jsxs("h2",{style:{color:s},children:[r.jsx(I,{size:24})," Add Node - Step ",o]}),r.jsx("button",{className:"modal-close",onClick:oe,style:{color:s},children:r.jsx(q,{size:24})})]}),r.jsx("div",{className:"step-tracker",children:he.map((e,t)=>r.jsxs(N.Fragment,{children:[r.jsxs("div",{className:"step-item",children:[r.jsx("div",{className:`step-circle ${o>=e.id?"active":""} ${o>e.id?"completed":""}`,style:{background:o>=e.id?ce:`${ce}80`,color:s,border:`2px solid ${o>=e.id?n.accentColor1:`${ce}80`}`},children:o>e.id?r.jsx(Z,{size:16}):e.number}),r.jsx("span",{className:"step-label",style:{color:o>=e.id?s:`${s}80`,fontWeight:o===e.id?"bold":"normal"},children:e.label})]}),t<he.length-1&&r.jsx("div",{className:"step-connector",style:{background:o>e.id?n.accentColor1:`${ce}80`}})]},e.id))}),S&&r.jsx("div",{className:"error-message",style:{padding:"12px",background:"#ff444460",borderRadius:"8px",marginBottom:"16px",color:s},children:S}),r.jsxs("div",{className:"step-content",children:[1===o&&r.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[r.jsx("h3",{style:{color:s,marginBottom:"16px"},children:"Is the node agent already installed on the target node?"}),r.jsxs("div",{style:{display:"flex",gap:16,marginTop:24,justifyContent:"center"},children:[r.jsx("button",{onClick:()=>se(!0),className:"installer-btn",children:"Yes"}),r.jsx("button",{onClick:()=>se(!1),className:"installer-btn",children:"No"})]})]}),2===o&&r.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[r.jsx("h3",{style:{color:s,marginBottom:"16px"},children:"Select a Pending Node"}),y?r.jsx(ee,{size:48,style:{color:n.accentColor1,animation:"spin 1s linear infinite",margin:"0 auto 24px"}}):0===u.length?r.jsx("p",{style:{color:`${s}80`},children:"No pending nodes found. Please ensure the node agent is running and attempting to connect."}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center",marginTop:16},children:[u.map(e=>r.jsxs("label",{style:{display:"flex",alignItems:"center",background:"#2226",borderRadius:8,padding:16,cursor:"pointer",border:p===e.id?`2px solid ${n.accentColor1}`:"2px solid transparent",width:400,maxWidth:"100%"},children:[r.jsx("input",{type:"radio",name:"pendingNode",value:e.id,checked:p===e.id,onChange:()=>g(e.id),style:{marginRight:16}}),r.jsxs("div",{style:{flex:1,textAlign:"left"},children:[r.jsx("div",{style:{fontWeight:600,color:s},children:e.name||e.hostname||e.ip_address}),r.jsx("div",{style:{fontSize:13,color:`${s}99`},children:e.ip_address}),r.jsxs("div",{style:{fontSize:12,color:`${s}66`},children:["Last seen: ",e.last_seen?new Date(e.last_seen).toLocaleString():"Never"]})]})]},e.id)),r.jsx("button",{className:"installer-btn",style:{marginTop:16},disabled:!p,onClick:()=>{const e=u.find(e=>e.id===p);d(e),_(e&&e.notes?e.notes:""),a(3)},children:"Continue"})]})]}),3===o&&h&&r.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[r.jsxs("h3",{style:{color:s,marginBottom:"16px"},children:["Node Found: ",h.name]}),r.jsxs("div",{className:"verification-method",style:{background:`${ce}40`,padding:"20px",borderRadius:"8px",marginBottom:"16px",border:`2px solid ${ce}`},children:[r.jsxs("h4",{style:{color:s,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[r.jsx(te,{size:20})," Registration Code"]}),r.jsx("div",{style:{background:`${ce}80`,padding:"12px",borderRadius:"6px",fontFamily:"monospace",fontSize:"16px",marginBottom:"8px",display:"inline-block",color:n.accentColor1},children:m}),r.jsx("p",{style:{color:`${s}80`,fontSize:"14px",marginTop:"8px"},children:"Enter this code on the node, or paste the code received from the node below:"}),r.jsx("input",{type:"text",value:v,onChange:e=>b(e.target.value),className:"installer-input",placeholder:"Enter registration code",style:{marginBottom:12,width:"100%",fontSize:"16px",padding:"10px"}}),r.jsx("button",{onClick:async()=>{x(!0),w("");try{const e=h?h.id:void 0;if(!e)return w("No node selected."),void x(!1);const i=`verify_${Date.now()}_${Math.floor(1e5*Math.random())}`,r=`wss://${window.location.host}/alterion/panel/agent/${encodeURIComponent(e.replace("node-",""))}/`,n=new WebSocket(r);ne.current=n;let s=!1;n.onopen=()=>{n.send(JSON.stringify({action:"verify_code",code:v,verification_id:i}))},n.onmessage=e=>{let r;try{r=JSON.parse(e.data)}catch{return}r.verification_id===i&&(r.verified?(a(4),k(!0),t&&t()):w(r.error||"Verification failed."),x(!1),s=!0,n.close())},n.onerror=()=>{s||(w("WebSocket error during verification."),x(!1))},n.onclose=()=>{s||(w("Connection closed without response."),x(!1))}}catch(e){w("Verification failed: "+(e.message||e)),x(!1)}},className:"installer-btn",disabled:y||!v,style:{marginTop:8},children:y?"Verifying...":"Verify Code"})]})]}),4===o&&C&&r.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[r.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:n.accentColor1,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:r.jsx(Z,{size:48,style:{color:ae(n,"accent")}})}),r.jsx("h3",{style:{color:s,marginBottom:"12px"},children:"Node Registered!"}),r.jsx("p",{style:{color:`${s}80`,marginBottom:"24px"},children:"The node has been successfully registered and is now available."}),r.jsx("button",{onClick:oe,className:"installer-btn",children:"Close"})]}),10===o&&r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(""),x(!0),$(""),V("pending"),X(0),J("Connecting...");const t=E.host,i=`wss://${window.location.host}/alterion/panel/ssh_onboard/${encodeURIComponent(t)}/`,r=new WebSocket(i);re.current=r;let n=!1;r.onopen=()=>{r.send(JSON.stringify({type:"ssh_onboard",port:E.port,username:E.username,private_key:E.privateKey||E.password}))},r.onmessage=async e=>{let t;try{t=JSON.parse(e.data)}catch{return void $(t=>t+e.data)}if("node_info"===t.status&&t.node){R(t.node);const e=t.node.id;if(e){const t=`wss://${window.location.host}/alterion/panel/agent/${encodeURIComponent(e.replace("node-",""))}/`,i=new window.WebSocket(t);P(i),i.onopen=()=>{i.send(JSON.stringify({action:"get_registration_code"}))},i.onmessage=e=>{let t;try{t=JSON.parse(e.data)}catch{return}t.code&&(M(t.code),i.close())},i.onerror=()=>i.close()}}t.code&&M(t.code);let i=ie.current;if("number"==typeof t.progress)i=Math.max(ie.current,Math.min(100,t.progress));else if("number"==typeof t.step&&"number"==typeof t.total){let e=Math.round(t.step/t.total*90);i=Math.max(ie.current,e)}else"installing"===t.status?i=Math.max(ie.current,Math.min(90,ie.current+2)):"done"===t.status&&(i=100);i>ie.current&&(ie.current=i,X(i)),"number"==typeof t.step&&"number"==typeof t.total&&(H(t.step),F(t.total)),"connected"!==t.status||n||(n=!0,V("installing"),J("SSH connection established. Installing..."),a(12),x(!1)),"connecting"===t.status&&J(t.step||"Connecting..."),"installing"===t.status&&(V("installing"),J(t.step||"Installing...")),void 0!==t.progress&&t.step&&J(t.step),t.log&&$(e=>e+t.log),"done"===t.status&&(V("done"),J(t.step||"Installation complete!"),ie.current=100,X(100),setTimeout(()=>{a(13)},1200)),t.error&&(V("failed"),J("Installation failed."),w(t.error),r.close())},r.onerror=()=>{V("failed"),w("WebSocket error during SSH onboarding."),x(!1)},r.onclose=()=>{re.current=null}},style:{maxWidth:420,margin:"0 auto",padding:24},children:[r.jsx("h3",{style:{color:s,marginBottom:16},children:"Enter SSH Connection Details"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Host"}),r.jsx("input",{type:"text",value:E.host,onChange:e=>L({...E,host:e.target.value}),required:!0,className:"installer-input",placeholder:"e.g. 192.168.1.100"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Port"}),r.jsx("input",{type:"number",value:E.port,onChange:e=>L({...E,port:e.target.value}),required:!0,className:"installer-input",placeholder:"22"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Username"}),r.jsx("input",{type:"text",value:E.username,onChange:e=>L({...E,username:e.target.value}),required:!0,className:"installer-input",placeholder:"e.g. root"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password (or leave blank to use private key)"}),r.jsx("input",{type:"password",value:E.password,onChange:e=>L({...E,password:e.target.value}),className:"installer-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Upload Private Key (.pem or .ppk)"}),r.jsx("input",{type:"file",accept:".pem,.ppk",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{L(t=>({...t,privateKey:e.target.result}))},e.readAsText(t)}}})]}),r.jsx("button",{type:"submit",className:"installer-btn",style:{marginTop:16},disabled:y,children:y?"Connecting...":"Continue"})]}),12===o&&r.jsxs("div",{style:{textAlign:"center",padding:"24px",maxHeight:480,overflow:"auto"},children:[r.jsx("h3",{style:{color:s,marginBottom:"16px"},children:"Installing Node Agent..."}),r.jsxs("div",{style:{margin:"24px auto",width:"80%",background:`${ce}40`,borderRadius:8,height:18,overflow:"hidden",position:"relative"},children:[r.jsx("div",{style:{width:`${Y}%`,height:"100%",background:n.accentColor1,transition:"width 0.5s"}}),B>0&&r.jsxs("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:s,fontWeight:600,fontSize:13},children:["Step ",z," / ",B]})]}),r.jsxs("div",{style:{margin:"12px auto 0",color:s,fontWeight:500,fontSize:15},children:["installing"===U&&(Q||"Connecting and starting install..."),"done"===U&&"Installation complete!","failed"===U&&"Installation failed."]}),r.jsx("div",{style:{margin:"24px auto 0",width:"90%",background:`${ce}40`,borderRadius:8,minHeight:120,maxHeight:220,overflowY:"auto",textAlign:"left",fontFamily:"monospace",fontSize:14,color:s,padding:12,whiteSpace:"pre-wrap",boxShadow:"0 2px 8px #0002"},children:W||("installing"===U?"Connecting and starting install...":"")}),"failed"===U&&r.jsx("button",{className:"installer-btn",style:{marginTop:24},onClick:()=>{V("pending"),X(0),J(""),$(""),F(0),H(0),M(""),O(""),w(""),x(!1),a(10)},children:"Retry"})]}),13===o&&r.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[r.jsxs("h3",{style:{color:s,marginBottom:"16px"},children:["Node Found: ",A?.hostname||E.host]}),r.jsxs("div",{className:"verification-method",style:{background:`${ce}40`,padding:"20px",borderRadius:"8px",marginBottom:"16px",border:`2px solid ${ce}`},children:[r.jsxs("h4",{style:{color:s,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[r.jsx(te,{size:20})," Registration Code"]}),A?.notes||D?r.jsx("div",{style:{background:`${ce}80`,padding:"12px",borderRadius:"6px",fontFamily:"monospace",fontSize:"16px",marginBottom:"8px",display:"inline-block",color:n.accentColor1},children:A?.notes||D}):r.jsxs("div",{style:{background:`${ce}80`,padding:"12px",borderRadius:"6px",marginBottom:"8px",display:"inline-flex",alignItems:"center",gap:"8px",color:`${s}80`},children:[r.jsx(ee,{size:16,className:"spinner",style:{color:n.accentColor1}}),"Loading registration code..."]}),r.jsx("p",{style:{color:`${s}80`,fontSize:"14px",marginTop:"8px"},children:"Enter this code on the node, or paste the code received from the node below:"}),r.jsx("input",{type:"text",value:j,onChange:e=>O(e.target.value),className:"installer-input",placeholder:"Enter registration code",style:{marginBottom:12,width:"100%",fontSize:"16px",padding:"10px"}}),r.jsx("button",{onClick:async()=>{x(!0),w("");try{const e=A?.id;if(!e)return w("No node ID available for verification."),void x(!1);const i=`verify_${Date.now()}_${Math.floor(1e5*Math.random())}`,r=`wss://${window.location.host}/alterion/panel/agent/${encodeURIComponent(e.replace("node-",""))}/`,n=new window.WebSocket(r);ne.current=n;let s=!1;n.onopen=()=>{n.send(JSON.stringify({action:"verify_code",code:j,verification_id:i}))},n.onmessage=e=>{let r;try{r=JSON.parse(e.data)}catch{return}r.verification_id===i&&(r.verified?(a(14),k(!0),t&&t()):w(r.error||"Verification failed."),x(!1),s=!0,n.close())},n.onerror=()=>{s||(w("WebSocket error during verification."),x(!1))},n.onclose=()=>{s||(w("Connection closed without response."),x(!1))}}catch(e){w("Verification failed: "+(e.message||e)),x(!1)}},className:"installer-btn",disabled:y||!j,style:{marginTop:8},children:y?"Verifying...":"Verify Code"})]})]}),14===o&&r.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[r.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:n.accentColor1,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:r.jsx(Z,{size:48,style:{color:ae(n,"accent")}})}),r.jsx("h3",{style:{color:s,marginBottom:"12px"},children:"Node Registered!"}),r.jsx("p",{style:{color:`${s}80`,marginBottom:"24px"},children:"The node has been successfully registered and is now available."}),r.jsx("button",{onClick:oe,className:"installer-btn",children:"Close"})]})]}),[3,99].includes(o)&&r.jsx("div",{className:"modal-actions",style:{display:"flex",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:`1px solid ${ce}`},children:r.jsx("button",{onClick:()=>{3===o?(a(1),c(null),d(null),_(""),b(""),w("")):99===o&&(a(1),c(null),w(""))},style:{background:`${ce}80`,color:s,padding:"12px 24px",borderRadius:"8px",border:"none",cursor:"pointer",opacity:1},children:"Back"})})]}),r.jsx("style",{jsx:!0,children:"\n        .wizard-modal {\n          padding: 32px;\n        }\n        .step-tracker {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-bottom: 32px;\n          position: relative;\n          padding: 0 20px;\n        }\n        .step-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: flex-start;\n          gap: 8px;\n          flex: 0 0 auto;\n          position: relative;\n          z-index: 2;\n        }\n        .step-circle {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: bold;\n          transition: all 0.3s ease;\n          box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);\n        }\n        .step-circle:hover {\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);\n        }\n        .step-circle.active {\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);\n        }\n        .step-circle.active:hover {\n          box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.5);\n        }\n        .step-circle.completed {\n          transform: scale(1.05);\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);\n        }\n        .step-circle.completed:hover {\n          box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.6);\n        }\n        .step-label {\n          font-size: 12px;\n          text-align: center;\n          max-width: 90px;\n          transition: all 0.3s ease;\n          white-space: nowrap;\n        }\n        .step-connector {\n          height: 2px;\n          width: 40px;\n          position: relative;\n          margin: 0 8px;\n          margin-bottom: 28px;\n          z-index: 1;\n          transition: all 0.3s ease;\n        }\n        .step-content {\n          min-height: 200px;\n        }\n        .spinner {\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      "})]})},ko=i.createContext(null);function Eo(){const[e,t]=i.useState(!0),[n,s]=i.useState(null),[o,a]=i.useState(!1),[l,c]=i.useState(!1);J();const{checkSession:h}=i.useContext(Q),d=Be(),[u,f]=i.useState({visible:!1,x:0,y:0,type:null,item:null});i.useEffect(()=>{fetch("/api/alterion/panel/initial-data/").then(e=>e.json()).then(e=>s(e)).catch(()=>s(null))},[]);const p=async e=>{const{type:t,item:i}=u;if("server"===t)switch(e){case"edit":break;case"delete":confirm(`Are you sure you want to delete server "${i.name}"?`)}else if("project"===t)switch(e){case"edit":break;case"delete":confirm(`Are you sure you want to delete project "${i.name}"?`)}f({visible:!1,x:0,y:0,type:null,item:null})};return i.useEffect(()=>{if(u.visible){const e=()=>{f({visible:!1,x:0,y:0,type:null,item:null})};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}},[u.visible]),r.jsx(ko.Provider,{value:n,children:r.jsx(ge,{children:r.jsx(me,{handleServerContextMenu:(e,t)=>{e.preventDefault(),e.stopPropagation(),f({visible:!0,x:e.clientX,y:e.clientY,type:"server",item:t})},handleProjectContextMenu:(e,t)=>{e.preventDefault(),e.stopPropagation(),f({visible:!0,x:e.clientX,y:e.clientY,type:"project",item:t})},children:r.jsxs(ne,{children:[r.jsx(se,{path:"/",element:r.jsx(oe,{})}),r.jsx(se,{path:"*",element:r.jsxs(wo,{children:[r.jsx(ze,{onMetricsToggle:()=>t(e=>!e)}),r.jsxs("div",{id:"app-root",className:"app-root",children:[r.jsx("div",{className:"sidebar-fixed",children:r.jsx(Ue,{})}),r.jsx("main",{className:"main-content"+(e?" metrics-collapsed":""),children:r.jsxs(ne,{children:[r.jsx(se,{path:"/dashboard",element:r.jsx(_e,{onAddNode:()=>c(!0)})}),r.jsx(se,{path:"/file-manager",element:r.jsx(ve,{})}),r.jsx(se,{path:"/databases",element:r.jsx(be,{})}),r.jsx(se,{path:"/load-balancer",element:r.jsx(ye,{})}),r.jsx(se,{path:"/security",element:r.jsx(xe,{})}),r.jsx(se,{path:"/secret-manager",element:r.jsx(We,{})}),r.jsx(se,{path:"/backups",element:r.jsx(Se,{})}),r.jsx(se,{path:"/domains",element:r.jsx(we,{})}),r.jsx(se,{path:"/terminal/:serverId",element:r.jsx($e,{})}),r.jsx(se,{path:"*",element:r.jsx("div",{style:{textAlign:"center",marginTop:"5rem"},children:r.jsx("h1",{children:"404 Not Found"})})})]})}),r.jsx("div",{className:"metrics-fixed"+(e?" collapsed":""),children:r.jsx(ao,{collapsed:e,setCollapsed:t})}),r.jsx("div",{className:`terminal-fixed${d.isOpen?"":" collapsed"}${o?" maximized":""}`,children:r.jsx(xo,{serverId:d.serverId,nodeId:d.nodeId,name:d.name,isOpen:d.isOpen,onClose:d.closeTerminal,onToggle:d.toggleTerminal,onMaximizeChange:a})}),l&&r.jsx(Co,{onClose:()=>c(!1)}),u.visible&&r.jsxs("div",{className:"context-menu",style:{position:"fixed",top:u.y,left:u.x,zIndex:1e4},children:["server"===u.type&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"context-menu-item",onClick:()=>p("edit"),children:[r.jsx("i",{className:"fas fa-edit"}),"Edit Server"]}),r.jsxs("div",{className:"context-menu-item danger",onClick:()=>p("delete"),children:[r.jsx("i",{className:"fas fa-trash"}),"Delete Server"]})]}),"project"===u.type&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"context-menu-item",onClick:()=>p("edit"),children:[r.jsx("i",{className:"fas fa-edit"}),"Edit Project"]}),r.jsxs("div",{className:"context-menu-item danger",onClick:()=>p("delete"),children:[r.jsx("i",{className:"fas fa-trash"}),"Delete Project"]})]})]})]})]})})]})})})})}function Lo(){return r.jsx(ie,{children:r.jsx(re,{children:r.jsx(pe,{children:r.jsx(Ie,{children:r.jsx(Eo,{})})})})})}je.createRoot(document.getElementById("root")).render(r.jsx(Lo,{}));
