import{r as e,j as a,z as s,X as n,l as i,C as t,B as o,G as r,f as l,e as d,d as c,H as x,J as m,R as p,K as h,S as u,M as g,v as y,N as j,O as b,n as f}from"./index1-Dc8EUxEM.js";import{T as v,g as w}from"./index2-B0flD7Qr.js";const k=({show:r,onClose:l,onSubmit:d})=>{const{customSettings:c}=e.useContext(v),x=w(c,"background"),[m,p]=e.useState(1),[h,u]=e.useState(""),[g,y]=e.useState({domain_name:"",registrar:"",whois_data:null,verification_token:"",is_verified:!1}),[j,b]=e.useState(!1),[f,k]=e.useState("");e.useEffect(()=>{r&&fetch("/api/alterion/panel/server/available-servers").then(e=>e.json()).then(e=>{if(e.servers&&e.servers.length>0){const a=e.servers[0].id.replace(/^local-/,"");u(a)}}).catch(e=>{})},[r]);const N=()=>{p(1),y({domain_name:"",registrar:"",whois_data:null,verification_token:"",is_verified:!1}),k(""),l()};if(!r)return null;const _=(e=>{const a=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16),i=Math.max(0,Math.floor(.7*a)),t=Math.max(0,Math.floor(.7*s)),o=Math.max(0,Math.floor(.7*n));return`#${i.toString(16).padStart(2,"0")}${t.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`})(c.backgroundColor1),S=[{number:1,label:"Domain Name"},{number:2,label:"WHOIS Data"},{number:3,label:"Verify"},{number:4,label:"Complete"}];return a.jsxs("div",{className:"modal-overlay",onClick:N,children:[a.jsxs("div",{className:"modal-content wizard-modal",onClick:e=>e.stopPropagation(),style:{background:"gradient"===c.backgroundType?`linear-gradient(135deg, ${c.backgroundColor1}ee, ${c.backgroundColor2}ee)`:`${c.backgroundColor1}ee`,color:x,maxWidth:"700px",borderRadius:`${c.borderRadius}px`,backdropFilter:`blur(${c.backdropBlur}px)`},children:[a.jsxs("div",{className:"modal-header",style:{marginBottom:"24px"},children:[a.jsxs("h2",{style:{color:x},children:[a.jsx(s,{size:24})," Add New Domain - Step ",m]}),a.jsx("button",{className:"modal-close",onClick:N,style:{color:x},children:a.jsx(n,{size:24})})]}),a.jsx("div",{className:"step-tracker",children:S.map((e,s)=>a.jsxs(i.Fragment,{children:[a.jsxs("div",{className:"step-item",children:[a.jsx("div",{className:`step-circle ${m>=e.number?"active":""} ${m>e.number?"completed":""}`,style:{background:m>=e.number?_:`${_}80`,color:x,border:`2px solid ${m>=e.number?c.accentColor1:`${_}80`}`},children:m>e.number?a.jsx(t,{size:16}):e.number}),a.jsx("span",{className:"step-label",style:{color:m>=e.number?x:`${x}80`,fontWeight:m===e.number?"bold":"normal"},children:e.label})]}),s<S.length-1&&a.jsx("div",{className:"step-connector",style:{background:m>e.number?c.accentColor1:`${_}80`}})]},e.number))}),f&&a.jsx("div",{className:"error-message",style:{padding:"12px",background:"#ff444460",borderRadius:"8px",marginBottom:"16px",color:x},children:f}),a.jsxs("div",{className:"step-content",children:[1===m&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{color:x},children:"Domain Name *"}),a.jsx("input",{type:"text",placeholder:"example.com",value:g.domain_name,onChange:e=>y({...g,domain_name:e.target.value}),style:{color:x,background:`${_}40`,border:`1px solid ${_}`,padding:"12px",borderRadius:"8px",width:"100%"}}),a.jsx("small",{style:{color:`${x}80`,marginTop:"8px",display:"block"},children:"Enter the domain name you want to track"})]}),2===m&&a.jsx("div",{children:j?a.jsxs("div",{style:{textAlign:"center",padding:"48px 24px"},children:[a.jsx(o,{size:64,style:{color:c.accentColor1,animation:"spin 1s linear infinite",margin:"0 auto 24px"}}),a.jsx("h3",{style:{color:x,marginBottom:"12px"},children:"Fetching WHOIS Data..."}),a.jsx("p",{style:{color:`${x}80`},children:"Please wait while we retrieve domain information"})]}):g.whois_data?a.jsxs("div",{children:[a.jsx("h3",{style:{color:x,marginBottom:"16px"},children:"Review Domain Information"}),a.jsxs("div",{className:"whois-review-card",style:{background:`${_}40`,padding:"20px",borderRadius:"8px",marginBottom:"16px",maxHeight:"500px",overflowY:"auto"},children:[a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Domain:"}),a.jsx("span",{children:g.domain_name})]}),a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Registrar:"}),a.jsx("span",{children:g.registrar||"Unknown"})]}),g.whois_data?.creation_date&&a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Creation Date:"}),a.jsx("span",{children:new Date(g.whois_data.creation_date).toLocaleDateString()})]}),g.whois_data?.expiration_date&&a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Expiration Date:"}),a.jsx("span",{children:new Date(g.whois_data.expiration_date).toLocaleDateString()})]}),g.whois_data?.updated_date&&a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Updated Date:"}),a.jsx("span",{children:new Date(g.whois_data.updated_date).toLocaleDateString()})]}),g.whois_data?.registrant_name&&a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Registrant Name:"}),a.jsx("span",{children:g.whois_data.registrant_name})]}),g.whois_data?.registrant_org&&a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Organization:"}),a.jsx("span",{children:g.whois_data.registrant_org})]}),g.whois_data?.registrant_country&&a.jsxs("div",{className:"data-row",children:[a.jsx("strong",{children:"Country:"}),a.jsx("span",{children:g.whois_data.registrant_country})]}),g.whois_data?.emails&&Array.isArray(g.whois_data.emails)&&g.whois_data.emails.length>0&&a.jsxs("div",{className:"data-row",style:{flexDirection:"column",alignItems:"flex-start"},children:[a.jsx("strong",{children:"Contact Emails:"}),a.jsx("div",{style:{marginTop:"8px",fontSize:"14px"},children:g.whois_data.emails.map((e,s)=>a.jsx("div",{style:{color:`${x}90`,marginBottom:"4px"},children:e},s))})]}),g.whois_data?.status&&Array.isArray(g.whois_data.status)&&g.whois_data.status.length>0&&a.jsxs("div",{className:"data-row",style:{flexDirection:"column",alignItems:"flex-start"},children:[a.jsx("strong",{children:"Domain Status:"}),a.jsx("div",{style:{marginTop:"8px",fontSize:"13px"},children:g.whois_data.status.map((e,s)=>a.jsx("div",{style:{color:`${x}80`,marginBottom:"4px",padding:"4px 8px",background:`${_}60`,borderRadius:"4px",fontFamily:"monospace",fontSize:"12px"},children:e},s))})]}),g.whois_data?.name_servers&&Array.isArray(g.whois_data.name_servers)&&a.jsxs("div",{className:"data-row",style:{flexDirection:"column",alignItems:"flex-start"},children:[a.jsx("strong",{children:"Name Servers:"}),a.jsx("div",{style:{marginTop:"8px",fontSize:"14px"},children:g.whois_data.name_servers.map((e,s)=>a.jsx("div",{style:{color:`${x}90`,marginBottom:"4px"},children:e},s))})]})]}),a.jsx("p",{style:{color:`${x}80`,fontSize:"14px"},children:'Please review the domain information above. Click "Next" to proceed with verification.'})]}):a.jsx("div",{style:{textAlign:"center",padding:"24px"},children:a.jsx("p",{style:{color:`${x}80`},children:"No WHOIS data available"})})}),3===m&&a.jsxs("div",{children:[a.jsx("h3",{style:{color:x,marginBottom:"16px"},children:"Verify Domain Ownership"}),a.jsx("p",{style:{color:`${x}80`,marginBottom:"24px"},children:"Add the TXT record below to verify ownership. Verification can be done manually now or automatically by our system (checked every hour)."}),a.jsxs("div",{className:"verification-method",style:{background:`${_}40`,padding:"20px",borderRadius:"8px",marginBottom:"16px",border:`2px solid ${_}`},children:[a.jsxs("h4",{style:{color:x,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{background:c.accentColor1,color:w(c,"accent"),width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"âœ“"}),"TXT Record Verification"]}),a.jsx("p",{style:{color:`${x}80`,marginBottom:"12px",fontSize:"14px"},children:"Add this TXT record to your domain's DNS settings:"}),a.jsxs("div",{style:{background:`${_}80`,padding:"12px",borderRadius:"6px",fontFamily:"monospace",fontSize:"13px",marginBottom:"8px",overflowX:"auto"},children:[a.jsxs("div",{style:{color:`${x}60`,marginBottom:"4px"},children:["Type: ",a.jsx("strong",{children:"TXT"})]}),a.jsxs("div",{style:{color:`${x}60`,marginBottom:"4px"},children:["Name: ",a.jsx("strong",{children:"@"})," (or your domain)"]}),a.jsxs("div",{style:{color:x,wordBreak:"break-all"},children:["Value: ",a.jsx("strong",{style:{color:c.accentColor1},children:g.verification_token||"Loading..."})]})]}),a.jsx("p",{style:{color:`${x}60`,fontSize:"12px",marginTop:"8px",fontStyle:"italic"},children:"ðŸ’¡ Tip: DNS changes can take up to 48 hours to propagate, but usually happen within a few minutes."})]}),a.jsx("div",{style:{background:`${c.accentColor1}20`,padding:"12px",borderRadius:"8px",marginBottom:"16px",border:`1px solid ${c.accentColor1}40`},children:a.jsxs("p",{style:{color:x,fontSize:"14px",margin:0},children:[a.jsx("strong",{children:"â„¹ï¸ Automatic Verification:"})," Once you add the TXT record above, our system will automatically check every hour and update your domain's verification status. You can also verify manually now using the button below."]})}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[a.jsx("button",{onClick:async()=>{if(g.domain_name){b(!0),k("");try{const e=await fetch("/api/alterion/panel/verify-domain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:g.domain_name})});(await e.json()).verified?(y(e=>({...e,is_verified:!0})),p(4)):k("Verification failed. Please ensure the DNS record or Namespace is set correctly.")}catch(e){k("Failed to verify domain")}finally{b(!1)}}},disabled:j,style:{background:`${_}80`,color:x,padding:"14px 24px",borderRadius:"8px",border:`1px solid ${_}`,cursor:j?"not-allowed":"pointer",fontWeight:"bold",opacity:j?.5:1,flex:1,fontSize:"14px"},children:j?"Checking...":"Verify Now"}),a.jsx("button",{onClick:()=>{p(4)},disabled:j,style:{background:c.accentColor1,color:w(c,"accent"),padding:"14px 32px",borderRadius:"8px",border:"none",cursor:j?"not-allowed":"pointer",fontWeight:"bold",opacity:j?.5:1,flex:2,fontSize:"16px"},children:"Continue"})]})]}),4===m&&a.jsxs("div",{style:{textAlign:"center",padding:"24px"},children:[a.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:g.is_verified?c.accentColor1:`${c.accentColor1}80`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:a.jsx(t,{size:48,style:{color:w(c,"accent")}})}),a.jsx("h3",{style:{color:x,marginBottom:"12px"},children:g.is_verified?"Domain Verified Successfully!":"Ready to Add Domain"}),a.jsx("p",{style:{color:`${x}80`,marginBottom:"24px"},children:g.is_verified?"Your domain has been verified and is ready to be added to the system.":"Your domain will be added to the system. Verification will happen automatically in the background (checked every hour)."}),a.jsx("button",{onClick:async()=>{b(!0);try{await d(g),N()}catch(e){k("Failed to add domain")}finally{b(!1)}},disabled:j,style:{background:c.accentColor1,color:w(c,"accent"),padding:"14px 32px",borderRadius:"8px",border:"none",cursor:j?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",opacity:j?.5:1},children:j?"Adding Domain...":"Add Domain to System"})]})]}),m<4&&3!==m&&a.jsxs("div",{className:"modal-actions",style:{display:"flex",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:`1px solid ${_}`,visibility:2===m&&j?"hidden":"visible"},children:[a.jsx("button",{onClick:()=>{m>1&&4!==m&&(p(m-1),k(""))},disabled:1===m||j,style:{background:`${_}80`,color:x,padding:"12px 24px",borderRadius:"8px",border:"none",cursor:1===m?"not-allowed":"pointer",opacity:1===m?.5:1},children:"Back"}),a.jsx("button",{onClick:async()=>{if(1===m){if(!g.domain_name)return void k("Please enter a domain name");p(2),(async()=>{if(g.domain_name){b(!0),k("");try{const e=await fetch("/api/alterion/panel/whois",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:g.domain_name})}),a=await e.json();if(a.error)k(a.error);else{const e=e=>{if(!e)return null;if(e.includes("[")&&e.includes("datetime.datetime")){const a=e.match(/datetime\.datetime\((\d{4}),\s*(\d+),\s*(\d+)/);if(a){const[e,s,n,i]=a;return new Date(s,n-1,i).toISOString()}}return e};y(s=>({...s,registrar:a.whois?.registrar||s.registrar,verification_token:a.verification_token||s.verification_token,whois_data:{...a.whois,creation_date:e(a.whois?.creation_date),expiration_date:e(a.whois?.expiration_date),updated_date:e(a.whois?.updated_date)}}))}}catch(e){k("Failed to fetch WHOIS data")}finally{b(!1)}}})()}else 2===m&&g.whois_data&&(p(3),k(""))},disabled:j||1===m&&!g.domain_name||2===m&&!g.whois_data,style:{background:c.accentColor1,color:w(c,"accent"),padding:"12px 24px",borderRadius:"8px",border:"none",cursor:j||1===m&&!g.domain_name||2===m&&!g.whois_data?"not-allowed":"pointer",flex:1,opacity:j||1===m&&!g.domain_name||2===m&&!g.whois_data?.5:1},children:j?"Loading...":"Next"})]})]}),a.jsx("style",{jsx:!0,children:`\n        .wizard-modal {\n          padding: 32px;\n        }\n\n        .step-tracker {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-bottom: 32px;\n          position: relative;\n          padding: 0 20px;\n        }\n\n        .step-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: flex-start;\n          gap: 8px;\n          flex: 0 0 auto;\n          position: relative;\n          z-index: 2;\n        }\n\n        .step-circle {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: bold;\n          transition: all 0.3s ease;\n          box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);\n        }\n\n        .step-circle:hover {\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);\n        }\n\n        .step-circle.active {\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);\n        }\n\n        .step-circle.active:hover {\n          box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.5);\n        }\n\n        .step-circle.completed {\n          transform: scale(1.05);\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);\n        }\n\n        .step-circle.completed:hover {\n          box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.6);\n        }\n\n        .step-label {\n          font-size: 12px;\n          text-align: center;\n          max-width: 90px;\n          transition: all 0.3s ease;\n          white-space: nowrap;\n        }\n\n        .step-connector {\n          height: 2px;\n          width: 40px;\n          position: relative;\n          margin: 0 8px;\n          margin-bottom: 28px;\n          z-index: 1;\n          transition: all 0.3s ease;\n        }\n\n        .step-content {\n          min-height: 300px;\n        }\n\n        .data-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 12px 0;\n          border-bottom: 1px solid ${_}40;\n        }\n\n        .data-row:last-child {\n          border-bottom: none;\n        }\n\n        .spinner {\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      `})]})},N=()=>{const{customSettings:n}=e.useContext(v),i=w(n,"background"),t=n?.backgroundColor1||"#1a1a1a",o=(e,a)=>{if(!e)return`rgba(255, 255, 255, ${a})`;return`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${a})`},[N,_]=e.useState([]),[S,C]=e.useState([]),[$,z]=e.useState(!0),[D,T]=e.useState(""),[R,B]=e.useState("all"),[A,W]=e.useState(!1),I=e.useRef(null),[O,P]=e.useState(!1),[F,L]=e.useState(!1),[V,E]=e.useState(!1),[X,H]=e.useState(!1),[J,M]=e.useState(null),[U,Y]=e.useState(""),[G,K]=e.useState(null),[q,Q]=e.useState(""),[Z,ee]=e.useState(null),[ae,se]=e.useState(null);e.useEffect(()=>{ne(),ie(),te(),S.length>0&&se(S[0].id)},[S.length]),e.useEffect(()=>{const e=e=>{I.current&&!I.current.contains(e.target)&&W(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const ne=async()=>{try{const e=await fetch("/api/domains/"),a=await e.json();_(a)}catch(e){}finally{z(!1)}},ie=async()=>{try{const e=await fetch("/api/alterion/panel/available-servers/"),a=await e.json();C(a)}catch(e){}},te=async()=>{try{const e=await fetch("/api/domains/summary/"),a=await e.json();ee(a)}catch(e){}},oe=async e=>{K(e),Q(""),E(!0)},re=e=>{switch(e){case"active":return a.jsx(l,{size:18,className:"status-icon status-active"});case"warning":return a.jsx(d,{size:18,className:"status-icon status-warning"});case"critical":return a.jsx(d,{size:18,className:"status-icon status-critical"});case"expired":return a.jsx(d,{size:18,className:"status-icon status-expired"});case"pending_verification":return a.jsx(p,{size:18,className:"status-icon status-pending"});default:return a.jsx(f,{size:18,className:"status-icon status-unknown"})}},le=e=>"pending_verification"===e?"Pending Verification":e.charAt(0).toUpperCase()+e.slice(1),de=N.filter(e=>{const a=e.domain_name.toLowerCase().includes(D.toLowerCase())||e.registrar&&e.registrar.toLowerCase().includes(D.toLowerCase()),s="all"===R||e.status===R;return a&&s}),ce=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown";return a.jsxs("div",{className:"domains-container",style:{color:i},children:[Z&&a.jsxs("div",{className:"summary-cards",children:[a.jsxs("div",{className:"summary-card",style:{color:i},children:[a.jsx("div",{className:"summary-icon",children:a.jsx(r,{size:24})}),a.jsxs("div",{className:"summary-content",children:[a.jsx("h3",{children:Z.total_domains}),a.jsx("p",{children:"Total Domains"})]})]}),a.jsxs("div",{className:"summary-card active",style:{color:i},children:[a.jsx("div",{className:"summary-icon",children:a.jsx(l,{size:24})}),a.jsxs("div",{className:"summary-content",children:[a.jsx("h3",{children:Z.status_breakdown.active}),a.jsx("p",{children:"Active"})]})]}),a.jsxs("div",{className:"summary-card warning",style:{color:i},children:[a.jsx("div",{className:"summary-icon",children:a.jsx(d,{size:24})}),a.jsxs("div",{className:"summary-content",children:[a.jsx("h3",{children:Z.status_breakdown.warning}),a.jsx("p",{children:"Warnings"})]})]}),a.jsxs("div",{className:"summary-card critical",style:{color:i},children:[a.jsx("div",{className:"summary-icon",children:a.jsx(d,{size:24})}),a.jsxs("div",{className:"summary-content",children:[a.jsx("h3",{children:Z.status_breakdown.critical}),a.jsx("p",{children:"Critical"})]})]})]}),a.jsxs("div",{className:"actions-bar",children:[a.jsxs("div",{className:"search-filter",children:[a.jsxs("div",{className:"search-box",style:{color:i},children:[a.jsx(c,{size:18}),a.jsx("input",{type:"text",placeholder:"Search domains...",value:D,onChange:e=>T(e.target.value),style:{color:i}})]}),a.jsxs("div",{className:"status-filter-container",ref:I,children:[a.jsxs("button",{className:"status-filter-button",onClick:()=>W(!A),style:{color:i},children:[a.jsx(x,{size:18}),a.jsx("span",{children:"all"===R?"All Status":le(R)}),a.jsx(m,{size:18,className:"chevron-icon "+(A?"open":"")})]}),A&&a.jsx("div",{className:"status-dropdown",children:[{value:"all",label:"All Status"},{value:"pending_verification",label:"Pending Verification"},{value:"active",label:"Active"},{value:"warning",label:"Warning"},{value:"critical",label:"Critical"},{value:"expired",label:"Expired"}].map(e=>a.jsx("div",{className:"status-option "+(R===e.value?"active":""),onClick:()=>{B(e.value),W(!1)},style:{color:i,background:R===e.value?o(n.accentColor1||i,.1):"transparent"},children:e.label},e.value))})]})]}),a.jsxs("div",{className:"action-buttons",children:[a.jsxs("button",{className:"btn btn-secondary",onClick:async()=>{z(!0);try{(await fetch("/api/domains/check_all/",{method:"POST"})).ok&&(ne(),te())}catch(e){}finally{z(!1)}},disabled:$,children:[a.jsx(p,{size:18})," Check All"]}),a.jsxs("button",{className:"btn btn-primary",onClick:()=>P(!0),children:[a.jsx(s,{size:18})," Add Domain"]})]})]}),a.jsx("div",{className:"domains-table-container",style:{color:i,background:`linear-gradient(135deg, ${t}10, ${t}05)`,borderColor:o(i,.5)},children:$?a.jsxs("div",{className:"loading-state",style:{color:i},children:[a.jsx(p,{size:32,className:"spin"}),a.jsx("p",{children:"Loading domains..."})]}):0===de.length?a.jsxs("div",{className:"empty-state",style:{color:i},children:[a.jsx(r,{size:48}),a.jsx("h3",{children:"No domains found"}),a.jsx("p",{children:"Add your first domain to start tracking expiry dates"})]}):a.jsxs("table",{className:"domains-table",children:[a.jsx("thead",{style:{background:`${t}20`},children:a.jsxs("tr",{children:[a.jsx("th",{style:{color:i},children:"Status"}),a.jsx("th",{style:{color:i},children:"Domain"}),a.jsx("th",{style:{color:i},children:"Linked Server"}),a.jsx("th",{style:{color:i},children:"Registrar"}),a.jsx("th",{style:{color:i},children:"Expiry Date"}),a.jsx("th",{style:{color:i},children:"Days Remaining"}),a.jsx("th",{style:{color:i},children:"Last Checked"}),a.jsx("th",{style:{color:i},children:"Actions"})]})}),a.jsx("tbody",{children:de.map(e=>{return a.jsxs("tr",{style:{borderTopColor:o(i,.5)},children:[a.jsx("td",{style:{color:i},children:a.jsxs("div",{className:(n=e.status,`status-badge status-${n}`),children:[re(e.status),a.jsx("span",{children:le(e.status)})]})}),a.jsx("td",{style:{color:i},children:a.jsxs("div",{className:"domain-cell",children:[a.jsx(r,{size:16}),a.jsx("strong",{children:e.domain_name}),a.jsx("a",{href:`https://${e.domain_name}`,target:"_blank",rel:"noopener noreferrer",children:a.jsx(h,{size:14})})]})}),a.jsx("td",{style:{color:i},children:e.linked_server?a.jsxs("div",{className:"server-cell",children:[a.jsx(u,{size:16}),a.jsx("span",{children:e.linked_server_name}),a.jsxs("span",{className:"server-id",children:["(",e.linked_server_identifier,")"]})]}):a.jsx("span",{className:"no-server",children:"Not linked"})}),a.jsx("td",{style:{color:i},children:e.registrar||"Unknown"}),a.jsx("td",{style:{color:i},children:ce(e.expiry_date)}),a.jsx("td",{style:{color:i},children:null!==e.days_until_expiry?a.jsxs("span",{className:"days-remaining",style:{color:(s=e.days_until_expiry,null===s?"gray":s<=7?"red":s<=30?"orange":"green")},children:[e.days_until_expiry," days"]}):a.jsx("span",{className:"days-remaining unknown",children:"Unknown"})}),a.jsx("td",{style:{color:i},children:ce(e.last_checked)}),a.jsx("td",{style:{color:i},children:a.jsx("div",{className:"action-buttons-cell",children:"pending_verification"!==e.status&&e.is_verified?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn-icon",title:"Edit DNS Records",onClick:()=>(e=>{alert(`Edit DNS for ${e.domain_name}\n\nCurrent DNS records:\n${JSON.stringify(e.dns_records||{},null,2)}`)})(e),children:a.jsx(j,{size:16})}),a.jsx("button",{className:"btn-icon btn-danger",title:"Delete Domain",onClick:()=>oe(e),children:a.jsx(y,{size:16})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn-icon btn-success",title:"Verify Domain",onClick:()=>(async e=>{K(e),M(null),Y(""),H(!0)})(e),children:a.jsx(g,{size:16})}),a.jsx("button",{className:"btn-icon btn-danger",title:"Delete Domain",onClick:()=>oe(e),children:a.jsx(y,{size:16})})]})})})]},e.id);var s,n})})]})}),a.jsx(k,{show:O,onClose:()=>P(!1),onSubmit:async e=>{try{(await fetch("/api/domains/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(ne(),te())}catch(a){throw a}}}),F&&G&&a.jsx("div",{className:"modal-overlay",onClick:()=>L(!1),children:a.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{color:i},children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{style:{color:i},children:[a.jsx(b,{size:24})," Link ",G.domain_name," to Server"]}),a.jsx("button",{className:"modal-close",onClick:()=>L(!1),style:{color:i},children:"Ã—"})]}),a.jsx("div",{className:"server-list",children:0===S.length?a.jsx("p",{className:"no-servers",style:{color:i},children:"No servers available. Please add a server first."}):S.map(e=>a.jsxs("div",{className:"server-item",onClick:()=>(async e=>{if(G)try{const a=await fetch(`/api/domains/${G.id}/link_server/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:e})});a.ok&&(await a.json(),L(!1),K(null),ne(),ie())}catch(a){}})(e.id),style:{color:i},children:[a.jsx(u,{size:20}),a.jsxs("div",{className:"server-info",children:[a.jsx("strong",{children:e.name}),a.jsx("span",{children:e.ip_address}),a.jsx("span",{className:"server-type",children:e.server_type})]}),"webserver"===e.server_type&&a.jsx("span",{className:"badge",children:"Already Web Server"})]},e.id))}),a.jsx("div",{className:"modal-footer",children:a.jsx("small",{style:{color:i},children:"Note: Linking a domain will automatically convert the server to a Web Server type"})})]})}),X&&G&&a.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:a.jsxs("div",{className:"wizard-modal",onClick:e=>e.stopPropagation(),style:{background:`linear-gradient(135deg, ${n.backgroundColor1} 0%, ${n.backgroundColor2} 100%)`,border:`1px solid ${n.accentColor1}40`,maxWidth:"500px"},children:[a.jsxs("div",{className:"modal-header",style:{borderBottom:`1px solid ${n.accentColor1}40`},children:[a.jsxs("h2",{style:{color:i,display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx(g,{size:24})," Verify Domain"]}),a.jsx("button",{className:"modal-close",onClick:()=>H(!1),style:{color:i},children:"Ã—"})]}),a.jsxs("div",{className:"modal-body",style:{padding:"32px"},children:[a.jsxs("div",{style:{background:`${n.accentColor1}15`,padding:"20px",borderRadius:"12px",border:`1px solid ${n.accentColor1}30`,marginBottom:"24px"},children:[a.jsxs("p",{style:{color:i,margin:0,fontSize:"15px"},children:[a.jsx("strong",{children:"Domain:"})," ",G.domain_name]}),G.verification_token&&a.jsxs("p",{style:{color:`${i}80`,margin:"12px 0 0 0",fontSize:"13px",fontFamily:"monospace"},children:[a.jsx("strong",{children:"TXT Record:"})," ",G.verification_token]})]}),"success"===J&&a.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.15)",padding:"20px",borderRadius:"12px",border:"1px solid rgba(34, 197, 94, 0.3)",marginBottom:"24px",textAlign:"center"},children:[a.jsx(l,{size:48,style:{color:"#22c55e",marginBottom:"12px"}}),a.jsx("p",{style:{color:"#22c55e",fontSize:"16px",fontWeight:"bold",margin:0},children:U})]}),"failed"===J&&a.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",padding:"20px",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",marginBottom:"24px",textAlign:"center"},children:[a.jsx(d,{size:48,style:{color:"#ef4444",marginBottom:"12px"}}),a.jsx("p",{style:{color:"#ef4444",fontSize:"16px",fontWeight:"bold",margin:"0 0 8px 0"},children:"Verification Failed"}),a.jsx("p",{style:{color:i,fontSize:"14px",margin:0},children:U})]}),!J&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{color:i,marginBottom:"24px",lineHeight:"1.6"},children:"We'll check if the TXT record has been added to your domain's DNS. This process may take a few moments."}),a.jsx("div",{style:{background:`${n.backgroundColor1}80`,padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:a.jsxs("p",{style:{color:`${i}90`,fontSize:"14px",margin:0},children:["â±ï¸ ",a.jsx("strong",{children:"Note:"})," DNS propagation can take up to 48 hours. If verification fails, please wait and try again later."]})})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:()=>{H(!1),M(null),Y("")},disabled:$,style:{flex:1,padding:"14px 24px",borderRadius:"8px",border:`1px solid ${n.accentColor1}40`,background:"transparent",color:i,cursor:$?"not-allowed":"pointer",fontSize:"15px",fontWeight:"500",opacity:$?.5:1},children:"success"===J?"Close":"Cancel"}),"success"!==J&&a.jsx("button",{onClick:async()=>{if(G){z(!0),M(null);try{const e=await fetch("/api/alterion/panel/verify-domain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:G.domain_name})}),a=await e.json();a.verified?(M("success"),Y(`Domain verified successfully via ${a.verification_method}!`),ne(),te(),setTimeout(()=>{H(!1),K(null),M(null)},2e3)):(M("failed"),Y("Domain verification failed. Please ensure you have added the TXT record and DNS has propagated."))}catch(e){M("failed"),Y("Failed to verify domain. Please try again.")}finally{z(!1)}}},disabled:$,style:{flex:1,padding:"14px 24px",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.3)",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",cursor:$?"not-allowed":"pointer",fontSize:"15px",fontWeight:"bold",opacity:$?.5:1},children:$?"Verifying...":"failed"===J?"Retry Verification":"Verify Now"})]})]})]})}),V&&G&&a.jsx("div",{className:"modal-overlay",onClick:()=>E(!1),children:a.jsxs("div",{className:"wizard-modal",onClick:e=>e.stopPropagation(),style:{background:`linear-gradient(135deg, ${n.backgroundColor1} 0%, ${n.backgroundColor2} 100%)`,border:"1px solid #ef444440",maxWidth:"500px"},children:[a.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid #ef444440"},children:[a.jsxs("h2",{style:{color:i,display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx(y,{size:24,style:{color:"#ef4444"}})," Delete Domain"]}),a.jsx("button",{className:"modal-close",onClick:()=>E(!1),style:{color:i},children:"Ã—"})]}),a.jsxs("div",{className:"modal-body",style:{padding:"32px"},children:[a.jsx("div",{style:{background:"#ef444415",padding:"20px",borderRadius:"12px",border:"1px solid #ef444430",marginBottom:"24px"},children:a.jsx("p",{style:{color:"#ef4444",margin:0,fontSize:"15px",fontWeight:"bold"},children:"âš ï¸ Warning: This action cannot be undone"})}),a.jsx("p",{style:{color:i,marginBottom:"8px",lineHeight:"1.6"},children:"You are about to permanently delete:"}),a.jsx("p",{style:{color:i,marginBottom:"24px",fontSize:"18px",fontWeight:"bold",fontFamily:"monospace",background:`${n.backgroundColor1}80`,padding:"12px",borderRadius:"8px"},children:G.domain_name}),a.jsx("p",{style:{color:i,marginBottom:"16px",fontSize:"14px"},children:"To confirm, please type the domain name exactly as shown above:"}),a.jsx("input",{type:"text",value:q,onChange:e=>Q(e.target.value),placeholder:"Enter domain name",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:`1px solid ${n.accentColor1}40`,background:`${n.backgroundColor1}80`,color:i,fontSize:"14px",fontFamily:"monospace",marginBottom:"24px",outline:"none"}}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:()=>{E(!1),Q("")},disabled:$,style:{flex:1,padding:"14px 24px",borderRadius:"8px",border:`1px solid ${n.accentColor1}40`,background:"transparent",color:i,cursor:$?"not-allowed":"pointer",fontSize:"15px",fontWeight:"500",opacity:$?.5:1},children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(G)if(q===G.domain_name){z(!0);try{(await fetch(`/api/domains/${G.id}/`,{method:"DELETE"})).ok&&(E(!1),K(null),Q(""),ne(),te())}catch(e){alert("Failed to delete domain. Please try again.")}finally{z(!1)}}else alert("Domain name does not match. Please type the exact domain name to confirm deletion.")},disabled:$||q!==G.domain_name,style:{flex:1,padding:"14px 24px",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.3)",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:$||q!==G.domain_name?"not-allowed":"pointer",fontSize:"15px",fontWeight:"bold",opacity:$||q!==G.domain_name?.5:1},children:$?"Deleting...":"Delete Domain"})]})]})]})})]})};export{N as D};
